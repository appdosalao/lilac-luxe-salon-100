const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AgendamentoOnlineForm-iAKl7_9-.js","assets/react-vendor-lX9dz28M.js"])))=>i.map(i=>d[i]);
import{r as Md,a as x,j as a,R as IC,g as PI,c as jr,b as E,d as RC,e as yt}from"./react-vendor-lX9dz28M.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var LC,xj=Md;LC=xj.createRoot,xj.hydrateRoot;var Zh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xh=typeof window>"u"||"Deno"in globalThis;function Un(){}function AI(e,t){return typeof e=="function"?e(t):e}function kI(e){return typeof e=="number"&&e>=0&&e!==1/0}function EI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yj(e,t){return typeof e=="function"?e(t):e}function OI(e,t){return typeof e=="function"?e(t):e}function bj(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:c}=e;if(i){if(n){if(t.queryHash!==Py(i,t.options))return!1}else if(!Rl(t.queryKey,i))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||s&&s!==t.state.fetchStatus||o&&!o(t))}function jj(e,t){const{exact:r,status:n,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Il(t.options.mutationKey)!==Il(o))return!1}else if(!Rl(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Py(e,t){return(t?.queryKeyHashFn||Il)(e)}function Il(e){return JSON.stringify(e,(t,r)=>ev(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Rl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Rl(e[r],t[r])):!1}function FC(e,t){if(e===t)return e;const r=wj(e)&&wj(t);if(r||ev(e)&&ev(t)){const n=r?e:Object.keys(e),s=n.length,o=r?t:Object.keys(t),i=o.length,c=r?[]:{};let l=0;for(let d=0;d<i;d++){const u=r?d:o[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(c[u]=void 0,l++):(c[u]=FC(e[u],t[u]),c[u]===e[u]&&e[u]!==void 0&&l++)}return s===i&&l===s?e:c}return t}function wj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ev(e){if(!Nj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Nj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Nj(e){return Object.prototype.toString.call(e)==="[object Object]"}function TI(e){return new Promise(t=>{setTimeout(t,e)})}function $I(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?FC(e,t):t}function MI(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function DI(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ay=Symbol();function zC(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Ay?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var II=class extends Zh{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Xh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},BC=new II,RI=class extends Zh{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Xh&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},xf=new RI;function LI(){let e,t;const r=new Promise((s,o)=>{e=s,t=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function FI(e){return Math.min(1e3*2**e,3e4)}function VC(e){return(e??"online")==="online"?xf.isOnline():!0}var UC=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Kp(e){return e instanceof UC}function qC(e){let t=!1,r=0,n=!1,s;const o=LI(),i=m=>{n||(h(new UC(m)),e.abort?.())},c=()=>{t=!0},l=()=>{t=!1},d=()=>BC.isFocused()&&(e.networkMode==="always"||xf.isOnline())&&e.canRun(),u=()=>VC(e.networkMode)&&e.canRun(),f=m=>{n||(n=!0,e.onSuccess?.(m),s?.(),o.resolve(m))},h=m=>{n||(n=!0,e.onError?.(m),s?.(),o.reject(m))},p=()=>new Promise(m=>{s=g=>{(n||d())&&m(g)},e.onPause?.()}).then(()=>{s=void 0,n||e.onContinue?.()}),v=()=>{if(n)return;let m;const g=r===0?e.initialPromise:void 0;try{m=g??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(f).catch(y=>{if(n)return;const b=e.retry??(Xh?0:3),w=e.retryDelay??FI,j=typeof w=="function"?w(r,y):w,N=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(t||!N){h(y);return}r++,e.onFail?.(r,y),TI(j).then(()=>d()?void 0:p()).then(()=>{t?h(y):v()})})};return{promise:o,cancel:i,continue:()=>(s?.(),o),cancelRetry:c,continueRetry:l,canStart:u,start:()=>(u()?v():p().then(v),o)}}function zI(){let e=[],t=0,r=c=>{c()},n=c=>{c()},s=c=>setTimeout(c,0);const o=c=>{t?e.push(c):s(()=>{r(c)})},i=()=>{const c=e;e=[],c.length&&s(()=>{n(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||i()}return l},batchCalls:c=>(...l)=>{o(()=>{c(...l)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{s=c}}}var $r=zI(),WC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kI(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Xh?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},BI=class extends WC{#e;#t;#r;#n;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=UI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=$I(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Un).catch(Un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>OI(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ay||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!EI(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},s=()=>{const c=zC(this.options,t),l={queryKey:this.queryKey,meta:this.meta};return n(l),this.#s=!1,this.options.persister?this.options.persister(c,l,this):c(l)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};n(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta});const i=c=>{Kp(c)&&c.silent||this.#a({type:"error",error:c}),Kp(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=qC({initialPromise:t?.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){i(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(l){i(l);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:i,onFail:(c,l)=>{this.#a({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...VI(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Kp(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),$r.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function VI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function UI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qI=class extends Zh{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,s=t.queryHash??Py(n,t);let o=this.get(s);return o||(o=new BI({cache:this,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$r.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>bj(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>bj(e,r)):t}notify(e){$r.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){$r.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$r.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},WI=class extends WC{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||HI(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=qC({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(n,s)=>{this.#n({type:"failed",failureCount:n,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",r=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:r})}const n=await this.#r.start();return await this.#t.config.onSuccess?.(n,e,this.state.context,this),await this.options.onSuccess?.(n,e,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,e,this.state.context),this.#n({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,e,this.state.context,this),await this.options.onError?.(n,e,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,e,this.state.context),n}finally{this.#n({type:"error",error:n})}}finally{this.#t.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),$r.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function HI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var GI=class extends Zh{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,r){const n=new WI({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){const t=bu(e),r=this.#e.get(t)??[];r.push(e),this.#e.set(t,r),this.notify({type:"added",mutation:e})}remove(e){const t=bu(e);if(this.#e.has(t)){const r=this.#e.get(t)?.filter(n=>n!==e);r&&(r.length===0?this.#e.delete(t):this.#e.set(t,r))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(bu(e))?.find(r=>r.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(bu(e))?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){$r.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jj(t,r))}findAll(e={}){return this.getAll().filter(t=>jj(e,t))}notify(e){$r.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return $r.batch(()=>Promise.all(e.map(t=>t.continue().catch(Un))))}};function bu(e){return e.options.scope?.id??String(e.mutationId)}function _j(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},l=0;const d=async()=>{let u=!1;const f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},h=zC(t.options,t.fetchOptions),p=async(v,m,g)=>{if(u)return Promise.reject();if(m==null&&v.pages.length)return Promise.resolve(v);const y={queryKey:t.queryKey,pageParam:m,direction:g?"backward":"forward",meta:t.options.meta};f(y);const b=await h(y),{maxPages:w}=t.options,j=g?DI:MI;return{pages:j(v.pages,b,w),pageParams:j(v.pageParams,m,w)}};if(s&&o.length){const v=s==="backward",m=v?KI:Sj,g={pages:o,pageParams:i},y=m(n,g);c=await p(g,y,v)}else{const v=e??o.length;do{const m=l===0?i[0]??n.initialPageParam:Sj(n,c);if(l>0&&m==null)break;c=await p(c,m),l++}while(l<v)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function Sj(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function KI(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var YI=class{#e;#t;#r;#n;#o;#s;#a;#i;constructor(e={}){this.#e=e.queryCache||new qI,this.#t=e.mutationCache||new GI,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#a=BC.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=xf.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=this.#e.build(this,r);return e.revalidateIfStale&&n.isStaleByTime(yj(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(n.queryHash)?.state.data,i=AI(t,o);if(i!==void 0)return this.#e.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return $r.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;$r.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e,n={type:"active",...e};return $r.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=$r.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Un).catch(Un)}invalidateQueries(e={},t={}){return $r.batch(()=>{if(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:t?.cancelRefetch??!0},n=$r.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(Un)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Un)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(yj(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Un).catch(Un)}fetchInfiniteQuery(e){return e.behavior=_j(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Un).catch(Un)}ensureInfiniteQueryData(e){return e.behavior=_j(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Il(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let r={};return t.forEach(n=>{Rl(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){this.#o.set(Il(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()];let r={};return t.forEach(n=>{Rl(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Py(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Ay&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ZI=x.createContext(void 0),XI=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(ZI.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ll.apply(this,arguments)}var _s;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_s||(_s={}));const Cj="popstate";function JI(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:i,hash:c}=n.location;return tv("",{pathname:o,search:i,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:yf(s)}return eR(t,r,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function HC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QI(){return Math.random().toString(36).substr(2,8)}function Pj(e,t){return{usr:e.state,key:e.key,idx:t}}function tv(e,t,r,n){return r===void 0&&(r=null),Ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dc(t):t,{state:r,key:t&&t.key||n||QI()})}function yf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function eR(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,c=_s.Pop,l=null,d=u();d==null&&(d=0,i.replaceState(Ll({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function f(){c=_s.Pop;let g=u(),y=g==null?null:g-d;d=g,l&&l({action:c,location:m.location,delta:y})}function h(g,y){c=_s.Push;let b=tv(m.location,g,y);d=u()+1;let w=Pj(b,d),j=m.createHref(b);try{i.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(j)}o&&l&&l({action:c,location:m.location,delta:1})}function p(g,y){c=_s.Replace;let b=tv(m.location,g,y);d=u();let w=Pj(b,d),j=m.createHref(b);i.replaceState(w,"",j),o&&l&&l({action:c,location:m.location,delta:0})}function v(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof g=="string"?g:yf(g);return b=b.replace(/ $/,"%20"),Gt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return c},get location(){return e(s,i)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Cj,f),l=g,()=>{s.removeEventListener(Cj,f),l=null}},createHref(g){return t(s,g)},createURL:v,encodeLocation(g){let y=v(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(g){return i.go(g)}};return m}var Aj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Aj||(Aj={}));function tR(e,t,r){return r===void 0&&(r="/"),rR(e,t,r)}function rR(e,t,r,n){let s=typeof t=="string"?dc(t):t,o=ky(s.pathname||"/",r);if(o==null)return null;let i=GC(e);nR(i);let c=null;for(let l=0;c==null&&l<i.length;++l){let d=pR(o);c=fR(i[l],d)}return c}function GC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,i,c)=>{let l={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Gt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let d=As([n,l.relativePath]),u=r.concat(l);o.children&&o.children.length>0&&(Gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),GC(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:dR(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,i);else for(let l of KC(o.path))s(o,i,l)}),t}function KC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=KC(n.join("/")),c=[];return c.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&c.push(...i),c.map(l=>e.startsWith("/")&&l===""?"/":l)}function nR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uR(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const aR=/^:[\w-]+$/,sR=3,oR=2,iR=1,cR=10,lR=-2,kj=e=>e==="*";function dR(e,t){let r=e.split("/"),n=r.length;return r.some(kj)&&(n+=lR),t&&(n+=oR),r.filter(s=>!kj(s)).reduce((s,o)=>s+(aR.test(o)?sR:o===""?iR:cR),n)}function uR(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function fR(e,t,r){let{routesMeta:n}=e,s={},o="/",i=[];for(let c=0;c<n.length;++c){let l=n[c],d=c===n.length-1,u=o==="/"?t:t.slice(o.length)||"/",f=hR({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),h=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:As([o,f.pathname]),pathnameBase:yR(As([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=As([o,f.pathnameBase]))}return i}function hR(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mR(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let m=c[f]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const v=c[f];return p&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function mR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),HC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,l)=>(n.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function pR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return HC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ky(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function gR(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?dc(e):e;return{pathname:r?r.startsWith("/")?r:vR(r,t):t,search:bR(n),hash:jR(s)}}function vR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Yp(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ey(e,t){let r=xR(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Oy(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=dc(e):(s=Ll({},e),Gt(!s.pathname||!s.pathname.includes("?"),Yp("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),Yp("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),Yp("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,c;if(i==null)c=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}c=f>=0?t[f]:"/"}let l=gR(s,c),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}const As=e=>e.join("/").replace(/\/\/+/g,"/"),yR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const YC=["post","put","patch","delete"];new Set(YC);const NR=["get",...YC];new Set(NR);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(this,arguments)}const Ty=x.createContext(null),_R=x.createContext(null),Rs=x.createContext(null),Jh=x.createContext(null),Ls=x.createContext({outlet:null,matches:[],isDataRoute:!1}),ZC=x.createContext(null);function SR(e,t){let{relative:r}=t===void 0?{}:t;uc()||Gt(!1);let{basename:n,navigator:s}=x.useContext(Rs),{hash:o,pathname:i,search:c}=JC(e,{relative:r}),l=i;return n!=="/"&&(l=i==="/"?n:As([n,i])),s.createHref({pathname:l,search:c,hash:o})}function uc(){return x.useContext(Jh)!=null}function Fs(){return uc()||Gt(!1),x.useContext(Jh).location}function XC(e){x.useContext(Rs).static||x.useLayoutEffect(e)}function Jr(){let{isDataRoute:e}=x.useContext(Ls);return e?LR():CR()}function CR(){uc()||Gt(!1);let e=x.useContext(Ty),{basename:t,future:r,navigator:n}=x.useContext(Rs),{matches:s}=x.useContext(Ls),{pathname:o}=Fs(),i=JSON.stringify(Ey(s,r.v7_relativeSplatPath)),c=x.useRef(!1);return XC(()=>{c.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let f=Oy(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:As([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,i,o,e])}function JC(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(Rs),{matches:s}=x.useContext(Ls),{pathname:o}=Fs(),i=JSON.stringify(Ey(s,n.v7_relativeSplatPath));return x.useMemo(()=>Oy(e,JSON.parse(i),o,r==="path"),[e,i,o,r])}function PR(e,t){return AR(e,t)}function AR(e,t,r,n){uc()||Gt(!1);let{navigator:s}=x.useContext(Rs),{matches:o}=x.useContext(Ls),i=o[o.length-1],c=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let d=Fs(),u;if(t){var f;let g=typeof t=="string"?dc(t):t;l==="/"||(f=g.pathname)!=null&&f.startsWith(l)||Gt(!1),u=g}else u=d;let h=u.pathname||"/",p=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=tR(e,{pathname:p}),m=$R(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:As([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:As([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n);return t&&m?x.createElement(Jh.Provider,{value:{location:Fl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_s.Pop}},m):m}function kR(){let e=RR(),t=wR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:s},r):null,null)}const ER=x.createElement(kR,null);class OR extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Ls.Provider,{value:this.props.routeContext},x.createElement(ZC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TR(e){let{routeContext:t,match:r,children:n}=e,s=x.useContext(Ty);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Ls.Provider,{value:t},n)}function $R(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let u=i.findIndex(f=>f.route.id&&c?.[f.route.id]!==void 0);u>=0||Gt(!1),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:h,errors:p}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,h)=>{let p,v=!1,m=null,g=null;r&&(p=c&&f.route.id?c[f.route.id]:void 0,m=f.route.errorElement||ER,l&&(d<0&&h===0?(FR("route-fallback"),v=!0,g=null):d===h&&(v=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,h+1)),b=()=>{let w;return p?w=m:v?w=g:f.route.Component?w=x.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=u,x.createElement(TR,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?x.createElement(OR,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var QC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QC||{}),eP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eP||{});function MR(e){let t=x.useContext(Ty);return t||Gt(!1),t}function DR(e){let t=x.useContext(_R);return t||Gt(!1),t}function IR(e){let t=x.useContext(Ls);return t||Gt(!1),t}function tP(e){let t=IR(),r=t.matches[t.matches.length-1];return r.route.id||Gt(!1),r.route.id}function RR(){var e;let t=x.useContext(ZC),r=DR(),n=tP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function LR(){let{router:e}=MR(QC.UseNavigateStable),t=tP(eP.UseNavigateStable),r=x.useRef(!1);return XC(()=>{r.current=!0}),x.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Fl({fromRouteId:t},o)))},[e,t])}const Ej={};function FR(e,t,r){Ej[e]||(Ej[e]=!0)}function bf(e){let{to:t,replace:r,state:n,relative:s}=e;uc()||Gt(!1);let{future:o,static:i}=x.useContext(Rs),{matches:c}=x.useContext(Ls),{pathname:l}=Fs(),d=Jr(),u=Oy(t,Ey(c,o.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(u);return x.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:s}),[d,f,s,r,n]),null}function Ft(e){Gt(!1)}function zR(e){let{basename:t="/",children:r=null,location:n,navigationType:s=_s.Pop,navigator:o,static:i=!1,future:c}=e;uc()&&Gt(!1);let l=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:l,navigator:o,static:i,future:Fl({v7_relativeSplatPath:!1},c)}),[l,c,o,i]);typeof n=="string"&&(n=dc(n));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:v="default"}=n,m=x.useMemo(()=>{let g=ky(u,l);return g==null?null:{location:{pathname:g,search:f,hash:h,state:p,key:v},navigationType:s}},[l,u,f,h,p,v,s]);return m==null?null:x.createElement(Rs.Provider,{value:d},x.createElement(Jh.Provider,{children:r,value:m}))}function BR(e){let{children:t,location:r}=e;return PR(rv(t),r)}new Promise(()=>{});function rv(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,s)=>{if(!x.isValidElement(n))return;let o=[...t,s];if(n.type===x.Fragment){r.push.apply(r,rv(n.props.children,o));return}n.type!==Ft&&Gt(!1),!n.props.index||!n.props.children||Gt(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=rv(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}function VR(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function UR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qR(e,t){return e.button===0&&(!t||t==="_self")&&!UR(e)}function av(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function WR(e,t){let r=av(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}const HR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GR="6";try{window.__reactRouterVersion=GR}catch{}const KR="startTransition",Oj=IC[KR];function YR(e){let{basename:t,children:r,future:n,window:s}=e,o=x.useRef();o.current==null&&(o.current=JI({window:s,v5Compat:!0}));let i=o.current,[c,l]=x.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},u=x.useCallback(f=>{d&&Oj?Oj(()=>l(f)):l(f)},[l,d]);return x.useLayoutEffect(()=>i.listen(u),[i,u]),x.createElement(zR,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:i,future:n})}const ZR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zl=x.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:i,state:c,target:l,to:d,preventScrollReset:u,viewTransition:f}=t,h=VR(t,HR),{basename:p}=x.useContext(Rs),v,m=!1;if(typeof d=="string"&&XR.test(d)&&(v=d,ZR))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),N=ky(j.pathname,p);j.origin===w.origin&&N!=null?d=N+j.search+j.hash:m=!0}catch{}let g=SR(d,{relative:s}),y=JR(d,{replace:i,state:c,target:l,preventScrollReset:u,relative:s,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||y(w)}return x.createElement("a",nv({},h,{href:v||g,onClick:m||o?n:b,ref:r,target:l}))});var Tj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tj||(Tj={}));var $j;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($j||($j={}));function JR(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:i,viewTransition:c}=t===void 0?{}:t,l=Jr(),d=Fs(),u=JC(e,{relative:i});return x.useCallback(f=>{if(qR(f,r)){f.preventDefault();let h=n!==void 0?n:yf(d)===yf(u);l(e,{replace:h,state:s,preventScrollReset:o,relative:i,viewTransition:c})}},[d,l,u,n,s,r,e,o,i,c])}function $y(e){let t=x.useRef(av(e)),r=x.useRef(!1),n=Fs(),s=x.useMemo(()=>WR(n.search,r.current?null:t.current),[n.search]),o=Jr(),i=x.useCallback((c,l)=>{const d=av(typeof c=="function"?c(s):c);r.current=!0,o("?"+d,l)},[o,s]);return[s,i]}const QR="modulepreload",e4=function(e){return"/lilac-luxe-salon-100/"+e},Mj={},fc=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");s=Promise.allSettled(r.map(l=>{if(l=e4(l),l in Mj)return;Mj[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":QR,d||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return s.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})},t4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fc(async()=>{const{default:n}=await Promise.resolve().then(()=>hc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class My extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class r4 extends My{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dj extends My{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ij extends My{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sv||(sv={}));var n4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};class a4{constructor(t,{headers:r={},customFetch:n,region:s=sv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=t4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return n4(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let c={},{region:l}=r;l||(l=this.region);const d=new URL(`${this.url}/${t}`);l&&l!=="any"&&(c["x-region"]=l,d.searchParams.set("forceFunctionRegion",l));let u;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(c["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(c["Content-Type"]="application/json",u=JSON.stringify(i)));const f=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:u}).catch(m=>{throw new r4(m)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Dj(f);if(!f.ok)throw new Ij(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield f.json():p==="application/octet-stream"?v=yield f.blob():p==="text/event-stream"?v=f:p==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Ij||s instanceof Dj?s.context:void 0}}})}}var Gr={},Dy={},Qh={},Dd={},em={},tm={},s4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ki=s4();const o4=ki.fetch,rP=ki.fetch.bind(ki),nP=ki.Headers,i4=ki.Request,c4=ki.Response,hc=Object.freeze(Object.defineProperty({__proto__:null,Headers:nP,Request:i4,Response:c4,default:rP,fetch:o4},Symbol.toStringTag,{value:"Module"})),l4=PI(hc);var rm={};Object.defineProperty(rm,"__esModule",{value:!0});let d4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};rm.default=d4;var aP=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tm,"__esModule",{value:!0});const u4=aP(l4),f4=aP(rm);let h4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=u4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,c,l;let d=null,u=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const m=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),g=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");m&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await o.text();try{d=JSON.parse(m),Array.isArray(d)&&o.status===404&&(u=[],d=null,h=200,p="OK")}catch{o.status===404&&m===""?(h=204,p="No Content"):d={message:m}}if(d&&this.isMaybeSingle&&(!((l=d?.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,h=200,p="OK"),d&&this.shouldThrowOnError)throw new f4.default(d)}return{error:d,data:u,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,c,l;return{error:{message:`${(i=o?.name)!==null&&i!==void 0?i:"FetchError"}: ${o?.message}`,details:`${(c=o?.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};tm.default=h4;var m4=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(em,"__esModule",{value:!0});const p4=m4(tm);let g4=class extends p4.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",c=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${c?`${c},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var c;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};em.default=g4;var v4=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dd,"__esModule",{value:!0});const x4=v4(em);let y4=class extends x4.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Dd.default=y4;var b4=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qh,"__esModule",{value:!0});const Xc=b4(Dd);let j4=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new Xc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(i.length>0){const c=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",c=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const l=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Xc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Xc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Xc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Qh.default=j4;var nm={},am={};Object.defineProperty(am,"__esModule",{value:!0});am.version=void 0;am.version="0.0.0-automated";Object.defineProperty(nm,"__esModule",{value:!0});nm.DEFAULT_HEADERS=void 0;const w4=am;nm.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${w4.version}`};var sP=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dy,"__esModule",{value:!0});const N4=sP(Qh),_4=sP(Dd),S4=nm;let C4=class oP{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},S4.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new N4.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oP(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const c=new URL(`${this.url}/rpc/${t}`);let l;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{c.searchParams.append(u,f)})):(i="POST",l=r);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new _4.default({method:i,url:c,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Dy.default=C4;var mc=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.PostgrestError=Gr.PostgrestBuilder=Gr.PostgrestTransformBuilder=Gr.PostgrestFilterBuilder=Gr.PostgrestQueryBuilder=Gr.PostgrestClient=void 0;const iP=mc(Dy);Gr.PostgrestClient=iP.default;const cP=mc(Qh);Gr.PostgrestQueryBuilder=cP.default;const lP=mc(Dd);Gr.PostgrestFilterBuilder=lP.default;const dP=mc(em);Gr.PostgrestTransformBuilder=dP.default;const uP=mc(tm);Gr.PostgrestBuilder=uP.default;const fP=mc(rm);Gr.PostgrestError=fP.default;var P4=Gr.default={PostgrestClient:iP.default,PostgrestQueryBuilder:cP.default,PostgrestFilterBuilder:lP.default,PostgrestTransformBuilder:dP.default,PostgrestBuilder:uP.default,PostgrestError:fP.default};const{PostgrestClient:A4,PostgrestQueryBuilder:T1e,PostgrestFilterBuilder:$1e,PostgrestTransformBuilder:M1e,PostgrestBuilder:D1e,PostgrestError:I1e}=P4;class k4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const E4="2.15.1",O4=`realtime-js/${E4}`,T4="1.0.0",ov=1e4,$4=1e3,M4=100;var yl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(yl||(yl={}));var nr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nr||(nr={}));var qn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qn||(qn={}));var iv;(function(e){e.websocket="websocket"})(iv||(iv={}));var uo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uo||(uo={}));class D4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const c=n.decode(t.slice(i,i+s));i=i+s;const l=n.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class hP{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const Rj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=I4(i,e,t,s),o),{})},I4=(e,t,r,n)=>{const s=t.find(c=>c.name===e),o=s?.type,i=r[e];return o&&!n.includes(o)?mP(o,i):cv(i)},mP=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return z4(t,r)}switch(e){case _t.bool:return R4(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return L4(t);case _t.json:case _t.jsonb:return F4(t);case _t.timestamp:return B4(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return cv(t);default:return cv(t)}},cv=e=>e,R4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},L4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},F4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},z4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(c=>mP(t,c))}return e},B4=e=>typeof e=="string"?e.replace(" ","T"):e,pP=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zp{constructor(t,r,n={},s=ov){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lj||(Lj={}));class bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bl.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=bl.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bl.syncDiff(this.state,s,o,i),c())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),c={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const f=o[d];if(f){const h=u.map(g=>g.presence_ref),p=f.map(g=>g.presence_ref),v=u.filter(g=>p.indexOf(g.presence_ref)<0),m=f.filter(g=>h.indexOf(g.presence_ref)<0);v.length>0&&(c[d]=v),m.length>0&&(l[d]=m)}else c[d]=u}),this.syncDiff(o,{joins:c,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(c,l)=>{var d;const u=(d=t[c])!==null&&d!==void 0?d:[];if(t[c]=this.cloneDeep(l),u.length>0){const f=t[c].map(p=>p.presence_ref),h=u.filter(p=>f.indexOf(p.presence_ref)<0);t[c].unshift(...h)}n(c,u,l)}),this.map(i,(c,l)=>{let d=t[c];if(!d)return;const u=l.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[c]=d,s(c,d,l),d.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fj||(Fj={}));var jl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(jl||(jl={}));var Ua;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ua||(Ua={}));class Iy{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=nr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Zp(this,qn.join,this.params,this.timeout),this.rejoinTimer=new hP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new bl(this),this.broadcastEndpointURL=pP(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==nr.closed){const{config:{broadcast:o,presence:i,private:c}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[jl.PRESENCE]&&this.bindings[jl.PRESENCE].length>0,u={},f={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:d}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(Ua.CHANNEL_ERROR,h)),this._onClose(()=>t?.(Ua.CLOSED)),this.updateJoinPayload(Object.assign({config:f},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t?.(Ua.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v?.length)!==null&&p!==void 0?p:0,g=[];for(let y=0;y<m;y++){const b=v[y],{filter:{event:w,schema:j,table:N,filter:_}}=b,S=h&&h[y];if(S&&S.event===w&&S.schema===j&&S.table===N&&S.filter===_)g.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=nr.errored,t?.(Ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Ua.SUBSCRIBED);return}}).receive("error",h=>{this.state=nr.errored,t?.(Ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===nr.joined&&t===jl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,c,l;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(i=this.params)===null||i===void 0?void 0:i.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Zp(this,qn.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zp(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>M4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=qn;if(n&&[c,l,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,m,g;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(m=p.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var v,m,g,y,b,w;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const j=p.id,N=(v=p.filter)===null||v===void 0?void 0:v.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(N==="*"||N?.toLocaleLowerCase()===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const j=(b=(y=p?.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:m,table:g,commit_timestamp:y,type:b,errors:w}=v;h=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===nr.closed}_isJoined(){return this.state===nr.joined}_isJoining(){return this.state===nr.joining}_isLeaving(){return this.state===nr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Iy.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qn.close,{},t)}_onError(t){this._on(qn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Rj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Rj(t.columns,t.old_record)),r}}const zj=()=>{},ju={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},V4=[1e3,2e3,5e3,1e4],U4=1e4,q4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ov,this.transport=null,this.heartbeatIntervalMs=ju.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zj,this.ref=0,this.reconnectTimer=null,this.logger=zj,this.conn=null,this.sendBuffer=[],this.serializer=new D4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>fc(async()=>{const{default:c}=await Promise.resolve().then(()=>hc);return{default:c}},void 0).then(({default:c})=>c(...i)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${iv.websocket}`,this.httpEndpoint=pP(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:T4}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return uo.Connecting;case yl.open:return uo.Open;case yl.closing:return uo.Closing;default:return uo.Closed}}isConnected(){return this.connectionState()===uo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Iy(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ju.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,c=i?`(${i})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${s} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([q4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:O4};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(qn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new hP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ju.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,o,i,c,l,d;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:ov,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:ju.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t?.accessToken)!==null&&i!==void 0?i:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:u=>V4[u-1]||U4,this.encode=(l=t?.encode)!==null&&l!==void 0?l:(u,f)=>f(JSON.stringify(u)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Ry extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function sr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class H4 extends Ry{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lv extends Ry{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var G4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};const gP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fc(async()=>{const{default:n}=await Promise.resolve().then(()=>hc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},K4=()=>G4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fc(()=>Promise.resolve().then(()=>hc),void 0)).Response:Response}),dv=e=>{if(Array.isArray(e))return e.map(r=>dv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=dv(n)}),t},Y4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var zo=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};const Xp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Z4=(e,t,r)=>zo(void 0,void 0,void 0,function*(){const n=yield K4();e instanceof n&&!r?.noResolveJson?e.json().then(s=>{const o=e.status||500,i=s?.statusCode||o+"";t(new H4(Xp(s),o,i))}).catch(s=>{t(new lv(Xp(s),s))}):t(new lv(Xp(e),e))}),X4=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||!n?s:(Y4(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,t?.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Id(e,t,r,n,s,o){return zo(this,void 0,void 0,function*(){return new Promise((i,c)=>{e(r,X4(t,n,s,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>Z4(l,c,n))})})}function jf(e,t,r,n){return zo(this,void 0,void 0,function*(){return Id(e,"GET",t,r,n)})}function pa(e,t,r,n,s){return zo(this,void 0,void 0,function*(){return Id(e,"POST",t,n,s,r)})}function uv(e,t,r,n,s){return zo(this,void 0,void 0,function*(){return Id(e,"PUT",t,n,s,r)})}function J4(e,t,r,n){return zo(this,void 0,void 0,function*(){return Id(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function vP(e,t,r,n,s){return zo(this,void 0,void 0,function*(){return Id(e,"DELETE",t,n,s,r)})}var kr=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};const Q4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class e5{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=gP(s)}uploadOrUpdate(t,r,n,s){return kr(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Bj),s);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,c["cache-control"]=`max-age=${i.cacheControl}`,c["content-type"]=i.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s?.headers&&(c=Object.assign(Object.assign({},c),s.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(t=="PUT"?uv:pa)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:c},i?.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(sr(o))return{data:null,error:o};throw o}})}upload(t,r,n){return kr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return kr(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${i}`);c.searchParams.set("token",r);try{let l;const d=Object.assign({upsert:Bj.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",d.cacheControl)):(l=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield uv(this.fetch,c.toString(),l,{headers:u});return{data:{path:o,fullPath:f.Key},error:null}}catch(l){if(sr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return kr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const o=yield pa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),c=i.searchParams.get("token");if(!c)throw new Ry("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:c},error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}update(t,r,n){return kr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return kr(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return kr(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return kr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield pa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return kr(this,void 0,void 0,function*(){try{const s=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}download(t,r){return kr(this,void 0,void 0,function*(){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),i=o?`?${o}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield jf(this.fetch,`${this.url}/${s}/${c}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(sr(c))return{data:null,error:c};throw c}})}info(t){return kr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield jf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:dv(n),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}exists(t){return kr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield J4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(sr(n)&&n instanceof lv){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r?.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const c=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&s.push(l);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${d}`)}}}remove(t){return kr(this,void 0,void 0,function*(){try{return{data:yield vP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}list(t,r,n){return kr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Q4),r),{prefix:t||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}listV2(t,r){return kr(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield pa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const t5="2.11.0",r5={"X-Client-Info":`storage-js/${t5}`};var Qo=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};class n5{constructor(t,r={},n,s){const o=new URL(t);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},r5),r),this.fetch=gP(n)}listBuckets(){return Qo(this,void 0,void 0,function*(){try{return{data:yield jf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(sr(t))return{data:null,error:t};throw t}})}getBucket(t){return Qo(this,void 0,void 0,function*(){try{return{data:yield jf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Qo(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Qo(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Qo(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Qo(this,void 0,void 0,function*(){try{return{data:yield vP(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}}class a5 extends n5{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new e5(this.url,this.headers,t,this.fetch)}}const s5="2.55.0";let ml="";typeof Deno<"u"?ml="deno":typeof document<"u"?ml="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ml="react-native":ml="node";const o5={"X-Client-Info":`supabase-js-${ml}/${s5}`},i5={headers:o5},c5={schema:"public"},l5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d5={};var u5=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};const f5=e=>{let t;return e?t=e:typeof fetch>"u"?t=rP:t=fetch,(...r)=>t(...r)},h5=()=>typeof Headers>"u"?nP:Headers,m5=(e,t,r)=>{const n=f5(r),s=h5();return(o,i)=>u5(void 0,void 0,void 0,function*(){var c;const l=(c=yield t())!==null&&c!==void 0?c:e;let d=new s(i?.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:d}))})};var p5=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};function g5(e){return e.endsWith("/")?e:e+"/"}function v5(e,t){var r,n;const{db:s,auth:o,realtime:i,global:c}=e,{db:l,auth:d,realtime:u,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),c),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>p5(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const xP="2.71.1",hi=30*1e3,fv=3,Jp=fv*hi,x5="http://localhost:9999",y5="supabase.auth.token",b5={"X-Client-Info":`gotrue-js/${xP}`},hv="X-Supabase-Api-Version",yP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,w5=10*60*1e3;class Ly extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ye(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class N5 extends Ly{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function _5(e){return Ye(e)&&e.name==="AuthApiError"}class bP extends Ly{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class zs extends Ly{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class vs extends zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function S5(e){return Ye(e)&&e.name==="AuthSessionMissingError"}class wu extends zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nu extends zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _u extends zs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function C5(e){return Ye(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vj extends zs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mv extends zs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Qp(e){return Ye(e)&&e.name==="AuthRetryableFetchError"}class Uj extends zs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class pv extends zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qj=` 	
\r=`.split(""),P5=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qj.length;t+=1)e[qj[t].charCodeAt(0)]=-2;for(let t=0;t<wf.length;t+=1)e[wf[t].charCodeAt(0)]=t;return e})();function Wj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wf[n]),t.queuedBits-=6}}function jP(e,t,r){const n=P5[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hj(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{E5(i,n,r)};for(let i=0;i<e.length;i+=1)jP(e.charCodeAt(i),s,o);return t.join("")}function A5(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function k5(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}A5(n,t)}}function E5(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function O5(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)jP(e.charCodeAt(s),r,n);return new Uint8Array(t)}function T5(e){const t=[];return k5(e,r=>t.push(r)),new Uint8Array(t)}function $5(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Wj(s,r,n)),Wj(null,r,n),t.join("")}function M5(e){return Math.round(Date.now()/1e3)+e}function D5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Bn=()=>typeof window<"u"&&typeof document<"u",Qs={tested:!1,writable:!1},wP=()=>{if(!Bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qs.tested)return Qs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qs.tested=!0,Qs.writable=!0}catch{Qs.tested=!0,Qs.writable=!1}return Qs.writable};function I5(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const NP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fc(async()=>{const{default:n}=await Promise.resolve().then(()=>hc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},R5=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mi=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},eo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},hs=async(e,t)=>{await e.removeItem(t)};class sm{constructor(){this.promise=new sm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}sm.promiseConstructor=Promise;function eg(e){const t=e.split(".");if(t.length!==3)throw new pv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!j5.test(t[n]))throw new pv("JWT not in base64url format");return{header:JSON.parse(Hj(t[0])),payload:JSON.parse(Hj(t[1])),signature:O5(t[2]),raw:{header:t[0],payload:t[1]}}}async function L5(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function F5(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function z5(e){return("0"+e.toString(16)).substr(-2)}function B5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,z5).join("")}async function V5(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function U5(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await V5(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ei(e,t,r=!1){const n=B5();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await mi(e,`${t}-code-verifier`,s);const o=await U5(n);return[o,n===o?"plain":"s256"]}const q5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W5(e){const t=e.headers.get(hv);if(!t||!t.match(q5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function H5(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function G5(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const K5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ti(e){if(!K5.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gj(e){return JSON.parse(JSON.stringify(e))}var Y5=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ao=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Z5=[502,503,504];async function Kj(e){var t;if(!R5(e))throw new mv(ao(e),0);if(Z5.includes(e.status))throw new mv(ao(e),e.status);let r;try{r=await e.json()}catch(o){throw new bP(ao(o),o)}let n;const s=W5(e);if(s&&s.getTime()>=yP["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Uj(ao(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new vs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Uj(ao(r),e.status,r.weak_password.reasons);throw new N5(ao(r),e.status||500,n)}const X5=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ot(e,t,r,n){var s;const o=Object.assign({},n?.headers);o[hv]||(o[hv]=yP["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(i.redirect_to=n.redirectTo);const c=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await J5(e,t,r+c,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function J5(e,t,r,n,s,o){const i=X5(t,n,s,o);let c;try{c=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new mv(ao(l),0)}if(c.ok||await Kj(c),n?.noResolveJson)return c;try{return await c.json()}catch(l){await Kj(l)}}function Va(e){var t;let r=null;r3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=M5(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Yj(e){const t=Va(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function js(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Q5(e){return{data:e,error:null}}function e3(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=Y5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:c,user:l},error:null}}function t3(e){return e}function r3(e){return e.access_token&&e.refresh_token&&e.expires_in}const rg=["global","local","others"];var n3=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class a3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=NP(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=rg[0]){if(rg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rg.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:js})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=n3(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:e3,redirectTo:r?.redirectTo})}catch(r){if(Ye(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:js})}catch(r){if(Ye(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:t3});if(u.error)throw u.error;const f=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);d[`${g}Page`]=m}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ye(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){ti(t);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:js})}catch(r){if(Ye(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ti(t);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:js})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ti(t);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:js})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ti(t.userId);try{const{data:r,error:n}=await ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ti(t.userId),ti(t.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}}function Zj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function s3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ri={debug:!!(globalThis&&wP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _P extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class o3 extends _P{}async function i3(e,t,r){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ri.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ri.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new o3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ri.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}s3();const c3={url:x5,storageKey:y5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:b5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xj(e,t,r){return await r()}const ni={};class Bl{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bl.nextInstanceID,Bl.nextInstanceID+=1,this.instanceID>0&&Bn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},c3),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new a3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NP(s.fetch),this.lock=s.lock||Xj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Bn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=i3:this.lock=Xj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:wP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Zj(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ni[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ni[this.storageKey]=Object.assign(Object.assign({},ni[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ni[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ni[this.storageKey]=Object.assign(Object.assign({},ni[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xP}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=I5(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Bn()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),C5(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",c),await this._saveSession(i),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ye(r)?{error:r}:{error:new bP("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Va}),{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Ye(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:u,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ei(this.storage,this.storageKey)),o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:f,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:v},xform:Va})}else if("phone"in t){const{phone:u,password:f,options:h}=t;o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(s=h?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Va})}else throw new Nu("You must provide either an email or phone number and a password");const{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Ye(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:c}=t;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Yj})}else if("phone"in t){const{phone:o,password:i,options:c}=t;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Yj})}else throw new Nu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wu}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,c,l,d,u,f,h,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:g,wallet:y,statement:b,options:w}=t;let j;if(Bn())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const N=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),m=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w?.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(u=w?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=_}}try{const{data:g,error:y}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:$5(m)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Va});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new wu}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(Ye(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const r=await eo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Va});if(await hs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new wu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(Ye(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,c=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Va}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wu}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:c,options:l}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ei(this.storage,this.storageKey));const{error:f}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:c,options:l}=t,{data:d,error:u}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(i=l?.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Nu("You must provide either an email or phone number.")}catch(c){if(Ye(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:c}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Va});if(c)throw c;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(Ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await ei(this.storage,this.storageKey)),await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Q5})}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new vs;const{error:s}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:c}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:i?.message_id},error:c}}throw new Nu("You must provide either an email or phone number and a type")}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await eo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Jp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await eo(this.userStorage,this.storageKey+"-user");i?.user?t.user=i.user:t.user=tg()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:js}):await this._useSession(async r=>{var n,s,o;const{data:i,error:c}=r;if(c)throw c;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vs}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:js})})}catch(r){if(Ye(r))return S5(r)&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new vs;const i=s.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await ei(this.storage,this.storageKey));const{data:d,error:u}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:i.access_token,xform:js});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new vs;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=eg(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Ye(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:c}=r;if(c)throw c;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new vs;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Bn())throw new _u("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _u(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _u("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vj("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:c,expires_at:l,token_type:d}=t;if(!o||!c||!i||!d)throw new _u("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(c);let h=u+f;l&&(h=parseInt(l));const p=h-u;p*1e3<=hi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,u);const{data:m,error:g}=await this._getUser(o);if(g)throw g;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:d,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(Ye(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await eo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:c}=await this.admin.signOut(i,t);if(c&&!(_5(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=D5(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ei(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,c,l,d,u;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Bn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(Ye(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await F5(async s=>(s>0&&await L5(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Va})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Qp(o)&&Date.now()+i-n<hi})}catch(n){if(this._debug(r,"error",n),Ye(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Bn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await eo(this.storage,this.storageKey);if(s&&this.userStorage){let i=await eo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await mi(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i?.user)!==null&&t!==void 0?t:tg()}else if(s&&!s.user&&!s.user){const i=await eo(this.storage,this.storageKey+"-user");i&&i?.user?(s.user=i.user,await hs(this.storage,this.storageKey+"-user"),await mi(this.storage,this.storageKey,s)):s.user=tg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jp;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Jp}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Qp(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:c}=await this._getUser(s.access_token);!c&&i?.user?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sm;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new vs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),Ye(o)){const i={session:null,error:o};return Qp(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await mi(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Gj(s);await mi(this.storage,this.storageKey,o)}else{const s=Gj(r);await mi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await hs(this.storage,this.storageKey),await hs(this.storage,this.storageKey+"-code-verifier"),await hs(this.storage,this.storageKey+"-user"),this.userStorage&&await hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Bn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),hi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/hi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${hi}ms, refresh threshold is ${fv} ticks`),s<=fv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _P)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await ei(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(c.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:d}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:c}=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=t?.factors||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=eg(s.access_token);let c=null;i.aal&&(c=i.aal);let l=c;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(c=>c.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(c=>c.kid===t),n&&this.jwks_cached_at+w5>s)return n;const{data:o,error:i}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(c=>c.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:c,payload:l}}=eg(n);r?.allowExpired||H5(o.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const u=G5(s.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,i,T5(`${c}.${l}`)))throw new pv("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}}}Bl.nextInstanceID=0;const l3=Bl;class d3 extends l3{constructor(t){super(t)}}var u3=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function c(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):s(u.value).then(c,l)}d((n=n.apply(e,t||[])).next())})};class f3{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const c=g5(t),l=new URL(c);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:c5,realtime:d5,auth:Object.assign(Object.assign({},l5),{storageKey:d}),global:i5},f=v5(n??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=m5(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new A4(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new a5(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new a4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return u3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:c,debug:l},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d3({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:c,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new W4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h3=(e,t,r)=>new f3(e,t,r);function m3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}m3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p3="https://dfwepnzwktjyhvfmpuxo.supabase.co",g3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRmd2Vwbnp3a3RqeWh2Zm1wdXhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NzE4NzQsImV4cCI6MjA3MTE0Nzg3NH0.9BR-N9tSzHetSL50Dsalwb-q_dNHfdQBp32Y9qIXlag",W=h3(p3,g3,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var v3=e=>{switch(e){case"success":return b3;case"info":return w3;case"warning":return j3;case"error":return N3;default:return null}},x3=Array(12).fill(0),y3=({visible:e})=>E.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},E.createElement("div",{className:"sonner-spinner"},x3.map((t,r)=>E.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),b3=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),j3=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),w3=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),N3=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_3=()=>{let[e,t]=E.useState(document.hidden);return E.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},gv=1,S3=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:gv++,o=this.toasts.find(c=>c.id===s),i=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:i,title:r}):c):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async o=>{if(P3(o)&&!o.ok){s=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,c=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:r,type:"error",message:i,description:c})}else if(t.success!==void 0){s=!1;let i=typeof t.success=="function"?await t.success(o):t.success,c=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"success",message:i,description:c})}}).catch(async o=>{if(t.error!==void 0){s=!1;let i=typeof t.error=="function"?await t.error(o):t.error,c=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"error",message:i,description:c})}}).finally(()=>{var o;s&&(this.dismiss(r),r=void 0),(o=t.finally)==null||o.call(t)}),r},this.custom=(e,t)=>{let r=t?.id||gv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},an=new S3,C3=(e,t)=>{let r=t?.id||gv++;return an.addToast({title:e,...t,id:r}),r},P3=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",A3=C3,k3=()=>an.toasts,V=Object.assign(A3,{success:an.success,info:an.info,warning:an.warning,error:an.error,custom:an.custom,message:an.message,promise:an.promise,dismiss:an.dismiss,loading:an.loading},{getHistory:k3});function E3(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}E3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Su(e){return e.label!==void 0}var O3=3,T3="32px",$3=4e3,M3=356,D3=14,I3=20,R3=200;function L3(...e){return e.filter(Boolean).join(" ")}var F3=e=>{var t,r,n,s,o,i,c,l,d,u;let{invert:f,toast:h,unstyled:p,interacting:v,setHeights:m,visibleToasts:g,heights:y,index:b,toasts:w,expanded:j,removeToast:N,defaultRichColors:_,closeButton:S,style:C,cancelButtonStyle:k,actionButtonStyle:$,className:A="",descriptionClassName:P="",duration:O,position:M,gap:R,loadingIcon:T,expandByDefault:D,classNames:I,icons:U,closeButtonAriaLabel:oe="Close toast",pauseWhenPageIsHidden:J,cn:ie}=e,[me,de]=E.useState(!1),[H,L]=E.useState(!1),[Y,Q]=E.useState(!1),[Z,ce]=E.useState(!1),[fe,X]=E.useState(0),[De,ve]=E.useState(0),Be=E.useRef(null),Oe=E.useRef(null),Ce=b===0,bt=b+1<=g,Dt=h.type,z=h.dismissible!==!1,G=h.className||"",ee=h.descriptionClassName||"",Ne=E.useMemo(()=>y.findIndex(Ge=>Ge.toastId===h.id)||0,[y,h.id]),we=E.useMemo(()=>{var Ge;return(Ge=h.closeButton)!=null?Ge:S},[h.closeButton,S]),ye=E.useMemo(()=>h.duration||O||$3,[h.duration,O]),Pe=E.useRef(0),lt=E.useRef(0),mt=E.useRef(0),tr=E.useRef(null),[Js,fa]=M.split("-"),xu=E.useMemo(()=>y.reduce((Ge,Et,Nt)=>Nt>=Ne?Ge:Ge+Et.height,0),[y,Ne]),Jo=_3(),Yc=h.invert||f,Zc=Dt==="loading";lt.current=E.useMemo(()=>Ne*R+xu,[Ne,xu]),E.useEffect(()=>{de(!0)},[]),E.useLayoutEffect(()=>{if(!me)return;let Ge=Oe.current,Et=Ge.style.height;Ge.style.height="auto";let Nt=Ge.getBoundingClientRect().height;Ge.style.height=Et,ve(Nt),m(ha=>ha.find(ma=>ma.toastId===h.id)?ha.map(ma=>ma.toastId===h.id?{...ma,height:Nt}:ma):[{toastId:h.id,height:Nt,position:h.position},...ha])},[me,h.title,h.description,m,h.id]);let Fn=E.useCallback(()=>{L(!0),X(lt.current),m(Ge=>Ge.filter(Et=>Et.toastId!==h.id)),setTimeout(()=>{N(h)},R3)},[h,N,m,lt]);E.useEffect(()=>{if(h.promise&&Dt==="loading"||h.duration===1/0||h.type==="loading")return;let Ge,Et=ye;return j||v||J&&Jo?(()=>{if(mt.current<Pe.current){let Nt=new Date().getTime()-Pe.current;Et=Et-Nt}mt.current=new Date().getTime()})():Et!==1/0&&(Pe.current=new Date().getTime(),Ge=setTimeout(()=>{var Nt;(Nt=h.onAutoClose)==null||Nt.call(h,h),Fn()},Et)),()=>clearTimeout(Ge)},[j,v,D,h,ye,Fn,h.promise,Dt,J,Jo]),E.useEffect(()=>{let Ge=Oe.current;if(Ge){let Et=Ge.getBoundingClientRect().height;return ve(Et),m(Nt=>[{toastId:h.id,height:Et,position:h.position},...Nt]),()=>m(Nt=>Nt.filter(ha=>ha.toastId!==h.id))}},[m,h.id]),E.useEffect(()=>{h.delete&&Fn()},[Fn,h.delete]);function Gp(){return U!=null&&U.loading?E.createElement("div",{className:"sonner-loader","data-visible":Dt==="loading"},U.loading):T?E.createElement("div",{className:"sonner-loader","data-visible":Dt==="loading"},T):E.createElement(y3,{visible:Dt==="loading"})}return E.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Oe,className:ie(A,G,I?.toast,(t=h?.classNames)==null?void 0:t.toast,I?.default,I?.[Dt],(r=h?.classNames)==null?void 0:r[Dt]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:_,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":me,"data-promise":!!h.promise,"data-removed":H,"data-visible":bt,"data-y-position":Js,"data-x-position":fa,"data-index":b,"data-front":Ce,"data-swiping":Y,"data-dismissible":z,"data-type":Dt,"data-invert":Yc,"data-swipe-out":Z,"data-expanded":!!(j||D&&me),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${H?fe:lt.current}px`,"--initial-height":D?"auto":`${De}px`,...C,...h.style},onPointerDown:Ge=>{Zc||!z||(Be.current=new Date,X(lt.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Q(!0),tr.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Et,Nt,ha;if(Z||!z)return;tr.current=null;let ma=Number(((Ge=Oe.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount").replace("px",""))||0),yu=new Date().getTime()-((Et=Be.current)==null?void 0:Et.getTime()),CI=Math.abs(ma)/yu;if(Math.abs(ma)>=I3||CI>.11){X(lt.current),(Nt=h.onDismiss)==null||Nt.call(h,h),Fn(),ce(!0);return}(ha=Oe.current)==null||ha.style.setProperty("--swipe-amount","0px"),Q(!1)},onPointerMove:Ge=>{var Et;if(!tr.current||!z)return;let Nt=Ge.clientY-tr.current.y,ha=Ge.clientX-tr.current.x,ma=(Js==="top"?Math.min:Math.max)(0,Nt),yu=Ge.pointerType==="touch"?10:2;Math.abs(ma)>yu?(Et=Oe.current)==null||Et.style.setProperty("--swipe-amount",`${Nt}px`):Math.abs(ha)>yu&&(tr.current=null)}},we&&!h.jsx?E.createElement("button",{"aria-label":oe,"data-disabled":Zc,"data-close-button":!0,onClick:Zc||!z?()=>{}:()=>{var Ge;Fn(),(Ge=h.onDismiss)==null||Ge.call(h,h)},className:ie(I?.closeButton,(s=h?.classNames)==null?void 0:s.closeButton)},E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},E.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||E.isValidElement(h.title)?h.jsx||h.title:E.createElement(E.Fragment,null,Dt||h.icon||h.promise?E.createElement("div",{"data-icon":"",className:ie(I?.icon,(o=h?.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Gp():null,h.type!=="loading"?h.icon||U?.[Dt]||v3(Dt):null):null,E.createElement("div",{"data-content":"",className:ie(I?.content,(i=h?.classNames)==null?void 0:i.content)},E.createElement("div",{"data-title":"",className:ie(I?.title,(c=h?.classNames)==null?void 0:c.title)},h.title),h.description?E.createElement("div",{"data-description":"",className:ie(P,ee,I?.description,(l=h?.classNames)==null?void 0:l.description)},h.description):null),E.isValidElement(h.cancel)?h.cancel:h.cancel&&Su(h.cancel)?E.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:Ge=>{var Et,Nt;Su(h.cancel)&&z&&((Nt=(Et=h.cancel).onClick)==null||Nt.call(Et,Ge),Fn())},className:ie(I?.cancelButton,(d=h?.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,E.isValidElement(h.action)?h.action:h.action&&Su(h.action)?E.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||$,onClick:Ge=>{var Et,Nt;Su(h.action)&&(Ge.defaultPrevented||((Nt=(Et=h.action).onClick)==null||Nt.call(Et,Ge),Fn()))},className:ie(I?.actionButton,(u=h?.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function Jj(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var z3=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:o,className:i,offset:c,theme:l="light",richColors:d,duration:u,style:f,visibleToasts:h=O3,toastOptions:p,dir:v=Jj(),gap:m=D3,loadingIcon:g,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w,cn:j=L3}=e,[N,_]=E.useState([]),S=E.useMemo(()=>Array.from(new Set([r].concat(N.filter(J=>J.position).map(J=>J.position)))),[N,r]),[C,k]=E.useState([]),[$,A]=E.useState(!1),[P,O]=E.useState(!1),[M,R]=E.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),T=E.useRef(null),D=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=E.useRef(null),U=E.useRef(!1),oe=E.useCallback(J=>{var ie;(ie=N.find(me=>me.id===J.id))!=null&&ie.delete||an.dismiss(J.id),_(me=>me.filter(({id:de})=>de!==J.id))},[N]);return E.useEffect(()=>an.subscribe(J=>{if(J.dismiss){_(ie=>ie.map(me=>me.id===J.id?{...me,delete:!0}:me));return}setTimeout(()=>{RC.flushSync(()=>{_(ie=>{let me=ie.findIndex(de=>de.id===J.id);return me!==-1?[...ie.slice(0,me),{...ie[me],...J},...ie.slice(me+1)]:[J,...ie]})})})}),[]),E.useEffect(()=>{if(l!=="system"){R(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:J})=>{R(J?"dark":"light")})},[l]),E.useEffect(()=>{N.length<=1&&A(!1)},[N]),E.useEffect(()=>{let J=ie=>{var me,de;n.every(H=>ie[H]||ie.code===H)&&(A(!0),(me=T.current)==null||me.focus()),ie.code==="Escape"&&(document.activeElement===T.current||(de=T.current)!=null&&de.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[n]),E.useEffect(()=>{if(T.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,U.current=!1)}},[T.current]),N.length?E.createElement("section",{"aria-label":`${b} ${D}`,tabIndex:-1},S.map((J,ie)=>{var me;let[de,H]=J.split("-");return E.createElement("ol",{key:J,dir:v==="auto"?Jj():v,tabIndex:-1,ref:T,className:i,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":de,"data-x-position":H,style:{"--front-toast-height":`${((me=C[0])==null?void 0:me.height)||0}px`,"--offset":typeof c=="number"?`${c}px`:c||T3,"--width":`${M3}px`,"--gap":`${m}px`,...f},onBlur:L=>{U.current&&!L.currentTarget.contains(L.relatedTarget)&&(U.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||U.current||(U.current=!0,I.current=L.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{P||A(!1)},onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},N.filter(L=>!L.position&&ie===0||L.position===J).map((L,Y)=>{var Q,Z;return E.createElement(F3,{key:L.id,icons:y,index:Y,toast:L,defaultRichColors:d,duration:(Q=p?.duration)!=null?Q:u,className:p?.className,descriptionClassName:p?.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Z=p?.closeButton)!=null?Z:o,interacting:P,position:J,style:p?.style,unstyled:p?.unstyled,classNames:p?.classNames,cancelButtonStyle:p?.cancelButtonStyle,actionButtonStyle:p?.actionButtonStyle,removeToast:oe,toasts:N.filter(ce=>ce.position==L.position),heights:C.filter(ce=>ce.position==L.position),setHeights:k,expandByDefault:s,gap:m,loadingIcon:g,expanded:$,pauseWhenPageIsHidden:w,cn:j})}))})):null};const SP=x.createContext(void 0),B3=({children:e})=>{const t=Jr(),[r,n]=x.useState(null),[s,o]=x.useState(null),[i,c]=x.useState(null),[l,d]=x.useState(!0),[u,f]=x.useState(null),[h,p]=x.useState(!1),v=async j=>{const N=j||s,_=N?.user||r;if(!N||!_){console.log("[AUTH]  Sem sesso ou usurio, pulando verificao"),f(null);return}p(!0),console.log("[AUTH]  Iniciando verificao de assinatura para:",_.email);try{const{data:{session:S},error:C}=await W.auth.getSession();if(C||!S||!S.access_token){console.error("[AUTH]  Sesso invlida, definindo como inactive:",C),f({subscribed:!1,status:"inactive",is_trial_expired:!1}),p(!1);return}const k=S.expires_at,$=Math.floor(Date.now()/1e3);if(k&&k<$){console.error("[AUTH]  Token expirado, tentando refresh");const{data:O,error:M}=await W.auth.refreshSession();if(M||!O.session){console.error("[AUTH]  Falha no refresh, definindo como inactive"),f({subscribed:!1,status:"inactive",is_trial_expired:!1}),p(!1);return}console.log("[AUTH]  Token refreshed com sucesso")}console.log("[AUTH]  Chamando check-subscription com token vlido...");const{data:A,error:P}=await W.functions.invoke("check-subscription",{body:{}});if(P){console.error("[AUTH]  Erro ao verificar assinatura:",P),f({subscribed:!1,status:"inactive",is_trial_expired:!1}),p(!1);return}console.log("[AUTH]  Status recebido:",A),f({subscribed:A.subscribed,status:A.status,trial_days_remaining:A.trial_days_remaining,trial_end_date:A.trial_end_date,is_trial_expired:A.is_trial_expired||!1,subscription_end:A.subscription_end,product_id:A.product_id})}catch(S){console.error("[AUTH]  Exceo ao verificar assinatura:",S),f({subscribed:!1,status:"inactive",is_trial_expired:!1})}finally{p(!1)}};x.useEffect(()=>{const j=localStorage.getItem("app-theme");console.log(" [INIT] Tema armazenado localmente:",j),j&&document.documentElement.setAttribute("data-theme",j);const{data:{subscription:N}}=W.auth.onAuthStateChange((_,S)=>{console.log(" [AUTH] State changed:",_,"User ID:",S?.user?.id),o(S),n(S?.user??null),S?.user?(console.log(" [AUTH] Usurio logado, buscando perfil..."),!localStorage.getItem("onboarding-completed")&&_==="SIGNED_IN"&&setTimeout(()=>t("/onboarding"),500),setTimeout(async()=>{try{console.log(" [QUERY] Buscando usurio no banco:",S.user.id);const{data:k,error:$}=await W.from("usuarios").select("*").eq("id",S.user.id).single();if(console.log(" [QUERY] Resultado:",{userData:k,error:$}),$&&$.code!=="PGRST116"){console.error(" [ERROR] Erro ao buscar dados do usurio:",$),console.error(" [ERROR] Cdigo do erro:",$.code),console.error(" [ERROR] Mensagem:",$.message);return}if(k){const A=k;c(A);const P=A.tema_preferencia||"feminino";console.log(" [SUCCESS] Usurio carregado:",A.email),console.log(" [SUCCESS] Tema do banco de dados:",P),console.log(" [SUCCESS] Aplicando tema:",P),document.documentElement.setAttribute("data-theme",P),localStorage.setItem("app-theme",P),console.log(" [AUTH] Iniciando verificao de assinatura aps carregar usurio"),v(S)}else console.log(" [WARNING] Usurio no encontrado no banco, aplicando tema padro"),document.documentElement.setAttribute("data-theme","feminino"),localStorage.setItem("app-theme","feminino")}catch(k){console.error(" [EXCEPTION] Erro ao buscar perfil do usurio:",k),document.documentElement.setAttribute("data-theme","feminino"),localStorage.setItem("app-theme","feminino")}},0)):(c(null),console.log(" [AUTH] Sem sesso, aplicando tema padro"),document.documentElement.setAttribute("data-theme","feminino"),localStorage.setItem("app-theme","feminino")),d(!1)});return W.auth.getSession().then(({data:{session:_}})=>{_||d(!1)}),()=>N.unsubscribe()},[]);const m=async(j,N,_,S)=>{try{d(!0);const C=`${window.location.origin}/`;console.log(" [SIGNUP] Iniciando cadastro..."),console.log(" [SIGNUP] Tema selecionado:",_.tema_preferencia),console.log(" [SIGNUP] Email:",j),console.log(" [SIGNUP] Tipo de plano:",S);const{data:k,error:$}=await W.auth.signUp({email:j,password:N,options:{emailRedirectTo:C,data:{nome_completo:_.nome_completo,nome_personalizado_app:_.nome_personalizado_app||"Meu Salo",telefone:_.telefone,tema_preferencia:_.tema_preferencia||"feminino",plan_type:S||"trial"}}});if($)return console.error(" [SIGNUP] Erro no auth.signUp:",$),V.error($.message),{error:$};if(console.log(" [SIGNUP] Conta criada com sucesso! User ID:",k.user?.id),_.tema_preferencia&&(document.documentElement.setAttribute("data-theme",_.tema_preferencia),localStorage.setItem("app-theme",_.tema_preferencia)),S==="trial"&&k.user&&!$){console.log(" [SIGNUP] Fazendo login automtico para trial...");const{error:A}=await W.auth.signInWithPassword({email:j,password:N});if(A)return console.error(" [SIGNUP] Erro no login automtico:",A),V.error("Conta criada! Por favor, faa login."),{error:A};console.log(" [SIGNUP] Login automtico realizado com sucesso!"),await new Promise(P=>setTimeout(P,500)),V.success(" Conta criada! Bem-vindo ao seu trial de 7 dias!")}else V.success("Conta criada com sucesso! Faa login para continuar.");return{error:null}}catch(C){return console.error(" [SIGNUP] EXCEO GERAL no cadastro:",C),V.error("Erro inesperado no cadastro. Por favor, tente novamente."),{error:C}}finally{d(!1)}},g=async(j,N)=>{try{d(!0);const{error:_}=await W.auth.signInWithPassword({email:j,password:N});return _?(V.error(_.message),{error:_}):(V.success("Login realizado com sucesso!"),{error:null})}catch(_){return console.error("Erro no login:",_),{error:_}}finally{d(!1)}},y=async()=>{try{d(!0),await W.auth.signOut(),n(null),o(null),c(null),V.success("Logout realizado com sucesso!")}catch(j){console.error("Erro no logout:",j),V.error("Erro ao fazer logout")}finally{d(!1)}},b=async j=>{if(!r)return{error:new Error("Usurio no autenticado")};try{d(!0);const{data:N,error:_}=await W.from("usuarios").update(j).eq("id",r.id).select().single();return _?(V.error("Erro ao atualizar perfil"),{error:_}):(c(N),j.tema_preferencia&&(console.log("Aplicando novo tema:",j.tema_preferencia),document.documentElement.setAttribute("data-theme",j.tema_preferencia),localStorage.setItem("app-theme",j.tema_preferencia)),V.success("Perfil atualizado com sucesso!"),{error:null})}catch(N){return console.error("Erro ao atualizar perfil:",N),{error:N}}finally{d(!1)}},w=!!s;return a.jsx(SP.Provider,{value:{user:r,session:s,usuario:i,isLoading:l,isAuthenticated:w,subscription:u,isSubscriptionLoading:h,setSubscription:f,checkSubscription:v,signUp:m,signIn:g,signOut:y,updateProfile:b},children:e})},Rt=()=>{const e=x.useContext(SP);if(e===void 0)throw new Error("useSupabaseAuth deve ser usado dentro de SupabaseAuthProvider");return e},Wr=({children:e})=>{const{isAuthenticated:t,isLoading:r,subscription:n,isSubscriptionLoading:s}=Rt();if(r||s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(!t)return a.jsx(bf,{to:"/login",replace:!0});const o=["/assinatura","/onboarding","/checkout-success"],i=window.location.pathname;if(o.includes(i))return a.jsx(a.Fragment,{children:e});const c=n?.status==="trial"&&!n?.is_trial_expired,l=n?.status==="active",d=c||l;return console.log("[PROTECTED-ROUTE] Access check:",{pathname:i,hasAccess:d,subscriptionStatus:n?.status,isTrialExpired:n?.is_trial_expired,trialDaysRemaining:n?.trial_days_remaining,subscribed:n?.subscribed}),d?a.jsx(a.Fragment,{children:e}):(console.log("[PROTECTED-ROUTE]  Acesso negado, redirecionando para /assinatura"),a.jsx(bf,{to:"/assinatura",replace:!0}))},om=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(!1),[s,o]=x.useState(!1),[i,c]=x.useState(typeof navigator<"u"?!navigator.onLine:!1),[l,d]=x.useState(!1);return x.useEffect(()=>{(()=>{try{const b=window.matchMedia("(display-mode: standalone)").matches,w=window.navigator.standalone===!0;o(b||w)}catch(b){console.warn("Erro ao verificar se est instalado:",b)}})();const v=b=>{try{b.preventDefault(),t(b),n(!0)}catch(w){console.warn("Erro no handleBeforeInstallPrompt:",w)}},m=()=>{try{o(!0),n(!1),t(null)}catch(b){console.warn("Erro no handleAppInstalled:",b)}},g=()=>{try{c(!1)}catch(b){console.warn("Erro no handleOnline:",b)}},y=()=>{try{c(!0)}catch(b){console.warn("Erro no handleOffline:",b)}};try{window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",m),window.addEventListener("online",g),window.addEventListener("offline",y)}catch(b){console.warn("Erro ao registrar event listeners:",b)}if("serviceWorker"in navigator){navigator.serviceWorker.ready.then(b=>{console.log("Service Worker verificado no usePWA:",b.scope),b.addEventListener("updatefound",()=>{const w=b.installing;w&&w.addEventListener("statechange",()=>{if(w.state==="installed"&&navigator.serviceWorker.controller)try{d(!0)}catch(j){console.warn("Erro ao atualizar hasUpdate:",j)}})})}).catch(b=>{console.log("Erro ao acessar Service Worker:",b)});try{navigator.serviceWorker.addEventListener("message",b=>{if(b.data&&b.data.type==="UPDATE_AVAILABLE")try{d(!0)}catch(w){console.warn("Erro ao processar mensagem do Service Worker:",w)}})}catch(b){console.warn("Erro ao adicionar listener de mensagens:",b)}}return()=>{try{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",m),window.removeEventListener("online",g),window.removeEventListener("offline",y)}catch(b){console.warn("Erro ao remover event listeners:",b)}}},[]),{isInstallable:r,isInstalled:s,isOffline:i,hasUpdate:l,installApp:async()=>{if(!e)return!1;try{return await e.prompt(),(await e.userChoice).outcome==="accepted"?(n(!1),t(null),!0):!1}catch(p){return console.error("Erro ao instalar o app:",p),!1}},updateApp:()=>{try{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(p=>{p&&p.waiting&&(p.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}catch(p){console.error("Erro ao atualizar o app:",p)}},dismissInstall:()=>{try{n(!1),t(null)}catch(p){console.error("Erro ao dispensar instalao:",p)}}}};function V3(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function im(...e){return t=>e.forEach(r=>V3(r,t))}function He(...e){return x.useCallback(im(...e),e)}var Ur=x.forwardRef((e,t)=>{const{children:r,...n}=e,s=x.Children.toArray(r),o=s.find(U3);if(o){const i=o.props.children,c=s.map(l=>l===o?x.Children.count(i)>1?x.Children.only(null):x.isValidElement(i)?i.props.children:null:l);return a.jsx(vv,{...n,ref:t,children:x.isValidElement(i)?x.cloneElement(i,void 0,c):null})}return a.jsx(vv,{...n,ref:t,children:r})});Ur.displayName="Slot";var vv=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const s=W3(r);return x.cloneElement(r,{...q3(n,r.props),ref:t?im(t,s):s})}return x.Children.count(r)>1?x.Children.only(null):null});vv.displayName="SlotClone";var Fy=({children:e})=>a.jsx(a.Fragment,{children:e});function U3(e){return x.isValidElement(e)&&e.type===Fy}function q3(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...c)=>{o(...c),s(...c)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function W3(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function CP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=CP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ke(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=CP(e))&&(n&&(n+=" "),n+=t);return n}const Qj=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ew=Ke,pc=(e,t)=>r=>{var n;if(t?.variants==null)return ew(e,r?.class,r?.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(d=>{const u=r?.[d],f=o?.[d];if(u===null)return null;const h=Qj(u)||Qj(f);return s[d][h]}),c=r&&Object.entries(r).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(v=>{let[m,g]=v;return Array.isArray(g)?g.includes({...o,...c}[m]):{...o,...c}[m]===g})?[...d,f,h]:d},[]);return ew(e,i,l,r?.class,r?.className)},zy="-",H3=e=>{const t=K3(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const c=i.split(zy);return c[0]===""&&c.length!==1&&c.shift(),PP(c,t)||G3(i)},getConflictingClassGroupIds:(i,c)=>{const l=r[i]||[];return c&&n[i]?[...l,...n[i]]:l}}},PP=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?PP(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(zy);return t.validators.find(({validator:i})=>i(o))?.classGroupId},tw=/^\[(.+)\]$/,G3=e=>{if(tw.test(e)){const t=tw.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},K3=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Z3(Object.entries(e.classGroups),r).forEach(([o,i])=>{xv(i,n,o,t)}),n},xv=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:rw(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(Y3(s)){xv(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{xv(i,rw(t,o),r,n)})})},rw=(e,t)=>{let r=e;return t.split(zy).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Y3=e=>e.isThemeGetter,Z3=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,c])=>[t+i,c])):o);return[r,s]}):e,X3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},AP="!",J3=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,i=c=>{const l=[];let d=0,u=0,f;for(let g=0;g<c.length;g++){let y=c[g];if(d===0){if(y===s&&(n||c.slice(g,g+o)===t)){l.push(c.slice(u,g)),u=g+o;continue}if(y==="/"){f=g;continue}}y==="["?d++:y==="]"&&d--}const h=l.length===0?c:c.substring(u),p=h.startsWith(AP),v=p?h.substring(1):h,m=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return r?c=>r({className:c,parseClassName:i}):i},Q3=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},eL=e=>({cache:X3(e.cacheSize),parseClassName:J3(e),...H3(e)}),tL=/\s+/,rL=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split(tL);let c="";for(let l=i.length-1;l>=0;l-=1){const d=i[l],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(d);let v=!!p,m=n(v?h.substring(0,p):h);if(!m){if(!v){c=d+(c.length>0?" "+c:c);continue}if(m=n(h),!m){c=d+(c.length>0?" "+c:c);continue}v=!1}const g=Q3(u).join(":"),y=f?g+AP:g,b=y+m;if(o.includes(b))continue;o.push(b);const w=s(m,v);for(let j=0;j<w.length;++j){const N=w[j];o.push(y+N)}c=d+(c.length>0?" "+c:c)}return c};function nL(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=kP(t))&&(n&&(n+=" "),n+=r);return n}const kP=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=kP(e[n]))&&(r&&(r+=" "),r+=t);return r};function aL(e,...t){let r,n,s,o=i;function i(l){const d=t.reduce((u,f)=>f(u),e());return r=eL(d),n=r.cache.get,s=r.cache.set,o=c,c(l)}function c(l){const d=n(l);if(d)return d;const u=rL(l,r);return s(l,u),u}return function(){return o(nL.apply(null,arguments))}}const Ot=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},EP=/^\[(?:([a-z-]+):)?(.+)\]$/i,sL=/^\d+\/\d+$/,oL=new Set(["px","full","screen"]),iL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,La=e=>ji(e)||oL.has(e)||sL.test(e),ms=e=>gc(e,"length",yL),ji=e=>!!e&&!Number.isNaN(Number(e)),ng=e=>gc(e,"number",ji),Jc=e=>!!e&&Number.isInteger(Number(e)),fL=e=>e.endsWith("%")&&ji(e.slice(0,-1)),Xe=e=>EP.test(e),ps=e=>iL.test(e),hL=new Set(["length","size","percentage"]),mL=e=>gc(e,hL,OP),pL=e=>gc(e,"position",OP),gL=new Set(["image","url"]),vL=e=>gc(e,gL,jL),xL=e=>gc(e,"",bL),Qc=()=>!0,gc=(e,t,r)=>{const n=EP.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},yL=e=>cL.test(e)&&!lL.test(e),OP=()=>!1,bL=e=>dL.test(e),jL=e=>uL.test(e),wL=()=>{const e=Ot("colors"),t=Ot("spacing"),r=Ot("blur"),n=Ot("brightness"),s=Ot("borderColor"),o=Ot("borderRadius"),i=Ot("borderSpacing"),c=Ot("borderWidth"),l=Ot("contrast"),d=Ot("grayscale"),u=Ot("hueRotate"),f=Ot("invert"),h=Ot("gap"),p=Ot("gradientColorStops"),v=Ot("gradientColorStopPositions"),m=Ot("inset"),g=Ot("margin"),y=Ot("opacity"),b=Ot("padding"),w=Ot("saturate"),j=Ot("scale"),N=Ot("sepia"),_=Ot("skew"),S=Ot("space"),C=Ot("translate"),k=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",Xe,t],P=()=>[Xe,t],O=()=>["",La,ms],M=()=>["auto",ji,Xe],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Xe],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[ji,Xe];return{cacheSize:500,separator:":",theme:{colors:[Qc],spacing:[La,ms],blur:["none","",ps,Xe],brightness:J(),borderColor:[e],borderRadius:["none","","full",ps,Xe],borderSpacing:P(),borderWidth:O(),contrast:J(),grayscale:U(),hueRotate:J(),invert:U(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[fL,ms],inset:A(),margin:A(),opacity:J(),padding:P(),saturate:J(),scale:J(),sepia:U(),skew:J(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),Xe]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jc,Xe]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Jc,Xe]}],"grid-cols":[{"grid-cols":[Qc]}],"col-start-end":[{col:["auto",{span:["full",Jc,Xe]},Xe]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Qc]}],"row-start-end":[{row:["auto",{span:[Jc,Xe]},Xe]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,t]}],"min-w":[{"min-w":[Xe,t,"min","max","fit"]}],"max-w":[{"max-w":[Xe,t,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[Xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ng]}],"font-family":[{font:[Qc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",ji,ng]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",La,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",La,ms]}],"underline-offset":[{"underline-offset":["auto",La,Xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),pL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vL]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...T(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:T()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...T()]}],"outline-offset":[{"outline-offset":[La,Xe]}],"outline-w":[{outline:[La,ms]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[La,ms]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ps,xL]}],"shadow-color":[{shadow:[Qc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ps,Xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Jc,Xe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[La,ms,ng]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},NL=aL(wL);function te(...e){return NL(Ke(e))}function Or(e){return typeof e=="string"?e:new Date(e).toISOString().split("T")[0]}function _L(e){if(e instanceof Date)return e;if(typeof e=="string"){const[t,r,n]=e.split("-").map(Number);return new Date(t,(r||1)-1,n||1)}return new Date(e)}function pi(e){const[t,r]=e.split(":").map(Number);return t*60+r}function TP(e,t,r,n){return e<n&&r<t}const Ei=pc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-responsive-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 btn-touch touch-action-manipulation",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:scale-95",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:scale-95",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:scale-95",ghost:"hover:bg-accent hover:text-accent-foreground active:scale-95",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 sm:h-10 px-4 py-2 text-base sm:text-sm",sm:"h-10 sm:h-9 rounded-md px-3 text-sm",lg:"h-12 sm:h-11 rounded-md px-8 text-base",icon:"h-11 w-11 sm:h-10 sm:w-10"}},defaultVariants:{variant:"default",size:"default"}}),B=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const i=n?Ur:"button";return a.jsx(i,{className:te(Ei({variant:t,size:r,className:e})),ref:o,...s})});B.displayName="Button";const F=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));F.displayName="Card";const ae=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("flex flex-col space-y-1.5 p-6",e),...t}));ae.displayName="CardHeader";const se=x.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:te("text-2xl font-semibold leading-none tracking-tight",e),...t}));se.displayName="CardTitle";const ke=x.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:te("text-sm text-muted-foreground",e),...t}));ke.displayName="CardDescription";const q=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("p-6 pt-0",e),...t}));q.displayName="CardContent";const SL=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("flex items-center p-6 pt-0",e),...t}));SL.displayName="CardFooter";const CL=pc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function pe({className:e,variant:t,...r}){return a.jsx("div",{className:te(CL({variant:t}),e),...r})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$P=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...c},l)=>x.createElement("svg",{ref:l,...AL,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$P("lucide",s),...c},[...i.map(([d,u])=>x.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(e,t)=>{const r=x.forwardRef(({className:n,...s},o)=>x.createElement(kL,{ref:o,iconNode:t,className:$P(`lucide-${PL(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=he("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=he("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=he("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=he("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=he("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=he("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=he("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=he("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=he("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=he("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=he("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=he("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=he("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=he("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=he("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=he("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=he("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=he("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=he("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=he("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=he("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=he("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=he("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=he("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=he("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=he("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=he("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=he("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=he("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=he("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=he("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=he("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=he("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=he("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=he("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=he("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=he("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=he("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=he("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=he("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=he("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=he("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=he("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),zP=({variant:e="banner",showDismiss:t=!0})=>{const{isInstallable:r,installApp:n,dismissInstall:s}=om(),{usuario:o}=Rt(),[i,c]=x.useState(!1),[l,d]=x.useState(!1);if(!r||l)return null;const u=async()=>{c(!0),await n()&&d(!0),c(!1)},f=()=>{d(!0),s()},h=o?.nome_personalizado_app||"Sistema do Salo";return e==="banner"?a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-primary text-primary-foreground p-3 shadow-lg",children:a.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_n,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["Instale o ",h]}),a.jsx("p",{className:"text-sm opacity-90",children:"Acesso rpido direto da tela inicial"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{onClick:u,disabled:i,variant:"secondary",size:"sm",children:i?"Instalando...":"Instalar"}),t&&a.jsx(B,{onClick:f,variant:"ghost",size:"sm",className:"text-primary-foreground hover:bg-primary-foreground/20",children:a.jsx(qt,{className:"h-4 w-4"})})]})]})}):e==="floating"?a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:a.jsxs(F,{className:"w-80 shadow-xl",children:[a.jsxs(ae,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-5 w-5 text-primary"}),a.jsx(se,{className:"text-lg",children:"Instalar App"})]}),t&&a.jsx(B,{onClick:f,variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(qt,{className:"h-4 w-4"})})]}),a.jsxs(ke,{children:["Instale o ",h," para acesso rpido"]})]}),a.jsxs(q,{className:"pt-0",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(jv,{className:"h-3 w-3"}),"Mobile"]}),a.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(sF,{className:"h-3 w-3"}),"Tablet"]}),a.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(sw,{className:"h-3 w-3"}),"Desktop"]})]}),a.jsx(B,{onClick:u,disabled:i,className:"w-full",children:i?"Instalando...":"Instalar Agora"})]})]})}):a.jsxs(F,{className:"border-primary/20 bg-primary/5",children:[a.jsx(ae,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx(_n,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-lg",children:["Instalar ",h]}),a.jsx(ke,{children:"Tenha acesso rpido direto da sua tela inicial"})]})]}),t&&a.jsx(B,{onClick:f,variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(qt,{className:"h-4 w-4"})})]})}),a.jsx(q,{className:"pt-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(jv,{className:"h-3 w-3"}),"Mobile"]}),a.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(sw,{className:"h-3 w-3"}),"Desktop"]})]}),a.jsx(B,{onClick:u,disabled:i,size:"sm",children:i?"Instalando...":"Instalar"})]})})]})},dF=({variant:e="floating",showDismiss:t=!0})=>{const{hasUpdate:r,updateApp:n}=om(),[s,o]=x.useState(!1),[i,c]=x.useState(!1);if(!r||i)return null;const l=()=>{o(!0),n()},d=()=>{c(!0)};return e==="banner"?a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-info text-info-foreground p-3 shadow-lg",children:a.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kr,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Nova verso disponvel"}),a.jsx("p",{className:"text-sm opacity-90",children:"Atualize para a verso mais recente"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{onClick:l,disabled:s,variant:"secondary",size:"sm",children:s?"Atualizando...":"Atualizar"}),t&&a.jsx(B,{onClick:d,variant:"ghost",size:"sm",className:"hover:bg-primary/20",children:a.jsx(qt,{className:"h-4 w-4"})})]})]})}):e==="floating"?a.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:a.jsxs(F,{className:"w-80 shadow-xl border-info/20 bg-info/5",children:[a.jsxs(ae,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kr,{className:"h-5 w-5 text-info"}),a.jsx(se,{className:"text-lg",children:"Atualizao"})]}),t&&a.jsx(B,{onClick:d,variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(qt,{className:"h-4 w-4"})})]}),a.jsx(ke,{children:"Nova verso disponvel com melhorias e correes"})]}),a.jsx(q,{className:"pt-0",children:a.jsx(B,{onClick:l,disabled:s,className:"w-full",children:s?"Atualizando...":"Atualizar Agora"})})]})}):a.jsxs(F,{className:"border-info/20 bg-info/5",children:[a.jsx(ae,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center",children:a.jsx(Kr,{className:"h-5 w-5 text-info"})}),a.jsxs("div",{children:[a.jsx(se,{className:"text-lg",children:"Nova Verso Disponvel"}),a.jsx(ke,{children:"Atualize para ter acesso s ltimas melhorias"})]})]}),t&&a.jsx(B,{onClick:d,variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(qt,{className:"h-4 w-4"})})]})}),a.jsx(q,{className:"pt-0",children:a.jsx("div",{className:"flex items-center justify-end",children:a.jsx(B,{onClick:l,disabled:s,size:"sm",children:s?"Atualizando...":"Atualizar"})})})]})},uF=({position:e="top",variant:t="badge"})=>{const{isOffline:r}=om(),[n,s]=x.useState(!1),[o,i]=x.useState(!1);return x.useEffect(()=>{if(o&&!r){s(!0);const c=setTimeout(()=>{s(!1)},3e3);return()=>clearTimeout(c)}i(r)},[r,o]),t==="banner"?r?a.jsx("div",{className:`fixed left-0 right-0 z-40 bg-warning text-warning-foreground p-2 ${e==="top"?"top-0":"bottom-0"}`,children:a.jsxs("div",{className:"container mx-auto flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(cw,{className:"h-4 w-4"}),"Voc est offline. Algumas funcionalidades podem estar limitadas."]})}):n?a.jsx("div",{className:`fixed left-0 right-0 z-40 bg-success text-success-foreground p-2 ${e==="top"?"top-0":"bottom-0"}`,children:a.jsxs("div",{className:"container mx-auto flex items-center justify-center gap-2 text-sm font-medium",children:[a.jsx(lw,{className:"h-4 w-4"}),"Conexo restaurada!"]})}):null:r?a.jsxs(pe,{variant:"destructive",className:"flex items-center gap-1",children:[a.jsx(cw,{className:"h-3 w-3"}),"Offline"]}):n?a.jsxs(pe,{className:"flex items-center gap-1 bg-success text-success-foreground",children:[a.jsx(lw,{className:"h-3 w-3"}),"Online"]}):null},fF=x.createContext(void 0),hF=({children:e,showInstallPrompt:t=!0,showUpdatePrompt:r=!0,showOfflineIndicator:n=!0})=>{const s=om();return a.jsxs(fF.Provider,{value:s,children:[e,t&&a.jsx(zP,{variant:"floating"}),r&&a.jsx(dF,{}),n&&a.jsx(uF,{variant:"banner"})]})},sg=768;function BP(){const[e,t]=x.useState(!1);return x.useEffect(()=>{const r=window.matchMedia(`(max-width: ${sg-1}px)`),n=()=>t(window.innerWidth<sg);return r.addEventListener("change",n),t(window.innerWidth<sg),()=>r.removeEventListener("change",n)},[]),e}const ue=x.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:te("flex h-11 sm:h-10 w-full rounded-md border border-input bg-background px-3 sm:px-4 py-2 text-base sm:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",e),ref:n,...r}));ue.displayName="Input";var mF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$e=mF.reduce((e,t)=>{const r=x.forwardRef((n,s)=>{const{asChild:o,...i}=n,c=o?Ur:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function VP(e,t){e&&Md.flushSync(()=>e.dispatchEvent(t))}var pF="Separator",dw="horizontal",gF=["horizontal","vertical"],UP=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=dw,...s}=e,o=vF(n)?n:dw,c=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx($e.div,{"data-orientation":o,...c,...s,ref:t})});UP.displayName=pF;function vF(e){return gF.includes(e)}var qP=UP;const Ha=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>a.jsx(qP,{ref:s,decorative:r,orientation:t,className:te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Ha.displayName=qP.displayName;function je(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),r===!1||!s.defaultPrevented)return t?.(s)}}function xF(e,t){const r=x.createContext(t),n=o=>{const{children:i,...c}=o,l=x.useMemo(()=>c,Object.values(c));return a.jsx(r.Provider,{value:l,children:i})};n.displayName=e+"Provider";function s(o){const i=x.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function ia(e,t=[]){let r=[];function n(o,i){const c=x.createContext(i),l=r.length;r=[...r,i];const d=f=>{const{scope:h,children:p,...v}=f,m=h?.[e]?.[l]||c,g=x.useMemo(()=>v,Object.values(v));return a.jsx(m.Provider,{value:g,children:p})};d.displayName=o+"Provider";function u(f,h){const p=h?.[e]?.[l]||c,v=x.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[d,u]}const s=()=>{const o=r.map(i=>x.createContext(i));return function(c){const l=c?.[e]||o;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,yF(s,...t)]}function yF(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...c,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var _r=globalThis?.document?x.useLayoutEffect:()=>{},bF=IC.useId||(()=>{}),jF=0;function Sn(e){const[t,r]=x.useState(bF());return _r(()=>{r(n=>n??String(jF++))},[e]),e||(t?`radix-${t}`:"")}function ir(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>t.current?.(...r),[])}function ka({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=wF({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:n,c=ir(r),l=x.useCallback(d=>{if(o){const f=typeof d=="function"?d(e):d;f!==e&&c(f)}else s(d)},[o,e,s,c]);return[i,l]}function wF({defaultProp:e,onChange:t}){const r=x.useState(e),[n]=r,s=x.useRef(n),o=ir(t);return x.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}function NF(e,t=globalThis?.document){const r=ir(e);x.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var _F="DismissableLayer",Nv="dismissableLayer.update",SF="dismissableLayer.pointerDownOutside",CF="dismissableLayer.focusOutside",uw,WP=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xc=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:c,...l}=e,d=x.useContext(WP),[u,f]=x.useState(null),h=u?.ownerDocument??globalThis?.document,[,p]=x.useState({}),v=He(t,S=>f(S)),m=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),b=u?m.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=kF(S=>{const C=S.target,k=[...d.branches].some($=>$.contains(C));!j||k||(s?.(S),i?.(S),S.defaultPrevented||c?.())},h),_=EF(S=>{const C=S.target;[...d.branches].some($=>$.contains(C))||(o?.(S),i?.(S),S.defaultPrevented||c?.())},h);return NF(S=>{b===d.layers.size-1&&(n?.(S),!S.defaultPrevented&&c&&(S.preventDefault(),c()))},h),x.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(uw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),fw(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=uw)}},[u,h,r,d]),x.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),fw())},[u,d]),x.useEffect(()=>{const S=()=>p({});return document.addEventListener(Nv,S),()=>document.removeEventListener(Nv,S)},[]),a.jsx($e.div,{...l,ref:v,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:je(e.onFocusCapture,_.onFocusCapture),onBlurCapture:je(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:je(e.onPointerDownCapture,N.onPointerDownCapture)})});xc.displayName=_F;var PF="DismissableLayerBranch",AF=x.forwardRef((e,t)=>{const r=x.useContext(WP),n=x.useRef(null),s=He(t,n);return x.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx($e.div,{...e,ref:s})});AF.displayName=PF;function kF(e,t=globalThis?.document){const r=ir(e),n=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let l=function(){HP(SF,r,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function EF(e,t=globalThis?.document){const r=ir(e),n=x.useRef(!1);return x.useEffect(()=>{const s=o=>{o.target&&!n.current&&HP(CF,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function fw(){const e=new CustomEvent(Nv);document.dispatchEvent(e)}function HP(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?VP(s,o):s.dispatchEvent(o)}var og="focusScope.autoFocusOnMount",ig="focusScope.autoFocusOnUnmount",hw={bubbles:!1,cancelable:!0},OF="FocusScope",Bd=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[c,l]=x.useState(null),d=ir(s),u=ir(o),f=x.useRef(null),h=He(t,m=>l(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let m=function(w){if(p.paused||!c)return;const j=w.target;c.contains(j)?f.current=j:xs(f.current,{select:!0})},g=function(w){if(p.paused||!c)return;const j=w.relatedTarget;j!==null&&(c.contains(j)||xs(f.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&xs(c)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const b=new MutationObserver(y);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),b.disconnect()}}},[n,c,p.paused]),x.useEffect(()=>{if(c){pw.add(p);const m=document.activeElement;if(!c.contains(m)){const y=new CustomEvent(og,hw);c.addEventListener(og,d),c.dispatchEvent(y),y.defaultPrevented||(TF(RF(GP(c)),{select:!0}),document.activeElement===m&&xs(c))}return()=>{c.removeEventListener(og,d),setTimeout(()=>{const y=new CustomEvent(ig,hw);c.addEventListener(ig,u),c.dispatchEvent(y),y.defaultPrevented||xs(m??document.body,{select:!0}),c.removeEventListener(ig,u),pw.remove(p)},0)}}},[c,d,u,p]);const v=x.useCallback(m=>{if(!r&&!n||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const b=m.currentTarget,[w,j]=$F(b);w&&j?!m.shiftKey&&y===j?(m.preventDefault(),r&&xs(w,{select:!0})):m.shiftKey&&y===w&&(m.preventDefault(),r&&xs(j,{select:!0})):y===b&&m.preventDefault()}},[r,n,p.paused]);return a.jsx($e.div,{tabIndex:-1,...i,ref:h,onKeyDown:v})});Bd.displayName=OF;function TF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(xs(n,{select:t}),document.activeElement!==r)return}function $F(e){const t=GP(e),r=mw(t,e),n=mw(t.reverse(),e);return[r,n]}function GP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function mw(e,t){for(const r of e)if(!MF(r,{upTo:t}))return r}function MF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function DF(e){return e instanceof HTMLInputElement&&"select"in e}function xs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&DF(e)&&t&&e.select()}}var pw=IF();function IF(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=gw(e,t),e.unshift(t)},remove(t){e=gw(e,t),e[0]?.resume()}}}function gw(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function RF(e){return e.filter(t=>t.tagName!=="A")}var LF="Portal",Vd=x.forwardRef((e,t)=>{const{container:r,...n}=e,[s,o]=x.useState(!1);_r(()=>o(!0),[]);const i=r||s&&globalThis?.document?.body;return i?RC.createPortal(a.jsx($e.div,{...n,ref:t}),i):null});Vd.displayName=LF;function FF(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var Ar=e=>{const{present:t,children:r}=e,n=zF(t),s=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),o=He(n.ref,BF(s));return typeof r=="function"||n.isPresent?x.cloneElement(s,{ref:o}):null};Ar.displayName="Presence";function zF(e){const[t,r]=x.useState(),n=x.useRef({}),s=x.useRef(e),o=x.useRef("none"),i=e?"mounted":"unmounted",[c,l]=FF(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=Pu(n.current);o.current=c==="mounted"?d:"none"},[c]),_r(()=>{const d=n.current,u=s.current;if(u!==e){const h=o.current,p=Pu(d);e?l("MOUNT"):p==="none"||d?.display==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),_r(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const m=Pu(n.current).includes(p.animationName);if(p.target===t&&m&&(l("ANIMATION_END"),!s.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=p=>{p.target===t&&(o.current=Pu(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function Pu(e){return e?.animationName||"none"}function BF(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var cg=0;function hm(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vw()),document.body.insertAdjacentElement("beforeend",e[1]??vw()),cg++,()=>{cg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cg--}},[])}function vw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ga=function(){return ga=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ga.apply(this,arguments)};function KP(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function VF(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var tf="right-scroll-bar-position",rf="width-before-scroll-bar",UF="with-scroll-bars-hidden",qF="--removed-body-scroll-bar-size";function lg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function WF(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var HF=typeof window<"u"?x.useLayoutEffect:x.useEffect,xw=new WeakMap;function GF(e,t){var r=WF(null,function(n){return e.forEach(function(s){return lg(s,n)})});return HF(function(){var n=xw.get(r);if(n){var s=new Set(n),o=new Set(e),i=r.current;s.forEach(function(c){o.has(c)||lg(c,null)}),o.forEach(function(c){s.has(c)||lg(c,i)})}xw.set(r,e)},[e]),r}function KF(e){return e}function YF(e,t){t===void 0&&(t=KF);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,n);return r.push(i),function(){r=r.filter(function(c){return c!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(c){return o(c)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var c=r;r=[],c.forEach(o),i=r}var l=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(l)};d(),r={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),r}}}};return s}function ZF(e){e===void 0&&(e={});var t=YF(null);return t.options=ga({async:!0,ssr:!1},e),t}var YP=function(e){var t=e.sideCar,r=KP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,ga({},r))};YP.isSideCarExport=!0;function XF(e,t){return e.useMedium(t),YP}var ZP=ZF(),dg=function(){},mm=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:dg,onWheelCapture:dg,onTouchMoveCapture:dg}),s=n[0],o=n[1],i=e.forwardProps,c=e.children,l=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,w=KP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,N=GF([r,t]),_=ga(ga({},w),s);return x.createElement(x.Fragment,null,u&&x.createElement(j,{sideCar:ZP,removeScrollBar:d,shards:f,noIsolation:p,inert:v,setCallbacks:o,allowPinchZoom:!!m,lockRef:r,gapMode:b}),i?x.cloneElement(x.Children.only(c),ga(ga({},_),{ref:N})):x.createElement(y,ga({},_,{className:l,ref:N}),c))});mm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mm.classNames={fullWidth:rf,zeroRight:tf};var JF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function QF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=JF();return t&&e.setAttribute("nonce",t),e}function e6(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function t6(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var r6=function(){var e=0,t=null;return{add:function(r){e==0&&(t=QF())&&(e6(t,r),t6(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},n6=function(){var e=r6();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},XP=function(){var e=n6(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},a6={left:0,top:0,right:0,gap:0},ug=function(e){return parseInt(e||"",10)||0},s6=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ug(r),ug(n),ug(s)]},o6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return a6;var t=s6(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},i6=XP(),wi="data-scroll-locked",c6=function(e,t,r,n){var s=e.left,o=e.top,i=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(UF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(wi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tf,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(rf,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(tf," .").concat(tf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(rf," .").concat(rf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(wi,`] {
    `).concat(qF,": ").concat(c,`px;
  }
`)},yw=function(){var e=parseInt(document.body.getAttribute(wi)||"0",10);return isFinite(e)?e:0},l6=function(){x.useEffect(function(){return document.body.setAttribute(wi,(yw()+1).toString()),function(){var e=yw()-1;e<=0?document.body.removeAttribute(wi):document.body.setAttribute(wi,e.toString())}},[])},d6=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;l6();var o=x.useMemo(function(){return o6(s)},[s]);return x.createElement(i6,{styles:c6(o,!t,s,r?"":"!important")})},_v=!1;if(typeof window<"u")try{var Au=Object.defineProperty({},"passive",{get:function(){return _v=!0,!0}});window.addEventListener("test",Au,Au),window.removeEventListener("test",Au,Au)}catch{_v=!1}var ai=_v?{passive:!1}:!1,u6=function(e){return e.tagName==="TEXTAREA"},JP=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!u6(e)&&r[t]==="visible")},f6=function(e){return JP(e,"overflowY")},h6=function(e){return JP(e,"overflowX")},bw=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=QP(e,n);if(s){var o=eA(e,n),i=o[1],c=o[2];if(i>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},m6=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},p6=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},QP=function(e,t){return e==="v"?f6(t):h6(t)},eA=function(e,t){return e==="v"?m6(t):p6(t)},g6=function(e,t){return e==="h"&&t==="rtl"?-1:1},v6=function(e,t,r,n,s){var o=g6(e,window.getComputedStyle(t).direction),i=o*n,c=r.target,l=t.contains(c),d=!1,u=i>0,f=0,h=0;do{var p=eA(e,c),v=p[0],m=p[1],g=p[2],y=m-g-o*v;(v||y)&&QP(e,c)&&(f+=y,h+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(d=!0),d},ku=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jw=function(e){return[e.deltaX,e.deltaY]},ww=function(e){return e&&"current"in e?e.current:e},x6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},y6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},b6=0,si=[];function j6(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),s=x.useState(b6++)[0],o=x.useState(XP)[0],i=x.useRef(e);x.useEffect(function(){i.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=VF([e.lockRef.current],(e.shards||[]).map(ww),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=x.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var y=ku(m),b=r.current,w="deltaX"in m?m.deltaX:b[0]-y[0],j="deltaY"in m?m.deltaY:b[1]-y[1],N,_=m.target,S=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in m&&S==="h"&&_.type==="range")return!1;var C=bw(S,_);if(!C)return!0;if(C?N=S:(N=S==="v"?"h":"v",C=bw(S,_)),!C)return!1;if(!n.current&&"changedTouches"in m&&(w||j)&&(n.current=N),!N)return!0;var k=n.current||N;return v6(k,g,m,k==="h"?w:j)},[]),l=x.useCallback(function(m){var g=m;if(!(!si.length||si[si.length-1]!==o)){var y="deltaY"in g?jw(g):ku(g),b=t.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&x6(N.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(i.current.shards||[]).map(ww).filter(Boolean).filter(function(N){return N.contains(g.target)}),j=w.length>0?c(g,w[0]):!i.current.noIsolation;j&&g.cancelable&&g.preventDefault()}}},[]),d=x.useCallback(function(m,g,y,b){var w={name:m,delta:g,target:y,should:b,shadowParent:w6(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),u=x.useCallback(function(m){r.current=ku(m),n.current=void 0},[]),f=x.useCallback(function(m){d(m.type,jw(m),m.target,c(m,e.lockRef.current))},[]),h=x.useCallback(function(m){d(m.type,ku(m),m.target,c(m,e.lockRef.current))},[]);x.useEffect(function(){return si.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ai),document.addEventListener("touchmove",l,ai),document.addEventListener("touchstart",u,ai),function(){si=si.filter(function(m){return m!==o}),document.removeEventListener("wheel",l,ai),document.removeEventListener("touchmove",l,ai),document.removeEventListener("touchstart",u,ai)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(o,{styles:y6(s)}):null,p?x.createElement(d6,{gapMode:e.gapMode}):null)}function w6(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const N6=XF(ZP,j6);var Ud=x.forwardRef(function(e,t){return x.createElement(mm,ga({},e,{ref:t,sideCar:N6}))});Ud.classNames=mm.classNames;var _6=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},oi=new WeakMap,Eu=new WeakMap,Ou={},fg=0,tA=function(e){return e&&(e.host||tA(e.parentNode))},S6=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=tA(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},C6=function(e,t,r,n){var s=S6(t,Array.isArray(e)?e:[e]);Ou[r]||(Ou[r]=new WeakMap);var o=Ou[r],i=[],c=new Set,l=new Set(s),d=function(f){!f||c.has(f)||(c.add(f),d(f.parentNode))};s.forEach(d);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(c.has(h))u(h);else try{var p=h.getAttribute(n),v=p!==null&&p!=="false",m=(oi.get(h)||0)+1,g=(o.get(h)||0)+1;oi.set(h,m),o.set(h,g),i.push(h),m===1&&v&&Eu.set(h,!0),g===1&&h.setAttribute(r,"true"),v||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(t),c.clear(),fg++,function(){i.forEach(function(f){var h=oi.get(f)-1,p=o.get(f)-1;oi.set(f,h),o.set(f,p),h||(Eu.has(f)||f.removeAttribute(n),Eu.delete(f)),p||f.removeAttribute(r)}),fg--,fg||(oi=new WeakMap,oi=new WeakMap,Eu=new WeakMap,Ou={})}},pm=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=_6(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),C6(n,s,r,"aria-hidden")):function(){return null}},Uy="Dialog",[rA,qy]=ia(Uy),[P6,ca]=rA(Uy),Wy=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,c=x.useRef(null),l=x.useRef(null),[d=!1,u]=ka({prop:n,defaultProp:s,onChange:o});return a.jsx(P6,{scope:t,triggerRef:c,contentRef:l,contentId:Sn(),titleId:Sn(),descriptionId:Sn(),open:d,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(f=>!f),[u]),modal:i,children:r})};Wy.displayName=Uy;var nA="DialogTrigger",Hy=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ca(nA,r),o=He(t,s.triggerRef);return a.jsx($e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tb(s.open),...n,ref:o,onClick:je(e.onClick,s.onOpenToggle)})});Hy.displayName=nA;var Gy="DialogPortal",[A6,aA]=rA(Gy,{forceMount:void 0}),Ky=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=ca(Gy,t);return a.jsx(A6,{scope:t,forceMount:r,children:x.Children.map(n,i=>a.jsx(Ar,{present:r||o.open,children:a.jsx(Vd,{asChild:!0,container:s,children:i})}))})};Ky.displayName=Gy;var Sf="DialogOverlay",Yy=x.forwardRef((e,t)=>{const r=aA(Sf,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=ca(Sf,e.__scopeDialog);return o.modal?a.jsx(Ar,{present:n||o.open,children:a.jsx(k6,{...s,ref:t})}):null});Yy.displayName=Sf;var k6=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ca(Sf,r);return a.jsx(Ud,{as:Ur,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx($e.div,{"data-state":tb(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Po="DialogContent",Zy=x.forwardRef((e,t)=>{const r=aA(Po,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=ca(Po,e.__scopeDialog);return a.jsx(Ar,{present:n||o.open,children:o.modal?a.jsx(E6,{...s,ref:t}):a.jsx(O6,{...s,ref:t})})});Zy.displayName=Po;var E6=x.forwardRef((e,t)=>{const r=ca(Po,e.__scopeDialog),n=x.useRef(null),s=He(t,r.contentRef,n);return x.useEffect(()=>{const o=n.current;if(o)return pm(o)},[]),a.jsx(sA,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,o=>{o.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&o.preventDefault()}),onFocusOutside:je(e.onFocusOutside,o=>o.preventDefault())})}),O6=x.forwardRef((e,t)=>{const r=ca(Po,e.__scopeDialog),n=x.useRef(!1),s=x.useRef(!1);return a.jsx(sA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;r.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),sA=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,c=ca(Po,r),l=x.useRef(null),d=He(t,l);return hm(),a.jsxs(a.Fragment,{children:[a.jsx(Bd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(xc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":tb(c.open),...i,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(T6,{titleId:c.titleId}),a.jsx(M6,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Xy="DialogTitle",Jy=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ca(Xy,r);return a.jsx($e.h2,{id:s.titleId,...n,ref:t})});Jy.displayName=Xy;var oA="DialogDescription",Qy=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ca(oA,r);return a.jsx($e.p,{id:s.descriptionId,...n,ref:t})});Qy.displayName=oA;var iA="DialogClose",eb=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ca(iA,r);return a.jsx($e.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>s.onOpenChange(!1))})});eb.displayName=iA;function tb(e){return e?"open":"closed"}var cA="DialogTitleWarning",[lA,dA]=xF(cA,{contentName:Po,titleName:Xy,docsSlug:"dialog"}),T6=({titleId:e})=>{const t=dA(cA),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},$6="DialogDescriptionWarning",M6=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dA($6).contentName}}.`;return x.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},gm=Wy,vm=Hy,xm=Ky,yc=Yy,bc=Zy,jc=Jy,wc=Qy,qd=eb;const D6=Object.freeze(Object.defineProperty({__proto__:null,Close:qd,Content:bc,Description:wc,Dialog:Wy,DialogClose:eb,DialogContent:Zy,DialogDescription:Qy,DialogOverlay:Yy,DialogPortal:Ky,DialogTitle:Jy,DialogTrigger:Hy,Overlay:yc,Portal:xm,Root:gm,Title:jc,Trigger:vm,WarningProvider:lA,createDialogScope:qy},Symbol.toStringTag,{value:"Module"})),uA=gm,I6=vm,R6=xm,fA=x.forwardRef(({className:e,...t},r)=>a.jsx(yc,{className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));fA.displayName=yc.displayName;const L6=pc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),rb=x.forwardRef(({side:e="right",className:t,children:r,...n},s)=>a.jsxs(R6,{children:[a.jsx(fA,{}),a.jsxs(bc,{ref:s,className:te(L6({side:e}),t),...n,children:[r,a.jsxs(qd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(qt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rb.displayName=bc.displayName;const hA=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...t});hA.displayName="SheetHeader";const mA=x.forwardRef(({className:e,...t},r)=>a.jsx(jc,{ref:r,className:te("text-lg font-semibold text-foreground",e),...t}));mA.displayName=jc.displayName;const F6=x.forwardRef(({className:e,...t},r)=>a.jsx(wc,{ref:r,className:te("text-sm text-muted-foreground",e),...t}));F6.displayName=wc.displayName;function Nw({className:e,...t}){return a.jsx("div",{className:te("animate-pulse rounded-md bg-muted",e),...t})}const z6=["top","right","bottom","left"],Os=Math.min,cn=Math.max,Cf=Math.round,Tu=Math.floor,Ts=e=>({x:e,y:e}),B6={left:"right",right:"left",bottom:"top",top:"bottom"},V6={start:"end",end:"start"};function Sv(e,t,r){return cn(e,Os(t,r))}function ns(e,t){return typeof e=="function"?e(t):e}function as(e){return e.split("-")[0]}function Nc(e){return e.split("-")[1]}function nb(e){return e==="x"?"y":"x"}function ab(e){return e==="y"?"height":"width"}function $s(e){return["top","bottom"].includes(as(e))?"y":"x"}function sb(e){return nb($s(e))}function U6(e,t,r){r===void 0&&(r=!1);const n=Nc(e),s=sb(e),o=ab(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Pf(i)),[i,Pf(i)]}function q6(e){const t=Pf(e);return[Cv(e),t,Cv(t)]}function Cv(e){return e.replace(/start|end/g,t=>V6[t])}function W6(e,t,r){const n=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?o:i;default:return[]}}function H6(e,t,r,n){const s=Nc(e);let o=W6(as(e),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(Cv)))),o}function Pf(e){return e.replace(/left|right|bottom|top/g,t=>B6[t])}function G6(e){return{top:0,right:0,bottom:0,left:0,...e}}function pA(e){return typeof e!="number"?G6(e):{top:e,right:e,bottom:e,left:e}}function Af(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function _w(e,t,r){let{reference:n,floating:s}=e;const o=$s(t),i=sb(t),c=ab(i),l=as(t),d=o==="y",u=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[c]/2-s[c]/2;let p;switch(l){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-s.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Nc(t)){case"start":p[i]-=h*(r&&d?-1:1);break;case"end":p[i]+=h*(r&&d?-1:1);break}return p}const K6=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,c=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=_w(d,n,l),h=n,p={},v=0;for(let m=0;m<c.length;m++){const{name:g,fn:y}=c[m],{x:b,y:w,data:j,reset:N}=await y({x:u,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});u=b??u,f=w??f,p={...p,[g]:{...p[g],...j}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(d=N.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:u,y:f}=_w(d,h,l)),m=-1)}return{x:u,y:f,placement:h,strategy:s,middlewareData:p}};async function Vl(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:i,elements:c,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=ns(t,e),v=pA(p),g=c[h?f==="floating"?"reference":"floating":f],y=Af(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(g)))==null||r?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:d,rootBoundary:u,strategy:l})),b=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),j=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},N=Af(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-N.top+v.top)/j.y,bottom:(N.bottom-y.bottom+v.bottom)/j.y,left:(y.left-N.left+v.left)/j.x,right:(N.right-y.right+v.right)/j.x}}const Y6=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:i,elements:c,middlewareData:l}=t,{element:d,padding:u=0}=ns(e,t)||{};if(d==null)return{};const f=pA(u),h={x:r,y:n},p=sb(s),v=ab(p),m=await i.getDimensions(d),g=p==="y",y=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",j=o.reference[v]+o.reference[p]-h[p]-o.floating[v],N=h[p]-o.reference[p],_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let S=_?_[w]:0;(!S||!await(i.isElement==null?void 0:i.isElement(_)))&&(S=c.floating[w]||o.floating[v]);const C=j/2-N/2,k=S/2-m[v]/2-1,$=Os(f[y],k),A=Os(f[b],k),P=$,O=S-m[v]-A,M=S/2-m[v]/2+C,R=Sv(P,M,O),T=!l.arrow&&Nc(s)!=null&&M!==R&&o.reference[v]/2-(M<P?$:A)-m[v]/2<0,D=T?M<P?M-P:M-O:0;return{[p]:h[p]+D,data:{[p]:R,centerOffset:M-R-D,...T&&{alignmentOffset:D}},reset:T}}}),Z6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:c,platform:l,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...g}=ns(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=as(s),b=$s(c),w=as(c)===c,j=await(l.isRTL==null?void 0:l.isRTL(d.floating)),N=h||(w||!m?[Pf(c)]:q6(c)),_=v!=="none";!h&&_&&N.push(...H6(c,m,v,j));const S=[c,...N],C=await Vl(t,g),k=[];let $=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&k.push(C[y]),f){const M=U6(s,i,j);k.push(C[M[0]],C[M[1]])}if($=[...$,{placement:s,overflows:k}],!k.every(M=>M<=0)){var A,P;const M=(((A=o.flip)==null?void 0:A.index)||0)+1,R=S[M];if(R)return{data:{index:M,overflows:$},reset:{placement:R}};let T=(P=$.filter(D=>D.overflows[0]<=0).sort((D,I)=>D.overflows[1]-I.overflows[1])[0])==null?void 0:P.placement;if(!T)switch(p){case"bestFit":{var O;const D=(O=$.filter(I=>{if(_){const U=$s(I.placement);return U===b||U==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(U=>U>0).reduce((U,oe)=>U+oe,0)]).sort((I,U)=>I[1]-U[1])[0])==null?void 0:O[0];D&&(T=D);break}case"initialPlacement":T=c;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function Sw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Cw(e){return z6.some(t=>e[t]>=0)}const X6=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=ns(e,t);switch(n){case"referenceHidden":{const o=await Vl(t,{...s,elementContext:"reference"}),i=Sw(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Cw(i)}}}case"escaped":{const o=await Vl(t,{...s,altBoundary:!0}),i=Sw(o,r.floating);return{data:{escapedOffsets:i,escaped:Cw(i)}}}default:return{}}}}};async function J6(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=as(r),c=Nc(r),l=$s(r)==="y",d=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,f=ns(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof v=="number"&&(p=c==="end"?v*-1:v),l?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const Q6=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:i,middlewareData:c}=t,l=await J6(t,e);return i===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},ez=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:c={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...l}=ns(e,t),d={x:r,y:n},u=await Vl(t,l),f=$s(as(s)),h=nb(f);let p=d[h],v=d[f];if(o){const g=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=p+u[g],w=p-u[y];p=Sv(b,p,w)}if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=v+u[g],w=v-u[y];v=Sv(b,v,w)}const m=c.fn({...t,[h]:p,[f]:v});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:o,[f]:i}}}}}},tz=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=t,{offset:c=0,mainAxis:l=!0,crossAxis:d=!0}=ns(e,t),u={x:r,y:n},f=$s(s),h=nb(f);let p=u[h],v=u[f];const m=ns(c,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",j=o.reference[h]-o.floating[w]+g.mainAxis,N=o.reference[h]+o.reference[w]-g.mainAxis;p<j?p=j:p>N&&(p=N)}if(d){var y,b;const w=h==="y"?"width":"height",j=["top","left"].includes(as(s)),N=o.reference[f]-o.floating[w]+(j&&((y=i.offset)==null?void 0:y[f])||0)+(j?0:g.crossAxis),_=o.reference[f]+o.reference[w]+(j?0:((b=i.offset)==null?void 0:b[f])||0)-(j?g.crossAxis:0);v<N?v=N:v>_&&(v=_)}return{[h]:p,[f]:v}}}},rz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:i,elements:c}=t,{apply:l=()=>{},...d}=ns(e,t),u=await Vl(t,d),f=as(s),h=Nc(s),p=$s(s)==="y",{width:v,height:m}=o.floating;let g,y;f==="top"||f==="bottom"?(g=f,y=h===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(y=f,g=h==="end"?"top":"bottom");const b=m-u.top-u.bottom,w=v-u.left-u.right,j=Os(m-u[g],b),N=Os(v-u[y],w),_=!t.middlewareData.shift;let S=j,C=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=b),_&&!h){const $=cn(u.left,0),A=cn(u.right,0),P=cn(u.top,0),O=cn(u.bottom,0);p?C=v-2*($!==0||A!==0?$+A:cn(u.left,u.right)):S=m-2*(P!==0||O!==0?P+O:cn(u.top,u.bottom))}await l({...t,availableWidth:C,availableHeight:S});const k=await i.getDimensions(c.floating);return v!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function ym(){return typeof window<"u"}function _c(e){return gA(e)?(e.nodeName||"").toLowerCase():"#document"}function un(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ta(e){var t;return(t=(gA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gA(e){return ym()?e instanceof Node||e instanceof un(e).Node:!1}function ea(e){return ym()?e instanceof Element||e instanceof un(e).Element:!1}function Ea(e){return ym()?e instanceof HTMLElement||e instanceof un(e).HTMLElement:!1}function Pw(e){return!ym()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof un(e).ShadowRoot}function Wd(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=ta(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function nz(e){return["table","td","th"].includes(_c(e))}function bm(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ob(e){const t=ib(),r=ea(e)?ta(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function az(e){let t=Ms(e);for(;Ea(t)&&!Oi(t);){if(ob(t))return t;if(bm(t))return null;t=Ms(t)}return null}function ib(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Oi(e){return["html","body","#document"].includes(_c(e))}function ta(e){return un(e).getComputedStyle(e)}function jm(e){return ea(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ms(e){if(_c(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Pw(e)&&e.host||Ta(e);return Pw(t)?t.host:t}function vA(e){const t=Ms(e);return Oi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ea(t)&&Wd(t)?t:vA(t)}function Ul(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=vA(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),i=un(s);if(o){const c=Pv(i);return t.concat(i,i.visualViewport||[],Wd(s)?s:[],c&&r?Ul(c):[])}return t.concat(s,Ul(s,[],r))}function Pv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xA(e){const t=ta(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Ea(e),o=s?e.offsetWidth:r,i=s?e.offsetHeight:n,c=Cf(r)!==o||Cf(n)!==i;return c&&(r=o,n=i),{width:r,height:n,$:c}}function cb(e){return ea(e)?e:e.contextElement}function Ni(e){const t=cb(e);if(!Ea(t))return Ts(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=xA(t);let i=(o?Cf(r.width):r.width)/n,c=(o?Cf(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const sz=Ts(0);function yA(e){const t=un(e);return!ib()||!t.visualViewport?sz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oz(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==un(e)?!1:t}function Ao(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=cb(e);let i=Ts(1);t&&(n?ea(n)&&(i=Ni(n)):i=Ni(e));const c=oz(o,r,n)?yA(o):Ts(0);let l=(s.left+c.x)/i.x,d=(s.top+c.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const h=un(o),p=n&&ea(n)?un(n):n;let v=h,m=Pv(v);for(;m&&n&&p!==v;){const g=Ni(m),y=m.getBoundingClientRect(),b=ta(m),w=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,j=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,d*=g.y,u*=g.x,f*=g.y,l+=w,d+=j,v=un(m),m=Pv(v)}}return Af({width:u,height:f,x:l,y:d})}function iz(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",i=Ta(n),c=t?bm(t.floating):!1;if(n===i||c&&o)return r;let l={scrollLeft:0,scrollTop:0},d=Ts(1);const u=Ts(0),f=Ea(n);if((f||!f&&!o)&&((_c(n)!=="body"||Wd(i))&&(l=jm(n)),Ea(n))){const h=Ao(n);d=Ni(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-l.scrollLeft*d.x+u.x,y:r.y*d.y-l.scrollTop*d.y+u.y}}function cz(e){return Array.from(e.getClientRects())}function Av(e,t){const r=jm(e).scrollLeft;return t?t.left+r:Ao(Ta(e)).left+r}function lz(e){const t=Ta(e),r=jm(e),n=e.ownerDocument.body,s=cn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=cn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Av(e);const c=-r.scrollTop;return ta(n).direction==="rtl"&&(i+=cn(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:c}}function dz(e,t){const r=un(e),n=Ta(e),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,c=0,l=0;if(s){o=s.width,i=s.height;const d=ib();(!d||d&&t==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:c,y:l}}function uz(e,t){const r=Ao(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=Ea(e)?Ni(e):Ts(1),i=e.clientWidth*o.x,c=e.clientHeight*o.y,l=s*o.x,d=n*o.y;return{width:i,height:c,x:l,y:d}}function Aw(e,t,r){let n;if(t==="viewport")n=dz(e,r);else if(t==="document")n=lz(Ta(e));else if(ea(t))n=uz(t,r);else{const s=yA(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Af(n)}function bA(e,t){const r=Ms(e);return r===t||!ea(r)||Oi(r)?!1:ta(r).position==="fixed"||bA(r,t)}function fz(e,t){const r=t.get(e);if(r)return r;let n=Ul(e,[],!1).filter(c=>ea(c)&&_c(c)!=="body"),s=null;const o=ta(e).position==="fixed";let i=o?Ms(e):e;for(;ea(i)&&!Oi(i);){const c=ta(i),l=ob(i);!l&&c.position==="fixed"&&(s=null),(o?!l&&!s:!l&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Wd(i)&&!l&&bA(e,i))?n=n.filter(u=>u!==i):s=c,i=Ms(i)}return t.set(e,n),n}function hz(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?bm(t)?[]:fz(t,this._c):[].concat(r),n],c=i[0],l=i.reduce((d,u)=>{const f=Aw(t,u,s);return d.top=cn(f.top,d.top),d.right=Os(f.right,d.right),d.bottom=Os(f.bottom,d.bottom),d.left=cn(f.left,d.left),d},Aw(t,c,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mz(e){const{width:t,height:r}=xA(e);return{width:t,height:r}}function pz(e,t,r){const n=Ea(t),s=Ta(t),o=r==="fixed",i=Ao(e,!0,o,t);let c={scrollLeft:0,scrollTop:0};const l=Ts(0);if(n||!n&&!o)if((_c(t)!=="body"||Wd(s))&&(c=jm(t)),n){const p=Ao(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&(l.x=Av(s));let d=0,u=0;if(s&&!n&&!o){const p=s.getBoundingClientRect();u=p.top+c.scrollTop,d=p.left+c.scrollLeft-Av(s,p)}const f=i.left+c.scrollLeft-l.x-d,h=i.top+c.scrollTop-l.y-u;return{x:f,y:h,width:i.width,height:i.height}}function hg(e){return ta(e).position==="static"}function kw(e,t){if(!Ea(e)||ta(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ta(e)===r&&(r=r.ownerDocument.body),r}function jA(e,t){const r=un(e);if(bm(e))return r;if(!Ea(e)){let s=Ms(e);for(;s&&!Oi(s);){if(ea(s)&&!hg(s))return s;s=Ms(s)}return r}let n=kw(e,t);for(;n&&nz(n)&&hg(n);)n=kw(n,t);return n&&Oi(n)&&hg(n)&&!ob(n)?r:n||az(e)||r}const gz=async function(e){const t=this.getOffsetParent||jA,r=this.getDimensions,n=await r(e.floating);return{reference:pz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function vz(e){return ta(e).direction==="rtl"}const xz={convertOffsetParentRelativeRectToViewportRelativeRect:iz,getDocumentElement:Ta,getClippingRect:hz,getOffsetParent:jA,getElementRects:gz,getClientRects:cz,getDimensions:mz,getScale:Ni,isElement:ea,isRTL:vz};function yz(e,t){let r=null,n;const s=Ta(e);function o(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),o();const{left:d,top:u,width:f,height:h}=e.getBoundingClientRect();if(c||t(),!f||!h)return;const p=Tu(u),v=Tu(s.clientWidth-(d+f)),m=Tu(s.clientHeight-(u+h)),g=Tu(d),b={rootMargin:-p+"px "+-v+"px "+-m+"px "+-g+"px",threshold:cn(0,Os(1,l))||1};let w=!0;function j(N){const _=N[0].intersectionRatio;if(_!==l){if(!w)return i();_?i(!1,_):n=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(j,{...b,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,b)}r.observe(e)}return i(!0),o}function bz(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,d=cb(e),u=s||o?[...d?Ul(d):[],...Ul(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const f=d&&c?yz(d,r):null;let h=-1,p=null;i&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!l&&p.observe(d),p.observe(t));let v,m=l?Ao(e):null;l&&g();function g(){const y=Ao(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&r(),m=y,v=requestAnimationFrame(g)}return r(),()=>{var y;u.forEach(b=>{s&&b.removeEventListener("scroll",r),o&&b.removeEventListener("resize",r)}),f?.(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const jz=Q6,wz=ez,Nz=Z6,_z=rz,Sz=X6,Ew=Y6,Cz=tz,Pz=(e,t,r)=>{const n=new Map,s={platform:xz,...r},o={...s.platform,_c:n};return K6(e,t,{...s,platform:o})};var nf=typeof document<"u"?x.useLayoutEffect:x.useEffect;function kf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!kf(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!kf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function wA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ow(e,t){const r=wA(e);return Math.round(t*r)/r}function mg(e){const t=x.useRef(e);return nf(()=>{t.current=e}),t}function Az(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:c=!0,whileElementsMounted:l,open:d}=e,[u,f]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(n);kf(h,n)||p(n);const[v,m]=x.useState(null),[g,y]=x.useState(null),b=x.useCallback(I=>{I!==_.current&&(_.current=I,m(I))},[]),w=x.useCallback(I=>{I!==S.current&&(S.current=I,y(I))},[]),j=o||v,N=i||g,_=x.useRef(null),S=x.useRef(null),C=x.useRef(u),k=l!=null,$=mg(l),A=mg(s),P=mg(d),O=x.useCallback(()=>{if(!_.current||!S.current)return;const I={placement:t,strategy:r,middleware:h};A.current&&(I.platform=A.current),Pz(_.current,S.current,I).then(U=>{const oe={...U,isPositioned:P.current!==!1};M.current&&!kf(C.current,oe)&&(C.current=oe,Md.flushSync(()=>{f(oe)}))})},[h,t,r,A,P]);nf(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[d]);const M=x.useRef(!1);nf(()=>(M.current=!0,()=>{M.current=!1}),[]),nf(()=>{if(j&&(_.current=j),N&&(S.current=N),j&&N){if($.current)return $.current(j,N,O);O()}},[j,N,O,$,k]);const R=x.useMemo(()=>({reference:_,floating:S,setReference:b,setFloating:w}),[b,w]),T=x.useMemo(()=>({reference:j,floating:N}),[j,N]),D=x.useMemo(()=>{const I={position:r,left:0,top:0};if(!T.floating)return I;const U=Ow(T.floating,u.x),oe=Ow(T.floating,u.y);return c?{...I,transform:"translate("+U+"px, "+oe+"px)",...wA(T.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:oe}},[r,c,T.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:O,refs:R,elements:T,floatingStyles:D}),[u,O,R,T,D])}const kz=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Ew({element:n.current,padding:s}).fn(r):{}:n?Ew({element:n,padding:s}).fn(r):{}}}},Ez=(e,t)=>({...jz(e),options:[e,t]}),Oz=(e,t)=>({...wz(e),options:[e,t]}),Tz=(e,t)=>({...Cz(e),options:[e,t]}),$z=(e,t)=>({...Nz(e),options:[e,t]}),Mz=(e,t)=>({..._z(e),options:[e,t]}),Dz=(e,t)=>({...Sz(e),options:[e,t]}),Iz=(e,t)=>({...kz(e),options:[e,t]});var Rz="Arrow",NA=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return a.jsx($e.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});NA.displayName=Rz;var Lz=NA;function Fz(e,t=[]){let r=[];function n(o,i){const c=x.createContext(i),l=r.length;r=[...r,i];function d(f){const{scope:h,children:p,...v}=f,m=h?.[e][l]||c,g=x.useMemo(()=>v,Object.values(v));return a.jsx(m.Provider,{value:g,children:p})}function u(f,h){const p=h?.[e][l]||c,v=x.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=r.map(i=>x.createContext(i));return function(c){const l=c?.[e]||o;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,zz(s,...t)]}function zz(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...c,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function lb(e){const[t,r]=x.useState(void 0);return _r(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,c;if("borderBoxSize"in o){const l=o.borderBoxSize,d=Array.isArray(l)?l[0]:l;i=d.inlineSize,c=d.blockSize}else i=e.offsetWidth,c=e.offsetHeight;r({width:i,height:c})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var db="Popper",[_A,Vs]=Fz(db),[Bz,SA]=_A(db),CA=e=>{const{__scopePopper:t,children:r}=e,[n,s]=x.useState(null);return a.jsx(Bz,{scope:t,anchor:n,onAnchorChange:s,children:r})};CA.displayName=db;var PA="PopperAnchor",AA=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=SA(PA,r),i=x.useRef(null),c=He(t,i);return x.useEffect(()=>{o.onAnchorChange(n?.current||i.current)}),n?null:a.jsx($e.div,{...s,ref:c})});AA.displayName=PA;var ub="PopperContent",[Vz,Uz]=_A(ub),kA=x.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=e,g=SA(ub,r),[y,b]=x.useState(null),w=He(t,Y=>b(Y)),[j,N]=x.useState(null),_=lb(j),S=_?.width??0,C=_?.height??0,k=n+(o!=="center"?"-"+o:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(d)?d:[d],P=A.length>0,O={padding:$,boundary:A.filter(Wz),altBoundary:P},{refs:M,floatingStyles:R,placement:T,isPositioned:D,middlewareData:I}=Az({strategy:"fixed",placement:k,whileElementsMounted:(...Y)=>bz(...Y,{animationFrame:p==="always"}),elements:{reference:g.anchor},middleware:[Ez({mainAxis:s+C,alignmentAxis:i}),l&&Oz({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Tz():void 0,...O}),l&&$z({...O}),Mz({...O,apply:({elements:Y,rects:Q,availableWidth:Z,availableHeight:ce})=>{const{width:fe,height:X}=Q.reference,De=Y.floating.style;De.setProperty("--radix-popper-available-width",`${Z}px`),De.setProperty("--radix-popper-available-height",`${ce}px`),De.setProperty("--radix-popper-anchor-width",`${fe}px`),De.setProperty("--radix-popper-anchor-height",`${X}px`)}}),j&&Iz({element:j,padding:c}),Hz({arrowWidth:S,arrowHeight:C}),h&&Dz({strategy:"referenceHidden",...O})]}),[U,oe]=TA(T),J=ir(v);_r(()=>{D&&J?.()},[D,J]);const ie=I.arrow?.x,me=I.arrow?.y,de=I.arrow?.centerOffset!==0,[H,L]=x.useState();return _r(()=>{y&&L(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:D?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(Vz,{scope:r,placedSide:U,onArrowChange:N,arrowX:ie,arrowY:me,shouldHideArrow:de,children:a.jsx($e.div,{"data-side":U,"data-align":oe,...m,ref:w,style:{...m.style,animation:D?void 0:"none"}})})})});kA.displayName=ub;var EA="PopperArrow",qz={top:"bottom",right:"left",bottom:"top",left:"right"},OA=x.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=Uz(EA,n),i=qz[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(Lz,{...s,ref:r,style:{...s.style,display:"block"}})})});OA.displayName=EA;function Wz(e){return e!==null}var Hz=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,c=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[d,u]=TA(r),f={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+c/2,p=(s.arrow?.y??0)+l/2;let v="",m="";return d==="bottom"?(v=i?f:`${h}px`,m=`${-l}px`):d==="top"?(v=i?f:`${h}px`,m=`${n.floating.height+l}px`):d==="right"?(v=`${-l}px`,m=i?f:`${p}px`):d==="left"&&(v=`${n.floating.width+l}px`,m=i?f:`${p}px`),{data:{x:v,y:m}}}});function TA(e){const[t,r="center"]=e.split("-");return[t,r]}var wm=CA,Hd=AA,Nm=kA,_m=OA,Gz="VisuallyHidden",fb=x.forwardRef((e,t)=>a.jsx($e.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));fb.displayName=Gz;var Kz=fb,[Sm]=ia("Tooltip",[Vs]),Cm=Vs(),Yz="TooltipProvider",kv="tooltip.open",[R1e,hb]=Sm(Yz),Pm="Tooltip",[Zz,Am]=Sm(Pm),$A=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:i,delayDuration:c}=e,l=hb(Pm,e.__scopeTooltip),d=Cm(t),[u,f]=x.useState(null),h=Sn(),p=x.useRef(0),v=i??l.disableHoverableContent,m=c??l.delayDuration,g=x.useRef(!1),[y=!1,b]=ka({prop:n,defaultProp:s,onChange:S=>{S?(l.onOpen(),document.dispatchEvent(new CustomEvent(kv))):l.onClose(),o?.(S)}}),w=x.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),j=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,b(!0)},[b]),N=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),_=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,b(!0),p.current=0},m)},[m,b]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),a.jsx(wm,{...d,children:a.jsx(Zz,{scope:t,contentId:h,open:y,stateAttribute:w,trigger:u,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayed?_():j()},[l.isOpenDelayed,_,j]),onTriggerLeave:x.useCallback(()=>{v?N():(window.clearTimeout(p.current),p.current=0)},[N,v]),onOpen:j,onClose:N,disableHoverableContent:v,children:r})})};$A.displayName=Pm;var Ev="TooltipTrigger",MA=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Am(Ev,r),o=hb(Ev,r),i=Cm(r),c=x.useRef(null),l=He(t,c,s.onTriggerChange),d=x.useRef(!1),u=x.useRef(!1),f=x.useCallback(()=>d.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Hd,{asChild:!0,...i,children:a.jsx($e.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:je(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:je(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:je(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:je(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:je(e.onBlur,s.onClose),onClick:je(e.onClick,s.onClose)})})});MA.displayName=Ev;var Xz="TooltipPortal",[L1e,Jz]=Sm(Xz,{forceMount:void 0}),Ti="TooltipContent",DA=x.forwardRef((e,t)=>{const r=Jz(Ti,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=e,i=Am(Ti,e.__scopeTooltip);return a.jsx(Ar,{present:n||i.open,children:i.disableHoverableContent?a.jsx(IA,{side:s,...o,ref:t}):a.jsx(Qz,{side:s,...o,ref:t})})}),Qz=x.forwardRef((e,t)=>{const r=Am(Ti,e.__scopeTooltip),n=hb(Ti,e.__scopeTooltip),s=x.useRef(null),o=He(t,s),[i,c]=x.useState(null),{trigger:l,onClose:d}=r,u=s.current,{onPointerInTransitChange:f}=n,h=x.useCallback(()=>{c(null),f(!1)},[f]),p=x.useCallback((v,m)=>{const g=v.currentTarget,y={x:v.clientX,y:v.clientY},b=nB(y,g.getBoundingClientRect()),w=aB(y,b),j=sB(m.getBoundingClientRect()),N=iB([...w,...j]);c(N),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(l&&u){const v=g=>p(g,u),m=g=>p(g,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",m)}}},[l,u,p,h]),x.useEffect(()=>{if(i){const v=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},b=l?.contains(g)||u?.contains(g),w=!oB(y,i);b?h():w&&(h(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,i,d,h]),a.jsx(IA,{...e,ref:o})}),[eB,tB]=Sm(Pm,{isInside:!1}),IA=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...c}=e,l=Am(Ti,r),d=Cm(r),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(kv,u),()=>document.removeEventListener(kv,u)),[u]),x.useEffect(()=>{if(l.trigger){const f=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),a.jsx(xc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:a.jsxs(Nm,{"data-state":l.stateAttribute,...d,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(Fy,{children:n}),a.jsx(eB,{scope:r,isInside:!0,children:a.jsx(Kz,{id:l.contentId,role:"tooltip",children:s||n})})]})})});DA.displayName=Ti;var RA="TooltipArrow",rB=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Cm(r);return tB(RA,r).isInside?null:a.jsx(_m,{...s,...n,ref:t})});rB.displayName=RA;function nB(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function aB(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function sB(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function oB(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const c=t[o].x,l=t[o].y,d=t[i].x,u=t[i].y;l>n!=u>n&&r<(d-c)*(n-l)/(u-l)+c&&(s=!s)}return s}function iB(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),cB(t)}function cB(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var lB=$A,dB=MA,LA=DA;const uB=lB,fB=dB,FA=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(LA,{ref:n,sideOffset:t,className:te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));FA.displayName=LA.displayName;const hB="sidebar:state",mB=60*60*24*7,pB="16rem",gB="18rem",vB="3rem",xB="b",zA=E.createContext(null);function Gd(){const e=E.useContext(zA);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const BA=E.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:r,className:n,style:s,children:o,...i},c)=>{const l=BP(),[d,u]=E.useState(!1),[f,h]=E.useState(e),p=t??f,v=E.useCallback(b=>{const w=typeof b=="function"?b(p):b;r?r(w):h(w),document.cookie=`${hB}=${w}; path=/; max-age=${mB}`},[r,p]),m=E.useCallback(()=>l?u(b=>!b):v(b=>!b),[l,v,u]);E.useEffect(()=>{const b=w=>{w.key===xB&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),m())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[m]);const g=p?"expanded":"collapsed",y=E.useMemo(()=>({state:g,open:p,setOpen:v,isMobile:l,openMobile:d,setOpenMobile:u,toggleSidebar:m}),[g,p,v,l,d,u,m]);return a.jsx(zA.Provider,{value:y,children:a.jsx("div",{style:{"--sidebar-width":pB,"--sidebar-width-icon":vB,...s},className:te("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:c,...i,children:o})})});BA.displayName="SidebarProvider";const VA=E.forwardRef(({side:e="left",variant:t="sidebar",collapsible:r="offcanvas",className:n,children:s,...o},i)=>{const{isMobile:c,state:l,openMobile:d,setOpenMobile:u}=Gd();return r==="none"?a.jsx("div",{className:te("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:i,...o,children:s}):c?a.jsx(uA,{open:d,onOpenChange:u,...o,children:a.jsx(rb,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":gB},side:e,children:a.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):a.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":l,"data-collapsible":l==="collapsed"?r:"","data-variant":t,"data-side":e,children:[a.jsx("div",{className:te("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),a.jsx("div",{className:te("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:a.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});VA.displayName="Sidebar";const UA=E.forwardRef(({className:e,onClick:t,...r},n)=>{const{toggleSidebar:s}=Gd();return a.jsxs(B,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:te("h-7 w-7",e),onClick:o=>{t?.(o),s()},...r,children:[a.jsx(QL,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});UA.displayName="SidebarTrigger";const yB=E.forwardRef(({className:e,...t},r)=>{const{toggleSidebar:n}=Gd();return a.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:te("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});yB.displayName="SidebarRail";const bB=E.forwardRef(({className:e,...t},r)=>a.jsx("main",{ref:r,className:te("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));bB.displayName="SidebarInset";const jB=E.forwardRef(({className:e,...t},r)=>a.jsx(ue,{ref:r,"data-sidebar":"input",className:te("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));jB.displayName="SidebarInput";const qA=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"header",className:te("flex flex-col gap-2 p-2",e),...t}));qA.displayName="SidebarHeader";const WA=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"footer",className:te("flex flex-col gap-2 p-2",e),...t}));WA.displayName="SidebarFooter";const wB=E.forwardRef(({className:e,...t},r)=>a.jsx(Ha,{ref:r,"data-sidebar":"separator",className:te("mx-2 w-auto bg-sidebar-border",e),...t}));wB.displayName="SidebarSeparator";const HA=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"content",className:te("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));HA.displayName="SidebarContent";const Ov=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"group",className:te("relative flex w-full min-w-0 flex-col p-2",e),...t}));Ov.displayName="SidebarGroup";const Tv=E.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const s=t?Ur:"div";return a.jsx(s,{ref:n,"data-sidebar":"group-label",className:te("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})});Tv.displayName="SidebarGroupLabel";const NB=E.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const s=t?Ur:"button";return a.jsx(s,{ref:n,"data-sidebar":"group-action",className:te("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...r})});NB.displayName="SidebarGroupAction";const $v=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"group-content",className:te("w-full text-sm",e),...t}));$v.displayName="SidebarGroupContent";const af=E.forwardRef(({className:e,...t},r)=>a.jsx("ul",{ref:r,"data-sidebar":"menu",className:te("flex w-full min-w-0 flex-col gap-1",e),...t}));af.displayName="SidebarMenu";const sf=E.forwardRef(({className:e,...t},r)=>a.jsx("li",{ref:r,"data-sidebar":"menu-item",className:te("group/menu-item relative",e),...t}));sf.displayName="SidebarMenuItem";const _B=pc("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),of=E.forwardRef(({asChild:e=!1,isActive:t=!1,variant:r="default",size:n="default",tooltip:s,className:o,...i},c)=>{const l=e?Ur:"button",{isMobile:d,state:u}=Gd(),f=a.jsx(l,{ref:c,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:te(_B({variant:r,size:n}),o),...i});return s?(typeof s=="string"&&(s={children:s}),a.jsxs(uB,{children:[a.jsx(fB,{asChild:!0,children:f}),a.jsx(FA,{side:"right",align:"center",hidden:u!=="collapsed"||d,...s})]})):f});of.displayName="SidebarMenuButton";const SB=E.forwardRef(({className:e,asChild:t=!1,showOnHover:r=!1,...n},s)=>{const o=t?Ur:"button";return a.jsx(o,{ref:s,"data-sidebar":"menu-action",className:te("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...n})});SB.displayName="SidebarMenuAction";const CB=E.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:te("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));CB.displayName="SidebarMenuBadge";const PB=E.forwardRef(({className:e,showIcon:t=!1,...r},n)=>{const s=E.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return a.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:te("rounded-md h-8 flex gap-2 px-2 items-center",e),...r,children:[t&&a.jsx(Nw,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),a.jsx(Nw,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});PB.displayName="SidebarMenuSkeleton";const AB=E.forwardRef(({className:e,...t},r)=>a.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:te("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));AB.displayName="SidebarMenuSub";const kB=E.forwardRef(({...e},t)=>a.jsx("li",{ref:t,...e}));kB.displayName="SidebarMenuSubItem";const EB=E.forwardRef(({asChild:e=!1,size:t="md",isActive:r,className:n,...s},o)=>{const i=e?Ur:"a";return a.jsx(i,{ref:o,"data-sidebar":"menu-sub-button","data-size":t,"data-active":r,className:te("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...s})});EB.displayName="SidebarMenuSubButton";const OB=[{title:"Dashboard",href:"/",icon:GL},{title:"Assistente",href:"/assistente",icon:$L},{title:"Minha Agenda",href:"/minha-agenda",icon:Ee},{title:"Clientes",href:"/clientes",icon:mn},{title:"Servios",href:"/servicos",icon:dn},{title:"Cronogramas",href:"/cronogramas",icon:st},{title:"Financeiro",href:"/financeiro",icon:dt},{title:"Marketing",href:"/marketing",icon:JL},{title:"Produtos",href:"/produtos",icon:Xa},{title:"Auditoria",href:"/auditoria",icon:aF},{title:"Assinatura",href:"/assinatura",icon:Mr},{title:"Configuraes",href:"/configuracoes",icon:Co}];function TB(){const{state:e,setOpen:t,open:r}=Gd(),n=BP(),s=Fs(),{usuario:o,signOut:i}=Rt(),c=s.pathname,l=u=>c===u,d=()=>{n&&t(!1)};return a.jsxs(VA,{className:"border-r border-border/50 bg-card/80 backdrop-blur-xl transition-all duration-300 ease-in-out",collapsible:"icon",variant:"sidebar",children:[a.jsx(qA,{className:"border-b border-border/50",children:a.jsxs("div",{className:"flex items-center gap-2 p-2",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-lilac-light flex-shrink-0",children:a.jsx(Mr,{className:"h-4 w-4 text-primary-foreground"})}),e==="expanded"&&a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h2",{className:"text-sm font-bold bg-gradient-to-r from-primary to-lilac-primary bg-clip-text text-transparent truncate",children:o?.nome_personalizado_app||"Sistema"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o?.nome_completo})]})]})}),a.jsxs(HA,{children:[a.jsxs(Ov,{children:[a.jsx(Tv,{children:"Navegao"}),a.jsx($v,{children:a.jsx(af,{children:OB.map(u=>{const f=u.icon,h=l(u.href);return a.jsx(sf,{children:a.jsx(of,{asChild:!0,isActive:h,className:"data-[active=true]:bg-gradient-to-r data-[active=true]:from-primary data-[active=true]:to-lilac-primary data-[active=true]:text-primary-foreground",children:a.jsxs(zl,{to:u.href,className:"flex items-center gap-2",onClick:d,children:[a.jsx(f,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:u.title})]})})},u.href)})})})]}),a.jsxs(Ov,{children:[a.jsx(Tv,{children:"Links Externos"}),a.jsx($v,{children:a.jsx(af,{children:a.jsx(sf,{children:a.jsx(of,{asChild:!0,children:a.jsxs(zl,{to:"/agendamento-online",target:"_blank",className:"flex items-center gap-2 text-primary",children:[a.jsx(lm,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Agendamento Online"})]})})})})})]})]}),a.jsx(WA,{className:"border-t border-border/50",children:a.jsx(af,{children:a.jsx(sf,{children:a.jsxs(of,{onClick:i,className:"text-destructive hover:text-destructive hover:bg-destructive/5",children:[a.jsx(YL,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Sair"})]})})})})]})}const $B=pc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Zr=x.forwardRef(({className:e,variant:t,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:te($B({variant:t}),e),...r}));Zr.displayName="Alert";const GA=x.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:te("mb-1 font-medium leading-none tracking-tight",e),...t}));GA.displayName="AlertTitle";const Xr=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("text-sm [&_p]:leading-relaxed",e),...t}));Xr.displayName="AlertDescription";const MB=()=>{const{subscription:e}=Rt(),t=Jr();if(!e||e.status!=="trial")return null;const r=e.trial_days_remaining||0,n=()=>r<=2?"destructive":"default",s=()=>r===1?" ltimo dia do teste grtis!":r===0?" Seu teste grtis termina hoje!":` Voc tem ${r} dias restantes de teste grtis`;return a.jsx(Zr,{variant:n(),className:"mb-4 border-2",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(st,{className:"h-5 w-5"}),a.jsx(Xr,{className:"font-medium",children:s()})]}),a.jsxs(B,{onClick:()=>t("/assinatura"),size:"sm",variant:r<=2?"default":"outline",className:"gap-2",children:[a.jsx(So,{className:"h-4 w-4"}),"Assinar Agora - R$ 20/ms"]})]})})},DB=()=>{const{subscription:e}=Rt(),t=Jr();return x.useEffect(()=>{e?.is_trial_expired&&e?.status!=="active"&&window.location.pathname!=="/assinatura"&&(console.log("[TRIAL-STATUS] Trial expired, redirecting to subscription page"),t("/assinatura",{replace:!0}))},[e,t]),null},IB=[{title:"Dashboard",href:"/"},{title:"Assistente",href:"/assistente"},{title:"Agendamentos",href:"/agendamentos"},{title:"Clientes",href:"/clientes"},{title:"Servios",href:"/servicos"},{title:"Cronogramas",href:"/cronogramas"},{title:"Agenda",href:"/agenda"},{title:"Financeiro",href:"/financeiro"},{title:"Marketing",href:"/marketing"},{title:"Auditoria",href:"/auditoria"},{title:"Configuraes",href:"/configuracoes"}];function RB({children:e}){const t=Fs();return a.jsxs(BA,{children:[a.jsx(DB,{}),a.jsxs("div",{className:"min-h-screen flex w-full bg-gradient-to-br from-background via-lilac-lighter to-background",children:[a.jsx(TB,{}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[a.jsxs("header",{className:"sticky top-0 z-30 flex h-14 xs:h-16 items-center gap-2 xs:gap-4 bg-card/80 backdrop-blur-xl border-b border-border/50 p-responsive-sm",children:[a.jsx(UA,{className:"btn-touch flex-shrink-0"}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h1",{className:"text-responsive-lg font-semibold text-foreground truncate",children:IB.find(r=>r.href===t.pathname)?.title||"Dashboard"})}),a.jsx(B,{variant:"outline",size:"sm",asChild:!0,className:"gap-1 xs:gap-2 border-primary/20 text-primary hover:bg-primary/5 btn-touch flex-shrink-0 text-responsive-xs",children:a.jsxs("a",{href:"/agendamento-online",target:"_blank",rel:"noopener noreferrer",children:[a.jsx(Ee,{className:"h-3 w-3 xs:h-4 xs:w-4 flex-shrink-0"}),a.jsx("span",{className:"hidden xs:inline",children:"Agendamento Online"}),a.jsx("span",{className:"xs:hidden",children:"Online"}),a.jsx(lm,{className:"h-2 w-2 xs:h-3 xs:w-3 flex-shrink-0"})]})})]}),a.jsx("main",{className:"flex-1 p-responsive overflow-auto",children:a.jsxs("div",{className:"container-responsive max-w-none",children:[a.jsx(MB,{}),e]})})]})]})]})}function xn({children:e}){return a.jsx(RB,{children:e})}const Sc=()=>{const{user:e}=Rt(),[t,r]=x.useState([]),[n,s]=x.useState(null),[o,i]=x.useState(null),[c,l]=x.useState(!0),d=async()=>{if(e?.id)try{const{data:w,error:j}=await W.from("configuracoes_horarios").select("*").eq("user_id",e.id).order("dia_semana");if(j)throw j;r(w||[])}catch(w){console.error("Erro ao buscar configuraes de horrios:",w),V.error("Erro ao carregar configuraes de horrios")}},u=async()=>{if(e?.id)try{const{data:w,error:j}=await W.from("configuracoes_notificacoes").select("*").eq("user_id",e.id).single();if(j&&j.code!=="PGRST116")throw j;s(w)}catch(w){console.error("Erro ao buscar configuraes de notificaes:",w),V.error("Erro ao carregar configuraes de notificaes")}},f=async()=>{if(e?.id)try{const{data:w,error:j}=await W.from("configuracoes_backup").select("*").eq("user_id",e.id).single();if(j&&j.code!=="PGRST116")throw j;i(w)}catch(w){console.error("Erro ao buscar configuraes de backup:",w),V.error("Erro ao carregar configuraes de backup")}},h=async w=>{if(e?.id)try{const j={...w,user_id:e.id,dia_semana:w.dia_semana,horario_abertura:w.horario_abertura,horario_fechamento:w.horario_fechamento},{data:N,error:_}=await W.from("configuracoes_horarios").upsert(j).select();if(_)throw _;return await d(),V.success("Configurao de horrio salva com sucesso!"),N}catch(j){throw console.error("Erro ao salvar configurao de horrio:",j),V.error("Erro ao salvar configurao de horrio"),j}},p=async w=>{if(e?.id)try{const{data:j,error:N}=await W.from("configuracoes_notificacoes").upsert({...w,user_id:e.id}).select();if(N)throw N;return await u(),V.success("Configuraes de notificaes salvas com sucesso!"),j}catch(j){throw console.error("Erro ao salvar configuraes de notificaes:",j),V.error("Erro ao salvar configuraes de notificaes"),j}},v=async w=>{if(e?.id)try{const{data:j,error:N}=await W.from("configuracoes_backup").upsert({...w,user_id:e.id},{onConflict:"user_id"}).select();if(N)throw N;return await f(),V.success("Configuraes de backup salvas com sucesso!"),j}catch(j){throw console.error("Erro ao salvar configuraes de backup:",j),V.error("Erro ao salvar configuraes de backup"),j}},m=async w=>{try{const{error:j}=await W.from("configuracoes_horarios").delete().eq("id",w);if(j)throw j;await d(),V.success("Configurao de horrio removida com sucesso!")}catch(j){throw console.error("Erro ao deletar configurao de horrio:",j),V.error("Erro ao remover configurao de horrio"),j}},g=w=>t.find(j=>j.dia_semana===w),y=(w,j)=>{const N=g(w);if(!N||!N.ativo)return!1;const[_,S]=j.split(":").map(Number),[C,k]=N.horario_abertura.split(":").map(Number),[$,A]=N.horario_fechamento.split(":").map(Number),P=_*60+S,O=C*60+k,M=$*60+A;if(P<O||P>=M)return!1;if(N.intervalo_inicio&&N.intervalo_fim){const[R,T]=N.intervalo_inicio.split(":").map(Number),[D,I]=N.intervalo_fim.split(":").map(Number),U=R*60+T,oe=D*60+I;if(P>=U&&P<oe)return!1}return!0},b=(w,j=60)=>{const N=g(w);if(!N||!N.ativo)return[];const _=[],[S,C]=N.horario_abertura.split(":").map(Number),[k,$]=N.horario_fechamento.split(":").map(Number),A=S*60+C,P=k*60+$,O=30;for(let M=A;M+j<=P;M+=O){const R=Math.floor(M/60),T=M%60,D=`${R.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`;y(w,D)&&_.push(D)}return _};return x.useEffect(()=>{if(e?.id){(async()=>{l(!0),await Promise.all([d(),u(),f()]),l(!1)})();const j=W.channel("configuracoes_horarios_changes").on("postgres_changes",{event:"*",schema:"public",table:"configuracoes_horarios",filter:`user_id=eq.${e.id}`},()=>{d()}).subscribe(),N=W.channel("configuracoes_notificacoes_changes").on("postgres_changes",{event:"*",schema:"public",table:"configuracoes_notificacoes",filter:`user_id=eq.${e.id}`},()=>{u()}).subscribe(),_=W.channel("configuracoes_backup_changes").on("postgres_changes",{event:"*",schema:"public",table:"configuracoes_backup",filter:`user_id=eq.${e.id}`},()=>{f()}).subscribe();return()=>{W.removeChannel(j),W.removeChannel(N),W.removeChannel(_)}}},[e?.id]),{configuracaoHorarios:t,configuracaoNotificacoes:n,configuracaoBackup:o,loading:c,salvarHorario:h,salvarNotificacoes:p,salvarBackup:v,deletarHorario:m,buscarHorariosPorDia:g,verificarDisponibilidade:y,getHorariosDisponiveisDia:b,refetch:()=>{d(),u(),f()}}};function KA(){const{user:e}=Rt();Sc();const[t,r]=x.useState([]),[n,s]=x.useState([]),[o,i]=x.useState(!1),[c,l]=x.useState({}),[d,u]=x.useState(1),[f]=x.useState(10),h=async(A,P)=>{if(!e)return!1;try{const O=P.includes(":")?P:`${P}:00`,{data:M,error:R}=await W.rpc("buscar_horarios_com_multiplos_intervalos",{data_selecionada:A,user_id_param:e.id,duracao_servico:30});return R?(console.error("Erro ao verificar disponibilidade:",R),!1):M?.some(T=>{const D=T.horario,I=D?D.substring(0,5):"";return(D===O||I===P)&&T.disponivel===!0})||!1}catch(O){return console.error("Erro ao verificar disponibilidade:",O),!1}},p=async()=>{if(!e)return[];try{const{data:A,error:P}=await W.from("agendamentos").select("*").eq("user_id",e.id).order("data").order("hora");return P?(console.error("Erro ao carregar agendamentos regulares:",P),[]):(A||[]).map(O=>({id:O.id,clienteId:O.cliente_id,clienteNome:"Cliente",servicoId:O.servico_id,servicoNome:"Servio",data:O.data,hora:O.hora,duracao:O.duracao,valor:parseFloat(O.valor?.toString()||"0"),valorPago:parseFloat(O.valor_pago?.toString()||"0"),valorDevido:parseFloat(O.valor_devido?.toString()||"0"),formaPagamento:O.forma_pagamento||"fiado",statusPagamento:O.status_pagamento||"em_aberto",status:O.status||"agendado",origem:O.origem||"manual",origem_cronograma:!1,confirmado:O.confirmado,observacoes:O.observacoes||void 0,createdAt:O.created_at,updatedAt:O.updated_at}))}catch(A){return console.error("Erro ao carregar agendamentos regulares:",A),[]}},v=async()=>{try{const{data:A,error:P}=await W.from("agendamentos_online").select("*").in("status",["pendente","confirmado"]).order("created_at",{ascending:!1});return P?(console.error("Erro ao carregar agendamentos online:",P),[]):(A||[]).map(O=>({id:O.id,nome_completo:O.nome_completo,email:O.email,telefone:O.telefone,servico_id:O.servico_id,data:O.data,horario:O.horario,observacoes:O.observacoes,status:O.status,valor:parseFloat(O.valor?.toString()||"0"),duracao:O.duracao,created_at:O.created_at,updated_at:O.updated_at}))}catch(A){return console.error("Erro ao carregar agendamentos online:",A),[]}},m=A=>({id:`online_${A.id}`,clienteId:"",clienteNome:A.nome_completo,servicoId:A.servico_id,servicoNome:"Servio Online",data:A.data,hora:A.horario,duracao:A.duracao,valor:A.valor,valorPago:0,valorDevido:A.valor,formaPagamento:"fiado",statusPagamento:"em_aberto",status:(A.status==="confirmado","agendado"),origem:"online",origem_cronograma:!1,confirmado:A.status==="confirmado",observacoes:A.observacoes,createdAt:A.created_at,updatedAt:A.updated_at}),g=async()=>{i(!0);try{const[A,P]=await Promise.all([p(),v()]);r(A),s(P)}catch(A){console.error("Erro ao carregar agendamentos:",A),V.error("Erro ao carregar agendamentos")}finally{i(!1)}},y=x.useMemo(()=>{const A=n.map(m);return[...t,...A]},[t,n]);x.useEffect(()=>{g();const A=W.channel("agendamentos-online-changes").on("postgres_changes",{event:"*",schema:"public",table:"agendamentos_online"},()=>{g()}).subscribe(),P=W.channel("agendamentos-regular-changes").on("postgres_changes",{event:"*",schema:"public",table:"agendamentos",filter:e?`user_id=eq.${e.id}`:void 0},()=>{g()}).subscribe();return()=>{W.removeChannel(A),W.removeChannel(P)}},[e]);const b=x.useMemo(()=>{let A=[...y];if(!c.data){const P=new Date,O=c.periodo??"mes_atual",R=(()=>{if(O==="mes_anterior"){const T=P.getMonth()===0?P.getFullYear()-1:P.getFullYear(),D=P.getMonth()===0?11:P.getMonth()-1,I=new Date(T,D,1),U=new Date(T,D+1,0);return{inicio:I,fim:U}}if(O==="proximo_mes"){const T=P.getMonth()===11?P.getFullYear()+1:P.getFullYear(),D=P.getMonth()===11?0:P.getMonth()+1,I=new Date(T,D,1),U=new Date(T,D+1,0);return{inicio:I,fim:U}}if(O==="mes_atual"){const T=new Date(P.getFullYear(),P.getMonth(),1),D=new Date(P.getFullYear(),P.getMonth()+1,0);return{inicio:T,fim:D}}return null})();if(R){const{inicio:T,fim:D}=R;A=A.filter(I=>{const U=new Date(I.data);return U>=T&&U<=D})}}return c.data&&(A=A.filter(P=>P.data===c.data)),c.status&&(A=A.filter(P=>P.status===c.status)),c.statusPagamento&&(A=A.filter(P=>P.statusPagamento===c.statusPagamento)),c.clienteId&&(A=A.filter(P=>P.clienteId===c.clienteId)),c.origem&&(A=A.filter(P=>P.origem===c.origem)),A.sort((P,O)=>{const M=new Date(`${P.data}T${P.hora}`),R=new Date(`${O.data}T${O.hora}`);return M.getTime()-R.getTime()}),A},[y,c]),w=Math.ceil(b.length/f),j=x.useMemo(()=>{const A=(d-1)*f,P=A+f;return b.slice(A,P)},[b,d,f]),N=async A=>{if(!e)return V.error("Usurio no autenticado"),!1;i(!0);try{const{data:P,error:O}=await W.rpc("converter_agendamento_online",{agendamento_online_id:A,user_id:e.id});return O?(console.error("Erro ao converter agendamento:",O),V.error("Erro ao converter agendamento"),!1):(await g(),V.success("Agendamento convertido com sucesso!"),!0)}catch(P){return console.error("Erro ao converter agendamento:",P),V.error("Erro ao converter agendamento"),!1}finally{i(!1)}},_=async A=>{i(!0);try{const{error:P}=await W.from("agendamentos_online").update({status:"confirmado"}).eq("id",A);return P?(console.error("Erro ao confirmar agendamento:",P),V.error("Erro ao confirmar agendamento"),!1):(await g(),V.success("Agendamento confirmado!"),!0)}catch(P){return console.error("Erro ao confirmar agendamento:",P),V.error("Erro ao confirmar agendamento"),!1}finally{i(!1)}},S=async A=>{if(!e)return V.error("Usurio no autenticado"),!1;if(!await h(A.data,A.hora))return V.error("Horrio no disponvel para agendamento"),!1;i(!0);try{const{data:O,error:M}=await W.from("agendamentos").insert({user_id:e.id,cliente_id:A.clienteId,servico_id:A.servicoId,data:A.data,hora:A.hora,duracao:A.duracao,valor:A.valor,valor_pago:A.valorPago||0,valor_devido:A.valorDevido||A.valor,forma_pagamento:A.formaPagamento||"fiado",status_pagamento:A.statusPagamento||"em_aberto",status:A.status||"agendado",origem:A.origem||"manual",confirmado:A.confirmado??!1,observacoes:A.observacoes||null}).select().single();return M?(console.error("Erro ao criar agendamento:",M),V.error("Erro ao criar agendamento"),!1):(await g(),V.success("Agendamento criado com sucesso!"),!0)}catch(O){return console.error("Erro ao criar agendamento:",O),V.error("Erro ao criar agendamento"),!1}finally{i(!1)}},C=async(A,P)=>{if(!e)return V.error("Usurio no autenticado"),!1;if(A.startsWith("online_")){const O=A.replace("online_","");return await _(O)}i(!0);try{const O={};P.clienteId!==void 0&&(O.cliente_id=P.clienteId),P.servicoId!==void 0&&(O.servico_id=P.servicoId),P.data!==void 0&&(O.data=P.data),P.hora!==void 0&&(O.hora=P.hora),P.duracao!==void 0&&(O.duracao=P.duracao),P.valor!==void 0&&(O.valor=P.valor),P.valorPago!==void 0&&(O.valor_pago=P.valorPago),P.valorDevido!==void 0&&(O.valor_devido=P.valorDevido),P.formaPagamento!==void 0&&(O.forma_pagamento=P.formaPagamento),P.statusPagamento!==void 0&&(O.status_pagamento=P.statusPagamento),P.status!==void 0&&(O.status=P.status),P.origem!==void 0&&(O.origem=P.origem),P.confirmado!==void 0&&(O.confirmado=P.confirmado),P.observacoes!==void 0&&(O.observacoes=P.observacoes||null);const{error:M}=await W.from("agendamentos").update(O).eq("id",A).eq("user_id",e.id);return M?(console.error("Erro ao atualizar agendamento:",M),V.error("Erro ao atualizar agendamento"),!1):(await g(),V.success("Agendamento atualizado com sucesso!"),!0)}catch(O){return console.error("Erro ao atualizar agendamento:",O),V.error("Erro ao atualizar agendamento"),!1}finally{i(!1)}},k=async A=>{if(!e)return V.error("Usurio no autenticado"),!1;if(A.startsWith("online_")){const P=A.replace("online_","");i(!0);try{console.log(" Executando delete de agendamento online no Supabase...",P);const{error:O}=await W.from("agendamentos_online").delete().eq("id",P);return O?(console.error(" Erro do Supabase ao excluir agendamento online:",O),V.error("Erro ao excluir agendamento online: "+O.message),!1):(console.log(" Agendamento online excludo com sucesso no banco"),await g(),V.success("Agendamento online excludo com sucesso!"),!0)}catch(O){return console.error(" Erro ao excluir agendamento online:",O),V.error("Erro ao excluir agendamento online"),!1}finally{i(!1)}}i(!0);try{console.log(" Executando delete de agendamento no Supabase...",A);const{error:P}=await W.from("agendamentos").delete().eq("id",A).eq("user_id",e.id);return P?(console.error(" Erro do Supabase ao excluir agendamento:",P),V.error("Erro ao excluir agendamento: "+P.message),!1):(console.log(" Agendamento excludo com sucesso no banco"),await g(),V.success("Agendamento excludo com sucesso!"),!0)}catch(P){return console.error(" Erro ao excluir agendamento:",P),V.error("Erro ao excluir agendamento"),!1}finally{i(!1)}};return{loading:o,agendamentos:j,agendamentosFiltrados:b,todosAgendamentos:y,filtros:c,setFiltros:l,paginaAtual:d,setPaginaAtual:u,totalPaginas:w,criarAgendamento:S,atualizarAgendamento:C,excluirAgendamento:k,cancelarAgendamento:async A=>A.startsWith("online_")?await k(A):await C(A,{status:"cancelado"}),recarregar:g,converterAgendamentoOnlineParaRegular:N,confirmarAgendamentoOnline:_,verificarHorarioDisponivel:h}}function Cc(){const{user:e}=Rt(),[t,r]=x.useState([]),[n,s]=x.useState(!1),[o,i]=x.useState({ordenacao:"nome",direcao:"asc"}),c=async()=>{if(e){s(!0);try{const{data:p,error:v}=await W.from("servicos").select("*").eq("user_id",e.id).order("nome");if(v){console.error("Erro ao carregar servios:",v),V.error("Erro ao carregar servios");return}const m=(p||[]).map(g=>({id:g.id,nome:g.nome,valor:parseFloat(g.valor.toString()),duracao:g.duracao,descricao:g.descricao||void 0,observacoes:g.observacoes||void 0,createdAt:g.created_at,updatedAt:g.updated_at}));r(m)}catch(p){console.error("Erro ao carregar servios:",p),V.error("Erro ao carregar servios")}finally{s(!1)}}};x.useEffect(()=>{c()},[e]);const l=x.useMemo(()=>{let p=[...t];if(o.busca){const v=o.busca.toLowerCase();p=p.filter(m=>m.nome.toLowerCase().includes(v)||m.descricao?.toLowerCase().includes(v))}return o.ordenacao&&p.sort((v,m)=>{const g=o.ordenacao;let y=v[g],b=m[g];return typeof y=="string"&&(y=y.toLowerCase(),b=b.toLowerCase()),o.direcao==="desc"?b>y?1:b<y?-1:0:y>b?1:y<b?-1:0}),p},[t,o]);return{loading:n,servicos:l,todosServicos:t,filtros:o,setFiltros:i,criarServico:async p=>{if(!e)return V.error("Usurio no autenticado"),!1;if(!p.nome.trim())return V.error("Nome do servio  obrigatrio"),!1;if(p.valor<=0||p.duracao<=0)return V.error("Valor e durao devem ser maiores que zero"),!1;if(t.find(m=>m.nome.toLowerCase()===p.nome.toLowerCase()))return V.error("J existe um servio com este nome"),!1;s(!0);try{const{data:m,error:g}=await W.from("servicos").insert({user_id:e.id,nome:p.nome,valor:p.valor,duracao:p.duracao,descricao:p.descricao||null,observacoes:p.observacoes||null}).select().single();if(g)return console.error("Erro ao criar servio:",g),V.error("Erro ao criar servio"),!1;const y={id:m.id,nome:m.nome,valor:parseFloat(m.valor.toString()),duracao:m.duracao,descricao:m.descricao||void 0,observacoes:m.observacoes||void 0,createdAt:m.created_at,updatedAt:m.updated_at};return r(b=>[...b,y]),V.success("Servio criado com sucesso!"),!0}catch(m){return console.error("Erro ao criar servio:",m),V.error("Erro ao criar servio"),!1}finally{s(!1)}},atualizarServico:async(p,v)=>{if(!e)return V.error("Usurio no autenticado"),!1;if(v.nome!==void 0&&!v.nome.trim())return V.error("Nome do servio  obrigatrio"),!1;if(v.valor!==void 0&&v.valor<=0)return V.error("Valor deve ser maior que zero"),!1;if(v.duracao!==void 0&&v.duracao<=0)return V.error("Durao deve ser maior que zero"),!1;s(!0);try{const m={};v.nome!==void 0&&(m.nome=v.nome),v.valor!==void 0&&(m.valor=v.valor),v.duracao!==void 0&&(m.duracao=v.duracao),v.descricao!==void 0&&(m.descricao=v.descricao||null),v.observacoes!==void 0&&(m.observacoes=v.observacoes||null);const{data:g,error:y}=await W.from("servicos").update(m).eq("id",p).eq("user_id",e.id).select().single();if(y)return console.error("Erro ao atualizar servio:",y),V.error("Erro ao atualizar servio"),!1;const b={id:g.id,nome:g.nome,valor:parseFloat(g.valor.toString()),duracao:g.duracao,descricao:g.descricao||void 0,observacoes:g.observacoes||void 0,createdAt:g.created_at,updatedAt:g.updated_at};return r(w=>w.map(j=>j.id===p?b:j)),V.success("Servio atualizado com sucesso!"),!0}catch(m){return console.error("Erro ao atualizar servio:",m),V.error("Erro ao atualizar servio"),!1}finally{s(!1)}},excluirServico:async p=>{if(!e)return V.error("Usurio no autenticado"),!1;s(!0);try{console.log(" Iniciando excluso de servio:",p,"Usurio:",e.id);const{data:v,error:m}=await W.rpc("test_delete_permissions",{table_name:"servicos",record_id:p});if(m)console.error(" Erro ao verificar permisses:",m);else{console.log(" Verificao de permisses:",v);const w=v;if(w&&typeof w=="object"&&!w.can_delete){if(!w.record_exists)return V.error("Servio no encontrado"),!1;if(!w.user_owns_record)return V.error("Voc no tem permisso para excluir este servio"),!1}}const{data:g,error:y}=await W.from("agendamentos_online").select("id, nome_completo").eq("servico_id",p);y&&console.error(" Erro ao verificar agendamentos online:",y);const{error:b}=await W.from("servicos").delete().eq("id",p).eq("user_id",e.id);return b?(console.error(" Erro do Supabase ao excluir servio:",b),V.error("Erro ao excluir servio: "+b.message),!1):(console.log(" Servio excludo com sucesso no banco"),g&&g.length>0?V.success(`Servio excludo com sucesso! ${g.length} agendamento(s) online foram atualizados.`):V.success("Servio excludo com sucesso!"),r(w=>{const j=w.filter(N=>N.id!==p);return console.log(" Lista de servios atualizada:",j.length,"servios"),j}),!0)}catch(v){return console.error("Erro ao excluir servio:",v),V.error("Erro ao excluir servio"),!1}finally{s(!1)}},obterServicoPorId:p=>t.find(v=>v.id===p),recarregar:c}}function Kd(){const{user:e}=Rt(),[t,r]=x.useState([]),[n,s]=x.useState(!1),o=async()=>{if(e){s(!0);try{await W.rpc("associar_clientes_agendamento_online",{p_user_id:e.id});const{data:u,error:f}=await W.from("clientes").select("*").eq("user_id",e.id).order("nome");if(f){console.error("Erro ao carregar clientes:",f),V.error("Erro ao carregar clientes");return}const h=(u||[]).map(p=>({id:p.id,nome:p.nome,nomeCompleto:p.nome,telefone:p.telefone,email:p.email||void 0,endereco:p.endereco||void 0,dataNascimento:p.data_nascimento||void 0,observacoes:p.observacoes||void 0,historicoServicos:Array.isArray(p.historico_servicos)?p.historico_servicos:[],servicoFrequente:void 0,ultimaVisita:void 0,createdAt:p.created_at,updatedAt:p.updated_at}));r(h)}catch(u){console.error("Erro ao carregar clientes:",u),V.error("Erro ao carregar clientes")}finally{s(!1)}}};return x.useEffect(()=>{o()},[e]),{loading:n,clientes:t,criarCliente:async u=>{if(!e)return V.error("Usurio no autenticado"),!1;const f=u.nome||u.nomeCompleto;if(!f?.trim())return V.error("Nome do cliente  obrigatrio"),!1;if(!u.telefone?.trim())return V.error("Telefone do cliente  obrigatrio"),!1;if(t.find(p=>p.nome?.toLowerCase()===f.toLowerCase()))return V.error("J existe um cliente com este nome"),!1;s(!0);try{const{data:p,error:v}=await W.from("clientes").insert({user_id:e.id,nome:f,telefone:u.telefone,email:u.email||null,endereco:u.endereco||null,data_nascimento:u.dataNascimento||null,observacoes:u.observacoes||null,historico_servicos:[]}).select().single();if(v)return console.error("Erro ao criar cliente:",v),V.error("Erro ao criar cliente"),!1;const m={id:p.id,nome:p.nome,nomeCompleto:p.nome,telefone:p.telefone,email:p.email||void 0,endereco:p.endereco||void 0,dataNascimento:p.data_nascimento||void 0,observacoes:p.observacoes||void 0,historicoServicos:p.historico_servicos||[],servicoFrequente:void 0,ultimaVisita:void 0,createdAt:p.created_at,updatedAt:p.updated_at};return r(g=>[...g,m]),V.success("Cliente criado com sucesso!"),!0}catch(p){return console.error("Erro ao criar cliente:",p),V.error("Erro ao criar cliente"),!1}finally{s(!1)}},atualizarCliente:async(u,f)=>{if(!e)return V.error("Usurio no autenticado"),!1;s(!0);try{const h={};f.nome!==void 0&&(h.nome=f.nome),f.nomeCompleto!==void 0&&(h.nome=f.nomeCompleto),f.telefone!==void 0&&(h.telefone=f.telefone),f.email!==void 0&&(h.email=f.email||null),f.endereco!==void 0&&(h.endereco=f.endereco||null),f.dataNascimento!==void 0&&(h.data_nascimento=f.dataNascimento||null),f.observacoes!==void 0&&(h.observacoes=f.observacoes||null),f.historicoServicos!==void 0&&(h.historico_servicos=f.historicoServicos);const{data:p,error:v}=await W.from("clientes").update(h).eq("id",u).eq("user_id",e.id).select().single();if(v)return console.error("Erro ao atualizar cliente:",v),V.error("Erro ao atualizar cliente"),!1;const m={id:p.id,nome:p.nome,nomeCompleto:p.nome,telefone:p.telefone,email:p.email||void 0,endereco:p.endereco||void 0,dataNascimento:p.data_nascimento||void 0,observacoes:p.observacoes||void 0,historicoServicos:p.historico_servicos||[],servicoFrequente:void 0,ultimaVisita:void 0,createdAt:p.created_at,updatedAt:p.updated_at};return r(g=>g.map(y=>y.id===u?m:y)),V.success("Cliente atualizado com sucesso!"),!0}catch(h){return console.error("Erro ao atualizar cliente:",h),V.error("Erro ao atualizar cliente"),!1}finally{s(!1)}},excluirCliente:async u=>{if(console.log(" Iniciando excluso do cliente:",u),!e)return console.error(" Usurio no autenticado"),V.error("Usurio no autenticado"),!1;console.log(" Usurio autenticado:",e.id),s(!0);try{console.log(" Executando delete no Supabase...");const{error:f}=await W.from("clientes").delete().eq("id",u).eq("user_id",e.id);return f?(console.error(" Erro do Supabase ao excluir cliente:",f),V.error("Erro ao excluir cliente: "+f.message),!1):(console.log(" Cliente excludo com sucesso no banco"),r(h=>{const p=h.filter(v=>v.id!==u);return console.log(" Lista atualizada:",p.length,"clientes"),p}),V.success("Cliente excludo com sucesso!"),!0)}catch(f){return console.error("Erro ao excluir cliente:",f),V.error("Erro ao excluir cliente"),!1}finally{s(!1)}},obterClienteComEstatisticas:u=>t.find(f=>f.id===u),recarregar:o}}function la(){const e=KA(),{todosServicos:t}=Cc(),{clientes:r}=Kd(),n=x.useMemo(()=>(e.todosAgendamentos||[]).map(u=>{const f=r.find(p=>p.id===u.clienteId),h=t.find(p=>p.id===u.servicoId);return{...u,clienteNome:f?.nome||f?.nomeCompleto||u.clienteNome||"Cliente no encontrado",servicoNome:h?.nome||u.servicoNome||"Servio no encontrado",servicoValor:h?.valor||u.valor||0,servicoDuracao:h?.duracao||u.duracao||30,clienteEmail:f?.email||"",clienteTelefone:f?.telefone||"",servicoDescricao:h?.descricao||""}}),[e.todosAgendamentos,r,t]),s=d=>d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),o=x.useMemo(()=>{let u=(e.agendamentosFiltrados||[]).map(h=>{const p=r.find(m=>m.id===h.clienteId),v=t.find(m=>m.id===h.servicoId);return{...h,clienteNome:p?.nome||p?.nomeCompleto||h.clienteNome||"Cliente no encontrado",servicoNome:v?.nome||h.servicoNome||"Servio no encontrado",servicoValor:v?.valor||h.valor||0,servicoDuracao:v?.duracao||h.duracao||30,clienteEmail:p?.email||"",clienteTelefone:p?.telefone||"",servicoDescricao:v?.descricao||""}});const f=e.filtros?.busca;if(f&&f.trim()){const h=s(f).split(/\s+/).filter(Boolean);u=u.filter(p=>{const v=s(`${p.clienteNome} ${p.servicoNome} ${p.clienteTelefone}`);return h.every(m=>v.includes(m))})}return u},[e.agendamentosFiltrados,e.filtros?.busca,r,t]);return{...e,todosAgendamentos:n,agendamentosFiltrados:o,clientes:r,servicos:t,verificarConflito:(d,u)=>{if(!d.data||!d.hora||!d.duracao)return!1;const f=new Date(`${d.data}T${d.hora}`),h=new Date(f.getTime()+d.duracao*6e4);return e.todosAgendamentos.some(p=>{if(p.id===u||p.data!==d.data)return!1;const v=new Date(`${p.data}T${p.hora}`),m=new Date(v.getTime()+p.duracao*6e4);return f>=v&&f<m||h>v&&h<=m||f<=v&&h>=m})},criarAgendamento:async d=>{const u=t.find(p=>p.id===d.servicoId);if(!u)return console.error("Servio no encontrado"),!1;if(!await e.verificarHorarioDisponivel?.(d.data,d.hora))return console.error("Horrio no est disponvel nas configuraes de trabalho"),!1;const h={...d,duracao:u.duracao,valor:d.valor||u.valor,valorPago:d.valorPago||0,valorDevido:d.valorDevido||d.valor||u.valor,formaPagamento:d.formaPagamento||"fiado",statusPagamento:d.statusPagamento||"em_aberto",status:d.status||"agendado",origem:d.origem||"manual",confirmado:d.confirmado??!1};return await e.criarAgendamento(h)},adicionarAgendamentosCronograma:()=>{console.log("Agendamentos de cronograma so criados automaticamente")},verificarHorarioDisponivel:e.verificarHorarioDisponivel}}const LB=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[s,o]=x.useState(null),i=async()=>{try{n(!0);const{data:v,error:m}=await W.from("lancamentos").select("*").order("data",{ascending:!1});if(m)throw m;const g=(v||[]).map(y=>({id:y.id,tipo:y.tipo,valor:Number(y.valor),data:new Date(y.data),descricao:y.descricao,categoria:y.categoria,origemId:y.origem_id,origemTipo:y.origem_tipo,clienteId:y.cliente_id,created_at:new Date(y.created_at),updated_at:new Date(y.updated_at)}));t(g)}catch(v){o(v instanceof Error?v.message:"Erro ao carregar lanamentos")}finally{n(!1)}},c=async v=>{try{const{data:m}=await W.auth.getUser();if(!m.user)throw new Error("Usurio no autenticado");const{data:g,error:y}=await W.from("lancamentos").insert({user_id:m.user.id,tipo:v.tipo,valor:v.valor,data:v.data.toISOString().split("T")[0],descricao:v.descricao,categoria:v.categoria,origem_id:v.origemId,origem_tipo:v.origemTipo,cliente_id:v.clienteId}).select().single();if(y)throw y;return await i(),g}catch(m){throw o(m instanceof Error?m.message:"Erro ao criar lanamento"),m}},l=async(v,m)=>{try{const g={};m.tipo&&(g.tipo=m.tipo),m.valor!==void 0&&(g.valor=m.valor),m.data&&(g.data=m.data.toISOString().split("T")[0]),m.descricao&&(g.descricao=m.descricao),m.categoria!==void 0&&(g.categoria=m.categoria),m.origemId!==void 0&&(g.origem_id=m.origemId),m.origemTipo!==void 0&&(g.origem_tipo=m.origemTipo),m.clienteId!==void 0&&(g.cliente_id=m.clienteId);const{error:y}=await W.from("lancamentos").update(g).eq("id",v);if(y)throw y;await i()}catch(g){throw o(g instanceof Error?g.message:"Erro ao atualizar lanamento"),g}},d=async v=>{try{const{error:m}=await W.from("lancamentos").delete().eq("id",v);if(m)throw m;await i()}catch(m){throw o(m instanceof Error?m.message:"Erro ao deletar lanamento"),m}},u=v=>e.filter(m=>{if(v.tipo&&v.tipo!=="todos"&&m.tipo!==v.tipo||v.categoria&&m.categoria!==v.categoria||v.dataInicio&&m.data<v.dataInicio||v.dataFim&&m.data>v.dataFim)return!1;if(v.mes!==void 0&&v.ano!==void 0){const g=m.data.getMonth(),y=m.data.getFullYear();if(g!==v.mes||y!==v.ano)return!1}return!0}),f=()=>{const v=new Date,m=new Date(v.getFullYear(),v.getMonth(),1),g=new Date(v.getFullYear(),v.getMonth()+1,0),y=e.filter(j=>{const N=new Date(j.data);return N>=m&&N<=g}),b=y.filter(j=>j.tipo==="entrada").reduce((j,N)=>j+N.valor,0),w=y.filter(j=>j.tipo==="saida").reduce((j,N)=>j+N.valor,0);return{totalEntradas:b,totalSaidas:w,lucro:b-w,valorEmAberto:0,contasAPagar:0}},h=async(v,m,g,y)=>c({tipo:"entrada",valor:m,data:new Date,descricao:y,categoria:"Servios",origemId:v,origemTipo:"agendamento",clienteId:g}),p=async(v,m,g,y)=>c({tipo:"saida",valor:m,data:new Date,descricao:g,categoria:y||"Contas Fixas",origemId:v,origemTipo:"conta_fixa"});return x.useEffect(()=>{i();const v=W.channel("lancamentos-realtime").on("postgres_changes",{event:"*",schema:"public",table:"lancamentos"},()=>{i()}).subscribe();return()=>{W.removeChannel(v)}},[]),{lancamentos:e,loading:r,error:s,createLancamento:c,updateLancamento:l,deleteLancamento:d,filterLancamentos:u,calculateResumoFinanceiro:f,createLancamentoFromAgendamento:h,createLancamentoFromContaFixa:p,loadLancamentos:i}},YA=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,o]=x.useState(!1),[i,c]=x.useState(null),l=async()=>{try{o(!0);const{data:v,error:m}=await W.from("contas_fixas").select("*").order("created_at",{ascending:!1});if(m)throw m;const g=(v||[]).map(y=>({id:y.id,nome:y.nome,valor:Number(y.valor),dataVencimento:y.data_vencimento,categoria:y.categoria,status:y.status,observacoes:y.observacoes,repetir:y.repetir,frequencia:y.frequencia,proximoVencimento:y.proximo_vencimento,ativa:y.ativa,created_at:new Date(y.created_at),updated_at:new Date(y.updated_at)}));t(g)}catch(v){c(v instanceof Error?v.message:"Erro ao carregar contas fixas")}finally{o(!1)}},d=async()=>{try{const{data:v,error:m}=await W.from("categorias_financeiras").select("*").order("nome");if(m)throw m;const g=(v||[]).map(y=>({id:y.id,nome:y.nome,tipo:y.tipo,cor:y.cor,created_at:new Date(y.created_at),updated_at:new Date(y.updated_at)}));n(g)}catch(v){c(v instanceof Error?v.message:"Erro ao carregar categorias")}},u=async v=>{try{const{data:m}=await W.auth.getUser();if(!m.user)throw new Error("Usurio no autenticado");const g=new Date;let y=new Date(g.getFullYear(),g.getMonth(),v.dataVencimento);y<=g&&y.setMonth(y.getMonth()+1);const{data:b,error:w}=await W.from("contas_fixas").insert({user_id:m.user.id,nome:v.nome,valor:v.valor,data_vencimento:v.dataVencimento,categoria:v.categoria,observacoes:v.observacoes,repetir:v.repetir,frequencia:v.frequencia,proximo_vencimento:y.toISOString().split("T")[0],ativa:v.ativa??!0}).select().single();if(w)throw w;return await l(),b}catch(m){throw c(m instanceof Error?m.message:"Erro ao criar conta fixa"),m}},f=async(v,m)=>{try{const g={};m.nome&&(g.nome=m.nome),m.valor!==void 0&&(g.valor=m.valor),m.dataVencimento!==void 0&&(g.data_vencimento=m.dataVencimento),m.categoria&&(g.categoria=m.categoria),m.status&&(g.status=m.status),m.observacoes!==void 0&&(g.observacoes=m.observacoes),m.repetir!==void 0&&(g.repetir=m.repetir),m.frequencia&&(g.frequencia=m.frequencia),m.proximoVencimento&&(g.proximo_vencimento=m.proximoVencimento),m.ativa!==void 0&&(g.ativa=m.ativa);const{error:y}=await W.from("contas_fixas").update(g).eq("id",v);if(y)throw y;await l()}catch(g){throw c(g instanceof Error?g.message:"Erro ao atualizar conta fixa"),g}},h=async v=>{try{const{error:m}=await W.from("contas_fixas").delete().eq("id",v);if(m)throw m;await l()}catch(m){throw c(m instanceof Error?m.message:"Erro ao deletar conta fixa"),m}},p=async v=>{try{const{data:m}=await W.auth.getUser();if(!m.user)throw new Error("Usurio no autenticado");const{data:g,error:y}=await W.from("categorias_financeiras").insert({user_id:m.user.id,nome:v.nome,tipo:v.tipo,cor:v.cor}).select().single();if(y)throw y;return await d(),g}catch(m){throw c(m instanceof Error?m.message:"Erro ao criar categoria"),m}};return x.useEffect(()=>{l(),d();const v=W.channel("contas-fixas-realtime").on("postgres_changes",{event:"*",schema:"public",table:"contas_fixas"},()=>{l()}).on("postgres_changes",{event:"*",schema:"public",table:"categorias_financeiras"},()=>{d()}).subscribe();return()=>{W.removeChannel(v)}},[]),{contasFixas:e,categorias:r,loading:s,error:i,createContaFixa:u,updateContaFixa:f,deleteContaFixa:h,createCategoria:p,loadContasFixas:l,loadCategorias:d}};function Pc(){const[e,t]=x.useState({}),r=LB(),{categorias:n}=YA(),s=r.filterLancamentos(e),o=x.useMemo(()=>r.calculateResumoFinanceiro(),[r]);return{...r,lancamentos:s,filtros:e,setFiltros:t,resumoFinanceiro:o,categorias:n,criarLancamento:r.createLancamento,atualizarLancamento:r.updateLancamento,removerLancamento:r.deleteLancamento,adicionarLancamento:r.createLancamento,calcularResumo:r.calculateResumoFinanceiro,criarLancamentoDeAgendamento:r.createLancamentoFromAgendamento,criarLancamentoDeContaFixa:r.createLancamentoFromContaFixa,recarregar:r.loadLancamentos}}var FB=Array.isArray,Qr=FB,zB=typeof jr=="object"&&jr&&jr.Object===Object&&jr,ZA=zB,BB=ZA,VB=typeof self=="object"&&self&&self.Object===Object&&self,UB=BB||VB||Function("return this")(),$a=UB,qB=$a,WB=qB.Symbol,Yd=WB,Tw=Yd,XA=Object.prototype,HB=XA.hasOwnProperty,GB=XA.toString,el=Tw?Tw.toStringTag:void 0;function KB(e){var t=HB.call(e,el),r=e[el];try{e[el]=void 0;var n=!0}catch{}var s=GB.call(e);return n&&(t?e[el]=r:delete e[el]),s}var YB=KB,ZB=Object.prototype,XB=ZB.toString;function JB(e){return XB.call(e)}var QB=JB,$w=Yd,e8=YB,t8=QB,r8="[object Null]",n8="[object Undefined]",Mw=$w?$w.toStringTag:void 0;function a8(e){return e==null?e===void 0?n8:r8:Mw&&Mw in Object(e)?e8(e):t8(e)}var ls=a8;function s8(e){return e!=null&&typeof e=="object"}var ds=s8,o8=ls,i8=ds,c8="[object Symbol]";function l8(e){return typeof e=="symbol"||i8(e)&&o8(e)==c8}var Ac=l8,d8=Qr,u8=Ac,f8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h8=/^\w*$/;function m8(e,t){if(d8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||u8(e)?!0:h8.test(e)||!f8.test(e)||t!=null&&e in Object(t)}var mb=m8;function p8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Us=p8;const kc=yt(Us);var g8=ls,v8=Us,x8="[object AsyncFunction]",y8="[object Function]",b8="[object GeneratorFunction]",j8="[object Proxy]";function w8(e){if(!v8(e))return!1;var t=g8(e);return t==y8||t==b8||t==x8||t==j8}var pb=w8;const Le=yt(pb);var N8=$a,_8=N8["__core-js_shared__"],S8=_8,pg=S8,Dw=function(){var e=/[^.]+$/.exec(pg&&pg.keys&&pg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function C8(e){return!!Dw&&Dw in e}var P8=C8,A8=Function.prototype,k8=A8.toString;function E8(e){if(e!=null){try{return k8.call(e)}catch{}try{return e+""}catch{}}return""}var JA=E8,O8=pb,T8=P8,$8=Us,M8=JA,D8=/[\\^$.*+?()[\]{}|]/g,I8=/^\[object .+?Constructor\]$/,R8=Function.prototype,L8=Object.prototype,F8=R8.toString,z8=L8.hasOwnProperty,B8=RegExp("^"+F8.call(z8).replace(D8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function V8(e){if(!$8(e)||T8(e))return!1;var t=O8(e)?B8:I8;return t.test(M8(e))}var U8=V8;function q8(e,t){return e?.[t]}var W8=q8,H8=U8,G8=W8;function K8(e,t){var r=G8(e,t);return H8(r)?r:void 0}var qo=K8,Y8=qo,Z8=Y8(Object,"create"),km=Z8,Iw=km;function X8(){this.__data__=Iw?Iw(null):{},this.size=0}var J8=X8;function Q8(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var eV=Q8,tV=km,rV="__lodash_hash_undefined__",nV=Object.prototype,aV=nV.hasOwnProperty;function sV(e){var t=this.__data__;if(tV){var r=t[e];return r===rV?void 0:r}return aV.call(t,e)?t[e]:void 0}var oV=sV,iV=km,cV=Object.prototype,lV=cV.hasOwnProperty;function dV(e){var t=this.__data__;return iV?t[e]!==void 0:lV.call(t,e)}var uV=dV,fV=km,hV="__lodash_hash_undefined__";function mV(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fV&&t===void 0?hV:t,this}var pV=mV,gV=J8,vV=eV,xV=oV,yV=uV,bV=pV;function Ec(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ec.prototype.clear=gV;Ec.prototype.delete=vV;Ec.prototype.get=xV;Ec.prototype.has=yV;Ec.prototype.set=bV;var jV=Ec;function wV(){this.__data__=[],this.size=0}var NV=wV;function _V(e,t){return e===t||e!==e&&t!==t}var gb=_V,SV=gb;function CV(e,t){for(var r=e.length;r--;)if(SV(e[r][0],t))return r;return-1}var Em=CV,PV=Em,AV=Array.prototype,kV=AV.splice;function EV(e){var t=this.__data__,r=PV(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():kV.call(t,r,1),--this.size,!0}var OV=EV,TV=Em;function $V(e){var t=this.__data__,r=TV(t,e);return r<0?void 0:t[r][1]}var MV=$V,DV=Em;function IV(e){return DV(this.__data__,e)>-1}var RV=IV,LV=Em;function FV(e,t){var r=this.__data__,n=LV(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var zV=FV,BV=NV,VV=OV,UV=MV,qV=RV,WV=zV;function Oc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oc.prototype.clear=BV;Oc.prototype.delete=VV;Oc.prototype.get=UV;Oc.prototype.has=qV;Oc.prototype.set=WV;var Om=Oc,HV=qo,GV=$a,KV=HV(GV,"Map"),vb=KV,Rw=jV,YV=Om,ZV=vb;function XV(){this.size=0,this.__data__={hash:new Rw,map:new(ZV||YV),string:new Rw}}var JV=XV;function QV(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var eU=QV,tU=eU;function rU(e,t){var r=e.__data__;return tU(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Tm=rU,nU=Tm;function aU(e){var t=nU(this,e).delete(e);return this.size-=t?1:0,t}var sU=aU,oU=Tm;function iU(e){return oU(this,e).get(e)}var cU=iU,lU=Tm;function dU(e){return lU(this,e).has(e)}var uU=dU,fU=Tm;function hU(e,t){var r=fU(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var mU=hU,pU=JV,gU=sU,vU=cU,xU=uU,yU=mU;function Tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Tc.prototype.clear=pU;Tc.prototype.delete=gU;Tc.prototype.get=vU;Tc.prototype.has=xU;Tc.prototype.set=yU;var xb=Tc,QA=xb,bU="Expected a function";function yb(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bU);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var i=e.apply(this,n);return r.cache=o.set(s,i)||o,i};return r.cache=new(yb.Cache||QA),r}yb.Cache=QA;var e2=yb;const jU=yt(e2);var wU=e2,NU=500;function _U(e){var t=wU(e,function(n){return r.size===NU&&r.clear(),n}),r=t.cache;return t}var SU=_U,CU=SU,PU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,AU=/\\(\\)?/g,kU=CU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(PU,function(r,n,s,o){t.push(s?o.replace(AU,"$1"):n||r)}),t}),EU=kU;function OU(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var bb=OU,Lw=Yd,TU=bb,$U=Qr,MU=Ac,Fw=Lw?Lw.prototype:void 0,zw=Fw?Fw.toString:void 0;function t2(e){if(typeof e=="string")return e;if($U(e))return TU(e,t2)+"";if(MU(e))return zw?zw.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var DU=t2,IU=DU;function RU(e){return e==null?"":IU(e)}var r2=RU,LU=Qr,FU=mb,zU=EU,BU=r2;function VU(e,t){return LU(e)?e:FU(e,t)?[e]:zU(BU(e))}var n2=VU,UU=Ac;function qU(e){if(typeof e=="string"||UU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var $m=qU,WU=n2,HU=$m;function GU(e,t){t=WU(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[HU(t[r++])];return r&&r==n?e:void 0}var jb=GU,KU=jb;function YU(e,t,r){var n=e==null?void 0:KU(e,t);return n===void 0?r:n}var a2=YU;const fn=yt(a2);function ZU(e){return e==null}var XU=ZU;const We=yt(XU);var JU=ls,QU=Qr,e9=ds,t9="[object String]";function r9(e){return typeof e=="string"||!QU(e)&&e9(e)&&JU(e)==t9}var n9=r9;const Zd=yt(n9);var s2={exports:{}},vt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb=Symbol.for("react.element"),Nb=Symbol.for("react.portal"),Mm=Symbol.for("react.fragment"),Dm=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),Rm=Symbol.for("react.provider"),Lm=Symbol.for("react.context"),a9=Symbol.for("react.server_context"),Fm=Symbol.for("react.forward_ref"),zm=Symbol.for("react.suspense"),Bm=Symbol.for("react.suspense_list"),Vm=Symbol.for("react.memo"),Um=Symbol.for("react.lazy"),s9=Symbol.for("react.offscreen"),o2;o2=Symbol.for("react.module.reference");function In(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wb:switch(e=e.type,e){case Mm:case Im:case Dm:case zm:case Bm:return e;default:switch(e=e&&e.$$typeof,e){case a9:case Lm:case Fm:case Um:case Vm:case Rm:return e;default:return t}}case Nb:return t}}}vt.ContextConsumer=Lm;vt.ContextProvider=Rm;vt.Element=wb;vt.ForwardRef=Fm;vt.Fragment=Mm;vt.Lazy=Um;vt.Memo=Vm;vt.Portal=Nb;vt.Profiler=Im;vt.StrictMode=Dm;vt.Suspense=zm;vt.SuspenseList=Bm;vt.isAsyncMode=function(){return!1};vt.isConcurrentMode=function(){return!1};vt.isContextConsumer=function(e){return In(e)===Lm};vt.isContextProvider=function(e){return In(e)===Rm};vt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wb};vt.isForwardRef=function(e){return In(e)===Fm};vt.isFragment=function(e){return In(e)===Mm};vt.isLazy=function(e){return In(e)===Um};vt.isMemo=function(e){return In(e)===Vm};vt.isPortal=function(e){return In(e)===Nb};vt.isProfiler=function(e){return In(e)===Im};vt.isStrictMode=function(e){return In(e)===Dm};vt.isSuspense=function(e){return In(e)===zm};vt.isSuspenseList=function(e){return In(e)===Bm};vt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Mm||e===Im||e===Dm||e===zm||e===Bm||e===s9||typeof e=="object"&&e!==null&&(e.$$typeof===Um||e.$$typeof===Vm||e.$$typeof===Rm||e.$$typeof===Lm||e.$$typeof===Fm||e.$$typeof===o2||e.getModuleId!==void 0)};vt.typeOf=In;s2.exports=vt;var i2=s2.exports,o9=ls,i9=ds,c9="[object Number]";function l9(e){return typeof e=="number"||i9(e)&&o9(e)==c9}var c2=l9;const d9=yt(c2);var u9=c2;function f9(e){return u9(e)&&e!=+e}var h9=f9;const $c=yt(h9);var Lr=function(t){return t===0?0:t>0?1:-1},ho=function(t){return Zd(t)&&t.indexOf("%")===t.length-1},ge=function(t){return d9(t)&&!$c(t)},cr=function(t){return ge(t)||Zd(t)},m9=0,Wo=function(t){var r=++m9;return"".concat(t||"").concat(r)},Fr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ge(t)&&!Zd(t))return n;var o;if(ho(t)){var i=t.indexOf("%");o=r*parseFloat(t.slice(0,i))/100}else o=+t;return $c(o)&&(o=n),s&&o>r&&(o=r),o},ws=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},p9=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},or=function(t,r){return ge(t)&&ge(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ef(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):fn(n,t))===r})}function _i(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}var g9=["viewBox","children"],v9=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Bw=["points","pathLength"],gg={svg:g9,polygon:Bw,polyline:Bw},_b=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Of=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),!kc(n))return null;var s={};return Object.keys(n).forEach(function(o){_b.includes(o)&&(s[o]=r||function(i){return n[o](n,i)})}),s},x9=function(t,r,n){return function(s){return t(r,n,s),null}},ko=function(t,r,n){if(!kc(t)||Mv(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(o){var i=t[o];_b.includes(o)&&typeof i=="function"&&(s||(s={}),s[o]=x9(i,r,n))}),s},y9=["children"],b9=["children"];function Vw(e,t){if(e==null)return{};var r=j9(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function j9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}var Uw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Ja=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},qw=null,vg=null,Sb=function e(t){if(t===qw&&Array.isArray(vg))return vg;var r=[];return x.Children.forEach(t,function(n){We(n)||(i2.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),vg=r,qw=t,r};function hn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Ja(s)}):n=[Ja(t)],Sb(e).forEach(function(s){var o=fn(s,"type.displayName")||fn(s,"type.name");n.indexOf(o)!==-1&&r.push(s)}),r}function sn(e,t){var r=hn(e,t);return r&&r[0]}var Ww=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!ge(n)||n<=0||!ge(s)||s<=0)},w9=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],N9=function(t){return t&&t.type&&Zd(t.type)&&w9.indexOf(t.type)>=0},l2=function(t){return t&&Dv(t)==="object"&&"clipDot"in t},_9=function(t,r,n,s){var o,i=(o=gg?.[s])!==null&&o!==void 0?o:[];return!Le(t)&&(s&&i.includes(r)||v9.includes(r))||n&&_b.includes(r)},Ae=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(x.isValidElement(t)&&(s=t.props),!kc(s))return null;var o={};return Object.keys(s).forEach(function(i){var c;_9((c=s)===null||c===void 0?void 0:c[i],i,r,n)&&(o[i]=s[i])}),o},Iv=function e(t,r){if(t===r)return!0;var n=x.Children.count(t);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Hw(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var o=t[s],i=r[s];if(Array.isArray(o)||Array.isArray(i)){if(!e(o,i))return!1}else if(!Hw(o,i))return!1}return!0},Hw=function(t,r){if(We(t)&&We(r))return!0;if(!We(t)&&!We(r)){var n=t.props||{},s=n.children,o=Vw(n,y9),i=r.props||{},c=i.children,l=Vw(i,b9);return s&&c?_i(o,l)&&Iv(s,c):!s&&!c?_i(o,l):!1}return!1},Gw=function(t,r){var n=[],s={};return Sb(t).forEach(function(o,i){if(N9(o))n.push(o);else if(o){var c=Ja(o.type),l=r[c]||{},d=l.handler,u=l.once;if(d&&(!u||!s[c])){var f=d(o,c,i);n.push(f),s[c]=!0}}}),n},S9=function(t){var r=t&&t.type;return r&&Uw[r]?Uw[r]:null},C9=function(t,r){return Sb(r).indexOf(t)},P9=["children","width","height","viewBox","className","style","title","desc"];function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rv.apply(this,arguments)}function A9(e,t){if(e==null)return{};var r=k9(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lv(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,o=e.className,i=e.style,c=e.title,l=e.desc,d=A9(e,P9),u=s||{width:r,height:n,x:0,y:0},f=Ke("recharts-surface",o);return E.createElement("svg",Rv({},Ae(d,!0,"svg"),{className:f,width:r,height:n,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),E.createElement("title",null,c),E.createElement("desc",null,l),t)}var E9=["children","className"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(this,arguments)}function O9(e,t){if(e==null)return{};var r=T9(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function T9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ct=E.forwardRef(function(e,t){var r=e.children,n=e.className,s=O9(e,E9),o=Ke("recharts-layer",n);return E.createElement("g",Fv({className:o},Ae(s,!0),{ref:t}),r)}),Xn=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o]};function $9(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(s);++n<s;)o[n]=e[n+t];return o}var M9=$9,D9=M9;function I9(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:D9(e,t,r)}var R9=I9,L9="\\ud800-\\udfff",F9="\\u0300-\\u036f",z9="\\ufe20-\\ufe2f",B9="\\u20d0-\\u20ff",V9=F9+z9+B9,U9="\\ufe0e\\ufe0f",q9="\\u200d",W9=RegExp("["+q9+L9+V9+U9+"]");function H9(e){return W9.test(e)}var d2=H9;function G9(e){return e.split("")}var K9=G9,u2="\\ud800-\\udfff",Y9="\\u0300-\\u036f",Z9="\\ufe20-\\ufe2f",X9="\\u20d0-\\u20ff",J9=Y9+Z9+X9,Q9="\\ufe0e\\ufe0f",eq="["+u2+"]",zv="["+J9+"]",Bv="\\ud83c[\\udffb-\\udfff]",tq="(?:"+zv+"|"+Bv+")",f2="[^"+u2+"]",h2="(?:\\ud83c[\\udde6-\\uddff]){2}",m2="[\\ud800-\\udbff][\\udc00-\\udfff]",rq="\\u200d",p2=tq+"?",g2="["+Q9+"]?",nq="(?:"+rq+"(?:"+[f2,h2,m2].join("|")+")"+g2+p2+")*",aq=g2+p2+nq,sq="(?:"+[f2+zv+"?",zv,h2,m2,eq].join("|")+")",oq=RegExp(Bv+"(?="+Bv+")|"+sq+aq,"g");function iq(e){return e.match(oq)||[]}var cq=iq,lq=K9,dq=d2,uq=cq;function fq(e){return dq(e)?uq(e):lq(e)}var hq=fq,mq=R9,pq=d2,gq=hq,vq=r2;function xq(e){return function(t){t=vq(t);var r=pq(t)?gq(t):void 0,n=r?r[0]:t.charAt(0),s=r?mq(r,1).join(""):t.slice(1);return n[e]()+s}}var yq=xq,bq=yq,jq=bq("toUpperCase"),wq=jq;const qm=yt(wq);function Ct(e){return function(){return e}}const v2=Math.cos,Tf=Math.sin,da=Math.sqrt,$f=Math.PI,Wm=2*$f,Vv=Math.PI,Uv=2*Vv,so=1e-6,Nq=Uv-so;function x2(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function _q(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return x2;const r=10**t;return function(n){this._+=n[0];for(let s=1,o=n.length;s<o;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Sq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?x2:_q(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,o,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+o},${this._y1=+i}`}arcTo(t,r,n,s,o){if(t=+t,r=+r,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,c=this._y1,l=n-t,d=s-r,u=i-t,f=c-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>so)if(!(Math.abs(f*l-d*u)>so)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,v=s-c,m=l*l+d*d,g=p*p+v*v,y=Math.sqrt(m),b=Math.sqrt(h),w=o*Math.tan((Vv-Math.acos((m+h-g)/(2*y*b)))/2),j=w/b,N=w/y;Math.abs(j-1)>so&&this._append`L${t+j*u},${r+j*f}`,this._append`A${o},${o},0,0,${+(f*p>u*v)},${this._x1=t+N*l},${this._y1=r+N*d}`}}arc(t,r,n,s,o,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(s),l=n*Math.sin(s),d=t+c,u=r+l,f=1^i,h=i?s-o:o-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>so||Math.abs(this._y1-u)>so)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%Uv+Uv),h>Nq?this._append`A${n},${n},0,1,${f},${t-c},${r-l}A${n},${n},0,1,${f},${this._x1=d},${this._y1=u}`:h>so&&this._append`A${n},${n},0,${+(h>=Vv)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Cb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Sq(t)}function Pb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function y2(e){this._context=e}y2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hm(e){return new y2(e)}function b2(e){return e[0]}function j2(e){return e[1]}function w2(e,t){var r=Ct(!0),n=null,s=Hm,o=null,i=Cb(c);e=typeof e=="function"?e:e===void 0?b2:Ct(e),t=typeof t=="function"?t:t===void 0?j2:Ct(t);function c(l){var d,u=(l=Pb(l)).length,f,h=!1,p;for(n==null&&(o=s(p=i())),d=0;d<=u;++d)!(d<u&&r(f=l[d],d,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(f,d,l),+t(f,d,l));if(p)return o=null,p+""||null}return c.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ct(+l),c):e},c.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ct(+l),c):t},c.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ct(!!l),c):r},c.curve=function(l){return arguments.length?(s=l,n!=null&&(o=s(n)),c):s},c.context=function(l){return arguments.length?(l==null?n=o=null:o=s(n=l),c):n},c}function $u(e,t,r){var n=null,s=Ct(!0),o=null,i=Hm,c=null,l=Cb(d);e=typeof e=="function"?e:e===void 0?b2:Ct(+e),t=typeof t=="function"?t:Ct(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?j2:Ct(+r);function d(f){var h,p,v,m=(f=Pb(f)).length,g,y=!1,b,w=new Array(m),j=new Array(m);for(o==null&&(c=i(b=l())),h=0;h<=m;++h){if(!(h<m&&s(g=f[h],h,f))===y)if(y=!y)p=h,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),v=h-1;v>=p;--v)c.point(w[v],j[v]);c.lineEnd(),c.areaEnd()}y&&(w[h]=+e(g,h,f),j[h]=+t(g,h,f),c.point(n?+n(g,h,f):w[h],r?+r(g,h,f):j[h]))}if(b)return c=null,b+""||null}function u(){return w2().defined(s).curve(i).context(o)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),n=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),d):e},d.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ct(+f),d):n},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ct(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Ct(!!f),d):s},d.curve=function(f){return arguments.length?(i=f,o!=null&&(c=i(o)),d):i},d.context=function(f){return arguments.length?(f==null?o=c=null:c=i(o=f),d):o},d}class N2{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Cq(e){return new N2(e,!0)}function Pq(e){return new N2(e,!1)}const Ab={draw(e,t){const r=da(t/$f);e.moveTo(r,0),e.arc(0,0,r,0,Wm)}},Aq={draw(e,t){const r=da(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},_2=da(1/3),kq=_2*2,Eq={draw(e,t){const r=da(t/kq),n=r*_2;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Oq={draw(e,t){const r=da(t),n=-r/2;e.rect(n,n,r,r)}},Tq=.8908130915292852,S2=Tf($f/10)/Tf(7*$f/10),$q=Tf(Wm/10)*S2,Mq=-v2(Wm/10)*S2,Dq={draw(e,t){const r=da(t*Tq),n=$q*r,s=Mq*r;e.moveTo(0,-r),e.lineTo(n,s);for(let o=1;o<5;++o){const i=Wm*o/5,c=v2(i),l=Tf(i);e.lineTo(l*r,-c*r),e.lineTo(c*n-l*s,l*n+c*s)}e.closePath()}},xg=da(3),Iq={draw(e,t){const r=-da(t/(xg*3));e.moveTo(0,r*2),e.lineTo(-xg*r,-r),e.lineTo(xg*r,-r),e.closePath()}},yn=-.5,bn=da(3)/2,qv=1/da(12),Rq=(qv/2+1)*3,Lq={draw(e,t){const r=da(t/Rq),n=r/2,s=r*qv,o=n,i=r*qv+r,c=-o,l=i;e.moveTo(n,s),e.lineTo(o,i),e.lineTo(c,l),e.lineTo(yn*n-bn*s,bn*n+yn*s),e.lineTo(yn*o-bn*i,bn*o+yn*i),e.lineTo(yn*c-bn*l,bn*c+yn*l),e.lineTo(yn*n+bn*s,yn*s-bn*n),e.lineTo(yn*o+bn*i,yn*i-bn*o),e.lineTo(yn*c+bn*l,yn*l-bn*c),e.closePath()}};function Fq(e,t){let r=null,n=Cb(s);e=typeof e=="function"?e:Ct(e||Ab),t=typeof t=="function"?t:Ct(t===void 0?64:+t);function s(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return s.type=function(o){return arguments.length?(e=typeof o=="function"?o:Ct(o),s):e},s.size=function(o){return arguments.length?(t=typeof o=="function"?o:Ct(+o),s):t},s.context=function(o){return arguments.length?(r=o??null,s):r},s}function Mf(){}function Df(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function C2(e){this._context=e}C2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Df(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Df(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zq(e){return new C2(e)}function P2(e){this._context=e}P2.prototype={areaStart:Mf,areaEnd:Mf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Df(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bq(e){return new P2(e)}function A2(e){this._context=e}A2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Df(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vq(e){return new A2(e)}function k2(e){this._context=e}k2.prototype={areaStart:Mf,areaEnd:Mf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Uq(e){return new k2(e)}function Kw(e){return e<0?-1:1}function Yw(e,t,r){var n=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),c=(o*s+i*n)/(n+s);return(Kw(o)+Kw(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(c))||0}function Zw(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function yg(e,t,r){var n=e._x0,s=e._y0,o=e._x1,i=e._y1,c=(o-n)/3;e._context.bezierCurveTo(n+c,s+c*t,o-c,i-c*r,o,i)}function If(e){this._context=e}If.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yg(this,this._t0,Zw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yg(this,Zw(this,r=Yw(this,e,t)),r);break;default:yg(this,this._t0,r=Yw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function E2(e){this._context=new O2(e)}(E2.prototype=Object.create(If.prototype)).point=function(e,t){If.prototype.point.call(this,t,e)};function O2(e){this._context=e}O2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,o){this._context.bezierCurveTo(t,e,n,r,o,s)}};function qq(e){return new If(e)}function Wq(e){return new E2(e)}function T2(e){this._context=e}T2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Xw(e),s=Xw(t),o=0,i=1;i<r;++o,++i)this._context.bezierCurveTo(n[0][o],s[0][o],n[1][o],s[1][o],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Xw(e){var t,r=e.length-1,n,s=new Array(r),o=new Array(r),i=new Array(r);for(s[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/o[t];for(o[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function Hq(e){return new T2(e)}function Gm(e,t){this._context=e,this._t=t}Gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Gq(e){return new Gm(e,.5)}function Kq(e){return new Gm(e,0)}function Yq(e){return new Gm(e,1)}function $i(e,t){if((i=e.length)>1)for(var r=1,n,s,o=e[t[0]],i,c=o.length;r<i;++r)for(s=o,o=e[t[r]],n=0;n<c;++n)o[n][1]+=o[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Wv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Zq(e,t){return e[t]}function Xq(e){const t=[];return t.key=e,t}function Jq(){var e=Ct([]),t=Wv,r=$i,n=Zq;function s(o){var i=Array.from(e.apply(this,arguments),Xq),c,l=i.length,d=-1,u;for(const f of o)for(c=0,++d;c<l;++c)(i[c][d]=[0,+n(f,i[c].key,d,o)]).data=f;for(c=0,u=Pb(t(i));c<l;++c)i[u[c]].index=c;return r(i,u),i}return s.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Ct(Array.from(o)),s):e},s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Ct(+o),s):n},s.order=function(o){return arguments.length?(t=o==null?Wv:typeof o=="function"?o:Ct(Array.from(o)),s):t},s.offset=function(o){return arguments.length?(r=o??$i,s):r},s}function Qq(e,t){if((n=e.length)>0){for(var r,n,s=0,o=e[0].length,i;s<o;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}$i(e,t)}}function eW(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,o=n.length;r<o;++r){for(var i=0,c=0;i<s;++i)c+=e[i][r][1]||0;n[r][1]+=n[r][0]=-c/2}$i(e,t)}}function tW(e,t){if(!(!((i=e.length)>0)||!((o=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,o,i;n<o;++n){for(var c=0,l=0,d=0;c<i;++c){for(var u=e[t[c]],f=u[n][1]||0,h=u[n-1][1]||0,p=(f-h)/2,v=0;v<c;++v){var m=e[t[v]],g=m[n][1]||0,y=m[n-1][1]||0;p+=g-y}l+=f,d+=p*f}s[n-1][1]+=s[n-1][0]=r,l&&(r-=d/l)}s[n-1][1]+=s[n-1][0]=r,$i(e,t)}}function ql(e){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}var rW=["type","size","sizeType"];function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hv.apply(this,arguments)}function Jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(r),!0).forEach(function(n){nW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nW(e,t,r){return t=aW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aW(e){var t=sW(e,"string");return ql(t)=="symbol"?t:t+""}function sW(e,t){if(ql(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oW(e,t){if(e==null)return{};var r=iW(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $2={symbolCircle:Ab,symbolCross:Aq,symbolDiamond:Eq,symbolSquare:Oq,symbolStar:Dq,symbolTriangle:Iq,symbolWye:Lq},cW=Math.PI/180,lW=function(t){var r="symbol".concat(qm(t));return $2[r]||Ab},dW=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*cW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},uW=function(t,r){$2["symbol".concat(qm(t))]=r},kb=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,o=s===void 0?64:s,i=t.sizeType,c=i===void 0?"area":i,l=oW(t,rW),d=Qw(Qw({},l),{},{type:n,size:o,sizeType:c}),u=function(){var g=lW(n),y=Fq().type(g).size(dW(o,c,n));return y()},f=d.className,h=d.cx,p=d.cy,v=Ae(d,!0);return h===+h&&p===+p&&o===+o?E.createElement("path",Hv({},v,{className:Ke("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};kb.registerSymbol=uW;function Mi(e){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(e)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(this,arguments)}function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(n){Wl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D2(n.key),n)}}function pW(e,t,r){return t&&mW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gW(e,t,r){return t=Rf(t),vW(e,M2()?Reflect.construct(t,r||[],Rf(e).constructor):t.apply(e,r))}function vW(e,t){if(t&&(Mi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xW(e)}function xW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M2=function(){return!!e})()}function Rf(e){return Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rf(e)}function yW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}function Kv(e,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Kv(e,t)}function Wl(e,t,r){return t=D2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D2(e){var t=bW(e,"string");return Mi(t)=="symbol"?t:t+""}function bW(e,t){if(Mi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jn=32,Eb=function(e){function t(){return hW(this,t),gW(this,t,arguments)}return yW(t,e),pW(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,o=jn/2,i=jn/6,c=jn/3,l=n.inactive?s:n.color;if(n.type==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:jn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(c,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*c,",").concat(o,`
            H`).concat(jn,"M").concat(2*c,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(c,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return E.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(jn/8,"h").concat(jn,"v").concat(jn*3/4,"h").concat(-jn,"z"),className:"recharts-legend-icon"});if(E.isValidElement(n.legendIcon)){var d=fW({},n);return delete d.legendIcon,E.cloneElement(n.legendIcon,d)}return E.createElement(kb,{fill:l,cx:o,cy:o,size:jn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,o=s.payload,i=s.iconSize,c=s.layout,l=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:jn,height:jn},f={display:c==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,v){var m=p.formatter||l,g=Ke(Wl(Wl({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Le(p.value)?null:p.value;Xn(!Le(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=p.inactive?d:p.color;return E.createElement("li",Gv({className:g,style:f,key:"legend-item-".concat(v)},ko(n.props,p,v)),E.createElement(Lv,{width:i,height:i,viewBox:u,style:h},n.renderIcon(p)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},m?m(y,p,v):y))})}},{key:"render",value:function(){var n=this.props,s=n.payload,o=n.layout,i=n.align;if(!s||!s.length)return null;var c={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])}(x.PureComponent);Wl(Eb,"displayName","Legend");Wl(Eb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jW=Om;function wW(){this.__data__=new jW,this.size=0}var NW=wW;function _W(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var SW=_W;function CW(e){return this.__data__.get(e)}var PW=CW;function AW(e){return this.__data__.has(e)}var kW=AW,EW=Om,OW=vb,TW=xb,$W=200;function MW(e,t){var r=this.__data__;if(r instanceof EW){var n=r.__data__;if(!OW||n.length<$W-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new TW(n)}return r.set(e,t),this.size=r.size,this}var DW=MW,IW=Om,RW=NW,LW=SW,FW=PW,zW=kW,BW=DW;function Mc(e){var t=this.__data__=new IW(e);this.size=t.size}Mc.prototype.clear=RW;Mc.prototype.delete=LW;Mc.prototype.get=FW;Mc.prototype.has=zW;Mc.prototype.set=BW;var I2=Mc,VW="__lodash_hash_undefined__";function UW(e){return this.__data__.set(e,VW),this}var qW=UW;function WW(e){return this.__data__.has(e)}var HW=WW,GW=xb,KW=qW,YW=HW;function Lf(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new GW;++t<r;)this.add(e[t])}Lf.prototype.add=Lf.prototype.push=KW;Lf.prototype.has=YW;var R2=Lf;function ZW(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var L2=ZW;function XW(e,t){return e.has(t)}var F2=XW,JW=R2,QW=L2,e7=F2,t7=1,r7=2;function n7(e,t,r,n,s,o){var i=r&t7,c=e.length,l=t.length;if(c!=l&&!(i&&l>c))return!1;var d=o.get(e),u=o.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,p=r&r7?new JW:void 0;for(o.set(e,t),o.set(t,e);++f<c;){var v=e[f],m=t[f];if(n)var g=i?n(m,v,f,t,e,o):n(v,m,f,e,t,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!QW(t,function(y,b){if(!e7(p,b)&&(v===y||s(v,y,r,n,o)))return p.push(b)})){h=!1;break}}else if(!(v===m||s(v,m,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var z2=n7,a7=$a,s7=a7.Uint8Array,o7=s7;function i7(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var c7=i7;function l7(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Ob=l7,tN=Yd,rN=o7,d7=gb,u7=z2,f7=c7,h7=Ob,m7=1,p7=2,g7="[object Boolean]",v7="[object Date]",x7="[object Error]",y7="[object Map]",b7="[object Number]",j7="[object RegExp]",w7="[object Set]",N7="[object String]",_7="[object Symbol]",S7="[object ArrayBuffer]",C7="[object DataView]",nN=tN?tN.prototype:void 0,bg=nN?nN.valueOf:void 0;function P7(e,t,r,n,s,o,i){switch(r){case C7:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S7:return!(e.byteLength!=t.byteLength||!o(new rN(e),new rN(t)));case g7:case v7:case b7:return d7(+e,+t);case x7:return e.name==t.name&&e.message==t.message;case j7:case N7:return e==t+"";case y7:var c=f7;case w7:var l=n&m7;if(c||(c=h7),e.size!=t.size&&!l)return!1;var d=i.get(e);if(d)return d==t;n|=p7,i.set(e,t);var u=u7(c(e),c(t),n,s,o,i);return i.delete(e),u;case _7:if(bg)return bg.call(e)==bg.call(t)}return!1}var A7=P7;function k7(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var B2=k7,E7=B2,O7=Qr;function T7(e,t,r){var n=t(e);return O7(e)?n:E7(n,r(e))}var $7=T7;function M7(e,t){for(var r=-1,n=e==null?0:e.length,s=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[s++]=i)}return o}var D7=M7;function I7(){return[]}var R7=I7,L7=D7,F7=R7,z7=Object.prototype,B7=z7.propertyIsEnumerable,aN=Object.getOwnPropertySymbols,V7=aN?function(e){return e==null?[]:(e=Object(e),L7(aN(e),function(t){return B7.call(e,t)}))}:F7,U7=V7;function q7(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var W7=q7,H7=ls,G7=ds,K7="[object Arguments]";function Y7(e){return G7(e)&&H7(e)==K7}var Z7=Y7,sN=Z7,X7=ds,V2=Object.prototype,J7=V2.hasOwnProperty,Q7=V2.propertyIsEnumerable,eH=sN(function(){return arguments}())?sN:function(e){return X7(e)&&J7.call(e,"callee")&&!Q7.call(e,"callee")},Tb=eH,Ff={exports:{}};function tH(){return!1}var rH=tH;Ff.exports;(function(e,t){var r=$a,n=rH,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===s,c=i?r.Buffer:void 0,l=c?c.isBuffer:void 0,d=l||n;e.exports=d})(Ff,Ff.exports);var U2=Ff.exports,nH=9007199254740991,aH=/^(?:0|[1-9]\d*)$/;function sH(e,t){var r=typeof e;return t=t??nH,!!t&&(r=="number"||r!="symbol"&&aH.test(e))&&e>-1&&e%1==0&&e<t}var $b=sH,oH=9007199254740991;function iH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oH}var Mb=iH,cH=ls,lH=Mb,dH=ds,uH="[object Arguments]",fH="[object Array]",hH="[object Boolean]",mH="[object Date]",pH="[object Error]",gH="[object Function]",vH="[object Map]",xH="[object Number]",yH="[object Object]",bH="[object RegExp]",jH="[object Set]",wH="[object String]",NH="[object WeakMap]",_H="[object ArrayBuffer]",SH="[object DataView]",CH="[object Float32Array]",PH="[object Float64Array]",AH="[object Int8Array]",kH="[object Int16Array]",EH="[object Int32Array]",OH="[object Uint8Array]",TH="[object Uint8ClampedArray]",$H="[object Uint16Array]",MH="[object Uint32Array]",Tt={};Tt[CH]=Tt[PH]=Tt[AH]=Tt[kH]=Tt[EH]=Tt[OH]=Tt[TH]=Tt[$H]=Tt[MH]=!0;Tt[uH]=Tt[fH]=Tt[_H]=Tt[hH]=Tt[SH]=Tt[mH]=Tt[pH]=Tt[gH]=Tt[vH]=Tt[xH]=Tt[yH]=Tt[bH]=Tt[jH]=Tt[wH]=Tt[NH]=!1;function DH(e){return dH(e)&&lH(e.length)&&!!Tt[cH(e)]}var IH=DH;function RH(e){return function(t){return e(t)}}var q2=RH,zf={exports:{}};zf.exports;(function(e,t){var r=ZA,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===n,i=o&&r.process,c=function(){try{var l=s&&s.require&&s.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();e.exports=c})(zf,zf.exports);var LH=zf.exports,FH=IH,zH=q2,oN=LH,iN=oN&&oN.isTypedArray,BH=iN?zH(iN):FH,W2=BH,VH=W7,UH=Tb,qH=Qr,WH=U2,HH=$b,GH=W2,KH=Object.prototype,YH=KH.hasOwnProperty;function ZH(e,t){var r=qH(e),n=!r&&UH(e),s=!r&&!n&&WH(e),o=!r&&!n&&!s&&GH(e),i=r||n||s||o,c=i?VH(e.length,String):[],l=c.length;for(var d in e)(t||YH.call(e,d))&&!(i&&(d=="length"||s&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||HH(d,l)))&&c.push(d);return c}var XH=ZH,JH=Object.prototype;function QH(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||JH;return e===r}var eG=QH;function tG(e,t){return function(r){return e(t(r))}}var H2=tG,rG=H2,nG=rG(Object.keys,Object),aG=nG,sG=eG,oG=aG,iG=Object.prototype,cG=iG.hasOwnProperty;function lG(e){if(!sG(e))return oG(e);var t=[];for(var r in Object(e))cG.call(e,r)&&r!="constructor"&&t.push(r);return t}var dG=lG,uG=pb,fG=Mb;function hG(e){return e!=null&&fG(e.length)&&!uG(e)}var Xd=hG,mG=XH,pG=dG,gG=Xd;function vG(e){return gG(e)?mG(e):pG(e)}var Km=vG,xG=$7,yG=U7,bG=Km;function jG(e){return xG(e,bG,yG)}var wG=jG,cN=wG,NG=1,_G=Object.prototype,SG=_G.hasOwnProperty;function CG(e,t,r,n,s,o){var i=r&NG,c=cN(e),l=c.length,d=cN(t),u=d.length;if(l!=u&&!i)return!1;for(var f=l;f--;){var h=c[f];if(!(i?h in t:SG.call(t,h)))return!1}var p=o.get(e),v=o.get(t);if(p&&v)return p==t&&v==e;var m=!0;o.set(e,t),o.set(t,e);for(var g=i;++f<l;){h=c[f];var y=e[h],b=t[h];if(n)var w=i?n(b,y,h,t,e,o):n(y,b,h,e,t,o);if(!(w===void 0?y===b||s(y,b,r,n,o):w)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var j=e.constructor,N=t.constructor;j!=N&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof N=="function"&&N instanceof N)&&(m=!1)}return o.delete(e),o.delete(t),m}var PG=CG,AG=qo,kG=$a,EG=AG(kG,"DataView"),OG=EG,TG=qo,$G=$a,MG=TG($G,"Promise"),DG=MG,IG=qo,RG=$a,LG=IG(RG,"Set"),G2=LG,FG=qo,zG=$a,BG=FG(zG,"WeakMap"),VG=BG,Yv=OG,Zv=vb,Xv=DG,Jv=G2,Qv=VG,K2=ls,Dc=JA,lN="[object Map]",UG="[object Object]",dN="[object Promise]",uN="[object Set]",fN="[object WeakMap]",hN="[object DataView]",qG=Dc(Yv),WG=Dc(Zv),HG=Dc(Xv),GG=Dc(Jv),KG=Dc(Qv),oo=K2;(Yv&&oo(new Yv(new ArrayBuffer(1)))!=hN||Zv&&oo(new Zv)!=lN||Xv&&oo(Xv.resolve())!=dN||Jv&&oo(new Jv)!=uN||Qv&&oo(new Qv)!=fN)&&(oo=function(e){var t=K2(e),r=t==UG?e.constructor:void 0,n=r?Dc(r):"";if(n)switch(n){case qG:return hN;case WG:return lN;case HG:return dN;case GG:return uN;case KG:return fN}return t});var YG=oo,jg=I2,ZG=z2,XG=A7,JG=PG,mN=YG,pN=Qr,gN=U2,QG=W2,eK=1,vN="[object Arguments]",xN="[object Array]",Mu="[object Object]",tK=Object.prototype,yN=tK.hasOwnProperty;function rK(e,t,r,n,s,o){var i=pN(e),c=pN(t),l=i?xN:mN(e),d=c?xN:mN(t);l=l==vN?Mu:l,d=d==vN?Mu:d;var u=l==Mu,f=d==Mu,h=l==d;if(h&&gN(e)){if(!gN(t))return!1;i=!0,u=!1}if(h&&!u)return o||(o=new jg),i||QG(e)?ZG(e,t,r,n,s,o):XG(e,t,l,r,n,s,o);if(!(r&eK)){var p=u&&yN.call(e,"__wrapped__"),v=f&&yN.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return o||(o=new jg),s(m,g,r,n,o)}}return h?(o||(o=new jg),JG(e,t,r,n,s,o)):!1}var nK=rK,aK=nK,bN=ds;function Y2(e,t,r,n,s){return e===t?!0:e==null||t==null||!bN(e)&&!bN(t)?e!==e&&t!==t:aK(e,t,r,n,Y2,s)}var Db=Y2,sK=I2,oK=Db,iK=1,cK=2;function lK(e,t,r,n){var s=r.length,o=s,i=!n;if(e==null)return!o;for(e=Object(e);s--;){var c=r[s];if(i&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){c=r[s];var l=c[0],d=e[l],u=c[1];if(i&&c[2]){if(d===void 0&&!(l in e))return!1}else{var f=new sK;if(n)var h=n(d,u,l,e,t,f);if(!(h===void 0?oK(u,d,iK|cK,n,f):h))return!1}}return!0}var dK=lK,uK=Us;function fK(e){return e===e&&!uK(e)}var Z2=fK,hK=Z2,mK=Km;function pK(e){for(var t=mK(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,hK(s)]}return t}var gK=pK;function vK(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var X2=vK,xK=dK,yK=gK,bK=X2;function jK(e){var t=yK(e);return t.length==1&&t[0][2]?bK(t[0][0],t[0][1]):function(r){return r===e||xK(r,e,t)}}var wK=jK;function NK(e,t){return e!=null&&t in Object(e)}var _K=NK,SK=n2,CK=Tb,PK=Qr,AK=$b,kK=Mb,EK=$m;function OK(e,t,r){t=SK(t,e);for(var n=-1,s=t.length,o=!1;++n<s;){var i=EK(t[n]);if(!(o=e!=null&&r(e,i)))break;e=e[i]}return o||++n!=s?o:(s=e==null?0:e.length,!!s&&kK(s)&&AK(i,s)&&(PK(e)||CK(e)))}var TK=OK,$K=_K,MK=TK;function DK(e,t){return e!=null&&MK(e,t,$K)}var IK=DK,RK=Db,LK=a2,FK=IK,zK=mb,BK=Z2,VK=X2,UK=$m,qK=1,WK=2;function HK(e,t){return zK(e)&&BK(t)?VK(UK(e),t):function(r){var n=LK(r,e);return n===void 0&&n===t?FK(r,e):RK(t,n,qK|WK)}}var GK=HK;function KK(e){return e}var Ic=KK;function YK(e){return function(t){return t?.[e]}}var ZK=YK,XK=jb;function JK(e){return function(t){return XK(t,e)}}var QK=JK,eY=ZK,tY=QK,rY=mb,nY=$m;function aY(e){return rY(e)?eY(nY(e)):tY(e)}var sY=aY,oY=wK,iY=GK,cY=Ic,lY=Qr,dY=sY;function uY(e){return typeof e=="function"?e:e==null?cY:typeof e=="object"?lY(e)?iY(e[0],e[1]):oY(e):dY(e)}var Ma=uY;function fY(e,t,r,n){for(var s=e.length,o=r+(n?1:-1);n?o--:++o<s;)if(t(e[o],o,e))return o;return-1}var J2=fY;function hY(e){return e!==e}var mY=hY;function pY(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var gY=pY,vY=J2,xY=mY,yY=gY;function bY(e,t,r){return t===t?yY(e,t,r):vY(e,xY,r)}var jY=bY,wY=jY;function NY(e,t){var r=e==null?0:e.length;return!!r&&wY(e,t,0)>-1}var _Y=NY;function SY(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var CY=SY;function PY(){}var AY=PY,wg=G2,kY=AY,EY=Ob,OY=1/0,TY=wg&&1/EY(new wg([,-0]))[1]==OY?function(e){return new wg(e)}:kY,$Y=TY,MY=R2,DY=_Y,IY=CY,RY=F2,LY=$Y,FY=Ob,zY=200;function BY(e,t,r){var n=-1,s=DY,o=e.length,i=!0,c=[],l=c;if(r)i=!1,s=IY;else if(o>=zY){var d=t?null:LY(e);if(d)return FY(d);i=!1,s=RY,l=new MY}else l=t?[]:c;e:for(;++n<o;){var u=e[n],f=t?t(u):u;if(u=r||u!==0?u:0,i&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),c.push(u)}else s(l,f,r)||(l!==c&&l.push(f),c.push(u))}return c}var VY=BY,UY=Ma,qY=VY;function WY(e,t){return e&&e.length?qY(e,UY(t)):[]}var HY=WY;const jN=yt(HY);function Q2(e,t,r){return t===!0?jN(e,r):Le(t)?jN(e,t):e}function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}var GY=["ref"];function wN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wN(Object(r),!0).forEach(function(n){Ym(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tk(n.key),n)}}function YY(e,t,r){return t&&NN(e.prototype,t),r&&NN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZY(e,t,r){return t=Bf(t),XY(e,ek()?Reflect.construct(t,r||[],Bf(e).constructor):t.apply(e,r))}function XY(e,t){if(t&&(Di(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JY(e)}function JY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ek(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ek=function(){return!!e})()}function Bf(e){return Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bf(e)}function QY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ex(e,t)}function Ym(e,t,r){return t=tk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tk(e){var t=eZ(e,"string");return Di(t)=="symbol"?t:t+""}function eZ(e,t){if(Di(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tZ(e,t){if(e==null)return{};var r=rZ(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nZ(e){return e.value}function aZ(e,t){if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return E.createElement(e,t);t.ref;var r=tZ(t,GY);return E.createElement(Eb,r)}var _N=1,_a=function(e){function t(){var r;KY(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=ZY(this,t,[].concat(s)),Ym(r,"lastBoundingBox",{width:-1,height:-1}),r}return QY(t,e),YY(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>_N||Math.abs(s.height-this.lastBoundingBox.height)>_N)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Fa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,o=s.layout,i=s.align,c=s.verticalAlign,l=s.margin,d=s.chartWidth,u=s.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var v=this.getBBoxSnapshot();h={top:((u||0)-v.height)/2}}else h=c==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Fa(Fa({},f),h)}},{key:"render",value:function(){var n=this,s=this.props,o=s.content,i=s.width,c=s.height,l=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,f=Fa(Fa({position:"absolute",width:i||"auto",height:c||"auto"},this.getDefaultPosition(l)),l);return E.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},aZ(o,Fa(Fa({},this.props),{},{payload:Q2(u,d,nZ)})))}}],[{key:"getWithHeight",value:function(n,s){var o=Fa(Fa({},this.defaultProps),n.props),i=o.layout;return i==="vertical"&&ge(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||s}:null}}])}(x.PureComponent);Ym(_a,"displayName","Legend");Ym(_a,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var SN=Yd,sZ=Tb,oZ=Qr,CN=SN?SN.isConcatSpreadable:void 0;function iZ(e){return oZ(e)||sZ(e)||!!(CN&&e&&e[CN])}var cZ=iZ,lZ=B2,dZ=cZ;function rk(e,t,r,n,s){var o=-1,i=e.length;for(r||(r=dZ),s||(s=[]);++o<i;){var c=e[o];t>0&&r(c)?t>1?rk(c,t-1,r,n,s):lZ(s,c):n||(s[s.length]=c)}return s}var nk=rk;function uZ(e){return function(t,r,n){for(var s=-1,o=Object(t),i=n(t),c=i.length;c--;){var l=i[e?c:++s];if(r(o[l],l,o)===!1)break}return t}}var fZ=uZ,hZ=fZ,mZ=hZ(),pZ=mZ,gZ=pZ,vZ=Km;function xZ(e,t){return e&&gZ(e,t,vZ)}var ak=xZ,yZ=Xd;function bZ(e,t){return function(r,n){if(r==null)return r;if(!yZ(r))return e(r,n);for(var s=r.length,o=t?s:-1,i=Object(r);(t?o--:++o<s)&&n(i[o],o,i)!==!1;);return r}}var jZ=bZ,wZ=ak,NZ=jZ,_Z=NZ(wZ),Ib=_Z,SZ=Ib,CZ=Xd;function PZ(e,t){var r=-1,n=CZ(e)?Array(e.length):[];return SZ(e,function(s,o,i){n[++r]=t(s,o,i)}),n}var sk=PZ;function AZ(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var kZ=AZ,PN=Ac;function EZ(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,o=PN(e),i=t!==void 0,c=t===null,l=t===t,d=PN(t);if(!c&&!d&&!o&&e>t||o&&i&&l&&!c&&!d||n&&i&&l||!r&&l||!s)return 1;if(!n&&!o&&!d&&e<t||d&&r&&s&&!n&&!o||c&&r&&s||!i&&s||!l)return-1}return 0}var OZ=EZ,TZ=OZ;function $Z(e,t,r){for(var n=-1,s=e.criteria,o=t.criteria,i=s.length,c=r.length;++n<i;){var l=TZ(s[n],o[n]);if(l){if(n>=c)return l;var d=r[n];return l*(d=="desc"?-1:1)}}return e.index-t.index}var MZ=$Z,Ng=bb,DZ=jb,IZ=Ma,RZ=sk,LZ=kZ,FZ=q2,zZ=MZ,BZ=Ic,VZ=Qr;function UZ(e,t,r){t.length?t=Ng(t,function(o){return VZ(o)?function(i){return DZ(i,o.length===1?o[0]:o)}:o}):t=[BZ];var n=-1;t=Ng(t,FZ(IZ));var s=RZ(e,function(o,i,c){var l=Ng(t,function(d){return d(o)});return{criteria:l,index:++n,value:o}});return LZ(s,function(o,i){return zZ(o,i,r)})}var qZ=UZ;function WZ(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var HZ=WZ,GZ=HZ,AN=Math.max;function KZ(e,t,r){return t=AN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,o=AN(n.length-t,0),i=Array(o);++s<o;)i[s]=n[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=n[s];return c[t]=r(i),GZ(e,this,c)}}var YZ=KZ;function ZZ(e){return function(){return e}}var XZ=ZZ,JZ=qo,QZ=function(){try{var e=JZ(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ok=QZ,eX=XZ,kN=ok,tX=Ic,rX=kN?function(e,t){return kN(e,"toString",{configurable:!0,enumerable:!1,value:eX(t),writable:!0})}:tX,nX=rX,aX=800,sX=16,oX=Date.now;function iX(e){var t=0,r=0;return function(){var n=oX(),s=sX-(n-r);if(r=n,s>0){if(++t>=aX)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var cX=iX,lX=nX,dX=cX,uX=dX(lX),fX=uX,hX=Ic,mX=YZ,pX=fX;function gX(e,t){return pX(mX(e,t,hX),e+"")}var vX=gX,xX=gb,yX=Xd,bX=$b,jX=Us;function wX(e,t,r){if(!jX(r))return!1;var n=typeof t;return(n=="number"?yX(r)&&bX(t,r.length):n=="string"&&t in r)?xX(r[t],e):!1}var Zm=wX,NX=nk,_X=qZ,SX=vX,EN=Zm,CX=SX(function(e,t){if(e==null)return[];var r=t.length;return r>1&&EN(e,t[0],t[1])?t=[]:r>2&&EN(t[0],t[1],t[2])&&(t=[t[0]]),_X(e,NX(t,1),[])}),PX=CX;const Rb=yt(PX);function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tx.apply(this,arguments)}function AX(e,t){return TX(e)||OX(e,t)||EX(e,t)||kX()}function kX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EX(e,t){if(e){if(typeof e=="string")return ON(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ON(e,t)}}function ON(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function TX(e){if(Array.isArray(e))return e}function TN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(r),!0).forEach(function(n){$X(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $X(e,t,r){return t=MX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){var t=DX(e,"string");return Hl(t)=="symbol"?t:t+""}function DX(e,t){if(Hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IX(e){return Array.isArray(e)&&cr(e[0])&&cr(e[1])?e.join(" ~ "):e}var RX=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,o=s===void 0?{}:s,i=t.itemStyle,c=i===void 0?{}:i,l=t.labelStyle,d=l===void 0?{}:l,u=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,m=t.label,g=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(u&&u.length){var P={padding:0,margin:0},O=(h?Rb(u,h):u).map(function(M,R){if(M.type==="none")return null;var T=_g({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},c),D=M.formatter||f||IX,I=M.value,U=M.name,oe=I,J=U;if(D&&oe!=null&&J!=null){var ie=D(I,U,M,R,u);if(Array.isArray(ie)){var me=AX(ie,2);oe=me[0],J=me[1]}else oe=ie}return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:T},cr(J)?E.createElement("span",{className:"recharts-tooltip-item-name"},J):null,cr(J)?E.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,E.createElement("span",{className:"recharts-tooltip-item-value"},oe),E.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:P},O)}return null},j=_g({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),N=_g({margin:0},d),_=!We(m),S=_?m:"",C=Ke("recharts-default-tooltip",p),k=Ke("recharts-tooltip-label",v);_&&g&&u!==void 0&&u!==null&&(S=g(m,u));var $=b?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",tx({className:C,style:j},$),E.createElement("p",{className:k,style:N},E.isValidElement(S)?S:"".concat(S)),w())};function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function Du(e,t,r){return t=LX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=FX(e,"string");return Gl(t)=="symbol"?t:t+""}function FX(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tl="recharts-tooltip-wrapper",zX={visibility:"hidden"};function BX(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Ke(tl,Du(Du(Du(Du({},"".concat(tl,"-right"),ge(r)&&t&&ge(t.x)&&r>=t.x),"".concat(tl,"-left"),ge(r)&&t&&ge(t.x)&&r<t.x),"".concat(tl,"-bottom"),ge(n)&&t&&ge(t.y)&&n>=t.y),"".concat(tl,"-top"),ge(n)&&t&&ge(t.y)&&n<t.y))}function $N(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,o=e.position,i=e.reverseDirection,c=e.tooltipDimension,l=e.viewBox,d=e.viewBoxDimension;if(o&&ge(o[n]))return o[n];var u=r[n]-c-s,f=r[n]+s;if(t[n])return i[n]?u:f;if(i[n]){var h=u,p=l[n];return h<p?Math.max(f,l[n]):Math.max(u,l[n])}var v=f+c,m=l[n]+d;return v>m?Math.max(u,l[n]):Math.max(f,l[n])}function VX(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function UX(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,o=e.reverseDirection,i=e.tooltipBox,c=e.useTranslate3d,l=e.viewBox,d,u,f;return i.height>0&&i.width>0&&r?(u=$N({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=$N({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),d=VX({translateX:u,translateY:f,useTranslate3d:c})):d=zX,{cssProperties:d,cssClasses:BX({translateX:u,translateY:f,coordinate:r})}}function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(e)}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){nx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ck(n.key),n)}}function HX(e,t,r){return t&&WX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GX(e,t,r){return t=Vf(t),KX(e,ik()?Reflect.construct(t,r||[],Vf(e).constructor):t.apply(e,r))}function KX(e,t){if(t&&(Ii(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YX(e)}function YX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ik(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ik=function(){return!!e})()}function Vf(e){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vf(e)}function ZX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}function rx(e,t){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},rx(e,t)}function nx(e,t,r){return t=ck(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ck(e){var t=XX(e,"string");return Ii(t)=="symbol"?t:t+""}function XX(e,t){if(Ii(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ii(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var IN=1,JX=function(e){function t(){var r;qX(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=GX(this,t,[].concat(s)),nx(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),nx(r,"handleKeyDown",function(i){if(i.key==="Escape"){var c,l,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&c!==void 0?c:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return ZX(t,e),HX(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>IN||Math.abs(n.height-this.state.lastBoundingBox.height)>IN)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,o=s.active,i=s.allowEscapeViewBox,c=s.animationDuration,l=s.animationEasing,d=s.children,u=s.coordinate,f=s.hasPayload,h=s.isAnimationActive,p=s.offset,v=s.position,m=s.reverseDirection,g=s.useTranslate3d,y=s.viewBox,b=s.wrapperStyle,w=UX({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:p,position:v,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),j=w.cssClasses,N=w.cssProperties,_=DN(DN({transition:h&&o?"transform ".concat(c,"ms ").concat(l):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return E.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(C){n.wrapperNode=C}},d)}}])}(x.PureComponent),QX=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},qs={isSsr:QX()};function Ri(e){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function RN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(r),!0).forEach(function(n){Lb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dk(n.key),n)}}function rJ(e,t,r){return t&&tJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nJ(e,t,r){return t=Uf(t),aJ(e,lk()?Reflect.construct(t,r||[],Uf(e).constructor):t.apply(e,r))}function aJ(e,t){if(t&&(Ri(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sJ(e)}function sJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lk=function(){return!!e})()}function Uf(e){return Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uf(e)}function oJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function ax(e,t){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ax(e,t)}function Lb(e,t,r){return t=dk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dk(e){var t=iJ(e,"string");return Ri(t)=="symbol"?t:t+""}function iJ(e,t){if(Ri(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ri(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cJ(e){return e.dataKey}function lJ(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(RX,t)}var yr=function(e){function t(){return eJ(this,t),nJ(this,t,arguments)}return oJ(t,e),rJ(t,[{key:"render",value:function(){var n=this,s=this.props,o=s.active,i=s.allowEscapeViewBox,c=s.animationDuration,l=s.animationEasing,d=s.content,u=s.coordinate,f=s.filterNull,h=s.isAnimationActive,p=s.offset,v=s.payload,m=s.payloadUniqBy,g=s.position,y=s.reverseDirection,b=s.useTranslate3d,w=s.viewBox,j=s.wrapperStyle,N=v??[];f&&N.length&&(N=Q2(v.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),m,cJ));var _=N.length>0;return E.createElement(JX,{allowEscapeViewBox:i,animationDuration:c,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:_,offset:p,position:g,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:j},lJ(d,LN(LN({},this.props),{},{payload:N})))}}])}(x.PureComponent);Lb(yr,"displayName","Tooltip");Lb(yr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!qs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var dJ=$a,uJ=function(){return dJ.Date.now()},fJ=uJ,hJ=/\s/;function mJ(e){for(var t=e.length;t--&&hJ.test(e.charAt(t)););return t}var pJ=mJ,gJ=pJ,vJ=/^\s+/;function xJ(e){return e&&e.slice(0,gJ(e)+1).replace(vJ,"")}var yJ=xJ,bJ=yJ,FN=Us,jJ=Ac,zN=NaN,wJ=/^[-+]0x[0-9a-f]+$/i,NJ=/^0b[01]+$/i,_J=/^0o[0-7]+$/i,SJ=parseInt;function CJ(e){if(typeof e=="number")return e;if(jJ(e))return zN;if(FN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=FN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bJ(e);var r=NJ.test(e);return r||_J.test(e)?SJ(e.slice(2),r?2:8):wJ.test(e)?zN:+e}var uk=CJ,PJ=Us,Sg=fJ,BN=uk,AJ="Expected a function",kJ=Math.max,EJ=Math.min;function OJ(e,t,r){var n,s,o,i,c,l,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(AJ);t=BN(t)||0,PJ(r)&&(u=!!r.leading,f="maxWait"in r,o=f?kJ(BN(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function p(_){var S=n,C=s;return n=s=void 0,d=_,i=e.apply(C,S),i}function v(_){return d=_,c=setTimeout(y,t),u?p(_):i}function m(_){var S=_-l,C=_-d,k=t-S;return f?EJ(k,o-C):k}function g(_){var S=_-l,C=_-d;return l===void 0||S>=t||S<0||f&&C>=o}function y(){var _=Sg();if(g(_))return b(_);c=setTimeout(y,m(_))}function b(_){return c=void 0,h&&n?p(_):(n=s=void 0,i)}function w(){c!==void 0&&clearTimeout(c),d=0,n=l=s=c=void 0}function j(){return c===void 0?i:b(Sg())}function N(){var _=Sg(),S=g(_);if(n=arguments,s=this,l=_,S){if(c===void 0)return v(l);if(f)return clearTimeout(c),c=setTimeout(y,t),p(l)}return c===void 0&&(c=setTimeout(y,t)),i}return N.cancel=w,N.flush=j,N}var TJ=OJ,$J=TJ,MJ=Us,DJ="Expected a function";function IJ(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(DJ);return MJ(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),$J(e,t,{leading:n,maxWait:t,trailing:s})}var RJ=IJ;const fk=yt(RJ);function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Iu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){LJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LJ(e,t,r){return t=FJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FJ(e){var t=zJ(e,"string");return Kl(t)=="symbol"?t:t+""}function zJ(e,t){if(Kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BJ(e,t){return WJ(e)||qJ(e,t)||UJ(e,t)||VJ()}function VJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UJ(e,t){if(e){if(typeof e=="string")return UN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UN(e,t)}}function UN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function WJ(e){if(Array.isArray(e))return e}var mo=x.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,o=e.width,i=o===void 0?"100%":o,c=e.height,l=c===void 0?"100%":c,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,h=e.maxHeight,p=e.children,v=e.debounce,m=v===void 0?0:v,g=e.id,y=e.className,b=e.onResize,w=e.style,j=w===void 0?{}:w,N=x.useRef(null),_=x.useRef();_.current=b,x.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var S=x.useState({containerWidth:s.width,containerHeight:s.height}),C=BJ(S,2),k=C[0],$=C[1],A=x.useCallback(function(O,M){$(function(R){var T=Math.round(O),D=Math.round(M);return R.containerWidth===T&&R.containerHeight===D?R:{containerWidth:T,containerHeight:D}})},[]);x.useEffect(function(){var O=function(U){var oe,J=U[0].contentRect,ie=J.width,me=J.height;A(ie,me),(oe=_.current)===null||oe===void 0||oe.call(_,ie,me)};m>0&&(O=fk(O,m,{trailing:!0,leading:!1}));var M=new ResizeObserver(O),R=N.current.getBoundingClientRect(),T=R.width,D=R.height;return A(T,D),M.observe(N.current),function(){M.disconnect()}},[A,m]);var P=x.useMemo(function(){var O=k.containerWidth,M=k.containerHeight;if(O<0||M<0)return null;Xn(ho(i)||ho(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),Xn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=ho(i)?O:i,T=ho(l)?M:l;r&&r>0&&(R?T=R/r:T&&(R=T*r),h&&T>h&&(T=h)),Xn(R>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,T,i,l,u,f,r);var D=!Array.isArray(p)&&Ja(p.type).endsWith("Chart");return E.Children.map(p,function(I){return i2.isElement(I)?x.cloneElement(I,Iu({width:R,height:T},D?{style:Iu({height:"100%",width:"100%",maxHeight:T,maxWidth:R},I.props.style)}:{})):I})},[r,p,l,h,f,u,k,i]);return E.createElement("div",{id:g?"".concat(g):void 0,className:Ke("recharts-responsive-container",y),style:Iu(Iu({},j),{},{width:i,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:N},P)}),Li=function(t){return null};Li.displayName="Cell";function Yl(e){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(r),!0).forEach(function(n){HJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HJ(e,t,r){return t=GJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GJ(e){var t=KJ(e,"string");return Yl(t)=="symbol"?t:t+""}function KJ(e,t){if(Yl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ii={widthCache:{},cacheCount:0},YJ=2e3,ZJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WN="recharts_measurement_span";function XJ(e){var t=sx({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Nl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||qs.isSsr)return{width:0,height:0};var n=XJ(r),s=JSON.stringify({text:t,copyStyle:n});if(ii.widthCache[s])return ii.widthCache[s];try{var o=document.getElementById(WN);o||(o=document.createElement("span"),o.setAttribute("id",WN),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=sx(sx({},ZJ),n);Object.assign(o.style,i),o.textContent="".concat(t);var c=o.getBoundingClientRect(),l={width:c.width,height:c.height};return ii.widthCache[s]=l,++ii.cacheCount>YJ&&(ii.cacheCount=0,ii.widthCache={}),l}catch{return{width:0,height:0}}},JJ=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function qf(e,t){return rQ(e)||tQ(e,t)||eQ(e,t)||QJ()}function QJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eQ(e,t){if(e){if(typeof e=="string")return HN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HN(e,t)}}function HN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function rQ(e){if(Array.isArray(e))return e}function nQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sQ(n.key),n)}}function aQ(e,t,r){return t&&GN(e.prototype,t),r&&GN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sQ(e){var t=oQ(e,"string");return Zl(t)=="symbol"?t:t+""}function oQ(e,t){if(Zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hk={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lQ=Object.keys(hk),vi="NaN";function dQ(e,t){return e*hk[t]}var Ru=function(){function e(t,r){nQ(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!iQ.test(r)&&(this.num=NaN,this.unit=""),lQ.includes(r)&&(this.num=dQ(t,r),this.unit="px")}return aQ(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=cQ.exec(r))!==null&&n!==void 0?n:[],o=qf(s,3),i=o[1],c=o[2];return new e(parseFloat(i),c??"")}}])}();function mk(e){if(e.includes(vi))return vi;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=KN.exec(t))!==null&&r!==void 0?r:[],s=qf(n,4),o=s[1],i=s[2],c=s[3],l=Ru.parse(o??""),d=Ru.parse(c??""),u=i==="*"?l.multiply(d):l.divide(d);if(u.isNaN())return vi;t=t.replace(KN,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=YN.exec(t))!==null&&f!==void 0?f:[],p=qf(h,4),v=p[1],m=p[2],g=p[3],y=Ru.parse(v??""),b=Ru.parse(g??""),w=m==="+"?y.add(b):y.subtract(b);if(w.isNaN())return vi;t=t.replace(YN,w.toString())}return t}var ZN=/\(([^()]*)\)/;function uQ(e){for(var t=e;t.includes("(");){var r=ZN.exec(t),n=qf(r,2),s=n[1];t=t.replace(ZN,mk(s))}return t}function fQ(e){var t=e.replace(/\s+/g,"");return t=uQ(t),t=mk(t),t}function hQ(e){try{return fQ(e)}catch{return vi}}function Cg(e){var t=hQ(e.slice(5,-1));return t===vi?"":t}var mQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pQ=["dx","dy","angle","className","breakAll"];function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ox.apply(this,arguments)}function XN(e,t){if(e==null)return{};var r=gQ(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JN(e,t){return bQ(e)||yQ(e,t)||xQ(e,t)||vQ()}function vQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xQ(e,t){if(e){if(typeof e=="string")return QN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QN(e,t)}}function QN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function bQ(e){if(Array.isArray(e))return e}var pk=/[ \f\n\r\t\v\u2028\u2029]+/,gk=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var o=[];We(r)||(n?o=r.toString().split(""):o=r.toString().split(pk));var i=o.map(function(l){return{word:l,width:Nl(l,s).width}}),c=n?0:Nl("",s).width;return{wordsWithComputedWidth:i,spaceWidth:c}}catch{return null}},jQ=function(t,r,n,s,o){var i=t.maxLines,c=t.children,l=t.style,d=t.breakAll,u=ge(i),f=c,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(T,D){var I=D.word,U=D.width,oe=T[T.length-1];if(oe&&(s==null||o||oe.width+U+n<Number(s)))oe.words.push(I),oe.width+=U+n;else{var J={words:[I],width:U};T.push(J)}return T},[])},p=h(r),v=function(R){return R.reduce(function(T,D){return T.width>D.width?T:D})};if(!u)return p;for(var m="",g=function(R){var T=f.slice(0,R),D=gk({breakAll:d,style:l,children:T+m}).wordsWithComputedWidth,I=h(D),U=I.length>i||v(I).width>Number(s);return[U,I]},y=0,b=f.length-1,w=0,j;y<=b&&w<=f.length-1;){var N=Math.floor((y+b)/2),_=N-1,S=g(_),C=JN(S,2),k=C[0],$=C[1],A=g(N),P=JN(A,1),O=P[0];if(!k&&!O&&(y=N+1),k&&O&&(b=N-1),!k&&O){j=$;break}w++}return j||p},e_=function(t){var r=We(t)?[]:t.toString().split(pk);return[{words:r}]},wQ=function(t){var r=t.width,n=t.scaleToFit,s=t.children,o=t.style,i=t.breakAll,c=t.maxLines;if((r||n)&&!qs.isSsr){var l,d,u=gk({breakAll:i,children:s,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,d=h}else return e_(s);return jQ({breakAll:i,children:s,maxLines:c,style:o},l,d,r,n)}return e_(s)},t_="#808080",Eo=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,o=s===void 0?0:s,i=t.lineHeight,c=i===void 0?"1em":i,l=t.capHeight,d=l===void 0?"0.71em":l,u=t.scaleToFit,f=u===void 0?!1:u,h=t.textAnchor,p=h===void 0?"start":h,v=t.verticalAnchor,m=v===void 0?"end":v,g=t.fill,y=g===void 0?t_:g,b=XN(t,mQ),w=x.useMemo(function(){return wQ({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),j=b.dx,N=b.dy,_=b.angle,S=b.className,C=b.breakAll,k=XN(b,pQ);if(!cr(n)||!cr(o))return null;var $=n+(ge(j)?j:0),A=o+(ge(N)?N:0),P;switch(m){case"start":P=Cg("calc(".concat(d,")"));break;case"middle":P=Cg("calc(".concat((w.length-1)/2," * -").concat(c," + (").concat(d," / 2))"));break;default:P=Cg("calc(".concat(w.length-1," * -").concat(c,")"));break}var O=[];if(f){var M=w[0].width,R=b.width;O.push("scale(".concat((ge(R)?R/M:1)/M,")"))}return _&&O.push("rotate(".concat(_,", ").concat($,", ").concat(A,")")),O.length&&(k.transform=O.join(" ")),E.createElement("text",ox({},Ae(k,!0),{x:$,y:A,className:Ke("recharts-text",S),textAnchor:p,fill:y.includes("url")?t_:y}),w.map(function(T,D){var I=T.words.join(C?"":" ");return E.createElement("tspan",{x:$,dy:D===0?P:c,key:"".concat(I,"-").concat(D)},I)}))};function ks(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fb(e){let t,r,n;e.length!==2?(t=ks,r=(c,l)=>ks(e(c),l),n=(c,l)=>e(c)-l):(t=e===ks||e===NQ?e:_Q,r=e,n=e);function s(c,l,d=0,u=c.length){if(d<u){if(t(l,l)!==0)return u;do{const f=d+u>>>1;r(c[f],l)<0?d=f+1:u=f}while(d<u)}return d}function o(c,l,d=0,u=c.length){if(d<u){if(t(l,l)!==0)return u;do{const f=d+u>>>1;r(c[f],l)<=0?d=f+1:u=f}while(d<u)}return d}function i(c,l,d=0,u=c.length){const f=s(c,l,d,u-1);return f>d&&n(c[f-1],l)>-n(c[f],l)?f-1:f}return{left:s,center:i,right:o}}function _Q(){return 0}function vk(e){return e===null?NaN:+e}function*SQ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const CQ=Fb(ks),Jd=CQ.right;Fb(vk).center;class r_ extends Map{constructor(t,r=kQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(n_(this,t))}has(t){return super.has(n_(this,t))}set(t,r){return super.set(PQ(this,t),r)}delete(t){return super.delete(AQ(this,t))}}function n_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function PQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function AQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function kQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function EQ(e=ks){if(e===ks)return xk;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function xk(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const OQ=Math.sqrt(50),TQ=Math.sqrt(10),$Q=Math.sqrt(2);function Wf(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),o=n/Math.pow(10,s),i=o>=OQ?10:o>=TQ?5:o>=$Q?2:1;let c,l,d;return s<0?(d=Math.pow(10,-s)/i,c=Math.round(e*d),l=Math.round(t*d),c/d<e&&++c,l/d>t&&--l,d=-d):(d=Math.pow(10,s)*i,c=Math.round(e/d),l=Math.round(t/d),c*d<e&&++c,l*d>t&&--l),l<c&&.5<=r&&r<2?Wf(e,t,r*2):[c,l,d]}function ix(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,o,i]=n?Wf(t,e,r):Wf(e,t,r);if(!(o>=s))return[];const c=o-s+1,l=new Array(c);if(n)if(i<0)for(let d=0;d<c;++d)l[d]=(o-d)/-i;else for(let d=0;d<c;++d)l[d]=(o-d)*i;else if(i<0)for(let d=0;d<c;++d)l[d]=(s+d)/-i;else for(let d=0;d<c;++d)l[d]=(s+d)*i;return l}function cx(e,t,r){return t=+t,e=+e,r=+r,Wf(e,t,r)[2]}function lx(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?cx(t,e,r):cx(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function a_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function s_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function yk(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?xk:EQ(s);n>r;){if(n-r>600){const l=n-r+1,d=t-r+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(d-l/2<0?-1:1),p=Math.max(r,Math.floor(t-d*f/l+h)),v=Math.min(n,Math.floor(t+(l-d)*f/l+h));yk(e,t,p,v,s)}const o=e[t];let i=r,c=n;for(rl(e,r,t),s(e[n],o)>0&&rl(e,r,n);i<c;){for(rl(e,i,c),++i,--c;s(e[i],o)<0;)++i;for(;s(e[c],o)>0;)--c}s(e[r],o)===0?rl(e,r,c):(++c,rl(e,c,n)),c<=t&&(r=c+1),t<=c&&(n=c-1)}return e}function rl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function MQ(e,t,r){if(e=Float64Array.from(SQ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return s_(e);if(t>=1)return a_(e);var n,s=(n-1)*t,o=Math.floor(s),i=a_(yk(e,o).subarray(0,o+1)),c=s_(e.subarray(o+1));return i+(c-i)*(s-o)}}function DQ(e,t,r=vk){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,o=Math.floor(s),i=+r(e[o],o,e),c=+r(e[o+1],o+1,e);return i+(c-i)*(s-o)}}function IQ(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(s);++n<s;)o[n]=e+n*r;return o}function Rn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function us(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dx=Symbol("implicit");function zb(){var e=new r_,t=[],r=[],n=dx;function s(o){let i=e.get(o);if(i===void 0){if(n!==dx)return n;e.set(o,i=t.push(o)-1)}return r[i%r.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new r_;for(const i of o)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return zb(t,r).unknown(n)},Rn.apply(s,arguments),s}function Xl(){var e=zb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,o,i,c=!1,l=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,p=s<n,v=p?s:n,m=p?n:s;o=(m-v)/Math.max(1,h-l+d*2),c&&(o=Math.floor(o)),v+=(m-v-o*(h-l))*u,i=o*(1-l),c&&(v=Math.round(v),i=Math.round(i));var g=IQ(h).map(function(y){return v+o*y});return r(p?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,c=!0,f()},e.bandwidth=function(){return i},e.step=function(){return o},e.round=function(h){return arguments.length?(c=!!h,f()):c},e.padding=function(h){return arguments.length?(l=Math.min(1,d=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Xl(t(),[n,s]).round(c).paddingInner(l).paddingOuter(d).align(u)},Rn.apply(f(),arguments)}function bk(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return bk(t())},e}function _l(){return bk(Xl.apply(null,arguments).paddingInner(1))}function Bb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function jk(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Qd(){}var Jl=.7,Hf=1/Jl,Si="\\s*([+-]?\\d+)\\s*",Ql="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RQ=/^#([0-9a-f]{3,8})$/,LQ=new RegExp(`^rgb\\(${Si},${Si},${Si}\\)$`),FQ=new RegExp(`^rgb\\(${Sa},${Sa},${Sa}\\)$`),zQ=new RegExp(`^rgba\\(${Si},${Si},${Si},${Ql}\\)$`),BQ=new RegExp(`^rgba\\(${Sa},${Sa},${Sa},${Ql}\\)$`),VQ=new RegExp(`^hsl\\(${Ql},${Sa},${Sa}\\)$`),UQ=new RegExp(`^hsla\\(${Ql},${Sa},${Sa},${Ql}\\)$`),o_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bb(Qd,ed,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:i_,formatHex:i_,formatHex8:qQ,formatHsl:WQ,formatRgb:c_,toString:c_});function i_(){return this.rgb().formatHex()}function qQ(){return this.rgb().formatHex8()}function WQ(){return wk(this).formatHsl()}function c_(){return this.rgb().formatRgb()}function ed(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=RQ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?l_(t):r===3?new Yr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Lu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Lu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LQ.exec(e))?new Yr(t[1],t[2],t[3],1):(t=FQ.exec(e))?new Yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zQ.exec(e))?Lu(t[1],t[2],t[3],t[4]):(t=BQ.exec(e))?Lu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=VQ.exec(e))?f_(t[1],t[2]/100,t[3]/100,1):(t=UQ.exec(e))?f_(t[1],t[2]/100,t[3]/100,t[4]):o_.hasOwnProperty(e)?l_(o_[e]):e==="transparent"?new Yr(NaN,NaN,NaN,0):null}function l_(e){return new Yr(e>>16&255,e>>8&255,e&255,1)}function Lu(e,t,r,n){return n<=0&&(e=t=r=NaN),new Yr(e,t,r,n)}function HQ(e){return e instanceof Qd||(e=ed(e)),e?(e=e.rgb(),new Yr(e.r,e.g,e.b,e.opacity)):new Yr}function ux(e,t,r,n){return arguments.length===1?HQ(e):new Yr(e,t,r,n??1)}function Yr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Bb(Yr,ux,jk(Qd,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new Yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yr(bo(this.r),bo(this.g),bo(this.b),Gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d_,formatHex:d_,formatHex8:GQ,formatRgb:u_,toString:u_}));function d_(){return`#${po(this.r)}${po(this.g)}${po(this.b)}`}function GQ(){return`#${po(this.r)}${po(this.g)}${po(this.b)}${po((isNaN(this.opacity)?1:this.opacity)*255)}`}function u_(){const e=Gf(this.opacity);return`${e===1?"rgb(":"rgba("}${bo(this.r)}, ${bo(this.g)}, ${bo(this.b)}${e===1?")":`, ${e})`}`}function Gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function po(e){return e=bo(e),(e<16?"0":"")+e.toString(16)}function f_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Kn(e,t,r,n)}function wk(e){if(e instanceof Kn)return new Kn(e.h,e.s,e.l,e.opacity);if(e instanceof Qd||(e=ed(e)),!e)return new Kn;if(e instanceof Kn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),o=Math.max(t,r,n),i=NaN,c=o-s,l=(o+s)/2;return c?(t===o?i=(r-n)/c+(r<n)*6:r===o?i=(n-t)/c+2:i=(t-r)/c+4,c/=l<.5?o+s:2-o-s,i*=60):c=l>0&&l<1?0:i,new Kn(i,c,l,e.opacity)}function KQ(e,t,r,n){return arguments.length===1?wk(e):new Kn(e,t,r,n??1)}function Kn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Bb(Kn,KQ,jk(Qd,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Kn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new Kn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Yr(Pg(e>=240?e-240:e+120,s,n),Pg(e,s,n),Pg(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Kn(h_(this.h),Fu(this.s),Fu(this.l),Gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gf(this.opacity);return`${e===1?"hsl(":"hsla("}${h_(this.h)}, ${Fu(this.s)*100}%, ${Fu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function h_(e){return e=(e||0)%360,e<0?e+360:e}function Fu(e){return Math.max(0,Math.min(1,e||0))}function Pg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Vb=e=>()=>e;function YQ(e,t){return function(r){return e+r*t}}function ZQ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function XQ(e){return(e=+e)==1?Nk:function(t,r){return r-t?ZQ(t,r,e):Vb(isNaN(t)?r:t)}}function Nk(e,t){var r=t-e;return r?YQ(e,r):Vb(isNaN(e)?t:e)}const m_=function e(t){var r=XQ(t);function n(s,o){var i=r((s=ux(s)).r,(o=ux(o)).r),c=r(s.g,o.g),l=r(s.b,o.b),d=Nk(s.opacity,o.opacity);return function(u){return s.r=i(u),s.g=c(u),s.b=l(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function JQ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(o){for(s=0;s<r;++s)n[s]=e[s]*(1-o)+t[s]*o;return n}}function QQ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eee(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)s[i]=Rc(e[i],t[i]);for(;i<r;++i)o[i]=t[i];return function(c){for(i=0;i<n;++i)o[i]=s[i](c);return o}}function tee(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ree(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Rc(e[s],t[s]):n[s]=t[s];return function(o){for(s in r)n[s]=r[s](o);return n}}var fx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ag=new RegExp(fx.source,"g");function nee(e){return function(){return e}}function aee(e){return function(t){return e(t)+""}}function see(e,t){var r=fx.lastIndex=Ag.lastIndex=0,n,s,o,i=-1,c=[],l=[];for(e=e+"",t=t+"";(n=fx.exec(e))&&(s=Ag.exec(t));)(o=s.index)>r&&(o=t.slice(r,o),c[i]?c[i]+=o:c[++i]=o),(n=n[0])===(s=s[0])?c[i]?c[i]+=s:c[++i]=s:(c[++i]=null,l.push({i,x:Kf(n,s)})),r=Ag.lastIndex;return r<t.length&&(o=t.slice(r),c[i]?c[i]+=o:c[++i]=o),c.length<2?l[0]?aee(l[0].x):nee(t):(t=l.length,function(d){for(var u=0,f;u<t;++u)c[(f=l[u]).i]=f.x(d);return c.join("")})}function Rc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Vb(t):(r==="number"?Kf:r==="string"?(n=ed(t))?(t=n,m_):see:t instanceof ed?m_:t instanceof Date?tee:QQ(t)?JQ:Array.isArray(t)?eee:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ree:Kf)(e,t)}function Ub(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function oee(e,t){t===void 0&&(t=e,e=Rc);for(var r=0,n=t.length-1,s=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(s,s=t[++r]);return function(i){var c=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return o[c](i-c)}}function iee(e){return function(){return e}}function Yf(e){return+e}var p_=[0,1];function zr(e){return e}function hx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:iee(isNaN(t)?NaN:.5)}function cee(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function lee(e,t,r){var n=e[0],s=e[1],o=t[0],i=t[1];return s<n?(n=hx(s,n),o=r(i,o)):(n=hx(n,s),o=r(o,i)),function(c){return o(n(c))}}function dee(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),o=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=hx(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(c){var l=Jd(e,c,1,n)-1;return o[l](s[l](c))}}function eu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xm(){var e=p_,t=p_,r=Rc,n,s,o,i=zr,c,l,d;function u(){var h=Math.min(e.length,t.length);return i!==zr&&(i=cee(e[0],e[h-1])),c=h>2?dee:lee,l=d=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=c(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((d||(d=c(t,e.map(n),Kf)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Yf),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Ub,u()},f.clamp=function(h){return arguments.length?(i=h?!0:zr,u()):i!==zr},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return n=h,s=p,u()}}function qb(){return Xm()(zr,zr)}function uee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Fi(e){return e=Zf(Math.abs(e)),e?e[1]:NaN}function fee(e,t){return function(r,n){for(var s=r.length,o=[],i=0,c=e[0],l=0;s>0&&c>0&&(l+c+1>n&&(c=Math.max(1,n-l)),o.push(r.substring(s-=c,s+c)),!((l+=c+1)>n));)c=e[i=(i+1)%e.length];return o.reverse().join(t)}}function hee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var mee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function td(e){if(!(t=mee.exec(e)))throw new Error("invalid format: "+e);var t;return new Wb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}td.prototype=Wb.prototype;function Wb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Wb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pee(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var _k;function gee(e,t){var r=Zf(e,t);if(!r)return e+"";var n=r[0],s=r[1],o=s-(_k=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Zf(e,Math.max(0,t+o-1))[0]}function g_(e,t){var r=Zf(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const v_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>g_(e*100,t),r:g_,s:gee,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function x_(e){return e}var y_=Array.prototype.map,b_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vee(e){var t=e.grouping===void 0||e.thousands===void 0?x_:fee(y_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?x_:hee(y_.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function d(f){f=td(f);var h=f.fill,p=f.align,v=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,N=f.type;N==="n"?(b=!0,N="g"):v_[N]||(w===void 0&&(w=12),j=!0,N="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var _=m==="$"?r:m==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=m==="$"?n:/[%p]/.test(N)?i:"",C=v_[N],k=/[defgprs%]/.test(N);w=w===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function $(A){var P=_,O=S,M,R,T;if(N==="c")O=C(A)+O,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?l:C(Math.abs(A),w),j&&(A=pee(A)),D&&+A==0&&v!=="+"&&(D=!1),P=(D?v==="("?v:c:v==="-"||v==="("?"":v)+P,O=(N==="s"?b_[8+_k/3]:"")+O+(D&&v==="("?")":""),k){for(M=-1,R=A.length;++M<R;)if(T=A.charCodeAt(M),48>T||T>57){O=(T===46?s+A.slice(M+1):A.slice(M))+O,A=A.slice(0,M);break}}}b&&!g&&(A=t(A,1/0));var I=P.length+A.length+O.length,U=I<y?new Array(y-I+1).join(h):"";switch(b&&g&&(A=t(U+A,U.length?y-O.length:1/0),U=""),p){case"<":A=P+A+O+U;break;case"=":A=P+U+A+O;break;case"^":A=U.slice(0,I=U.length>>1)+P+A+O+U.slice(I);break;default:A=U+P+A+O;break}return o(A)}return $.toString=function(){return f+""},$}function u(f,h){var p=d((f=td(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Fi(h)/3)))*3,m=Math.pow(10,-v),g=b_[8+v/3];return function(y){return p(m*y)+g}}return{format:d,formatPrefix:u}}var zu,Hb,Sk;xee({thousands:",",grouping:[3],currency:["$",""]});function xee(e){return zu=vee(e),Hb=zu.format,Sk=zu.formatPrefix,zu}function yee(e){return Math.max(0,-Fi(Math.abs(e)))}function bee(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fi(t)/3)))*3-Fi(Math.abs(e)))}function jee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fi(t)-Fi(e))+1}function Ck(e,t,r,n){var s=lx(e,t,r),o;switch(n=td(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=bee(s,i))&&(n.precision=o),Sk(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=jee(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=yee(s))&&(n.precision=o-(n.type==="%")*2);break}}return Hb(n)}function Ws(e){var t=e.domain;return e.ticks=function(r){var n=t();return ix(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return Ck(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,o=n.length-1,i=n[s],c=n[o],l,d,u=10;for(c<i&&(d=i,i=c,c=d,d=s,s=o,o=d);u-- >0;){if(d=cx(i,c,r),d===l)return n[s]=i,n[o]=c,t(n);if(d>0)i=Math.floor(i/d)*d,c=Math.ceil(c/d)*d;else if(d<0)i=Math.ceil(i*d)/d,c=Math.floor(c*d)/d;else break;l=d}return e},e}function Xf(){var e=qb();return e.copy=function(){return eu(e,Xf())},Rn.apply(e,arguments),Ws(e)}function Pk(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Yf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Pk(e).unknown(t)},e=arguments.length?Array.from(e,Yf):[0,1],Ws(r)}function Ak(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],o=e[n],i;return o<s&&(i=r,r=n,n=i,i=s,s=o,o=i),e[r]=t.floor(s),e[n]=t.ceil(o),e}function j_(e){return Math.log(e)}function w_(e){return Math.exp(e)}function wee(e){return-Math.log(-e)}function Nee(e){return-Math.exp(-e)}function _ee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function See(e){return e===10?_ee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Cee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function N_(e){return(t,r)=>-e(-t,r)}function Gb(e){const t=e(j_,w_),r=t.domain;let n=10,s,o;function i(){return s=Cee(n),o=See(n),r()[0]<0?(s=N_(s),o=N_(o),e(wee,Nee)):e(j_,w_),t}return t.base=function(c){return arguments.length?(n=+c,i()):n},t.domain=function(c){return arguments.length?(r(c),i()):r()},t.ticks=c=>{const l=r();let d=l[0],u=l[l.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=s(d),p=s(u),v,m;const g=c==null?10:+c;let y=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),d>0){for(;h<=p;++h)for(v=1;v<n;++v)if(m=h<0?v/o(-h):v*o(h),!(m<d)){if(m>u)break;y.push(m)}}else for(;h<=p;++h)for(v=n-1;v>=1;--v)if(m=h>0?v/o(-h):v*o(h),!(m<d)){if(m>u)break;y.push(m)}y.length*2<g&&(y=ix(d,u,g))}else y=ix(h,p,Math.min(p-h,g)).map(o);return f?y.reverse():y},t.tickFormat=(c,l)=>{if(c==null&&(c=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=td(l)).precision==null&&(l.trim=!0),l=Hb(l)),c===1/0)return l;const d=Math.max(1,n*c/t.ticks().length);return u=>{let f=u/o(Math.round(s(u)));return f*n<n-.5&&(f*=n),f<=d?l(u):""}},t.nice=()=>r(Ak(r(),{floor:c=>o(Math.floor(s(c))),ceil:c=>o(Math.ceil(s(c)))})),t}function kk(){const e=Gb(Xm()).domain([1,10]);return e.copy=()=>eu(e,kk()).base(e.base()),Rn.apply(e,arguments),e}function __(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function S_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Kb(e){var t=1,r=e(__(t),S_(t));return r.constant=function(n){return arguments.length?e(__(t=+n),S_(t)):t},Ws(r)}function Ek(){var e=Kb(Xm());return e.copy=function(){return eu(e,Ek()).constant(e.constant())},Rn.apply(e,arguments)}function C_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Aee(e){return e<0?-e*e:e*e}function Yb(e){var t=e(zr,zr),r=1;function n(){return r===1?e(zr,zr):r===.5?e(Pee,Aee):e(C_(r),C_(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Ws(t)}function Zb(){var e=Yb(Xm());return e.copy=function(){return eu(e,Zb()).exponent(e.exponent())},Rn.apply(e,arguments),e}function kee(){return Zb.apply(null,arguments).exponent(.5)}function P_(e){return Math.sign(e)*e*e}function Eee(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ok(){var e=qb(),t=[0,1],r=!1,n;function s(o){var i=Eee(e(o));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(o){return e.invert(P_(o))},s.domain=function(o){return arguments.length?(e.domain(o),s):e.domain()},s.range=function(o){return arguments.length?(e.range((t=Array.from(o,Yf)).map(P_)),s):t.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(r=!!o,s):r},s.clamp=function(o){return arguments.length?(e.clamp(o),s):e.clamp()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return Ok(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Rn.apply(s,arguments),Ws(s)}function Tk(){var e=[],t=[],r=[],n;function s(){var i=0,c=Math.max(1,t.length);for(r=new Array(c-1);++i<c;)r[i-1]=DQ(e,i/c);return o}function o(i){return i==null||isNaN(i=+i)?n:t[Jd(r,i)]}return o.invertExtent=function(i){var c=t.indexOf(i);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},o.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let c of i)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(ks),s()},o.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return Tk().domain(e).range(t).unknown(n)},Rn.apply(o,arguments)}function $k(){var e=0,t=1,r=1,n=[.5],s=[0,1],o;function i(l){return l!=null&&l<=l?s[Jd(n,l,0,r)]:o}function c(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,c()):[e,t]},i.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,c()):s.slice()},i.invertExtent=function(l){var d=s.indexOf(l);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},i.unknown=function(l){return arguments.length&&(o=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return $k().domain([e,t]).range(s).unknown(o)},Rn.apply(Ws(i),arguments)}function Mk(){var e=[.5],t=[0,1],r,n=1;function s(o){return o!=null&&o<=o?t[Jd(e,o,0,n)]:r}return s.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(o){var i=t.indexOf(o);return[e[i-1],e[i]]},s.unknown=function(o){return arguments.length?(r=o,s):r},s.copy=function(){return Mk().domain(e).range(t).unknown(r)},Rn.apply(s,arguments)}const kg=new Date,Eg=new Date;function lr(e,t,r,n){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(e(o=new Date(+o)),o),s.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),s.round=o=>{const i=s(o),c=s.ceil(o);return o-i<c-o?i:c},s.offset=(o,i)=>(t(o=new Date(+o),i==null?1:Math.floor(i)),o),s.range=(o,i,c)=>{const l=[];if(o=s.ceil(o),c=c==null?1:Math.floor(c),!(o<i)||!(c>0))return l;let d;do l.push(d=new Date(+o)),t(o,c),e(o);while(d<o&&o<i);return l},s.filter=o=>lr(i=>{if(i>=i)for(;e(i),!o(i);)i.setTime(i-1)},(i,c)=>{if(i>=i)if(c<0)for(;++c<=0;)for(;t(i,-1),!o(i););else for(;--c>=0;)for(;t(i,1),!o(i););}),r&&(s.count=(o,i)=>(kg.setTime(+o),Eg.setTime(+i),e(kg),e(Eg),Math.floor(r(kg,Eg))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(n?i=>n(i)%o===0:i=>s.count(0,i)%o===0):s)),s}const Jf=lr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?lr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Jf);Jf.range;const Ga=1e3,Nn=Ga*60,Ka=Nn*60,ss=Ka*24,Xb=ss*7,A_=ss*30,Og=ss*365,go=lr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getUTCSeconds());go.range;const Jb=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getMinutes());Jb.range;const Qb=lr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getUTCMinutes());Qb.range;const e0=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga-e.getMinutes()*Nn)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getHours());e0.range;const t0=lr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getUTCHours());t0.range;const tu=lr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Nn)/ss,e=>e.getDate()-1);tu.range;const Jm=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ss,e=>e.getUTCDate()-1);Jm.range;const Dk=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ss,e=>Math.floor(e/ss));Dk.range;function Ho(e){return lr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Nn)/Xb)}const Qm=Ho(0),Qf=Ho(1),Oee=Ho(2),Tee=Ho(3),zi=Ho(4),$ee=Ho(5),Mee=Ho(6);Qm.range;Qf.range;Oee.range;Tee.range;zi.range;$ee.range;Mee.range;function Go(e){return lr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Xb)}const ep=Go(0),eh=Go(1),Dee=Go(2),Iee=Go(3),Bi=Go(4),Ree=Go(5),Lee=Go(6);ep.range;eh.range;Dee.range;Iee.range;Bi.range;Ree.range;Lee.range;const r0=lr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());r0.range;const n0=lr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());n0.range;const os=lr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});os.range;const is=lr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());is.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});is.range;function Ik(e,t,r,n,s,o){const i=[[go,1,Ga],[go,5,5*Ga],[go,15,15*Ga],[go,30,30*Ga],[o,1,Nn],[o,5,5*Nn],[o,15,15*Nn],[o,30,30*Nn],[s,1,Ka],[s,3,3*Ka],[s,6,6*Ka],[s,12,12*Ka],[n,1,ss],[n,2,2*ss],[r,1,Xb],[t,1,A_],[t,3,3*A_],[e,1,Og]];function c(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:l(d,u,f),v=p?p.range(d,+u+1):[];return h?v.reverse():v}function l(d,u,f){const h=Math.abs(u-d)/f,p=Fb(([,,g])=>g).right(i,h);if(p===i.length)return e.every(lx(d/Og,u/Og,f));if(p===0)return Jf.every(Math.max(lx(d,u,f),1));const[v,m]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return v.every(m)}return[c,l]}const[Fee,zee]=Ik(is,n0,ep,Dk,t0,Qb),[Bee,Vee]=Ik(os,r0,Qm,tu,e0,Jb);function Tg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $g(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nl(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Uee(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,o=e.days,i=e.shortDays,c=e.months,l=e.shortMonths,d=al(s),u=sl(s),f=al(o),h=sl(o),p=al(i),v=sl(i),m=al(c),g=sl(c),y=al(l),b=sl(l),w={a:D,A:I,b:U,B:oe,c:null,d:M_,e:M_,f:fte,g:wte,G:_te,H:lte,I:dte,j:ute,L:Rk,m:hte,M:mte,p:J,q:ie,Q:R_,s:L_,S:pte,u:gte,U:vte,V:xte,w:yte,W:bte,x:null,X:null,y:jte,Y:Nte,Z:Ste,"%":I_},j={a:me,A:de,b:H,B:L,c:null,d:D_,e:D_,f:kte,g:Fte,G:Bte,H:Cte,I:Pte,j:Ate,L:Fk,m:Ete,M:Ote,p:Y,q:Q,Q:R_,s:L_,S:Tte,u:$te,U:Mte,V:Dte,w:Ite,W:Rte,x:null,X:null,y:Lte,Y:zte,Z:Vte,"%":I_},N={a:$,A,b:P,B:O,c:M,d:T_,e:T_,f:ste,g:O_,G:E_,H:$_,I:$_,j:tte,L:ate,m:ete,M:rte,p:k,q:Qee,Q:ite,s:cte,S:nte,u:Kee,U:Yee,V:Zee,w:Gee,W:Xee,x:R,X:T,y:O_,Y:E_,Z:Jee,"%":ote};w.x=_(r,w),w.X=_(n,w),w.c=_(t,w),j.x=_(r,j),j.X=_(n,j),j.c=_(t,j);function _(Z,ce){return function(fe){var X=[],De=-1,ve=0,Be=Z.length,Oe,Ce,bt;for(fe instanceof Date||(fe=new Date(+fe));++De<Be;)Z.charCodeAt(De)===37&&(X.push(Z.slice(ve,De)),(Ce=k_[Oe=Z.charAt(++De)])!=null?Oe=Z.charAt(++De):Ce=Oe==="e"?" ":"0",(bt=ce[Oe])&&(Oe=bt(fe,Ce)),X.push(Oe),ve=De+1);return X.push(Z.slice(ve,De)),X.join("")}}function S(Z,ce){return function(fe){var X=nl(1900,void 0,1),De=C(X,Z,fe+="",0),ve,Be;if(De!=fe.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(ce&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(ve=$g(nl(X.y,0,1)),Be=ve.getUTCDay(),ve=Be>4||Be===0?eh.ceil(ve):eh(ve),ve=Jm.offset(ve,(X.V-1)*7),X.y=ve.getUTCFullYear(),X.m=ve.getUTCMonth(),X.d=ve.getUTCDate()+(X.w+6)%7):(ve=Tg(nl(X.y,0,1)),Be=ve.getDay(),ve=Be>4||Be===0?Qf.ceil(ve):Qf(ve),ve=tu.offset(ve,(X.V-1)*7),X.y=ve.getFullYear(),X.m=ve.getMonth(),X.d=ve.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),Be="Z"in X?$g(nl(X.y,0,1)).getUTCDay():Tg(nl(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(Be+5)%7:X.w+X.U*7-(Be+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,$g(X)):Tg(X)}}function C(Z,ce,fe,X){for(var De=0,ve=ce.length,Be=fe.length,Oe,Ce;De<ve;){if(X>=Be)return-1;if(Oe=ce.charCodeAt(De++),Oe===37){if(Oe=ce.charAt(De++),Ce=N[Oe in k_?ce.charAt(De++):Oe],!Ce||(X=Ce(Z,fe,X))<0)return-1}else if(Oe!=fe.charCodeAt(X++))return-1}return X}function k(Z,ce,fe){var X=d.exec(ce.slice(fe));return X?(Z.p=u.get(X[0].toLowerCase()),fe+X[0].length):-1}function $(Z,ce,fe){var X=p.exec(ce.slice(fe));return X?(Z.w=v.get(X[0].toLowerCase()),fe+X[0].length):-1}function A(Z,ce,fe){var X=f.exec(ce.slice(fe));return X?(Z.w=h.get(X[0].toLowerCase()),fe+X[0].length):-1}function P(Z,ce,fe){var X=y.exec(ce.slice(fe));return X?(Z.m=b.get(X[0].toLowerCase()),fe+X[0].length):-1}function O(Z,ce,fe){var X=m.exec(ce.slice(fe));return X?(Z.m=g.get(X[0].toLowerCase()),fe+X[0].length):-1}function M(Z,ce,fe){return C(Z,t,ce,fe)}function R(Z,ce,fe){return C(Z,r,ce,fe)}function T(Z,ce,fe){return C(Z,n,ce,fe)}function D(Z){return i[Z.getDay()]}function I(Z){return o[Z.getDay()]}function U(Z){return l[Z.getMonth()]}function oe(Z){return c[Z.getMonth()]}function J(Z){return s[+(Z.getHours()>=12)]}function ie(Z){return 1+~~(Z.getMonth()/3)}function me(Z){return i[Z.getUTCDay()]}function de(Z){return o[Z.getUTCDay()]}function H(Z){return l[Z.getUTCMonth()]}function L(Z){return c[Z.getUTCMonth()]}function Y(Z){return s[+(Z.getUTCHours()>=12)]}function Q(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ce=_(Z+="",w);return ce.toString=function(){return Z},ce},parse:function(Z){var ce=S(Z+="",!1);return ce.toString=function(){return Z},ce},utcFormat:function(Z){var ce=_(Z+="",j);return ce.toString=function(){return Z},ce},utcParse:function(Z){var ce=S(Z+="",!0);return ce.toString=function(){return Z},ce}}}var k_={"-":"",_:" ",0:"0"},hr=/^\s*\d+/,qee=/^%/,Wee=/[\\^$*+?|[\]().{}]/g;function ft(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",o=s.length;return n+(o<r?new Array(r-o+1).join(t)+s:s)}function Hee(e){return e.replace(Wee,"\\$&")}function al(e){return new RegExp("^(?:"+e.map(Hee).join("|")+")","i")}function sl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Gee(e,t,r){var n=hr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Kee(e,t,r){var n=hr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Yee(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Zee(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Xee(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function E_(e,t,r){var n=hr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function O_(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Jee(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Qee(e,t,r){var n=hr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function ete(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function T_(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function tte(e,t,r){var n=hr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $_(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function rte(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function nte(e,t,r){var n=hr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ate(e,t,r){var n=hr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ste(e,t,r){var n=hr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ote(e,t,r){var n=qee.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ite(e,t,r){var n=hr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function cte(e,t,r){var n=hr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function M_(e,t){return ft(e.getDate(),t,2)}function lte(e,t){return ft(e.getHours(),t,2)}function dte(e,t){return ft(e.getHours()%12||12,t,2)}function ute(e,t){return ft(1+tu.count(os(e),e),t,3)}function Rk(e,t){return ft(e.getMilliseconds(),t,3)}function fte(e,t){return Rk(e,t)+"000"}function hte(e,t){return ft(e.getMonth()+1,t,2)}function mte(e,t){return ft(e.getMinutes(),t,2)}function pte(e,t){return ft(e.getSeconds(),t,2)}function gte(e){var t=e.getDay();return t===0?7:t}function vte(e,t){return ft(Qm.count(os(e)-1,e),t,2)}function Lk(e){var t=e.getDay();return t>=4||t===0?zi(e):zi.ceil(e)}function xte(e,t){return e=Lk(e),ft(zi.count(os(e),e)+(os(e).getDay()===4),t,2)}function yte(e){return e.getDay()}function bte(e,t){return ft(Qf.count(os(e)-1,e),t,2)}function jte(e,t){return ft(e.getFullYear()%100,t,2)}function wte(e,t){return e=Lk(e),ft(e.getFullYear()%100,t,2)}function Nte(e,t){return ft(e.getFullYear()%1e4,t,4)}function _te(e,t){var r=e.getDay();return e=r>=4||r===0?zi(e):zi.ceil(e),ft(e.getFullYear()%1e4,t,4)}function Ste(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ft(t/60|0,"0",2)+ft(t%60,"0",2)}function D_(e,t){return ft(e.getUTCDate(),t,2)}function Cte(e,t){return ft(e.getUTCHours(),t,2)}function Pte(e,t){return ft(e.getUTCHours()%12||12,t,2)}function Ate(e,t){return ft(1+Jm.count(is(e),e),t,3)}function Fk(e,t){return ft(e.getUTCMilliseconds(),t,3)}function kte(e,t){return Fk(e,t)+"000"}function Ete(e,t){return ft(e.getUTCMonth()+1,t,2)}function Ote(e,t){return ft(e.getUTCMinutes(),t,2)}function Tte(e,t){return ft(e.getUTCSeconds(),t,2)}function $te(e){var t=e.getUTCDay();return t===0?7:t}function Mte(e,t){return ft(ep.count(is(e)-1,e),t,2)}function zk(e){var t=e.getUTCDay();return t>=4||t===0?Bi(e):Bi.ceil(e)}function Dte(e,t){return e=zk(e),ft(Bi.count(is(e),e)+(is(e).getUTCDay()===4),t,2)}function Ite(e){return e.getUTCDay()}function Rte(e,t){return ft(eh.count(is(e)-1,e),t,2)}function Lte(e,t){return ft(e.getUTCFullYear()%100,t,2)}function Fte(e,t){return e=zk(e),ft(e.getUTCFullYear()%100,t,2)}function zte(e,t){return ft(e.getUTCFullYear()%1e4,t,4)}function Bte(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bi(e):Bi.ceil(e),ft(e.getUTCFullYear()%1e4,t,4)}function Vte(){return"+0000"}function I_(){return"%"}function R_(e){return+e}function L_(e){return Math.floor(+e/1e3)}var ci,Bk,Vk;Ute({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ute(e){return ci=Uee(e),Bk=ci.format,ci.parse,Vk=ci.utcFormat,ci.utcParse,ci}function qte(e){return new Date(e)}function Wte(e){return e instanceof Date?+e:+new Date(+e)}function a0(e,t,r,n,s,o,i,c,l,d){var u=qb(),f=u.invert,h=u.domain,p=d(".%L"),v=d(":%S"),m=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),b=d("%b %d"),w=d("%B"),j=d("%Y");function N(_){return(l(_)<_?p:c(_)<_?v:i(_)<_?m:o(_)<_?g:n(_)<_?s(_)<_?y:b:r(_)<_?w:j)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?h(Array.from(_,Wte)):h().map(qte)},u.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},u.tickFormat=function(_,S){return S==null?N:d(S)},u.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(Ak(S,_)):u},u.copy=function(){return eu(u,a0(e,t,r,n,s,o,i,c,l,d))},u}function Hte(){return Rn.apply(a0(Bee,Vee,os,r0,Qm,tu,e0,Jb,go,Bk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gte(){return Rn.apply(a0(Fee,zee,is,n0,ep,Jm,t0,Qb,go,Vk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tp(){var e=0,t=1,r,n,s,o,i=zr,c=!1,l;function d(f){return f==null||isNaN(f=+f)?l:i(s===0?.5:(f=(o(f)-r)*s,c?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=o(e=+e),n=o(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(f){return arguments.length?(c=!!f,d):c},d.interpolator=function(f){return arguments.length?(i=f,d):i};function u(f){return function(h){var p,v;return arguments.length?([p,v]=h,i=f(p,v),d):[i(0),i(1)]}}return d.range=u(Rc),d.rangeRound=u(Ub),d.unknown=function(f){return arguments.length?(l=f,d):l},function(f){return o=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),d}}function Hs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Uk(){var e=Ws(tp()(zr));return e.copy=function(){return Hs(e,Uk())},us.apply(e,arguments)}function qk(){var e=Gb(tp()).domain([1,10]);return e.copy=function(){return Hs(e,qk()).base(e.base())},us.apply(e,arguments)}function Wk(){var e=Kb(tp());return e.copy=function(){return Hs(e,Wk()).constant(e.constant())},us.apply(e,arguments)}function s0(){var e=Yb(tp());return e.copy=function(){return Hs(e,s0()).exponent(e.exponent())},us.apply(e,arguments)}function Kte(){return s0.apply(null,arguments).exponent(.5)}function Hk(){var e=[],t=zr;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ks),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,o)=>MQ(e,o/n))},r.copy=function(){return Hk(t).domain(e)},us.apply(r,arguments)}function rp(){var e=0,t=.5,r=1,n=1,s,o,i,c,l,d=zr,u,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(n*m<n*o?c:l),d(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,s=u(e=+e),o=u(t=+t),i=u(r=+r),c=s===o?0:.5/(o-s),l=o===i?0:.5/(i-o),n=o<s?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(d=m,p):d};function v(m){return function(g){var y,b,w;return arguments.length?([y,b,w]=g,d=oee(m,[y,b,w]),p):[d(0),d(.5),d(1)]}}return p.range=v(Rc),p.rangeRound=v(Ub),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,s=m(e),o=m(t),i=m(r),c=s===o?0:.5/(o-s),l=o===i?0:.5/(i-o),n=o<s?-1:1,p}}function Gk(){var e=Ws(rp()(zr));return e.copy=function(){return Hs(e,Gk())},us.apply(e,arguments)}function Kk(){var e=Gb(rp()).domain([.1,1,10]);return e.copy=function(){return Hs(e,Kk()).base(e.base())},us.apply(e,arguments)}function Yk(){var e=Kb(rp());return e.copy=function(){return Hs(e,Yk()).constant(e.constant())},us.apply(e,arguments)}function o0(){var e=Yb(rp());return e.copy=function(){return Hs(e,o0()).exponent(e.exponent())},us.apply(e,arguments)}function Yte(){return o0.apply(null,arguments).exponent(.5)}const F_=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xl,scaleDiverging:Gk,scaleDivergingLog:Kk,scaleDivergingPow:o0,scaleDivergingSqrt:Yte,scaleDivergingSymlog:Yk,scaleIdentity:Pk,scaleImplicit:dx,scaleLinear:Xf,scaleLog:kk,scaleOrdinal:zb,scalePoint:_l,scalePow:Zb,scaleQuantile:Tk,scaleQuantize:$k,scaleRadial:Ok,scaleSequential:Uk,scaleSequentialLog:qk,scaleSequentialPow:s0,scaleSequentialQuantile:Hk,scaleSequentialSqrt:Kte,scaleSequentialSymlog:Wk,scaleSqrt:kee,scaleSymlog:Ek,scaleThreshold:Mk,scaleTime:Hte,scaleUtc:Gte,tickFormat:Ck},Symbol.toStringTag,{value:"Module"}));var Zte=Ac;function Xte(e,t,r){for(var n=-1,s=e.length;++n<s;){var o=e[n],i=t(o);if(i!=null&&(c===void 0?i===i&&!Zte(i):r(i,c)))var c=i,l=o}return l}var np=Xte;function Jte(e,t){return e>t}var Zk=Jte,Qte=np,ere=Zk,tre=Ic;function rre(e){return e&&e.length?Qte(e,tre,ere):void 0}var nre=rre;const Ss=yt(nre);function are(e,t){return e<t}var Xk=are,sre=np,ore=Xk,ire=Ic;function cre(e){return e&&e.length?sre(e,ire,ore):void 0}var lre=cre;const ap=yt(lre);var dre=bb,ure=Ma,fre=sk,hre=Qr;function mre(e,t){var r=hre(e)?dre:fre;return r(e,ure(t))}var pre=mre,gre=nk,vre=pre;function xre(e,t){return gre(vre(e,t),1)}var yre=xre;const bre=yt(yre);var jre=Db;function wre(e,t){return jre(e,t)}var Nre=wre;const Oo=yt(Nre);var Lc=1e9,_re={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},c0,It=!0,An="[DecimalError] ",jo=An+"Invalid argument: ",i0=An+"Exponent out of range: ",Fc=Math.floor,io=Math.pow,Sre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ln,dr=1e7,$t=7,Jk=9007199254740991,th=Fc(Jk/$t),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,r,n,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===s?0:n>s^o.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*$t;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Se.dividedBy=Se.div=function(e){return Qa(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,r=t.constructor;return wt(Qa(t,new r(e),0,1),r.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return er(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,r=this,n=r.constructor,s=n.precision,o=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ln))throw Error(An+"NaN");if(r.s<1)throw Error(An+(r.s?"NaN":"-Infinity"));return r.eq(ln)?new n(0):(It=!1,t=Qa(rd(r,o),rd(e,o),o),It=!0,wt(t,s))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tE(t,e):Qk(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(An+"NaN");return r.s?(It=!1,t=Qa(r,e,0,1).times(e),It=!0,r.minus(t)):wt(new n(r),s)};Se.naturalExponential=Se.exp=function(){return eE(this)};Se.naturalLogarithm=Se.ln=function(){return rd(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Qk(t,e):tE(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(jo+e);if(t=er(s)+1,n=s.d.length-1,r=n*$t+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Se.squareRoot=Se.sqrt=function(){var e,t,r,n,s,o,i,c=this,l=c.constructor;if(c.s<1){if(!c.s)return new l(0);throw Error(An+"NaN")}for(e=er(c),It=!1,s=Math.sqrt(+c),s==0||s==1/0?(t=ya(c.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Fc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=i=r+3;;)if(o=n,n=o.plus(Qa(c,o,i+2)).times(.5),ya(o.d).slice(0,i)===(t=ya(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(wt(o,r+1,0),o.times(o).eq(c)){n=o;break}}else if(t!="9999")break;i+=4}return It=!0,wt(n,r)};Se.times=Se.mul=function(e){var t,r,n,s,o,i,c,l,d,u=this,f=u.constructor,h=u.d,p=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,l=h.length,d=p.length,l<d&&(o=h,h=p,p=o,i=l,l=d,d=i),o=[],i=l+d,n=i;n--;)o.push(0);for(n=d;--n>=0;){for(t=0,s=l+n;s>n;)c=o[s]+p[n]*h[s-n-1]+t,o[s--]=c%dr|0,t=c/dr|0;o[s]=(o[s]+t)%dr|0}for(;!o[--i];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,It?wt(e,f.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Oa(e,0,Lc),t===void 0?t=n.rounding:Oa(t,0,8),wt(r,e+er(r)+1,t))};Se.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=To(n,!0):(Oa(e,0,Lc),t===void 0?t=s.rounding:Oa(t,0,8),n=wt(new s(n),e+1,t),r=To(n,!0,e+1)),r};Se.toFixed=function(e,t){var r,n,s=this,o=s.constructor;return e===void 0?To(s):(Oa(e,0,Lc),t===void 0?t=o.rounding:Oa(t,0,8),n=wt(new o(s),e+er(s)+1,t),r=To(n.abs(),!1,e+er(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return wt(new t(e),er(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,r,n,s,o,i,c=this,l=c.constructor,d=12,u=+(e=new l(e));if(!e.s)return new l(ln);if(c=new l(c),!c.s){if(e.s<1)throw Error(An+"Infinity");return c}if(c.eq(ln))return c;if(n=l.precision,e.eq(ln))return wt(c,n);if(t=e.e,r=e.d.length-1,i=t>=r,o=c.s,i){if((r=u<0?-u:u)<=Jk){for(s=new l(ln),t=Math.ceil(n/$t+4),It=!1;r%2&&(s=s.times(c),B_(s.d,t)),r=Fc(r/2),r!==0;)c=c.times(c),B_(c.d,t);return It=!0,e.s<0?new l(ln).div(s):wt(s,n)}}else if(o<0)throw Error(An+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,c.s=1,It=!1,s=e.times(rd(c,n+d)),It=!0,s=eE(s),s.s=o,s};Se.toPrecision=function(e,t){var r,n,s=this,o=s.constructor;return e===void 0?(r=er(s),n=To(s,r<=o.toExpNeg||r>=o.toExpPos)):(Oa(e,1,Lc),t===void 0?t=o.rounding:Oa(t,0,8),s=wt(new o(s),e,t),r=er(s),n=To(s,e<=r||r<=o.toExpNeg,e)),n};Se.toSignificantDigits=Se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Oa(e,1,Lc),t===void 0?t=n.rounding:Oa(t,0,8)),wt(new n(r),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=er(e),r=e.constructor;return To(e,t<=r.toExpNeg||t>=r.toExpPos)};function Qk(e,t){var r,n,s,o,i,c,l,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),It?wt(t,f):t;if(l=e.d,d=t.d,i=e.e,s=t.e,l=l.slice(),o=i-s,o){for(o<0?(n=l,o=-o,c=d.length):(n=d,s=i,c=l.length),i=Math.ceil(f/$t),c=i>c?i+1:c+1,o>c&&(o=c,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(c=l.length,o=d.length,c-o<0&&(o=c,n=d,d=l,l=n),r=0;o;)r=(l[--o]=l[o]+d[o]+r)/dr|0,l[o]%=dr;for(r&&(l.unshift(r),++s),c=l.length;l[--c]==0;)l.pop();return t.d=l,t.e=s,It?wt(t,f):t}function Oa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(jo+e)}function ya(e){var t,r,n,s=e.length-1,o="",i=e[0];if(s>0){for(o+=i,t=1;t<s;t++)n=e[t]+"",r=$t-n.length,r&&(o+=bs(r)),o+=n;i=e[t],n=i+"",r=$t-n.length,r&&(o+=bs(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var Qa=function(){function e(n,s){var o,i=0,c=n.length;for(n=n.slice();c--;)o=n[c]*s+i,n[c]=o%dr|0,i=o/dr|0;return i&&n.unshift(i),n}function t(n,s,o,i){var c,l;if(o!=i)l=o>i?1:-1;else for(c=l=0;c<o;c++)if(n[c]!=s[c]){l=n[c]>s[c]?1:-1;break}return l}function r(n,s,o){for(var i=0;o--;)n[o]-=i,i=n[o]<s[o]?1:0,n[o]=i*dr+n[o]-s[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,o,i){var c,l,d,u,f,h,p,v,m,g,y,b,w,j,N,_,S,C,k=n.constructor,$=n.s==s.s?1:-1,A=n.d,P=s.d;if(!n.s)return new k(n);if(!s.s)throw Error(An+"Division by zero");for(l=n.e-s.e,S=P.length,N=A.length,p=new k($),v=p.d=[],d=0;P[d]==(A[d]||0);)++d;if(P[d]>(A[d]||0)&&--l,o==null?b=o=k.precision:i?b=o+(er(n)-er(s))+1:b=o,b<0)return new k(0);if(b=b/$t+2|0,d=0,S==1)for(u=0,P=P[0],b++;(d<N||u)&&b--;d++)w=u*dr+(A[d]||0),v[d]=w/P|0,u=w%P|0;else{for(u=dr/(P[0]+1)|0,u>1&&(P=e(P,u),A=e(A,u),S=P.length,N=A.length),j=S,m=A.slice(0,S),g=m.length;g<S;)m[g++]=0;C=P.slice(),C.unshift(0),_=P[0],P[1]>=dr/2&&++_;do u=0,c=t(P,m,S,g),c<0?(y=m[0],S!=g&&(y=y*dr+(m[1]||0)),u=y/_|0,u>1?(u>=dr&&(u=dr-1),f=e(P,u),h=f.length,g=m.length,c=t(f,m,h,g),c==1&&(u--,r(f,S<h?C:P,h))):(u==0&&(c=u=1),f=P.slice()),h=f.length,h<g&&f.unshift(0),r(m,f,g),c==-1&&(g=m.length,c=t(P,m,S,g),c<1&&(u++,r(m,S<g?C:P,g))),g=m.length):c===0&&(u++,m=[0]),v[d++]=u,c&&m[0]?m[g++]=A[j]||0:(m=[A[j]],g=1);while((j++<N||m[0]!==void 0)&&b--)}return v[0]||v.shift(),p.e=l,wt(p,i?o+er(p)+1:o)}}();function eE(e,t){var r,n,s,o,i,c,l=0,d=0,u=e.constructor,f=u.precision;if(er(e)>16)throw Error(i0+er(e));if(!e.s)return new u(ln);for(It=!1,c=f,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),d+=5;for(n=Math.log(io(2,d))/Math.LN10*2+5|0,c+=n,r=s=o=new u(ln),u.precision=c;;){if(s=wt(s.times(e),c),r=r.times(++l),i=o.plus(Qa(s,r,c)),ya(i.d).slice(0,c)===ya(o.d).slice(0,c)){for(;d--;)o=wt(o.times(o),c);return u.precision=f,t==null?(It=!0,wt(o,f)):o}o=i}}function er(e){for(var t=e.e*$t,r=e.d[0];r>=10;r/=10)t++;return t}function Mg(e,t,r){if(t>e.LN10.sd())throw It=!0,r&&(e.precision=r),Error(An+"LN10 precision limit exceeded");return wt(new e(e.LN10),t)}function bs(e){for(var t="";e--;)t+="0";return t}function rd(e,t){var r,n,s,o,i,c,l,d,u,f=1,h=10,p=e,v=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(An+(p.s?"NaN":"-Infinity"));if(p.eq(ln))return new m(0);if(t==null?(It=!1,d=g):d=t,p.eq(10))return t==null&&(It=!0),Mg(m,d);if(d+=h,m.precision=d,r=ya(v),n=r.charAt(0),o=er(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ya(p.d),n=r.charAt(0),f++;o=er(p),n>1?(p=new m("0."+r),o++):p=new m(n+"."+r.slice(1))}else return l=Mg(m,d+2,g).times(o+""),p=rd(new m(n+"."+r.slice(1)),d-h).plus(l),m.precision=g,t==null?(It=!0,wt(p,g)):p;for(c=i=p=Qa(p.minus(ln),p.plus(ln),d),u=wt(p.times(p),d),s=3;;){if(i=wt(i.times(u),d),l=c.plus(Qa(i,new m(s),d)),ya(l.d).slice(0,d)===ya(c.d).slice(0,d))return c=c.times(2),o!==0&&(c=c.plus(Mg(m,d+2,g).times(o+""))),c=Qa(c,new m(f),d),m.precision=g,t==null?(It=!0,wt(c,g)):c;c=l,s+=2}}function z_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Fc(r/$t),e.d=[],n=(r+1)%$t,r<0&&(n+=$t),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=$t;n<s;)e.d.push(+t.slice(n,n+=$t));t=t.slice(n),n=$t-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),It&&(e.e>th||e.e<-th))throw Error(i0+r)}else e.s=0,e.e=0,e.d=[0];return e}function wt(e,t,r){var n,s,o,i,c,l,d,u,f=e.d;for(i=1,o=f[0];o>=10;o/=10)i++;if(n=t-i,n<0)n+=$t,s=t,d=f[u=0];else{if(u=Math.ceil((n+1)/$t),o=f.length,u>=o)return e;for(d=o=f[u],i=1;o>=10;o/=10)i++;n%=$t,s=n-$t+i}if(r!==void 0&&(o=io(10,i-s-1),c=d/o%10|0,l=t<0||f[u+1]!==void 0||d%o,l=r<4?(c||l)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||l||r==6&&(n>0?s>0?d/io(10,i-s):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(o=er(e),f.length=1,t=t-o-1,f[0]=io(10,($t-t%$t)%$t),e.e=Fc(-t/$t)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=u,o=1,u--):(f.length=u+1,o=io(10,$t-n),f[u]=s>0?(d/io(10,i-s)%io(10,s)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==dr&&(f[0]=1,++e.e);break}else{if(f[u]+=o,f[u]!=dr)break;f[u--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(It&&(e.e>th||e.e<-th))throw Error(i0+er(e));return e}function tE(e,t){var r,n,s,o,i,c,l,d,u,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),It?wt(t,p):t;if(l=e.d,f=t.d,n=t.e,d=e.e,l=l.slice(),i=d-n,i){for(u=i<0,u?(r=l,i=-i,c=f.length):(r=f,n=d,c=l.length),s=Math.max(Math.ceil(p/$t),c)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=l.length,c=f.length,u=s<c,u&&(c=s),s=0;s<c;s++)if(l[s]!=f[s]){u=l[s]<f[s];break}i=0}for(u&&(r=l,l=f,f=r,t.s=-t.s),c=l.length,s=f.length-c;s>0;--s)l[c++]=0;for(s=f.length;s>i;){if(l[--s]<f[s]){for(o=s;o&&l[--o]===0;)l[o]=dr-1;--l[o],l[s]+=dr}l[s]-=f[s]}for(;l[--c]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,It?wt(t,p):t):new h(0)}function To(e,t,r){var n,s=er(e),o=ya(e.d),i=o.length;return t?(r&&(n=r-i)>0?o=o.charAt(0)+"."+o.slice(1)+bs(n):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+bs(-s-1)+o,r&&(n=r-i)>0&&(o+=bs(n))):s>=i?(o+=bs(s+1-i),r&&(n=r-s-1)>0&&(o=o+"."+bs(n))):((n=s+1)<i&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(o+="."),o+=bs(n))),e.s<0?"-"+o:o}function B_(e,t){if(e.length>t)return e.length=t,!0}function rE(e){var t,r,n;function s(o){var i=this;if(!(i instanceof s))return new s(o);if(i.constructor=s,o instanceof s){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(jo+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return z_(i,o.toString())}else if(typeof o!="string")throw Error(jo+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,Sre.test(o))z_(i,o);else throw Error(jo+o)}if(s.prototype=Se,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=rE,s.config=s.set=Cre,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Cre(e){if(!e||typeof e!="object")throw Error(An+"Object expected");var t,r,n,s=["precision",1,Lc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Fc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(jo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(jo+r+": "+n);return this}var c0=rE(_re);ln=new c0(1);const xt=c0;function Pre(e){return Ore(e)||Ere(e)||kre(e)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kre(e,t){if(e){if(typeof e=="string")return mx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mx(e,t)}}function Ere(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ore(e){if(Array.isArray(e))return mx(e)}function mx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tre=function(t){return t},nE={},aE=function(t){return t===nE},V_=function(t){return function r(){return arguments.length===0||arguments.length===1&&aE(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},$re=function e(t,r){return t===1?r:V_(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var i=s.filter(function(c){return c!==nE}).length;return i>=t?r.apply(void 0,s):e(t-i,V_(function(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];var u=s.map(function(f){return aE(f)?l.shift():f});return r.apply(void 0,Pre(u).concat(l))}))})},sp=function(t){return $re(t.length,t)},px=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},Mre=sp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Dre=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Tre;var s=r.reverse(),o=s[0],i=s.slice(1);return function(){return i.reduce(function(c,l){return l(c)},o.apply(void 0,arguments))}},gx=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},sE=function(t){var r=null,n=null;return function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r&&o.every(function(c,l){return c===r[l]})||(r=o,n=t.apply(void 0,o)),n}};function Ire(e){var t;return e===0?t=1:t=Math.floor(new xt(e).abs().log(10).toNumber())+1,t}function Rre(e,t,r){for(var n=new xt(e),s=0,o=[];n.lt(t)&&s<1e5;)o.push(n.toNumber()),n=n.add(r),s++;return o}var Lre=sp(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),Fre=sp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),zre=sp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const op={rangeStep:Rre,getDigitCount:Ire,interpolateNumber:Lre,uninterpolateNumber:Fre,uninterpolateTruncation:zre};function vx(e){return Ure(e)||Vre(e)||oE(e)||Bre()}function Bre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vre(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ure(e){if(Array.isArray(e))return xx(e)}function nd(e,t){return Hre(e)||Wre(e,t)||oE(e,t)||qre()}function qre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oE(e,t){if(e){if(typeof e=="string")return xx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xx(e,t)}}function xx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wre(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,o=void 0;try{for(var i=e[Symbol.iterator](),c;!(n=(c=i.next()).done)&&(r.push(c.value),!(t&&r.length===t));n=!0);}catch(l){s=!0,o=l}finally{try{!n&&i.return!=null&&i.return()}finally{if(s)throw o}}return r}}function Hre(e){if(Array.isArray(e))return e}function iE(e){var t=nd(e,2),r=t[0],n=t[1],s=r,o=n;return r>n&&(s=n,o=r),[s,o]}function cE(e,t,r){if(e.lte(0))return new xt(0);var n=op.getDigitCount(e.toNumber()),s=new xt(10).pow(n),o=e.div(s),i=n!==1?.05:.1,c=new xt(Math.ceil(o.div(i).toNumber())).add(r).mul(i),l=c.mul(s);return t?l:new xt(Math.ceil(l))}function Gre(e,t,r){var n=1,s=new xt(e);if(!s.isint()&&r){var o=Math.abs(e);o<1?(n=new xt(10).pow(op.getDigitCount(e)-1),s=new xt(Math.floor(s.div(n).toNumber())).mul(n)):o>1&&(s=new xt(Math.floor(e)))}else e===0?s=new xt(Math.floor((t-1)/2)):r||(s=new xt(Math.floor(e)));var i=Math.floor((t-1)/2),c=Dre(Mre(function(l){return s.add(new xt(l-i).mul(n)).toNumber()}),px);return c(0,t)}function lE(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new xt(0),tickMin:new xt(0),tickMax:new xt(0)};var o=cE(new xt(t).sub(e).div(r-1),n,s),i;e<=0&&t>=0?i=new xt(0):(i=new xt(e).add(t).div(2),i=i.sub(new xt(i).mod(o)));var c=Math.ceil(i.sub(e).div(o).toNumber()),l=Math.ceil(new xt(t).sub(i).div(o).toNumber()),d=c+l+1;return d>r?lE(e,t,r,n,s+1):(d<r&&(l=t>0?l+(r-d):l,c=t>0?c:c+(r-d)),{step:o,tickMin:i.sub(new xt(c).mul(o)),tickMax:i.add(new xt(l).mul(o))})}function Kre(e){var t=nd(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),c=iE([r,n]),l=nd(c,2),d=l[0],u=l[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(vx(px(0,s-1).map(function(){return 1/0}))):[].concat(vx(px(0,s-1).map(function(){return-1/0})),[u]);return r>n?gx(f):f}if(d===u)return Gre(d,s,o);var h=lE(d,u,i,o),p=h.step,v=h.tickMin,m=h.tickMax,g=op.rangeStep(v,m.add(new xt(.1).mul(p)),p);return r>n?gx(g):g}function Yre(e,t){var r=nd(e,2),n=r[0],s=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=iE([n,s]),c=nd(i,2),l=c[0],d=c[1];if(l===-1/0||d===1/0)return[n,s];if(l===d)return[l];var u=Math.max(t,2),f=cE(new xt(d).sub(l).div(u-1),o,0),h=[].concat(vx(op.rangeStep(new xt(l),new xt(d).sub(new xt(.99).mul(f)),f)),[d]);return n>s?gx(h):h}var Zre=sE(Kre),Xre=sE(Yre),Jre="Invariant failed";function $o(e,t){throw new Error(Jre)}var Qre=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vi(e){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}function rh(){return rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rh.apply(this,arguments)}function ene(e,t){return ane(e)||nne(e,t)||rne(e,t)||tne()}function tne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rne(e,t){if(e){if(typeof e=="string")return U_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(e,t)}}function U_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function ane(e){if(Array.isArray(e))return e}function sne(e,t){if(e==null)return{};var r=one(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function one(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ine(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fE(n.key),n)}}function lne(e,t,r){return t&&cne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dne(e,t,r){return t=nh(t),une(e,dE()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function une(e,t){if(t&&(Vi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fne(e)}function fne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dE=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function hne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yx(e,t)}function yx(e,t){return yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},yx(e,t)}function uE(e,t,r){return t=fE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fE(e){var t=mne(e,"string");return Vi(t)=="symbol"?t:t+""}function mne(e,t){if(Vi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ru=function(e){function t(){return ine(this,t),dne(this,t,arguments)}return hne(t,e),lne(t,[{key:"render",value:function(){var n=this.props,s=n.offset,o=n.layout,i=n.width,c=n.dataKey,l=n.data,d=n.dataPointFormatter,u=n.xAxis,f=n.yAxis,h=sne(n,Qre),p=Ae(h,!1);this.props.direction==="x"&&u.type!=="number"&&$o();var v=l.map(function(m){var g=d(m,c),y=g.x,b=g.y,w=g.value,j=g.errorVal;if(!j)return null;var N=[],_,S;if(Array.isArray(j)){var C=ene(j,2);_=C[0],S=C[1]}else _=S=j;if(o==="vertical"){var k=u.scale,$=b+s,A=$+i,P=$-i,O=k(w-_),M=k(w+S);N.push({x1:M,y1:A,x2:M,y2:P}),N.push({x1:O,y1:$,x2:M,y2:$}),N.push({x1:O,y1:A,x2:O,y2:P})}else if(o==="horizontal"){var R=f.scale,T=y+s,D=T-i,I=T+i,U=R(w-_),oe=R(w+S);N.push({x1:D,y1:oe,x2:I,y2:oe}),N.push({x1:T,y1:U,x2:T,y2:oe}),N.push({x1:D,y1:U,x2:I,y2:U})}return E.createElement(ct,rh({className:"recharts-errorBar",key:"bar-".concat(N.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},p),N.map(function(J){return E.createElement("line",rh({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return E.createElement(ct,{className:"recharts-errorBars"},v)}}])}(E.Component);uE(ru,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});uE(ru,"displayName","ErrorBar");function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(n){pne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pne(e,t,r){return t=gne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gne(e){var t=vne(e,"string");return ad(t)=="symbol"?t:t+""}function vne(e,t){if(ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hE=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,o=t.legendContent,i=sn(r,_a);if(!i)return null;var c=_a.defaultProps,l=c!==void 0?to(to({},c),i.props):{},d;return i.props&&i.props.payload?d=i.props&&i.props.payload:o==="children"?d=(n||[]).reduce(function(u,f){var h=f.item,p=f.props,v=p.sectors||p.data||[];return u.concat(v.map(function(m){return{type:i.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):d=(n||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?to(to({},h),f.props):{},v=p.dataKey,m=p.name,g=p.legendType,y=p.hide;return{inactive:y,dataKey:v,type:l.iconType||g||"square",color:l0(f),value:m||v,payload:p}}),to(to(to({},l),_a.getWithHeight(i,s)),{},{payload:d,item:i})};function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function W_(e){return jne(e)||bne(e)||yne(e)||xne()}function xne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yne(e,t){if(e){if(typeof e=="string")return bx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bx(e,t)}}function bne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jne(e){if(Array.isArray(e))return bx(e)}function bx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(r),!0).forEach(function(n){Ci(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ci(e,t,r){return t=wne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wne(e){var t=Nne(e,"string");return sd(t)=="symbol"?t:t+""}function Nne(e,t){if(sd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return We(e)||We(t)?r:cr(t)?fn(e,t,r):Le(t)?t(e):r}function Sl(e,t,r,n){var s=bre(e,function(c){return Ht(c,t)});if(r==="number"){var o=s.filter(function(c){return ge(c)||parseFloat(c)});return o.length?[ap(o),Ss(o)]:[1/0,-1/0]}var i=n?s.filter(function(c){return!We(c)}):s;return i.map(function(c){return cr(c)||c instanceof Date?c:""})}var _ne=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,c=(r=n?.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,d=0;d<c;d++){var u=d>0?s[d-1].coordinate:s[c-1].coordinate,f=s[d].coordinate,h=d>=c-1?s[0].coordinate:s[d+1].coordinate,p=void 0;if(Lr(f-u)!==Lr(h-f)){var v=[];if(Lr(h-f)===Lr(l[1]-l[0])){p=h;var m=f+l[1]-l[0];v[0]=Math.min(m,(m+u)/2),v[1]=Math.max(m,(m+u)/2)}else{p=u;var g=h+l[1]-l[0];v[0]=Math.min(f,(g+f)/2),v[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>y[0]&&t<=y[1]||t>=v[0]&&t<=v[1]){i=s[d].index;break}}else{var b=Math.min(u,h),w=Math.max(u,h);if(t>(b+f)/2&&t<=(w+f)/2){i=s[d].index;break}}}else for(var j=0;j<c;j++)if(j===0&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<c-1&&t>(n[j].coordinate+n[j-1].coordinate)/2&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j===c-1&&t>(n[j].coordinate+n[j-1].coordinate)/2){i=n[j].index;break}return i},l0=function(t){var r,n=t,s=n.type.displayName,o=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Vt(Vt({},t.type.defaultProps),t.props):t.props,i=o.stroke,c=o.fill,l;switch(s){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:c;break;default:l=c;break}return l},Sne=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,o=s===void 0?{}:s;if(!o)return{};for(var i={},c=Object.keys(o),l=0,d=c.length;l<d;l++)for(var u=o[c[l]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var v=u[f[h]],m=v.items,g=v.cateAxisId,y=m.filter(function(S){return Ja(S.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Vt(Vt({},b),y[0].props):y[0].props,j=w.barSize,N=w[g];i[N]||(i[N]=[]);var _=We(j)?r:j;i[N].push({item:y[0],stackList:y.slice(1),barSize:We(_)?void 0:Fr(_,n,0)})}}return i},Cne=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,o=t.sizeList,i=o===void 0?[]:o,c=t.maxBarSize,l=i.length;if(l<1)return null;var d=Fr(r,s,0,!0),u,f=[];if(i[0].barSize===+i[0].barSize){var h=!1,p=s/l,v=i.reduce(function(j,N){return j+N.barSize||0},0);v+=(l-1)*d,v>=s&&(v-=(l-1)*d,d=0),v>=s&&p>0&&(h=!0,p*=.9,v=l*p);var m=(s-v)/2>>0,g={offset:m-d,size:0};u=i.reduce(function(j,N){var _={item:N.item,position:{offset:g.offset+g.size+d,size:h?p:N.barSize}},S=[].concat(W_(j),[_]);return g=S[S.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){S.push({item:C,position:g})}),S},f)}else{var y=Fr(n,s,0,!0);s-2*y-(l-1)*d<=0&&(d=0);var b=(s-2*y-(l-1)*d)/l;b>1&&(b>>=0);var w=c===+c?Math.min(b,c):b;u=i.reduce(function(j,N,_){var S=[].concat(W_(j),[{item:N.item,position:{offset:y+(b+d)*_+(b-w)/2,size:w}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},f)}return u},Pne=function(t,r,n,s){var o=n.children,i=n.width,c=n.margin,l=i-(c.left||0)-(c.right||0),d=hE({children:o,legendWidth:l});if(d){var u=s||{},f=u.width,h=u.height,p=d.align,v=d.verticalAlign,m=d.layout;if((m==="vertical"||m==="horizontal"&&v==="middle")&&p!=="center"&&ge(t[p]))return Vt(Vt({},t),{},Ci({},p,t[p]+(f||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&v!=="middle"&&ge(t[v]))return Vt(Vt({},t),{},Ci({},v,t[v]+(h||0)))}return t},Ane=function(t,r,n){return We(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},mE=function(t,r,n,s,o){var i=r.props.children,c=hn(i,ru).filter(function(d){return Ane(s,o,d.props.direction)});if(c&&c.length){var l=c.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Ht(u,n);if(We(f))return d;var h=Array.isArray(f)?[ap(f),Ss(f)]:[f,f],p=l.reduce(function(v,m){var g=Ht(u,m,0),y=h[0]-Math.abs(Array.isArray(g)?g[0]:g),b=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},kne=function(t,r,n,s,o){var i=r.map(function(c){return mE(t,c,n,o,s)}).filter(function(c){return!We(c)});return i&&i.length?i.reduce(function(c,l){return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]):null},pE=function(t,r,n,s,o){var i=r.map(function(l){var d=l.props.dataKey;return n==="number"&&d&&mE(t,l,d,s)||Sl(t,d,n,o)});if(n==="number")return i.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);var c={};return i.reduce(function(l,d){for(var u=0,f=d.length;u<f;u++)c[d[u]]||(c[d[u]]=!0,l.push(d[u]));return l},[])},gE=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},vE=function(t,r,n,s){if(s)return t.map(function(l){return l.coordinate});var o,i,c=t.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(i=!0),l.coordinate});return o||c.push(r),i||c.push(n),c},Ya=function(t,r,n){if(!t)return null;var s=t.scale,o=t.duplicateDomain,i=t.type,c=t.range,l=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&i==="category"&&s.bandwidth?s.bandwidth()/l:0;if(d=t.axisType==="angleAxis"&&c?.length>=2?Lr(c[0]-c[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:s(h)+d,value:f,offset:d}});return u.filter(function(f){return!$c(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:s(f)+d,value:f,index:h,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+d,value:f,offset:d}}):s.domain().map(function(f,h){return{coordinate:s(f)+d,value:o?o[f]:f,index:h,offset:d}})},Dg=new WeakMap,Bu=function(t,r){if(typeof r!="function")return t;Dg.has(t)||Dg.set(t,new WeakMap);var n=Dg.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},xE=function(t,r,n){var s=t.scale,o=t.type,i=t.layout,c=t.axisType;if(s==="auto")return i==="radial"&&c==="radiusAxis"?{scale:Xl(),realScaleType:"band"}:i==="radial"&&c==="angleAxis"?{scale:Xf(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_l(),realScaleType:"point"}:o==="category"?{scale:Xl(),realScaleType:"band"}:{scale:Xf(),realScaleType:"linear"};if(Zd(s)){var l="scale".concat(qm(s));return{scale:(F_[l]||_l)(),realScaleType:F_[l]?l:"point"}}return Le(s)?{scale:s}:{scale:_l(),realScaleType:"point"}},G_=1e-4,yE=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),o=Math.min(s[0],s[1])-G_,i=Math.max(s[0],s[1])+G_,c=t(r[0]),l=t(r[n-1]);(c<o||c>i||l<o||l>i)&&t.domain([r[0],r[n-1]])}},Ene=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},One=function(t,r){if(!r||r.length!==2||!ge(r[0])||!ge(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),o=[t[0],t[1]];return(!ge(t[0])||t[0]<n)&&(o[0]=n),(!ge(t[1])||t[1]>s)&&(o[1]=s),o[0]>s&&(o[0]=s),o[1]<n&&(o[1]=n),o},Tne=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var o=0,i=0,c=0;c<r;++c){var l=$c(t[c][n][1])?t[c][n][0]:t[c][n][1];l>=0?(t[c][n][0]=o,t[c][n][1]=o+l,o=t[c][n][1]):(t[c][n][0]=i,t[c][n][1]=i+l,i=t[c][n][1])}},$ne=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var o=0,i=0;i<r;++i){var c=$c(t[i][n][1])?t[i][n][0]:t[i][n][1];c>=0?(t[i][n][0]=o,t[i][n][1]=o+c,o=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},Mne={sign:Tne,expand:Qq,none:$i,silhouette:eW,wiggle:tW,positive:$ne},Dne=function(t,r,n){var s=r.map(function(c){return c.props.dataKey}),o=Mne[n],i=Jq().keys(s).value(function(c,l){return+Ht(c,l,0)}).order(Wv).offset(o);return i(t)},Ine=function(t,r,n,s,o,i){if(!t)return null;var c=i?r.reverse():r,l={},d=c.reduce(function(f,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Vt(Vt({},h.type.defaultProps),h.props):h.props,m=v.stackId,g=v.hide;if(g)return f;var y=v[n],b=f[y]||{hasStack:!1,stackGroups:{}};if(cr(m)){var w=b.stackGroups[m]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[m]=w}else b.stackGroups[Wo("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[h]};return Vt(Vt({},f),{},Ci({},y,b))},l),u={};return Object.keys(d).reduce(function(f,h){var p=d[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,g){var y=p.stackGroups[g];return Vt(Vt({},m),{},Ci({},g,{numericAxisId:n,cateAxisId:s,items:y.items,stackedData:Dne(t,y.items,o)}))},v)}return Vt(Vt({},f),{},Ci({},h,p))},u)},bE=function(t,r){var n=r.realScaleType,s=r.type,o=r.tickCount,i=r.originalDomain,c=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&s==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Zre(d,o,c);return t.domain([ap(u),Ss(u)]),{niceTicks:u}}if(o&&s==="number"){var f=t.domain(),h=Xre(f,o,c);return{niceTicks:h}}return null};function ah(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,o=e.index,i=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!We(s[t.dataKey])){var c=Ef(r,"value",s[t.dataKey]);if(c)return c.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var l=Ht(s,We(i)?t.dataKey:i);return We(l)?null:t.scale(l)}var K_=function(t){var r=t.axis,n=t.ticks,s=t.offset,o=t.bandSize,i=t.entry,c=t.index;if(r.type==="category")return n[c]?n[c].coordinate+s:null;var l=Ht(i,r.dataKey,r.domain[c]);return We(l)?null:r.scale(l)-o/2+s},Rne=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return s<=0&&o>=0?0:o<0?o:s}return n[0]},Lne=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Vt(Vt({},t.type.defaultProps),t.props):t.props,o=s.stackId;if(cr(o)){var i=r[o];if(i){var c=i.items.indexOf(t);return c>=0?i.stackedData[c]:null}}return null},Fne=function(t){return t.reduce(function(r,n){return[ap(n.concat([r[0]]).filter(ge)),Ss(n.concat([r[1]]).filter(ge))]},[1/0,-1/0])},jE=function(t,r,n){return Object.keys(t).reduce(function(s,o){var i=t[o],c=i.stackedData,l=c.reduce(function(d,u){var f=Fne(u.slice(r,n+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Y_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jx=function(t,r,n){if(Le(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(ge(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(Y_.test(t[0])){var o=+Y_.exec(t[0])[1];s[0]=r[0]-o}else Le(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(ge(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(Z_.test(t[1])){var i=+Z_.exec(t[1])[1];s[1]=r[1]+i}else Le(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},sh=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var o=Rb(r,function(f){return f.coordinate}),i=1/0,c=1,l=o.length;c<l;c++){var d=o[c],u=o[c-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},X_=function(t,r,n){return!t||!t.length||Oo(t,fn(n,"type.defaultProps.domain"))?r:t},wE=function(t,r){var n=t.type.defaultProps?Vt(Vt({},t.type.defaultProps),t.props):t.props,s=n.dataKey,o=n.name,i=n.unit,c=n.formatter,l=n.tooltipType,d=n.chartType,u=n.hide;return Vt(Vt({},Ae(t,!1)),{},{dataKey:s,unit:i,formatter:c,name:o||s,color:l0(t),value:Ht(r,s),type:l,payload:r,chartType:d,hide:u})};function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(r),!0).forEach(function(n){NE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NE(e,t,r){return t=zne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zne(e){var t=Bne(e,"string");return od(t)=="symbol"?t:t+""}function Bne(e,t){if(od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vne(e,t){return Hne(e)||Wne(e,t)||qne(e,t)||Une()}function Une(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qne(e,t){if(e){if(typeof e=="string")return Q_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q_(e,t)}}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Hne(e){if(Array.isArray(e))return e}var oh=Math.PI/180,Gne=function(t){return t*180/Math.PI},Pt=function(t,r,n,s){return{x:t+Math.cos(-oh*s)*n,y:r+Math.sin(-oh*s)*n}},_E=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Kne=function(t,r,n,s,o){var i=t.width,c=t.height,l=t.startAngle,d=t.endAngle,u=Fr(t.cx,i,i/2),f=Fr(t.cy,c,c/2),h=_E(i,c,n),p=Fr(t.innerRadius,h,0),v=Fr(t.outerRadius,h,h*.8),m=Object.keys(r);return m.reduce(function(g,y){var b=r[y],w=b.domain,j=b.reversed,N;if(We(b.range))s==="angleAxis"?N=[l,d]:s==="radiusAxis"&&(N=[p,v]),j&&(N=[N[1],N[0]]);else{N=b.range;var _=N,S=Vne(_,2);l=S[0],d=S[1]}var C=xE(b,o),k=C.realScaleType,$=C.scale;$.domain(w).range(N),yE($);var A=bE($,qa(qa({},b),{},{realScaleType:k})),P=qa(qa(qa({},b),A),{},{range:N,radius:v,realScaleType:k,scale:$,cx:u,cy:f,innerRadius:p,outerRadius:v,startAngle:l,endAngle:d});return qa(qa({},g),{},NE({},y,P))},{})},Yne=function(t,r){var n=t.x,s=t.y,o=r.x,i=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(s-i,2))},Zne=function(t,r){var n=t.x,s=t.y,o=r.cx,i=r.cy,c=Yne({x:n,y:s},{x:o,y:i});if(c<=0)return{radius:c};var l=(n-o)/c,d=Math.acos(l);return s>i&&(d=2*Math.PI-d),{radius:c,angle:Gne(d),angleInRadian:d}},Xne=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),o=Math.floor(n/360),i=Math.min(s,o);return{startAngle:r-i*360,endAngle:n-i*360}},Jne=function(t,r){var n=r.startAngle,s=r.endAngle,o=Math.floor(n/360),i=Math.floor(s/360),c=Math.min(o,i);return t+c*360},e1=function(t,r){var n=t.x,s=t.y,o=Zne({x:n,y:s},r),i=o.radius,c=o.angle,l=r.innerRadius,d=r.outerRadius;if(i<l||i>d)return!1;if(i===0)return!0;var u=Xne(r),f=u.startAngle,h=u.endAngle,p=c,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?qa(qa({},r),{},{radius:i,angle:Jne(p,r)}):null},SE=function(t){return!x.isValidElement(t)&&!Le(t)&&typeof t!="boolean"?t.className:""};function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}var Qne=["offset"];function eae(e){return aae(e)||nae(e)||rae(e)||tae()}function tae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rae(e,t){if(e){if(typeof e=="string")return wx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wx(e,t)}}function nae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aae(e){if(Array.isArray(e))return wx(e)}function wx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sae(e,t){if(e==null)return{};var r=oae(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(n){iae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iae(e,t,r){return t=cae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cae(e){var t=lae(e,"string");return id(t)=="symbol"?t:t+""}function lae(e,t){if(id(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cd.apply(this,arguments)}var dae=function(t){var r=t.value,n=t.formatter,s=We(t.children)?r:t.children;return Le(n)?n(s):s},uae=function(t,r){var n=Lr(r-t),s=Math.min(Math.abs(r-t),360);return n*s},fae=function(t,r,n){var s=t.position,o=t.viewBox,i=t.offset,c=t.className,l=o,d=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,v=l.endAngle,m=l.clockWise,g=(f+h)/2,y=uae(p,v),b=y>=0?1:-1,w,j;s==="insideStart"?(w=p+b*i,j=m):s==="insideEnd"?(w=v-b*i,j=!m):s==="end"&&(w=v+b*i,j=m),j=y<=0?j:!j;var N=Pt(d,u,g,w),_=Pt(d,u,g,w+(j?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),C=We(t.id)?Wo("recharts-radial-line-"):t.id;return E.createElement("text",cd({},n,{dominantBaseline:"central",className:Ke("recharts-radial-bar-label",c)}),E.createElement("defs",null,E.createElement("path",{id:C,d:S})),E.createElement("textPath",{xlinkHref:"#".concat(C)},r))},hae=function(t){var r=t.viewBox,n=t.offset,s=t.position,o=r,i=o.cx,c=o.cy,l=o.innerRadius,d=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(s==="outside"){var p=Pt(i,c,d+n,h),v=p.x,m=p.y;return{x:v,y:m,textAnchor:v>=i?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:i,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:i,y:c,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:i,y:c,textAnchor:"middle",verticalAnchor:"end"};var g=(l+d)/2,y=Pt(i,c,g,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},mae=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,o=t.position,i=r,c=i.x,l=i.y,d=i.width,u=i.height,f=u>=0?1:-1,h=f*s,p=f>0?"end":"start",v=f>0?"start":"end",m=d>=0?1:-1,g=m*s,y=m>0?"end":"start",b=m>0?"start":"end";if(o==="top"){var w={x:c+d/2,y:l-f*s,textAnchor:"middle",verticalAnchor:p};return rr(rr({},w),n?{height:Math.max(l-n.y,0),width:d}:{})}if(o==="bottom"){var j={x:c+d/2,y:l+u+h,textAnchor:"middle",verticalAnchor:v};return rr(rr({},j),n?{height:Math.max(n.y+n.height-(l+u),0),width:d}:{})}if(o==="left"){var N={x:c-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return rr(rr({},N),n?{width:Math.max(N.x-n.x,0),height:u}:{})}if(o==="right"){var _={x:c+d+g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return rr(rr({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:u}:{})}var S=n?{width:d,height:u}:{};return o==="insideLeft"?rr({x:c+g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},S):o==="insideRight"?rr({x:c+d-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},S):o==="insideTop"?rr({x:c+d/2,y:l+h,textAnchor:"middle",verticalAnchor:v},S):o==="insideBottom"?rr({x:c+d/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},S):o==="insideTopLeft"?rr({x:c+g,y:l+h,textAnchor:b,verticalAnchor:v},S):o==="insideTopRight"?rr({x:c+d-g,y:l+h,textAnchor:y,verticalAnchor:v},S):o==="insideBottomLeft"?rr({x:c+g,y:l+u-h,textAnchor:b,verticalAnchor:p},S):o==="insideBottomRight"?rr({x:c+d-g,y:l+u-h,textAnchor:y,verticalAnchor:p},S):kc(o)&&(ge(o.x)||ho(o.x))&&(ge(o.y)||ho(o.y))?rr({x:c+Fr(o.x,d),y:l+Fr(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):rr({x:c+d/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},pae=function(t){return"cx"in t&&ge(t.cx)};function ur(e){var t=e.offset,r=t===void 0?5:t,n=sae(e,Qne),s=rr({offset:r},n),o=s.viewBox,i=s.position,c=s.value,l=s.children,d=s.content,u=s.className,f=u===void 0?"":u,h=s.textBreakAll;if(!o||We(c)&&We(l)&&!x.isValidElement(d)&&!Le(d))return null;if(x.isValidElement(d))return x.cloneElement(d,s);var p;if(Le(d)){if(p=x.createElement(d,s),x.isValidElement(p))return p}else p=dae(s);var v=pae(o),m=Ae(s,!0);if(v&&(i==="insideStart"||i==="insideEnd"||i==="end"))return fae(s,p,m);var g=v?hae(s):mae(s);return E.createElement(Eo,cd({className:Ke("recharts-label",f)},m,g,{breakAll:h}),p)}ur.displayName="Label";var CE=function(t){var r=t.cx,n=t.cy,s=t.angle,o=t.startAngle,i=t.endAngle,c=t.r,l=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,h=t.y,p=t.top,v=t.left,m=t.width,g=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(ge(m)&&ge(g)){if(ge(f)&&ge(h))return{x:f,y:h,width:m,height:g};if(ge(p)&&ge(v))return{x:p,y:v,width:m,height:g}}return ge(f)&&ge(h)?{x:f,y:h,width:0,height:0}:ge(r)&&ge(n)?{cx:r,cy:n,startAngle:o||s||0,endAngle:i||s||0,innerRadius:d||0,outerRadius:u||l||c||0,clockWise:y}:t.viewBox?t.viewBox:{}},gae=function(t,r){return t?t===!0?E.createElement(ur,{key:"label-implicit",viewBox:r}):cr(t)?E.createElement(ur,{key:"label-implicit",viewBox:r,value:t}):x.isValidElement(t)?t.type===ur?x.cloneElement(t,{key:"label-implicit",viewBox:r}):E.createElement(ur,{key:"label-implicit",content:t,viewBox:r}):Le(t)?E.createElement(ur,{key:"label-implicit",content:t,viewBox:r}):kc(t)?E.createElement(ur,cd({viewBox:r},t,{key:"label-implicit"})):null:null},vae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,o=CE(t),i=hn(s,ur).map(function(l,d){return x.cloneElement(l,{viewBox:r||o,key:"label-".concat(d)})});if(!n)return i;var c=gae(t.label,r||o);return[c].concat(eae(i))};ur.parseViewBox=CE;ur.renderCallByParent=vae;function xae(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var yae=xae;const bae=yt(yae);function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}var jae=["valueAccessor"],wae=["data","dataKey","clockWise","id","textBreakAll"];function Nae(e){return Pae(e)||Cae(e)||Sae(e)||_ae()}function _ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sae(e,t){if(e){if(typeof e=="string")return Nx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nx(e,t)}}function Cae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pae(e){if(Array.isArray(e))return Nx(e)}function Nx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ih.apply(this,arguments)}function r1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function n1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(r),!0).forEach(function(n){Aae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aae(e,t,r){return t=kae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kae(e){var t=Eae(e,"string");return ld(t)=="symbol"?t:t+""}function Eae(e,t){if(ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ld(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a1(e,t){if(e==null)return{};var r=Oae(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Tae=function(t){return Array.isArray(t.value)?bae(t.value):t.value};function Ca(e){var t=e.valueAccessor,r=t===void 0?Tae:t,n=a1(e,jae),s=n.data,o=n.dataKey,i=n.clockWise,c=n.id,l=n.textBreakAll,d=a1(n,wae);return!s||!s.length?null:E.createElement(ct,{className:"recharts-label-list"},s.map(function(u,f){var h=We(o)?r(u,f):Ht(u&&u.payload,o),p=We(c)?{}:{id:"".concat(c,"-").concat(f)};return E.createElement(ur,ih({},Ae(u,!0),d,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:ur.parseViewBox(We(i)?u:n1(n1({},u),{},{clockWise:i})),key:"label-".concat(f),index:f}))}))}Ca.displayName="LabelList";function $ae(e,t){return e?e===!0?E.createElement(Ca,{key:"labelList-implicit",data:t}):E.isValidElement(e)||Le(e)?E.createElement(Ca,{key:"labelList-implicit",data:t,content:e}):kc(e)?E.createElement(Ca,ih({data:t},e,{key:"labelList-implicit"})):null:null}function Mae(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=hn(n,Ca).map(function(i,c){return x.cloneElement(i,{data:t,key:"labelList-".concat(c)})});if(!r)return s;var o=$ae(e.label,t);return[o].concat(Nae(s))}Ca.renderCallByParent=Mae;function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_x.apply(this,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function o1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){Dae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dae(e,t,r){return t=Iae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iae(e){var t=Rae(e,"string");return dd(t)=="symbol"?t:t+""}function Rae(e,t){if(dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lae=function(t,r){var n=Lr(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Vu=function(t){var r=t.cx,n=t.cy,s=t.radius,o=t.angle,i=t.sign,c=t.isExternal,l=t.cornerRadius,d=t.cornerIsExternal,u=l*(c?1:-1)+s,f=Math.asin(l/u)/oh,h=d?o:o+i*f,p=Pt(r,n,u,h),v=Pt(r,n,s,h),m=d?o-i*f:o,g=Pt(r,n,u*Math.cos(f*oh),m);return{center:p,circleTangency:v,lineTangency:g,theta:f}},PE=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,o=t.outerRadius,i=t.startAngle,c=t.endAngle,l=Lae(i,c),d=i+l,u=Pt(r,n,o,i),f=Pt(r,n,o,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=Pt(r,n,s,i),v=Pt(r,n,s,d);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},Fae=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,o=t.outerRadius,i=t.cornerRadius,c=t.forceCornerRadius,l=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Lr(u-d),h=Vu({cx:r,cy:n,radius:o,angle:d,sign:f,cornerRadius:i,cornerIsExternal:l}),p=h.circleTangency,v=h.lineTangency,m=h.theta,g=Vu({cx:r,cy:n,radius:o,angle:u,sign:-f,cornerRadius:i,cornerIsExternal:l}),y=g.circleTangency,b=g.lineTangency,w=g.theta,j=l?Math.abs(d-u):Math.abs(d-u)-m-w;if(j<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):PE({cx:r,cy:n,innerRadius:s,outerRadius:o,startAngle:d,endAngle:u});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(s>0){var _=Vu({cx:r,cy:n,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),S=_.circleTangency,C=_.lineTangency,k=_.theta,$=Vu({cx:r,cy:n,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=$.circleTangency,P=$.lineTangency,O=$.theta,M=l?Math.abs(d-u):Math.abs(d-u)-k-O;if(M<0&&i===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},zae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},AE=function(t){var r=o1(o1({},zae),t),n=r.cx,s=r.cy,o=r.innerRadius,i=r.outerRadius,c=r.cornerRadius,l=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,h=r.className;if(i<o||u===f)return null;var p=Ke("recharts-sector",h),v=i-o,m=Fr(c,v,0,!0),g;return m>0&&Math.abs(u-f)<360?g=Fae({cx:n,cy:s,innerRadius:o,outerRadius:i,cornerRadius:Math.min(m,v/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:u,endAngle:f}):g=PE({cx:n,cy:s,innerRadius:o,outerRadius:i,startAngle:u,endAngle:f}),E.createElement("path",_x({},Ae(r,!0),{className:p,d:g,role:"img"}))};function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sx.apply(this,arguments)}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){Bae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bae(e,t,r){return t=Vae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Uae(e,"string");return ud(t)=="symbol"?t:t+""}function Uae(e,t){if(ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l1={curveBasisClosed:Bq,curveBasisOpen:Vq,curveBasis:zq,curveBumpX:Cq,curveBumpY:Pq,curveLinearClosed:Uq,curveLinear:Hm,curveMonotoneX:qq,curveMonotoneY:Wq,curveNatural:Hq,curveStep:Gq,curveStepAfter:Yq,curveStepBefore:Kq},Uu=function(t){return t.x===+t.x&&t.y===+t.y},ol=function(t){return t.x},il=function(t){return t.y},qae=function(t,r){if(Le(t))return t;var n="curve".concat(qm(t));return(n==="curveMonotone"||n==="curveBump")&&r?l1["".concat(n).concat(r==="vertical"?"Y":"X")]:l1[n]||Hm},Wae=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,o=s===void 0?[]:s,i=t.baseLine,c=t.layout,l=t.connectNulls,d=l===void 0?!1:l,u=qae(n,c),f=d?o.filter(function(m){return Uu(m)}):o,h;if(Array.isArray(i)){var p=d?i.filter(function(m){return Uu(m)}):i,v=f.map(function(m,g){return c1(c1({},m),{},{base:p[g]})});return c==="vertical"?h=$u().y(il).x1(ol).x0(function(m){return m.base.x}):h=$u().x(ol).y1(il).y0(function(m){return m.base.y}),h.defined(Uu).curve(u),h(v)}return c==="vertical"&&ge(i)?h=$u().y(il).x1(ol).x0(i):ge(i)?h=$u().x(ol).y1(il).y0(i):h=w2().x(ol).y(il),h.defined(Uu).curve(u),h(f)},wo=function(t){var r=t.className,n=t.points,s=t.path,o=t.pathRef;if((!n||!n.length)&&!s)return null;var i=n&&n.length?Wae(t):s;return E.createElement("path",Sx({},Ae(t,!1),Of(t),{className:Ke("recharts-curve",r),d:i,ref:o}))},kE={exports:{}},Hae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Gae=Hae,Kae=Gae;function EE(){}function OE(){}OE.resetWarningCache=EE;var Yae=function(){function e(n,s,o,i,c,l){if(l!==Kae){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:OE,resetWarningCache:EE};return r.PropTypes=r,r};kE.exports=Yae();var Zae=kE.exports;const Je=yt(Zae);var Xae=Object.getOwnPropertyNames,Jae=Object.getOwnPropertySymbols,Qae=Object.prototype.hasOwnProperty;function d1(e,t){return function(n,s,o){return e(n,s,o)&&t(n,s,o)}}function qu(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var o=s.cache,i=o.get(r),c=o.get(n);if(i&&c)return i===n&&c===r;o.set(r,n),o.set(n,r);var l=e(r,n,s);return o.delete(r),o.delete(n),l}}function u1(e){return Xae(e).concat(Jae(e))}var TE=Object.hasOwn||function(e,t){return Qae.call(e,t)};function zc(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var $E="_owner",f1=Object.getOwnPropertyDescriptor,h1=Object.keys;function ese(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function tse(e,t){return zc(e.getTime(),t.getTime())}function m1(e,t,r){if(e.size!==t.size)return!1;for(var n={},s=e.entries(),o=0,i,c;(i=s.next())&&!i.done;){for(var l=t.entries(),d=!1,u=0;(c=l.next())&&!c.done;){var f=i.value,h=f[0],p=f[1],v=c.value,m=v[0],g=v[1];!d&&!n[u]&&(d=r.equals(h,m,o,u,e,t,r)&&r.equals(p,g,h,m,e,t,r))&&(n[u]=!0),u++}if(!d)return!1;o++}return!0}function rse(e,t,r){var n=h1(e),s=n.length;if(h1(t).length!==s)return!1;for(var o;s-- >0;)if(o=n[s],o===$E&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!TE(t,o)||!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function cl(e,t,r){var n=u1(e),s=n.length;if(u1(t).length!==s)return!1;for(var o,i,c;s-- >0;)if(o=n[s],o===$E&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!TE(t,o)||!r.equals(e[o],t[o],o,o,e,t,r)||(i=f1(e,o),c=f1(t,o),(i||c)&&(!i||!c||i.configurable!==c.configurable||i.enumerable!==c.enumerable||i.writable!==c.writable)))return!1;return!0}function nse(e,t){return zc(e.valueOf(),t.valueOf())}function ase(e,t){return e.source===t.source&&e.flags===t.flags}function p1(e,t,r){if(e.size!==t.size)return!1;for(var n={},s=e.values(),o,i;(o=s.next())&&!o.done;){for(var c=t.values(),l=!1,d=0;(i=c.next())&&!i.done;)!l&&!n[d]&&(l=r.equals(o.value,i.value,o.value,i.value,e,t,r))&&(n[d]=!0),d++;if(!l)return!1}return!0}function sse(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var ose="[object Arguments]",ise="[object Boolean]",cse="[object Date]",lse="[object Map]",dse="[object Number]",use="[object Object]",fse="[object RegExp]",hse="[object Set]",mse="[object String]",pse=Array.isArray,g1=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,v1=Object.assign,gse=Object.prototype.toString.call.bind(Object.prototype.toString);function vse(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,s=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,c=e.areSetsEqual,l=e.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var p=u.constructor;if(p!==f.constructor)return!1;if(p===Object)return s(u,f,h);if(pse(u))return t(u,f,h);if(g1!=null&&g1(u))return l(u,f,h);if(p===Date)return r(u,f,h);if(p===RegExp)return i(u,f,h);if(p===Map)return n(u,f,h);if(p===Set)return c(u,f,h);var v=gse(u);return v===cse?r(u,f,h):v===fse?i(u,f,h):v===lse?n(u,f,h):v===hse?c(u,f,h):v===use?typeof u.then!="function"&&typeof f.then!="function"&&s(u,f,h):v===ose?s(u,f,h):v===ise||v===dse||v===mse?o(u,f,h):!1}}function xse(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?cl:ese,areDatesEqual:tse,areMapsEqual:n?d1(m1,cl):m1,areObjectsEqual:n?cl:rse,arePrimitiveWrappersEqual:nse,areRegExpsEqual:ase,areSetsEqual:n?d1(p1,cl):p1,areTypedArraysEqual:n?cl:sse};if(r&&(s=v1({},s,r(s))),t){var o=qu(s.areArraysEqual),i=qu(s.areMapsEqual),c=qu(s.areObjectsEqual),l=qu(s.areSetsEqual);s=v1({},s,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:c,areSetsEqual:l})}return s}function yse(e){return function(t,r,n,s,o,i,c){return e(t,r,c)}}function bse(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,o=e.strict;if(n)return function(l,d){var u=n(),f=u.cache,h=f===void 0?t?new WeakMap:void 0:f,p=u.meta;return r(l,d,{cache:h,equals:s,meta:p,strict:o})};if(t)return function(l,d){return r(l,d,{cache:new WeakMap,equals:s,meta:void 0,strict:o})};var i={cache:void 0,equals:s,meta:void 0,strict:o};return function(l,d){return r(l,d,i)}}var jse=Gs();Gs({strict:!0});Gs({circular:!0});Gs({circular:!0,strict:!0});Gs({createInternalComparator:function(){return zc}});Gs({strict:!0,createInternalComparator:function(){return zc}});Gs({circular:!0,createInternalComparator:function(){return zc}});Gs({circular:!0,createInternalComparator:function(){return zc},strict:!0});function Gs(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,o=e.strict,i=o===void 0?!1:o,c=xse(e),l=vse(c),d=n?n(l):yse(l);return bse({circular:r,comparator:l,createState:s,equals:d,strict:i})}function wse(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function x1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(o){r<0&&(r=o),o-r>t?(e(o),r=-1):wse(s)};requestAnimationFrame(n)}function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function Nse(e){return Pse(e)||Cse(e)||Sse(e)||_se()}function _se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sse(e,t){if(e){if(typeof e=="string")return y1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y1(e,t)}}function y1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pse(e){if(Array.isArray(e))return e}function Ase(){var e={},t=function(){return null},r=!1,n=function s(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var i=o,c=Nse(i),l=c[0],d=c.slice(1);if(typeof l=="number"){x1(s.bind(null,d),l);return}s(l),x1(s.bind(null,d));return}Cx(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function b1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b1(Object(r),!0).forEach(function(n){ME(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ME(e,t,r){return t=kse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kse(e){var t=Ese(e,"string");return fd(t)==="symbol"?t:String(t)}function Ese(e,t){if(fd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ose=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(o){return s.includes(o)})})},Tse=function(t){return t},$se=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Cl=function(t,r){return Object.keys(r).reduce(function(n,s){return j1(j1({},n),{},ME({},s,t(s,r[s])))},{})},w1=function(t,r,n){return t.map(function(s){return"".concat($se(s)," ").concat(r,"ms ").concat(n)}).join(",")};function Mse(e,t){return Rse(e)||Ise(e,t)||DE(e,t)||Dse()}function Dse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ise(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Rse(e){if(Array.isArray(e))return e}function Lse(e){return Bse(e)||zse(e)||DE(e)||Fse()}function Fse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DE(e,t){if(e){if(typeof e=="string")return Px(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Px(e,t)}}function zse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bse(e){if(Array.isArray(e))return Px(e)}function Px(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ch=1e-4,IE=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},RE=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},N1=function(t,r){return function(n){var s=IE(t,r);return RE(s,n)}},Vse=function(t,r){return function(n){var s=IE(t,r),o=[].concat(Lse(s.map(function(i,c){return i*c}).slice(1)),[0]);return RE(o,n)}},_1=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],o=r[1],i=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,o=0,i=1,c=1;break;case"ease":s=.25,o=.1,i=.25,c=1;break;case"ease-in":s=.42,o=0,i=1,c=1;break;case"ease-out":s=.42,o=0,i=.58,c=1;break;case"ease-in-out":s=0,o=0,i=.58,c=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var d=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Mse(d,4);s=u[0],o=u[1],i=u[2],c=u[3]}}}var f=N1(s,i),h=N1(o,c),p=Vse(s,i),v=function(y){return y>1?1:y<0?0:y},m=function(y){for(var b=y>1?1:y,w=b,j=0;j<8;++j){var N=f(w)-b,_=p(w);if(Math.abs(N-b)<ch||_<ch)return h(w);w=v(w-N/_)}return h(w)};return m.isStepper=!1,m},Use=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,o=s===void 0?8:s,i=t.dt,c=i===void 0?17:i,l=function(u,f,h){var p=-(u-f)*n,v=h*o,m=h+(p-v)*c/1e3,g=h*c/1e3+u;return Math.abs(g-f)<ch&&Math.abs(m)<ch?[f,0]:[g,m]};return l.isStepper=!0,l.dt=c,l},qse=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _1(s);case"spring":return Use();default:if(s.split("(")[0]==="cubic-bezier")return _1(s)}return typeof s=="function"?s:null};function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function S1(e){return Gse(e)||Hse(e)||LE(e)||Wse()}function Wse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gse(e){if(Array.isArray(e))return kx(e)}function C1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C1(Object(r),!0).forEach(function(n){Ax(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ax(e,t,r){return t=Kse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kse(e){var t=Yse(e,"string");return hd(t)==="symbol"?t:String(t)}function Yse(e,t){if(hd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zse(e,t){return Qse(e)||Jse(e,t)||LE(e,t)||Xse()}function Xse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LE(e,t){if(e){if(typeof e=="string")return kx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(e,t)}}function kx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Qse(e){if(Array.isArray(e))return e}var lh=function(t,r,n){return t+(r-t)*n},Ex=function(t){var r=t.from,n=t.to;return r!==n},eoe=function e(t,r,n){var s=Cl(function(o,i){if(Ex(i)){var c=t(i.from,i.to,i.velocity),l=Zse(c,2),d=l[0],u=l[1];return mr(mr({},i),{},{from:d,velocity:u})}return i},r);return n<1?Cl(function(o,i){return Ex(i)?mr(mr({},i),{},{velocity:lh(i.velocity,s[o].velocity,n),from:lh(i.from,s[o].from,n)}):i},r):e(t,s,n-1)};const toe=function(e,t,r,n,s){var o=Ose(e,t),i=o.reduce(function(g,y){return mr(mr({},g),{},Ax({},y,[e[y],t[y]]))},{}),c=o.reduce(function(g,y){return mr(mr({},g),{},Ax({},y,{from:e[y],velocity:0,to:t[y]}))},{}),l=-1,d,u,f=function(){return null},h=function(){return Cl(function(y,b){return b.from},c)},p=function(){return!Object.values(c).filter(Ex).length},v=function(y){d||(d=y);var b=y-d,w=b/r.dt;c=eoe(r,c,w),s(mr(mr(mr({},e),t),h())),d=y,p()||(l=requestAnimationFrame(f))},m=function(y){u||(u=y);var b=(y-u)/n,w=Cl(function(N,_){return lh.apply(void 0,S1(_).concat([r(b)]))},i);if(s(mr(mr(mr({},e),t),w)),b<1)l=requestAnimationFrame(f);else{var j=Cl(function(N,_){return lh.apply(void 0,S1(_).concat([r(1)]))},i);s(mr(mr(mr({},e),t),j))}};return f=r.isStepper?v:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Ui(e){"@babel/helpers - typeof";return Ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(e)}var roe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function noe(e,t){if(e==null)return{};var r=aoe(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aoe(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Ig(e){return coe(e)||ioe(e)||ooe(e)||soe()}function soe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ooe(e,t){if(e){if(typeof e=="string")return Ox(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ox(e,t)}}function ioe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function coe(e){if(Array.isArray(e))return Ox(e)}function Ox(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P1(Object(r),!0).forEach(function(n){gl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gl(e,t,r){return t=FE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function loe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function doe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FE(n.key),n)}}function uoe(e,t,r){return t&&doe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FE(e){var t=foe(e,"string");return Ui(t)==="symbol"?t:String(t)}function foe(e,t){if(Ui(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ui(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tx(e,t)}function Tx(e,t){return Tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Tx(e,t)}function moe(e){var t=poe();return function(){var n=dh(e),s;if(t){var o=dh(this).constructor;s=Reflect.construct(n,arguments,o)}else s=n.apply(this,arguments);return $x(this,s)}}function $x(e,t){if(t&&(Ui(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mx(e)}function Mx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function poe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dh(e){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dh(e)}var ra=function(e){hoe(r,e);var t=moe(r);function r(n,s){var o;loe(this,r),o=t.call(this,n,s);var i=o.props,c=i.isActive,l=i.attributeName,d=i.from,u=i.to,f=i.steps,h=i.children,p=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Mx(o)),o.changeStyle=o.changeStyle.bind(Mx(o)),!c||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),$x(o);if(f&&f.length)o.state={style:f[0].style};else if(d){if(typeof h=="function")return o.state={style:d},$x(o);o.state={style:l?gl({},l,d):d}}else o.state={style:{}};return o}return uoe(r,[{key:"componentDidMount",value:function(){var s=this.props,o=s.isActive,i=s.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var o=this.props,i=o.isActive,c=o.canBegin,l=o.attributeName,d=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(c){if(!i){var p={style:l?gl({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(jse(s.to,u)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=v||d?f:s.to;if(this.state&&h){var g={style:l?gl({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(g)}this.runAnimation(zn(zn({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var o=this,i=s.from,c=s.to,l=s.duration,d=s.easing,u=s.begin,f=s.onAnimationEnd,h=s.onAnimationStart,p=toe(i,c,qse(d),l,this.changeStyle),v=function(){o.stopJSAnimation=p()};this.manager.start([h,u,v,l,f])}},{key:"runStepAnimation",value:function(s){var o=this,i=s.steps,c=s.begin,l=s.onAnimationStart,d=i[0],u=d.style,f=d.duration,h=f===void 0?0:f,p=function(m,g,y){if(y===0)return m;var b=g.duration,w=g.easing,j=w===void 0?"ease":w,N=g.style,_=g.properties,S=g.onAnimationEnd,C=y>0?i[y-1]:g,k=_||Object.keys(N);if(typeof j=="function"||j==="spring")return[].concat(Ig(m),[o.runJSAnimation.bind(o,{from:C.style,to:N,duration:b,easing:j}),b]);var $=w1(k,b,j),A=zn(zn(zn({},C.style),N),{},{transition:$});return[].concat(Ig(m),[A,b,S]).filter(Tse)};return this.manager.start([l].concat(Ig(i.reduce(p,[u,Math.max(h,c)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Ase());var o=s.begin,i=s.duration,c=s.attributeName,l=s.to,d=s.easing,u=s.onAnimationStart,f=s.onAnimationEnd,h=s.steps,p=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(s);return}if(h.length>1){this.runStepAnimation(s);return}var m=c?gl({},c,l):l,g=w1(Object.keys(m),i,d);v.start([u,o,zn(zn({},m),{},{transition:g}),i,f])}},{key:"render",value:function(){var s=this.props,o=s.children;s.begin;var i=s.duration;s.attributeName,s.easing;var c=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=noe(s,roe),d=x.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!c||d===0||i<=0)return o;var f=function(p){var v=p.props,m=v.style,g=m===void 0?{}:m,y=v.className,b=x.cloneElement(p,zn(zn({},l),{},{style:zn(zn({},g),u),className:y}));return b};return d===1?f(x.Children.only(o)):E.createElement("div",null,x.Children.map(o,function(h){return f(h)}))}}]),r}(x.PureComponent);ra.displayName="Animate";ra.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ra.propTypes={from:Je.oneOfType([Je.object,Je.string]),to:Je.oneOfType([Je.object,Je.string]),attributeName:Je.string,duration:Je.number,begin:Je.number,easing:Je.oneOfType([Je.string,Je.func]),steps:Je.arrayOf(Je.shape({duration:Je.number.isRequired,style:Je.object.isRequired,easing:Je.oneOfType([Je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Je.func]),properties:Je.arrayOf("string"),onAnimationEnd:Je.func})),children:Je.oneOfType([Je.node,Je.func]),isActive:Je.bool,canBegin:Je.bool,onAnimationEnd:Je.func,shouldReAnimate:Je.bool,onAnimationStart:Je.func,onAnimationReStart:Je.func};Je.object,Je.object,Je.object,Je.element;Je.object,Je.object,Je.object,Je.oneOfType([Je.array,Je.element]),Je.any;function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uh.apply(this,arguments)}function goe(e,t){return boe(e)||yoe(e,t)||xoe(e,t)||voe()}function voe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xoe(e,t){if(e){if(typeof e=="string")return A1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A1(e,t)}}function A1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yoe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function boe(e){if(Array.isArray(e))return e}function k1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k1(Object(r),!0).forEach(function(n){joe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function joe(e,t,r){return t=woe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function woe(e){var t=Noe(e,"string");return md(t)=="symbol"?t:t+""}function Noe(e,t){if(md(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O1=function(t,r,n,s,o){var i=Math.min(Math.abs(n)/2,Math.abs(s)/2),c=s>=0?1:-1,l=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,u;if(i>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=o[h]>i?i:o[h];u="M".concat(t,",").concat(r+c*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+l*f[0],",").concat(r)),u+="L ".concat(t+n-l*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+c*f[1])),u+="L ".concat(t+n,",").concat(r+s-c*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+n-l*f[2],",").concat(r+s)),u+="L ".concat(t+l*f[3],",").concat(r+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-c*f[3])),u+="Z"}else if(i>0&&o===+o&&o>0){var v=Math.min(i,o);u="M ".concat(t,",").concat(r+c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+l*v,",").concat(r,`
            L `).concat(t+n-l*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n,",").concat(r+c*v,`
            L `).concat(t+n,",").concat(r+s-c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n-l*v,",").concat(r+s,`
            L `).concat(t+l*v,",").concat(r+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+s-c*v," Z")}else u="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return u},_oe=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,o=r.x,i=r.y,c=r.width,l=r.height;if(Math.abs(c)>0&&Math.abs(l)>0){var d=Math.min(o,o+c),u=Math.max(o,o+c),f=Math.min(i,i+l),h=Math.max(i,i+l);return n>=d&&n<=u&&s>=f&&s<=h}return!1},Soe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},d0=function(t){var r=E1(E1({},Soe),t),n=x.useRef(),s=x.useState(-1),o=goe(s,2),i=o[0],c=o[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&c(j)}catch{}},[]);var l=r.x,d=r.y,u=r.width,f=r.height,h=r.radius,p=r.className,v=r.animationEasing,m=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var w=Ke("recharts-rectangle",p);return b?E.createElement(ra,{canBegin:i>0,from:{width:u,height:f,x:l,y:d},to:{width:u,height:f,x:l,y:d},duration:m,animationEasing:v,isActive:b},function(j){var N=j.width,_=j.height,S=j.x,C=j.y;return E.createElement(ra,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:v},E.createElement("path",uh({},Ae(r,!0),{className:w,d:O1(S,C,N,_,h),ref:n})))}):E.createElement("path",uh({},Ae(r,!0),{className:w,d:O1(l,d,u,f,h)}))},Coe=["points","className","baseLinePoints","connectNulls"];function xi(){return xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xi.apply(this,arguments)}function Poe(e,t){if(e==null)return{};var r=Aoe(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Aoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function T1(e){return Toe(e)||Ooe(e)||Eoe(e)||koe()}function koe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eoe(e,t){if(e){if(typeof e=="string")return Dx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dx(e,t)}}function Ooe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Toe(e){if(Array.isArray(e))return Dx(e)}function Dx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $1=function(t){return t&&t.x===+t.x&&t.y===+t.y},$oe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){$1(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),$1(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Pl=function(t,r){var n=$oe(t);r&&(n=[n.reduce(function(o,i){return[].concat(T1(o),T1(i))},[])]);var s=n.map(function(o){return o.reduce(function(i,c,l){return"".concat(i).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Moe=function(t,r,n){var s=Pl(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Pl(r.reverse(),n).slice(1))},Doe=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,o=t.connectNulls,i=Poe(t,Coe);if(!r||!r.length)return null;var c=Ke("recharts-polygon",n);if(s&&s.length){var l=i.stroke&&i.stroke!=="none",d=Moe(r,s,o);return E.createElement("g",{className:c},E.createElement("path",xi({},Ae(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",stroke:"none",d})),l?E.createElement("path",xi({},Ae(i,!0),{fill:"none",d:Pl(r,o)})):null,l?E.createElement("path",xi({},Ae(i,!0),{fill:"none",d:Pl(s,o)})):null)}var u=Pl(r,o);return E.createElement("path",xi({},Ae(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",className:c,d:u}))};function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ix.apply(this,arguments)}var nu=function(t){var r=t.cx,n=t.cy,s=t.r,o=t.className,i=Ke("recharts-dot",o);return r===+r&&n===+n&&s===+s?E.createElement("circle",Ix({},Ae(t,!1),Of(t),{className:i,cx:r,cy:n,r:s})):null};function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}var Ioe=["x","y","top","left","width","height","className"];function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rx.apply(this,arguments)}function M1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Roe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M1(Object(r),!0).forEach(function(n){Loe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Loe(e,t,r){return t=Foe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Foe(e){var t=zoe(e,"string");return pd(t)=="symbol"?t:t+""}function zoe(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Boe(e,t){if(e==null)return{};var r=Voe(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Voe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Uoe=function(t,r,n,s,o,i){return"M".concat(t,",").concat(o,"v").concat(s,"M").concat(i,",").concat(r,"h").concat(n)},qoe=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,o=s===void 0?0:s,i=t.top,c=i===void 0?0:i,l=t.left,d=l===void 0?0:l,u=t.width,f=u===void 0?0:u,h=t.height,p=h===void 0?0:h,v=t.className,m=Boe(t,Ioe),g=Roe({x:n,y:o,top:c,left:d,width:f,height:p},m);return!ge(n)||!ge(o)||!ge(f)||!ge(p)||!ge(c)||!ge(d)?null:E.createElement("path",Rx({},Ae(g,!0),{className:Ke("recharts-cross",v),d:Uoe(n,o,f,p,c,d)}))},Woe=np,Hoe=Zk,Goe=Ma;function Koe(e,t){return e&&e.length?Woe(e,Goe(t),Hoe):void 0}var Yoe=Koe;const Zoe=yt(Yoe);var Xoe=np,Joe=Ma,Qoe=Xk;function eie(e,t){return e&&e.length?Xoe(e,Joe(t),Qoe):void 0}var tie=eie;const rie=yt(tie);var nie=["cx","cy","angle","ticks","axisLine"],aie=["ticks","tick","angle","tickFormatter","stroke"];function qi(e){"@babel/helpers - typeof";return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(e)}function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Al.apply(this,arguments)}function D1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D1(Object(r),!0).forEach(function(n){ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I1(e,t){if(e==null)return{};var r=sie(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BE(n.key),n)}}function iie(e,t,r){return t&&R1(e.prototype,t),r&&R1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cie(e,t,r){return t=fh(t),lie(e,zE()?Reflect.construct(t,r||[],fh(e).constructor):t.apply(e,r))}function lie(e,t){if(t&&(qi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return die(e)}function die(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zE=function(){return!!e})()}function fh(e){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fh(e)}function uie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lx(e,t)}function Lx(e,t){return Lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Lx(e,t)}function ip(e,t,r){return t=BE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BE(e){var t=fie(e,"string");return qi(t)=="symbol"?t:t+""}function fie(e,t){if(qi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cp=function(e){function t(){return oie(this,t),cie(this,t,arguments)}return uie(t,e),iie(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,o=this.props,i=o.angle,c=o.cx,l=o.cy;return Pt(c,l,s,i)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.angle,c=n.ticks,l=Zoe(c,function(u){return u.coordinate||0}),d=rie(c,function(u){return u.coordinate||0});return{cx:s,cy:o,startAngle:i,endAngle:i,innerRadius:d.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.angle,c=n.ticks,l=n.axisLine,d=I1(n,nie),u=c.reduce(function(v,m){return[Math.min(v[0],m.coordinate),Math.max(v[1],m.coordinate)]},[1/0,-1/0]),f=Pt(s,o,u[0],i),h=Pt(s,o,u[1],i),p=ro(ro(ro({},Ae(d,!1)),{},{fill:"none"},Ae(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return E.createElement("line",Al({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,i=s.tick,c=s.angle,l=s.tickFormatter,d=s.stroke,u=I1(s,aie),f=this.getTickTextAnchor(),h=Ae(u,!1),p=Ae(i,!1),v=o.map(function(m,g){var y=n.getTickValueCoord(m),b=ro(ro(ro(ro({textAnchor:f,transform:"rotate(".concat(90-c,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:d},p),{},{index:g},y),{},{payload:m});return E.createElement(ct,Al({className:Ke("recharts-polar-radius-axis-tick",SE(i)),key:"tick-".concat(m.coordinate)},ko(n.props,m,g)),t.renderTickItem(i,b,l?l(m.value,g):m.value))});return E.createElement(ct,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.axisLine,i=n.tick;return!s||!s.length?null:E.createElement(ct,{className:Ke("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),ur.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,o){var i;return E.isValidElement(n)?i=E.cloneElement(n,s):Le(n)?i=n(s):i=E.createElement(Eo,Al({},s,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(x.PureComponent);ip(cp,"displayName","PolarRadiusAxis");ip(cp,"axisType","radiusAxis");ip(cp,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wi(e){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wi(e)}function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fo.apply(this,arguments)}function L1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L1(Object(r),!0).forEach(function(n){lp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UE(n.key),n)}}function mie(e,t,r){return t&&F1(e.prototype,t),r&&F1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pie(e,t,r){return t=hh(t),gie(e,VE()?Reflect.construct(t,r||[],hh(e).constructor):t.apply(e,r))}function gie(e,t){if(t&&(Wi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vie(e)}function vie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VE=function(){return!!e})()}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hh(e)}function xie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fx(e,t)}function Fx(e,t){return Fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Fx(e,t)}function lp(e,t,r){return t=UE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UE(e){var t=yie(e,"string");return Wi(t)=="symbol"?t:t+""}function yie(e,t){if(Wi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bie=Math.PI/180,z1=1e-5,dp=function(e){function t(){return hie(this,t),pie(this,t,arguments)}return xie(t,e),mie(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.cx,i=s.cy,c=s.radius,l=s.orientation,d=s.tickSize,u=d||8,f=Pt(o,i,c,n.coordinate),h=Pt(o,i,c+(l==="inner"?-1:1)*u,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,o=Math.cos(-n.coordinate*bie),i;return o>z1?i=s==="outer"?"start":"end":o<-z1?i=s==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,i=n.radius,c=n.axisLine,l=n.axisLineType,d=no(no({},Ae(this.props,!1)),{},{fill:"none"},Ae(c,!1));if(l==="circle")return E.createElement(nu,fo({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:o,r:i}));var u=this.props.ticks,f=u.map(function(h){return Pt(s,o,i,h.coordinate)});return E.createElement(Doe,fo({className:"recharts-polar-angle-axis-line"},d,{points:f}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,i=s.tick,c=s.tickLine,l=s.tickFormatter,d=s.stroke,u=Ae(this.props,!1),f=Ae(i,!1),h=no(no({},u),{},{fill:"none"},Ae(c,!1)),p=o.map(function(v,m){var g=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),b=no(no(no({textAnchor:y},u),{},{stroke:"none",fill:d},f),{},{index:m,payload:v,x:g.x2,y:g.y2});return E.createElement(ct,fo({className:Ke("recharts-polar-angle-axis-tick",SE(i)),key:"tick-".concat(v.coordinate)},ko(n.props,v,m)),c&&E.createElement("line",fo({className:"recharts-polar-angle-axis-tick-line"},h,g)),i&&t.renderTickItem(i,b,l?l(v.value,m):v.value))});return E.createElement(ct,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.radius,i=n.axisLine;return o<=0||!s||!s.length?null:E.createElement(ct,{className:Ke("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,o){var i;return E.isValidElement(n)?i=E.cloneElement(n,s):Le(n)?i=n(s):i=E.createElement(Eo,fo({},s,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(x.PureComponent);lp(dp,"displayName","PolarAngleAxis");lp(dp,"axisType","angleAxis");lp(dp,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var jie=H2,wie=jie(Object.getPrototypeOf,Object),Nie=wie,_ie=ls,Sie=Nie,Cie=ds,Pie="[object Object]",Aie=Function.prototype,kie=Object.prototype,qE=Aie.toString,Eie=kie.hasOwnProperty,Oie=qE.call(Object);function Tie(e){if(!Cie(e)||_ie(e)!=Pie)return!1;var t=Sie(e);if(t===null)return!0;var r=Eie.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qE.call(r)==Oie}var $ie=Tie;const Mie=yt($ie);var Die=ls,Iie=ds,Rie="[object Boolean]";function Lie(e){return e===!0||e===!1||Iie(e)&&Die(e)==Rie}var Fie=Lie;const zie=yt(Fie);function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mh.apply(this,arguments)}function Bie(e,t){return Wie(e)||qie(e,t)||Uie(e,t)||Vie()}function Vie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uie(e,t){if(e){if(typeof e=="string")return B1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B1(e,t)}}function B1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Wie(e){if(Array.isArray(e))return e}function V1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V1(Object(r),!0).forEach(function(n){Hie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hie(e,t,r){return t=Gie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gie(e){var t=Kie(e,"string");return gd(t)=="symbol"?t:t+""}function Kie(e,t){if(gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q1=function(t,r,n,s,o){var i=n-s,c;return c="M ".concat(t,",").concat(r),c+="L ".concat(t+n,",").concat(r),c+="L ".concat(t+n-i/2,",").concat(r+o),c+="L ".concat(t+n-i/2-s,",").concat(r+o),c+="L ".concat(t,",").concat(r," Z"),c},Yie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zie=function(t){var r=U1(U1({},Yie),t),n=x.useRef(),s=x.useState(-1),o=Bie(s,2),i=o[0],c=o[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&c(w)}catch{}},[]);var l=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,v=r.animationEasing,m=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(l!==+l||d!==+d||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var b=Ke("recharts-trapezoid",p);return y?E.createElement(ra,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:d},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:d},duration:m,animationEasing:v,isActive:y},function(w){var j=w.upperWidth,N=w.lowerWidth,_=w.height,S=w.x,C=w.y;return E.createElement(ra,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:v},E.createElement("path",mh({},Ae(r,!0),{className:b,d:q1(S,C,j,N,_),ref:n})))}):E.createElement("g",null,E.createElement("path",mh({},Ae(r,!0),{className:b,d:q1(l,d,u,f,h)})))},Xie=["option","shapeType","propTransformer","activeClassName","isActive"];function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function Jie(e,t){if(e==null)return{};var r=Qie(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function W1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W1(Object(r),!0).forEach(function(n){ece(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ece(e,t,r){return t=tce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tce(e){var t=rce(e,"string");return vd(t)=="symbol"?t:t+""}function rce(e,t){if(vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nce(e,t){return ph(ph({},t),e)}function ace(e,t){return e==="symbols"}function H1(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return E.createElement(d0,r);case"trapezoid":return E.createElement(Zie,r);case"sector":return E.createElement(AE,r);case"symbols":if(ace(t))return E.createElement(kb,r);break;default:return null}}function sce(e){return x.isValidElement(e)?e.props:e}function WE(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?nce:n,o=e.activeClassName,i=o===void 0?"recharts-active-shape":o,c=e.isActive,l=Jie(e,Xie),d;if(x.isValidElement(t))d=x.cloneElement(t,ph(ph({},l),sce(t)));else if(Le(t))d=t(l);else if(Mie(t)&&!zie(t)){var u=s(t,l);d=E.createElement(H1,{shapeType:r,elementProps:u})}else{var f=l;d=E.createElement(H1,{shapeType:r,elementProps:f})}return c?E.createElement(ct,{className:i},d):d}function up(e,t){return t!=null&&"trapezoids"in e.props}function fp(e,t){return t!=null&&"sectors"in e.props}function xd(e,t){return t!=null&&"points"in e.props}function oce(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&o}function ice(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function cce(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function lce(e,t){var r;return up(e,t)?r=oce:fp(e,t)?r=ice:xd(e,t)&&(r=cce),r}function dce(e,t){var r;return up(e,t)?r="trapezoids":fp(e,t)?r="sectors":xd(e,t)&&(r="points"),r}function uce(e,t){if(up(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(fp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return xd(e,t)?t.payload:{}}function fce(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=dce(r,t),o=uce(r,t),i=n.filter(function(l,d){var u=Oo(o,l),f=r.props[s].filter(function(v){var m=lce(r,t);return m(v,t)}),h=r.props[s].indexOf(f[f.length-1]),p=d===h;return u&&p}),c=n.indexOf(i[i.length-1]);return c}var cf;function Hi(e){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(e)}function yi(){return yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yi.apply(this,arguments)}function G1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G1(Object(r),!0).forEach(function(n){wn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GE(n.key),n)}}function mce(e,t,r){return t&&K1(e.prototype,t),r&&K1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pce(e,t,r){return t=gh(t),gce(e,HE()?Reflect.construct(t,r||[],gh(e).constructor):t.apply(e,r))}function gce(e,t){if(t&&(Hi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vce(e)}function vce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HE=function(){return!!e})()}function gh(e){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gh(e)}function xce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zx(e,t)}function zx(e,t){return zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zx(e,t)}function wn(e,t,r){return t=GE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GE(e){var t=yce(e,"string");return Hi(t)=="symbol"?t:t+""}function yce(e,t){if(Hi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Da=function(e){function t(r){var n;return hce(this,t),n=pce(this,t,[r]),wn(n,"pieRef",null),wn(n,"sectorRefs",[]),wn(n,"id",Wo("recharts-pie-")),wn(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Le(s)&&s()}),wn(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Le(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return xce(t,e),mce(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,c=o.labelLine,l=o.dataKey,d=o.valueKey,u=Ae(this.props,!1),f=Ae(i,!1),h=Ae(c,!1),p=i&&i.offsetRadius||20,v=n.map(function(m,g){var y=(m.startAngle+m.endAngle)/2,b=Pt(m.cx,m.cy,m.outerRadius+p,y),w=St(St(St(St({},u),m),{},{stroke:"none"},f),{},{index:g,textAnchor:t.getTextAnchor(b.x,m.cx)},b),j=St(St(St(St({},u),m),{},{fill:"none",stroke:m.fill},h),{},{index:g,points:[Pt(m.cx,m.cy,m.outerRadius,y),b]}),N=l;return We(l)&&We(d)?N="value":We(l)&&(N=d),E.createElement(ct,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},c&&t.renderLabelLineItem(c,j,"line"),t.renderLabelItem(i,w,Ht(m,N)))});return E.createElement(ct,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var s=this,o=this.props,i=o.activeShape,c=o.blendStroke,l=o.inactiveShape;return n.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var f=s.isActiveIndex(u),h=l&&s.hasActiveIndex()?l:null,p=f?i:h,v=St(St({},d),{},{stroke:c?d.fill:d.stroke,tabIndex:-1});return E.createElement(ct,yi({ref:function(g){g&&!s.sectorRefs.includes(g)&&s.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},ko(s.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),E.createElement(WE,yi({option:p,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,o=s.sectors,i=s.isAnimationActive,c=s.animationBegin,l=s.animationDuration,d=s.animationEasing,u=s.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return E.createElement(ra,{begin:c,duration:l,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var m=v.t,g=[],y=o&&o[0],b=y.startAngle;return o.forEach(function(w,j){var N=h&&h[j],_=j>0?fn(w,"paddingAngle",0):0;if(N){var S=or(N.endAngle-N.startAngle,w.endAngle-w.startAngle),C=St(St({},w),{},{startAngle:b+_,endAngle:b+S(m)+_});g.push(C),b=C.endAngle}else{var k=w.endAngle,$=w.startAngle,A=or(0,k-$),P=A(m),O=St(St({},w),{},{startAngle:b+_,endAngle:b+P+_});g.push(O),b=O.endAngle}}),E.createElement(ct,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[i].focus(),s.setState({sectorToFocus:i});break}case"ArrowRight":{var c=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[c].focus(),s.setState({sectorToFocus:c});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,o=n.isAnimationActive,i=this.state.prevSectors;return o&&s&&s.length&&(!i||!Oo(i,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,o=s.hide,i=s.sectors,c=s.className,l=s.label,d=s.cx,u=s.cy,f=s.innerRadius,h=s.outerRadius,p=s.isAnimationActive,v=this.state.isAnimationFinished;if(o||!i||!i.length||!ge(d)||!ge(u)||!ge(f)||!ge(h))return null;var m=Ke("recharts-pie",c);return E.createElement(ct,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){n.pieRef=y}},this.renderSectors(),l&&this.renderLabels(i),ur.renderCallByParent(this.props,null,!1),(!p||v)&&Ca.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,o){if(E.isValidElement(n))return E.cloneElement(n,s);if(Le(n))return n(s);var i=Ke("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return E.createElement(wo,yi({},s,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(n,s,o){if(E.isValidElement(n))return E.cloneElement(n,s);var i=o;if(Le(n)&&(i=n(s),E.isValidElement(i)))return i;var c=Ke("recharts-pie-label-text",typeof n!="boolean"&&!Le(n)?n.className:"");return E.createElement(Eo,yi({},s,{alignmentBaseline:"middle",className:c}),i)}}])}(x.PureComponent);cf=Da;wn(Da,"displayName","Pie");wn(Da,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!qs.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});wn(Da,"parseDeltaAngle",function(e,t){var r=Lr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});wn(Da,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ae(e,!1),s=hn(r,Li);return t&&t.length?t.map(function(o,i){return St(St(St({payload:o},n),o),s&&s[i]&&s[i].props)}):s&&s.length?s.map(function(o){return St(St({},n),o.props)}):[]});wn(Da,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,o=t.height,i=_E(s,o),c=n+Fr(e.cx,s,s/2),l=r+Fr(e.cy,o,o/2),d=Fr(e.innerRadius,i,0),u=Fr(e.outerRadius,i,i*.8),f=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:l,innerRadius:d,outerRadius:u,maxRadius:f}});wn(Da,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?St(St({},t.type.defaultProps),t.props):t.props,s=cf.getRealPieData(n);if(!s||!s.length)return null;var o=n.cornerRadius,i=n.startAngle,c=n.endAngle,l=n.paddingAngle,d=n.dataKey,u=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),v=cf.parseCoordinateOfPie(n,r),m=cf.parseDeltaAngle(i,c),g=Math.abs(m),y=d;We(d)&&We(f)?(Xn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):We(d)&&(Xn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var b=s.filter(function(C){return Ht(C,y,0)!==0}).length,w=(g>=360?b:b-1)*l,j=g-b*p-w,N=s.reduce(function(C,k){var $=Ht(k,y,0);return C+(ge($)?$:0)},0),_;if(N>0){var S;_=s.map(function(C,k){var $=Ht(C,y,0),A=Ht(C,u,k),P=(ge($)?$:0)/N,O;k?O=S.endAngle+Lr(m)*l*($!==0?1:0):O=i;var M=O+Lr(m)*(($!==0?p:0)+P*j),R=(O+M)/2,T=(v.innerRadius+v.outerRadius)/2,D=[{name:A,value:$,payload:C,dataKey:y,type:h}],I=Pt(v.cx,v.cy,T,R);return S=St(St(St({percent:P,cornerRadius:o,name:A,tooltipPayload:D,midAngle:R,middleRadius:T,tooltipPosition:I},C),v),{},{value:Ht(C,y),startAngle:O,endAngle:M,payload:C,paddingAngle:Lr(m)*l}),S})}return St(St({},v),{},{sectors:_,data:s})});var bce=Math.ceil,jce=Math.max;function wce(e,t,r,n){for(var s=-1,o=jce(bce((t-e)/(r||1)),0),i=Array(o);o--;)i[n?o:++s]=e,e+=r;return i}var Nce=wce,_ce=uk,Y1=1/0,Sce=17976931348623157e292;function Cce(e){if(!e)return e===0?e:0;if(e=_ce(e),e===Y1||e===-Y1){var t=e<0?-1:1;return t*Sce}return e===e?e:0}var KE=Cce,Pce=Nce,Ace=Zm,Rg=KE;function kce(e){return function(t,r,n){return n&&typeof n!="number"&&Ace(t,r,n)&&(r=n=void 0),t=Rg(t),r===void 0?(r=t,t=0):r=Rg(r),n=n===void 0?t<r?1:-1:Rg(n),Pce(t,r,n,e)}}var Ece=kce,Oce=Ece,Tce=Oce(),$ce=Tce;const vh=yt($ce);function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function Z1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z1(Object(r),!0).forEach(function(n){YE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YE(e,t,r){return t=Mce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mce(e){var t=Dce(e,"string");return yd(t)=="symbol"?t:t+""}function Dce(e,t){if(yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ice=["Webkit","Moz","O","ms"],Rce=function(t,r){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),s=Ice.reduce(function(o,i){return X1(X1({},o),{},YE({},i+n,r))},{});return s[t]=r,s};function Gi(e){"@babel/helpers - typeof";return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi(e)}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xh.apply(this,arguments)}function J1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J1(Object(r),!0).forEach(function(n){nn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XE(n.key),n)}}function Fce(e,t,r){return t&&Q1(e.prototype,t),r&&Q1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zce(e,t,r){return t=yh(t),Bce(e,ZE()?Reflect.construct(t,r||[],yh(e).constructor):t.apply(e,r))}function Bce(e,t){if(t&&(Gi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vce(e)}function Vce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZE=function(){return!!e})()}function yh(e){return yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yh(e)}function Uce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bx(e,t)}function Bx(e,t){return Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Bx(e,t)}function nn(e,t,r){return t=XE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XE(e){var t=qce(e,"string");return Gi(t)=="symbol"?t:t+""}function qce(e,t){if(Gi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wce=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,o=t.x,i=t.width,c=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,d=_l().domain(vh(0,l)).range([o,o+i-c]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:u}},eS=function(t){return t.changedTouches&&!!t.changedTouches.length},Ki=function(e){function t(r){var n;return Lce(this,t),n=zce(this,t,[r]),nn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),nn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),nn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,o=s.endIndex,i=s.onDragEnd,c=s.startIndex;i?.({endIndex:o,startIndex:c})}),n.detachDragEndListener()}),nn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),nn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),nn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),nn(n,"handleSlideDragStart",function(s){var o=eS(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Uce(t,e),Fce(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,o=n.endX,i=this.state.scaleValues,c=this.props,l=c.gap,d=c.data,u=d.length-1,f=Math.min(s,o),h=Math.max(s,o),p=t.getIndexInRange(i,f),v=t.getIndexInRange(i,h);return{startIndex:p-p%l,endIndex:v===u?u:v-v%l}}},{key:"getTextOfTick",value:function(n){var s=this.props,o=s.data,i=s.tickFormatter,c=s.dataKey,l=Ht(o[n],c,n);return Le(i)?i(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,o=s.slideMoveStartX,i=s.startX,c=s.endX,l=this.props,d=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,v=l.onChange,m=n.pageX-o;m>0?m=Math.min(m,d+u-f-c,d+u-f-i):m<0&&(m=Math.max(m,d-i,d-c));var g=this.getIndex({startX:i+m,endX:c+m});(g.startIndex!==h||g.endIndex!==p)&&v&&v(g),this.setState({startX:i+m,endX:c+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var o=eS(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,o=s.brushMoveStartX,i=s.movingTravellerId,c=s.endX,l=s.startX,d=this.state[i],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,v=u.onChange,m=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,f+h-p-d):b<0&&(b=Math.max(b,f-d)),y[i]=d+b;var w=this.getIndex(y),j=w.startIndex,N=w.endIndex,_=function(){var C=g.length-1;return i==="startX"&&(c>l?j%m===0:N%m===0)||c<l&&N===C||i==="endX"&&(c>l?N%m===0:j%m===0)||c>l&&N===C};this.setState(nn(nn({},i,d+b),"brushMoveStartX",n.pageX),function(){v&&_()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var o=this,i=this.state,c=i.scaleValues,l=i.startX,d=i.endX,u=this.state[s],f=c.indexOf(u);if(f!==-1){var h=f+n;if(!(h===-1||h>=c.length)){var p=c[h];s==="startX"&&p>=d||s==="endX"&&p<=l||this.setState(nn({},s,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,o=n.y,i=n.width,c=n.height,l=n.fill,d=n.stroke;return E.createElement("rect",{stroke:d,fill:l,x:s,y:o,width:i,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,o=n.y,i=n.width,c=n.height,l=n.data,d=n.children,u=n.padding,f=x.Children.only(d);return f?E.cloneElement(f,{x:s,y:o,width:i,height:c,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,s){var o,i,c=this,l=this.props,d=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,v=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(n,this.props.x),b=Lg(Lg({},Ae(this.props,!1)),{},{x:y,y:d,width:u,height:f}),w=p||"Min value: ".concat((o=v[m])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=v[g])===null||i===void 0?void 0:i.name);return E.createElement(ct,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),c.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,s){var o=this.props,i=o.y,c=o.height,l=o.stroke,d=o.travellerWidth,u=Math.min(n,s)+d,f=Math.max(Math.abs(s-n)-d,0);return E.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:i,width:f,height:c})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,o=n.endIndex,i=n.y,c=n.height,l=n.travellerWidth,d=n.stroke,u=this.state,f=u.startX,h=u.endX,p=5,v={pointerEvents:"none",fill:d};return E.createElement(ct,{className:"recharts-brush-texts"},E.createElement(Eo,xh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:i+c/2},v),this.getTextOfTick(s)),E.createElement(Eo,xh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:i+c/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,s=n.data,o=n.className,i=n.children,c=n.x,l=n.y,d=n.width,u=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,v=h.endX,m=h.isTextActive,g=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!s||!s.length||!ge(c)||!ge(l)||!ge(d)||!ge(u)||d<=0||u<=0)return null;var w=Ke("recharts-brush",o),j=E.Children.count(i)===1,N=Rce("userSelect","none");return E.createElement(ct,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(m||g||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,o=n.y,i=n.width,c=n.height,l=n.stroke,d=Math.floor(o+c/2)-1;return E.createElement(E.Fragment,null,E.createElement("rect",{x:s,y:o,width:i,height:c,fill:l,stroke:"none"}),E.createElement("line",{x1:s+1,y1:d,x2:s+i-1,y2:d,fill:"none",stroke:"#fff"}),E.createElement("line",{x1:s+1,y1:d+2,x2:s+i-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var o;return E.isValidElement(n)?o=E.cloneElement(n,s):Le(n)?o=n(s):o=t.renderDefaultTraveller(s),o}},{key:"getDerivedStateFromProps",value:function(n,s){var o=n.data,i=n.width,c=n.x,l=n.travellerWidth,d=n.updateId,u=n.startIndex,f=n.endIndex;if(o!==s.prevData||d!==s.prevUpdateId)return Lg({prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:c,prevWidth:i},o&&o.length?Wce({data:o,width:i,x:c,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(i!==s.prevWidth||c!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([c,c+i-l]);var h=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:c,prevWidth:i,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,s){for(var o=n.length,i=0,c=o-1;c-i>1;){var l=Math.floor((i+c)/2);n[l]>s?c=l:i=l}return s>=n[c]?c:i}}])}(x.PureComponent);nn(Ki,"displayName","Brush");nn(Ki,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Hce=Ib;function Gce(e,t){var r;return Hce(e,function(n,s,o){return r=t(n,s,o),!r}),!!r}var Kce=Gce,Yce=L2,Zce=Ma,Xce=Kce,Jce=Qr,Qce=Zm;function ele(e,t,r){var n=Jce(e)?Yce:Xce;return r&&Qce(e,t,r)&&(t=void 0),n(e,Zce(t))}var tle=ele;const rle=yt(tle);var Pa=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},tS=ok;function nle(e,t,r){t=="__proto__"&&tS?tS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ale=nle,sle=ale,ole=ak,ile=Ma;function cle(e,t){var r={};return t=ile(t),ole(e,function(n,s,o){sle(r,s,t(n,s,o))}),r}var lle=cle;const dle=yt(lle);function ule(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var fle=ule,hle=Ib;function mle(e,t){var r=!0;return hle(e,function(n,s,o){return r=!!t(n,s,o),r}),r}var ple=mle,gle=fle,vle=ple,xle=Ma,yle=Qr,ble=Zm;function jle(e,t,r){var n=yle(e)?gle:vle;return r&&ble(e,t,r)&&(t=void 0),n(e,xle(t))}var wle=jle;const JE=yt(wle);var Nle=["x","y"];function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vx.apply(this,arguments)}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){_le(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _le(e,t,r){return t=Sle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sle(e){var t=Cle(e,"string");return bd(t)=="symbol"?t:t+""}function Cle(e,t){if(bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ple(e,t){if(e==null)return{};var r=Ale(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ale(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kle(e,t){var r=e.x,n=e.y,s=Ple(e,Nle),o="".concat(r),i=parseInt(o,10),c="".concat(n),l=parseInt(c,10),d="".concat(t.height||s.height),u=parseInt(d,10),f="".concat(t.width||s.width),h=parseInt(f,10);return ll(ll(ll(ll(ll({},t),s),i?{x:i}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function nS(e){return E.createElement(WE,Vx({shapeType:"rectangle",propTransformer:kle,activeClassName:"recharts-active-bar"},e))}var Ele=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var o=typeof n=="number";return o?t(n,s):(o||$o(),r)}},Ole=["value","background"],QE;function Yi(e){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi(e)}function Tle(e,t){if(e==null)return{};var r=$le(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $le(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bh.apply(this,arguments)}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){Cs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tO(n.key),n)}}function Dle(e,t,r){return t&&sS(e.prototype,t),r&&sS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ile(e,t,r){return t=jh(t),Rle(e,eO()?Reflect.construct(t,r||[],jh(e).constructor):t.apply(e,r))}function Rle(e,t){if(t&&(Yi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lle(e)}function Lle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eO=function(){return!!e})()}function jh(e){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jh(e)}function Fle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ux(e,t)}function Ux(e,t){return Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ux(e,t)}function Cs(e,t,r){return t=tO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tO(e){var t=zle(e,"string");return Yi(t)=="symbol"?t:t+""}function zle(e,t){if(Yi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var na=function(e){function t(){var r;Mle(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=Ile(this,t,[].concat(s)),Cs(r,"state",{isAnimationFinished:!1}),Cs(r,"id",Wo("recharts-bar-")),Cs(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),i&&i()}),Cs(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),i&&i()}),r}return Fle(t,e),Dle(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,o=this.props,i=o.shape,c=o.dataKey,l=o.activeIndex,d=o.activeBar,u=Ae(this.props,!1);return n&&n.map(function(f,h){var p=h===l,v=p?d:i,m=Xt(Xt(Xt({},u),f),{},{isActive:p,option:v,index:h,dataKey:c,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return E.createElement(ct,bh({className:"recharts-bar-rectangle"},ko(s.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value)}),E.createElement(nS,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,o=s.data,i=s.layout,c=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,h=this.state.prevData;return E.createElement(ra,{begin:l,duration:d,isActive:c,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,m=o.map(function(g,y){var b=h&&h[y];if(b){var w=or(b.x,g.x),j=or(b.y,g.y),N=or(b.width,g.width),_=or(b.height,g.height);return Xt(Xt({},g),{},{x:w(v),y:j(v),width:N(v),height:_(v)})}if(i==="horizontal"){var S=or(0,g.height),C=S(v);return Xt(Xt({},g),{},{y:g.y+g.height-C,height:C})}var k=or(0,g.width),$=k(v);return Xt(Xt({},g),{},{width:$})});return E.createElement(ct,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,o=n.isAnimationActive,i=this.state.prevData;return o&&s&&s.length&&(!i||!Oo(i,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,o=s.data,i=s.dataKey,c=s.activeIndex,l=Ae(this.props.background,!1);return o.map(function(d,u){d.value;var f=d.background,h=Tle(d,Ole);if(!f)return null;var p=Xt(Xt(Xt(Xt(Xt({},h),{},{fill:"#eee"},f),l),ko(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:u,className:"recharts-bar-background-rectangle"});return E.createElement(nS,bh({key:"background-bar-".concat(u),option:n.props.background,isActive:u===c},p))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,c=o.xAxis,l=o.yAxis,d=o.layout,u=o.children,f=hn(u,ru);if(!f)return null;var h=d==="vertical"?i[0].height/2:i[0].width/2,p=function(g,y){var b=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:b,errorVal:Ht(g,y)}},v={clipPath:n?"url(#clipPath-".concat(s,")"):null};return E.createElement(ct,v,f.map(function(m){return E.cloneElement(m,{key:"error-bar-".concat(s,"-").concat(m.props.dataKey),data:i,xAxis:c,yAxis:l,layout:d,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,o=n.data,i=n.className,c=n.xAxis,l=n.yAxis,d=n.left,u=n.top,f=n.width,h=n.height,p=n.isAnimationActive,v=n.background,m=n.id;if(s||!o||!o.length)return null;var g=this.state.isAnimationFinished,y=Ke("recharts-bar",i),b=c&&c.allowDataOverflow,w=l&&l.allowDataOverflow,j=b||w,N=We(m)?this.id:m;return E.createElement(ct,{className:y},b||w?E.createElement("defs",null,E.createElement("clipPath",{id:"clipPath-".concat(N)},E.createElement("rect",{x:b?d:d-f/2,y:w?u:u-h/2,width:b?f:f*2,height:w?h:h*2}))):null,E.createElement(ct,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,N),(!p||g)&&Ca.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(x.PureComponent);QE=na;Cs(na,"displayName","Bar");Cs(na,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!qs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cs(na,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,o=e.xAxis,i=e.yAxis,c=e.xAxisTicks,l=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,h=e.offset,p=Ene(n,r);if(!p)return null;var v=t.layout,m=r.type.defaultProps,g=m!==void 0?Xt(Xt({},m),r.props):r.props,y=g.dataKey,b=g.children,w=g.minPointSize,j=v==="horizontal"?i:o,N=d?j.scale.domain():null,_=Rne({numericAxis:j}),S=hn(b,Li),C=f.map(function(k,$){var A,P,O,M,R,T;d?A=One(d[u+$],N):(A=Ht(k,y),Array.isArray(A)||(A=[_,A]));var D=Ele(w,QE.defaultProps.minPointSize)(A[1],$);if(v==="horizontal"){var I,U=[i.scale(A[0]),i.scale(A[1])],oe=U[0],J=U[1];P=K_({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:k,index:$}),O=(I=J??oe)!==null&&I!==void 0?I:void 0,M=p.size;var ie=oe-J;if(R=Number.isNaN(ie)?0:ie,T={x:P,y:i.y,width:M,height:i.height},Math.abs(D)>0&&Math.abs(R)<Math.abs(D)){var me=Lr(R||D)*(Math.abs(D)-Math.abs(R));O-=me,R+=me}}else{var de=[o.scale(A[0]),o.scale(A[1])],H=de[0],L=de[1];if(P=H,O=K_({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:k,index:$}),M=L-H,R=p.size,T={x:o.x,y:O,width:o.width,height:R},Math.abs(D)>0&&Math.abs(M)<Math.abs(D)){var Y=Lr(M||D)*(Math.abs(D)-Math.abs(M));M+=Y}}return Xt(Xt(Xt({},k),{},{x:P,y:O,width:M,height:R,value:d?A:A[1],payload:k,background:T},S&&S[$]&&S[$].props),{},{tooltipPayload:[wE(r,k)],tooltipPosition:{x:P+M/2,y:O+R/2}})});return Xt({data:C,layout:v},h)});function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function Ble(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rO(n.key),n)}}function Vle(e,t,r){return t&&oS(e.prototype,t),r&&oS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hp(e,t,r){return t=rO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rO(e){var t=Ule(e,"string");return jd(t)=="symbol"?t:t+""}function Ule(e,t){if(jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nO=function(t,r,n,s,o){var i=t.width,c=t.height,l=t.layout,d=t.children,u=Object.keys(r),f={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},h=!!sn(d,na);return u.reduce(function(p,v){var m=r[v],g=m.orientation,y=m.domain,b=m.padding,w=b===void 0?{}:b,j=m.mirror,N=m.reversed,_="".concat(g).concat(j?"Mirror":""),S,C,k,$,A;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var P=y[1]-y[0],O=1/0,M=m.categoricalDomain.sort();if(M.forEach(function(de,H){H>0&&(O=Math.min((de||0)-(M[H-1]||0),O))}),Number.isFinite(O)){var R=O/P,T=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(S=R*T/2),m.padding==="no-gap"){var D=Fr(t.barCategoryGap,R*T),I=R*T/2;S=I-D-(I-D)/T*D}}}s==="xAxis"?C=[n.left+(w.left||0)+(S||0),n.left+n.width-(w.right||0)-(S||0)]:s==="yAxis"?C=l==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(S||0),n.top+n.height-(w.bottom||0)-(S||0)]:C=m.range,N&&(C=[C[1],C[0]]);var U=xE(m,o,h),oe=U.scale,J=U.realScaleType;oe.domain(y).range(C),yE(oe);var ie=bE(oe,Hn(Hn({},m),{},{realScaleType:J}));s==="xAxis"?(A=g==="top"&&!j||g==="bottom"&&j,k=n.left,$=f[_]-A*m.height):s==="yAxis"&&(A=g==="left"&&!j||g==="right"&&j,k=f[_]-A*m.width,$=n.top);var me=Hn(Hn(Hn({},m),ie),{},{realScaleType:J,x:k,y:$,scale:oe,width:s==="xAxis"?n.width:m.width,height:s==="yAxis"?n.height:m.height});return me.bandSize=sh(me,ie),!m.hide&&s==="xAxis"?f[_]+=(A?-1:1)*me.height:m.hide||(f[_]+=(A?-1:1)*me.width),Hn(Hn({},p),{},hp({},v,me))},{})},aO=function(t,r){var n=t.x,s=t.y,o=r.x,i=r.y;return{x:Math.min(n,o),y:Math.min(s,i),width:Math.abs(o-n),height:Math.abs(i-s)}},qle=function(t){var r=t.x1,n=t.y1,s=t.x2,o=t.y2;return aO({x:r,y:n},{x:s,y:o})},sO=function(){function e(t){Ble(this,e),this.scale=t}return Vle(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+i}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],o=n[n.length-1];return s<=o?r>=s&&r<=o:r>=o&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();hp(sO,"EPS",1e-4);var u0=function(t){var r=Object.keys(t).reduce(function(n,s){return Hn(Hn({},n),{},hp({},s,sO.create(t[s])))},{});return Hn(Hn({},r),{},{apply:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,c=o.position;return dle(s,function(l,d){return r[d].apply(l,{bandAware:i,position:c})})},isInRange:function(s){return JE(s,function(o,i){return r[i].isInRange(o)})}})};function Wle(e){return(e%180+180)%180}var Hle=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Wle(s),i=o*Math.PI/180,c=Math.atan(n/r),l=i>c&&i<Math.PI-c?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},Gle=Ma,Kle=Xd,Yle=Km;function Zle(e){return function(t,r,n){var s=Object(t);if(!Kle(t)){var o=Gle(r);t=Yle(t),r=function(c){return o(s[c],c,s)}}var i=e(t,r,n);return i>-1?s[o?t[i]:i]:void 0}}var Xle=Zle,Jle=KE;function Qle(e){var t=Jle(e),r=t%1;return t===t?r?t-r:t:0}var ede=Qle,tde=J2,rde=Ma,nde=ede,ade=Math.max;function sde(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:nde(r);return s<0&&(s=ade(n+s,0)),tde(e,rde(t),s)}var ode=sde,ide=Xle,cde=ode,lde=ide(cde),dde=lde;const ude=yt(dde);var fde=jU(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),f0=x.createContext(void 0),h0=x.createContext(void 0),oO=x.createContext(void 0),iO=x.createContext({}),cO=x.createContext(void 0),lO=x.createContext(0),dO=x.createContext(0),cS=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,o=r.offset,i=t.clipPathId,c=t.children,l=t.width,d=t.height,u=fde(o);return E.createElement(f0.Provider,{value:n},E.createElement(h0.Provider,{value:s},E.createElement(iO.Provider,{value:o},E.createElement(oO.Provider,{value:u},E.createElement(cO.Provider,{value:i},E.createElement(lO.Provider,{value:d},E.createElement(dO.Provider,{value:l},c)))))))},hde=function(){return x.useContext(cO)},uO=function(t){var r=x.useContext(f0);r==null&&$o();var n=r[t];return n==null&&$o(),n},mde=function(){var t=x.useContext(f0);return ws(t)},pde=function(){var t=x.useContext(h0),r=ude(t,function(n){return JE(n.domain,Number.isFinite)});return r||ws(t)},fO=function(t){var r=x.useContext(h0);r==null&&$o();var n=r[t];return n==null&&$o(),n},gde=function(){var t=x.useContext(oO);return t},vde=function(){return x.useContext(iO)},m0=function(){return x.useContext(dO)},p0=function(){return x.useContext(lO)};function Zi(e){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(e)}function xde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mO(n.key),n)}}function bde(e,t,r){return t&&yde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jde(e,t,r){return t=wh(t),wde(e,hO()?Reflect.construct(t,r||[],wh(e).constructor):t.apply(e,r))}function wde(e,t){if(t&&(Zi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nde(e)}function Nde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hO=function(){return!!e})()}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wh(e)}function _de(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qx(e,t)}function qx(e,t){return qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qx(e,t)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){g0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g0(e,t,r){return t=mO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mO(e){var t=Sde(e,"string");return Zi(t)=="symbol"?t:t+""}function Sde(e,t){if(Zi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Cde(e,t){return Ede(e)||kde(e,t)||Ade(e,t)||Pde()}function Pde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ade(e,t){if(e){if(typeof e=="string")return uS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uS(e,t)}}function uS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Ede(e){if(Array.isArray(e))return e}function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wx.apply(this,arguments)}var Ode=function(t,r){var n;return E.isValidElement(t)?n=E.cloneElement(t,r):Le(t)?n=t(r):n=E.createElement("line",Wx({},r,{className:"recharts-reference-line-line"})),n},Tde=function(t,r,n,s,o,i,c,l,d){var u=o.x,f=o.y,h=o.width,p=o.height;if(n){var v=d.y,m=t.y.apply(v,{position:i});if(Pa(d,"discard")&&!t.y.isInRange(m))return null;var g=[{x:u+h,y:m},{x:u,y:m}];return l==="left"?g.reverse():g}if(r){var y=d.x,b=t.x.apply(y,{position:i});if(Pa(d,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+p},{x:b,y:f}];return c==="top"?w.reverse():w}if(s){var j=d.segment,N=j.map(function(_){return t.apply(_,{position:i})});return Pa(d,"discard")&&rle(N,function(_){return!t.isInRange(_)})?null:N}return null};function $de(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,o=e.yAxisId,i=e.shape,c=e.className,l=e.alwaysShow,d=hde(),u=uO(s),f=fO(o),h=gde();if(!d||!h)return null;Xn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=u0({x:u.scale,y:f.scale}),v=cr(t),m=cr(r),g=n&&n.length===2,y=Tde(p,v,m,g,h,e.position,u.orientation,f.orientation,e);if(!y)return null;var b=Cde(y,2),w=b[0],j=w.x,N=w.y,_=b[1],S=_.x,C=_.y,k=Pa(e,"hidden")?"url(#".concat(d,")"):void 0,$=dS(dS({clipPath:k},Ae(e,!0)),{},{x1:j,y1:N,x2:S,y2:C});return E.createElement(ct,{className:Ke("recharts-reference-line",c)},Ode(i,$),ur.renderCallByParent(e,qle({x1:j,y1:N,x2:S,y2:C})))}var v0=function(e){function t(){return xde(this,t),jde(this,t,arguments)}return _de(t,e),bde(t,[{key:"render",value:function(){return E.createElement($de,this.props)}}])}(E.Component);g0(v0,"displayName","ReferenceLine");g0(v0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hx.apply(this,arguments)}function Xi(e){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(e)}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){mp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gO(n.key),n)}}function Ide(e,t,r){return t&&Dde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rde(e,t,r){return t=Nh(t),Lde(e,pO()?Reflect.construct(t,r||[],Nh(e).constructor):t.apply(e,r))}function Lde(e,t){if(t&&(Xi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fde(e)}function Fde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pO=function(){return!!e})()}function Nh(e){return Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nh(e)}function zde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gx(e,t)}function Gx(e,t){return Gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gx(e,t)}function mp(e,t,r){return t=gO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gO(e){var t=Bde(e,"string");return Xi(t)=="symbol"?t:t+""}function Bde(e,t){if(Xi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vde=function(t){var r=t.x,n=t.y,s=t.xAxis,o=t.yAxis,i=u0({x:s.scale,y:o.scale}),c=i.apply({x:r,y:n},{bandAware:!0});return Pa(t,"discard")&&!i.isInRange(c)?null:c},pp=function(e){function t(){return Mde(this,t),Rde(this,t,arguments)}return zde(t,e),Ide(t,[{key:"render",value:function(){var n=this.props,s=n.x,o=n.y,i=n.r,c=n.alwaysShow,l=n.clipPathId,d=cr(s),u=cr(o);if(Xn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=Vde(this.props);if(!f)return null;var h=f.x,p=f.y,v=this.props,m=v.shape,g=v.className,y=Pa(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=hS(hS({clipPath:y},Ae(this.props,!0)),{},{cx:h,cy:p});return E.createElement(ct,{className:Ke("recharts-reference-dot",g)},t.renderDot(m,b),ur.renderCallByParent(this.props,{x:h-i,y:p-i,width:2*i,height:2*i}))}}])}(E.Component);mp(pp,"displayName","ReferenceDot");mp(pp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});mp(pp,"renderDot",function(e,t){var r;return E.isValidElement(e)?r=E.cloneElement(e,t):Le(e)?r=e(t):r=E.createElement(nu,Hx({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kx.apply(this,arguments)}function Ji(e){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ji(e)}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ude(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xO(n.key),n)}}function Wde(e,t,r){return t&&qde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hde(e,t,r){return t=_h(t),Gde(e,vO()?Reflect.construct(t,r||[],_h(e).constructor):t.apply(e,r))}function Gde(e,t){if(t&&(Ji(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kde(e)}function Kde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vO=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_h(e)}function Yde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yx(e,t)}function Yx(e,t){return Yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Yx(e,t)}function gp(e,t,r){return t=xO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xO(e){var t=Zde(e,"string");return Ji(t)=="symbol"?t:t+""}function Zde(e,t){if(Ji(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ji(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xde=function(t,r,n,s,o){var i=o.x1,c=o.x2,l=o.y1,d=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=u0({x:u.scale,y:f.scale}),p={x:t?h.x.apply(i,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(c,{position:"end"}):h.x.rangeMax,y:s?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Pa(o,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:aO(p,v)},vp=function(e){function t(){return Ude(this,t),Hde(this,t,arguments)}return Yde(t,e),Wde(t,[{key:"render",value:function(){var n=this.props,s=n.x1,o=n.x2,i=n.y1,c=n.y2,l=n.className,d=n.alwaysShow,u=n.clipPathId;Xn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=cr(s),h=cr(o),p=cr(i),v=cr(c),m=this.props.shape;if(!f&&!h&&!p&&!v&&!m)return null;var g=Xde(f,h,p,v,this.props);if(!g&&!m)return null;var y=Pa(this.props,"hidden")?"url(#".concat(u,")"):void 0;return E.createElement(ct,{className:Ke("recharts-reference-area",l)},t.renderRect(m,pS(pS({clipPath:y},Ae(this.props,!0)),g)),ur.renderCallByParent(this.props,g))}}])}(E.Component);gp(vp,"displayName","ReferenceArea");gp(vp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gp(vp,"renderRect",function(e,t){var r;return E.isValidElement(e)?r=E.cloneElement(e,t):Le(e)?r=e(t):r=E.createElement(d0,Kx({},t,{className:"recharts-reference-area-rect"})),r});function yO(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Jde(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Hle(n,r)}function Qde(e,t,r){var n=r==="width",s=e.x,o=e.y,i=e.width,c=e.height;return t===1?{start:n?s:o,end:n?s+i:o+c}:{start:n?s+i:o+c,end:n?s:o}}function Sh(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-s)<=0}function eue(e,t){return yO(e,t+1)}function tue(e,t,r,n,s){for(var o=(n||[]).slice(),i=t.start,c=t.end,l=0,d=1,u=i,f=function(){var v=n?.[l];if(v===void 0)return{v:yO(n,d)};var m=l,g,y=function(){return g===void 0&&(g=r(v,m)),g},b=v.coordinate,w=l===0||Sh(e,b,y,u,c);w||(l=0,u=i,d+=1),w&&(u=b+e*(y()/2+s),l+=d)},h;d<=o.length;)if(h=f(),h)return h.v;return[]}function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(n){rue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rue(e,t,r){return t=nue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nue(e){var t=aue(e,"string");return wd(t)=="symbol"?t:t+""}function aue(e,t){if(wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sue(e,t,r,n,s){for(var o=(n||[]).slice(),i=o.length,c=t.start,l=t.end,d=function(h){var p=o[h],v,m=function(){return v===void 0&&(v=r(p,h)),v};if(h===i-1){var g=e*(p.coordinate+e*m()/2-l);o[h]=p=vr(vr({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else o[h]=p=vr(vr({},p),{},{tickCoord:p.coordinate});var y=Sh(e,p.tickCoord,m,c,l);y&&(l=p.tickCoord-e*(m()/2+s),o[h]=vr(vr({},p),{},{isShow:!0}))},u=i-1;u>=0;u--)d(u);return o}function oue(e,t,r,n,s,o){var i=(n||[]).slice(),c=i.length,l=t.start,d=t.end;if(o){var u=n[c-1],f=r(u,c-1),h=e*(u.coordinate+e*f/2-d);i[c-1]=u=vr(vr({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var p=Sh(e,u.tickCoord,function(){return f},l,d);p&&(d=u.tickCoord-e*(f/2+s),i[c-1]=vr(vr({},u),{},{isShow:!0}))}for(var v=o?c-1:c,m=function(b){var w=i[b],j,N=function(){return j===void 0&&(j=r(w,b)),j};if(b===0){var _=e*(w.coordinate-e*N()/2-l);i[b]=w=vr(vr({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else i[b]=w=vr(vr({},w),{},{tickCoord:w.coordinate});var S=Sh(e,w.tickCoord,N,l,d);S&&(l=w.tickCoord+e*(N()/2+s),i[b]=vr(vr({},w),{},{isShow:!0}))},g=0;g<v;g++)m(g);return i}function x0(e,t,r){var n=e.tick,s=e.ticks,o=e.viewBox,i=e.minTickGap,c=e.orientation,l=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!s||!s.length||!n)return[];if(ge(l)||qs.isSsr)return eue(s,typeof l=="number"&&ge(l)?l:0);var h=[],p=c==="top"||c==="bottom"?"width":"height",v=u&&p==="width"?Nl(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(w,j){var N=Le(d)?d(w.value,j):w.value;return p==="width"?Jde(Nl(N,{fontSize:t,letterSpacing:r}),v,f):Nl(N,{fontSize:t,letterSpacing:r})[p]},g=s.length>=2?Lr(s[1].coordinate-s[0].coordinate):1,y=Qde(o,g,p);return l==="equidistantPreserveStart"?tue(g,y,m,s,i):(l==="preserveStart"||l==="preserveStartEnd"?h=oue(g,y,m,s,i,l==="preserveStartEnd"):h=sue(g,y,m,s,i),h.filter(function(b){return b.isShow}))}var iue=["viewBox"],cue=["viewBox"],lue=["ticks"];function Qi(e){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(e)}function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bi.apply(this,arguments)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(r),!0).forEach(function(n){y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fg(e,t){if(e==null)return{};var r=due(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function due(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jO(n.key),n)}}function fue(e,t,r){return t&&xS(e.prototype,t),r&&xS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hue(e,t,r){return t=Ch(t),mue(e,bO()?Reflect.construct(t,r||[],Ch(e).constructor):t.apply(e,r))}function mue(e,t){if(t&&(Qi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pue(e)}function pue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!e})()}function Ch(e){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ch(e)}function gue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zx(e,t)}function Zx(e,t){return Zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Zx(e,t)}function y0(e,t,r){return t=jO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jO(e){var t=vue(e,"string");return Qi(t)=="symbol"?t:t+""}function vue(e,t){if(Qi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bc=function(e){function t(r){var n;return uue(this,t),n=hue(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return gue(t,e),fue(t,[{key:"shouldComponentUpdate",value:function(n,s){var o=n.viewBox,i=Fg(n,iue),c=this.props,l=c.viewBox,d=Fg(c,cue);return!_i(o,l)||!_i(i,d)||!_i(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.x,i=s.y,c=s.width,l=s.height,d=s.orientation,u=s.tickSize,f=s.mirror,h=s.tickMargin,p,v,m,g,y,b,w=f?-1:1,j=n.tickSize||u,N=ge(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":p=v=n.coordinate,g=i+ +!f*l,m=g-w*j,b=m-w*h,y=N;break;case"left":m=g=n.coordinate,v=o+ +!f*c,p=v-w*j,y=p-w*h,b=N;break;case"right":m=g=n.coordinate,v=o+ +f*c,p=v+w*j,y=p+w*h,b=N;break;default:p=v=n.coordinate,g=i+ +f*l,m=g+w*j,b=m+w*h,y=N;break}return{line:{x1:p,y1:m,x2:v,y2:g},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,i;switch(s){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,i="end";switch(s){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,o=n.y,i=n.width,c=n.height,l=n.orientation,d=n.mirror,u=n.axisLine,f=Er(Er(Er({},Ae(this.props,!1)),Ae(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!d||l==="bottom"&&d);f=Er(Er({},f),{},{x1:s,y1:o+h*c,x2:s+i,y2:o+h*c})}else{var p=+(l==="left"&&!d||l==="right"&&d);f=Er(Er({},f),{},{x1:s+p*i,y1:o,x2:s+p*i,y2:o+c})}return E.createElement("line",bi({},f,{className:Ke("recharts-cartesian-axis-line",fn(u,"className"))}))}},{key:"renderTicks",value:function(n,s,o){var i=this,c=this.props,l=c.tickLine,d=c.stroke,u=c.tick,f=c.tickFormatter,h=c.unit,p=x0(Er(Er({},this.props),{},{ticks:n}),s,o),v=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=Ae(this.props,!1),y=Ae(u,!1),b=Er(Er({},g),{},{fill:"none"},Ae(l,!1)),w=p.map(function(j,N){var _=i.getTickLineCoord(j),S=_.line,C=_.tick,k=Er(Er(Er(Er({textAnchor:v,verticalAnchor:m},g),{},{stroke:"none",fill:d},y),C),{},{index:N,payload:j,visibleTicksCount:p.length,tickFormatter:f});return E.createElement(ct,bi({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},ko(i.props,j,N)),l&&E.createElement("line",bi({},b,S,{className:Ke("recharts-cartesian-axis-tick-line",fn(l,"className"))})),u&&t.renderTickItem(u,k,"".concat(Le(f)?f(j.value,N):j.value).concat(h||"")))});return E.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,o=s.axisLine,i=s.width,c=s.height,l=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var f=this.props,h=f.ticks,p=Fg(f,lue),v=h;return Le(l)&&(v=h&&h.length>0?l(this.props):l(p)),i<=0||c<=0||!v||!v.length?null:E.createElement(ct,{className:Ke("recharts-cartesian-axis",d),ref:function(g){n.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ur.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,o){var i;return E.isValidElement(n)?i=E.cloneElement(n,s):Le(n)?i=n(s):i=E.createElement(Eo,bi({},s,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(x.Component);y0(Bc,"displayName","CartesianAxis");y0(Bc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xue=["x1","y1","x2","y2","key"],yue=["offset"];function Mo(e){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(e)}function yS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yS(Object(r),!0).forEach(function(n){bue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bue(e,t,r){return t=jue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jue(e){var t=wue(e,"string");return Mo(t)=="symbol"?t:t+""}function wue(e,t){if(Mo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vo.apply(this,arguments)}function bS(e,t){if(e==null)return{};var r=Nue(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _ue=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,o=t.y,i=t.width,c=t.height,l=t.ry;return E.createElement("rect",{x:s,y:o,ry:l,width:i,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wO(e,t){var r;if(E.isValidElement(e))r=E.cloneElement(e,t);else if(Le(e))r=e(t);else{var n=t.x1,s=t.y1,o=t.x2,i=t.y2,c=t.key,l=bS(t,xue),d=Ae(l,!1);d.offset;var u=bS(d,yue);r=E.createElement("line",vo({},u,{x1:n,y1:s,x2:o,y2:i,fill:"none",key:c}))}return r}function Sue(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,o=e.horizontalPoints;if(!s||!o||!o.length)return null;var i=o.map(function(c,l){var d=br(br({},e),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(l),index:l});return wO(s,d)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Cue(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,o=e.verticalPoints;if(!s||!o||!o.length)return null;var i=o.map(function(c,l){var d=br(br({},e),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(l),index:l});return wO(s,d)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Pue(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,o=e.width,i=e.height,c=e.horizontalPoints,l=e.horizontal,d=l===void 0?!0:l;if(!d||!t||!t.length)return null;var u=c.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var v=!u[p+1],m=v?s+i-h:u[p+1]-h;if(m<=0)return null;var g=p%t.length;return E.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:o,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Aue(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,o=e.x,i=e.y,c=e.width,l=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(h){return Math.round(h+o-o)}).sort(function(h,p){return h-p});o!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var v=!u[p+1],m=v?o+c-h:u[p+1]-h;if(m<=0)return null;var g=p%n.length;return E.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:m,height:l,stroke:"none",fill:n[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var kue=function(t,r){var n=t.xAxis,s=t.width,o=t.height,i=t.offset;return vE(x0(br(br(br({},Bc.defaultProps),n),{},{ticks:Ya(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),i.left,i.left+i.width,r)},Eue=function(t,r){var n=t.yAxis,s=t.width,o=t.height,i=t.offset;return vE(x0(br(br(br({},Bc.defaultProps),n),{},{ticks:Ya(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),i.top,i.top+i.height,r)},li={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function kl(e){var t,r,n,s,o,i,c=m0(),l=p0(),d=vde(),u=br(br({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:li.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:li.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:li.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:li.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:li.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:li.verticalFill,x:ge(e.x)?e.x:d.left,y:ge(e.y)?e.y:d.top,width:ge(e.width)?e.width:d.width,height:ge(e.height)?e.height:d.height}),f=u.x,h=u.y,p=u.width,v=u.height,m=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,b=mde(),w=pde();if(!ge(p)||p<=0||!ge(v)||v<=0||!ge(f)||f!==+f||!ge(h)||h!==+h)return null;var j=u.verticalCoordinatesGenerator||kue,N=u.horizontalCoordinatesGenerator||Eue,_=u.horizontalPoints,S=u.verticalPoints;if((!_||!_.length)&&Le(N)){var C=g&&g.length,k=N({yAxis:w?br(br({},w),{},{ticks:C?g:w.ticks}):void 0,width:c,height:l,offset:d},C?!0:m);Xn(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Mo(k),"]")),Array.isArray(k)&&(_=k)}if((!S||!S.length)&&Le(j)){var $=y&&y.length,A=j({xAxis:b?br(br({},b),{},{ticks:$?y:b.ticks}):void 0,width:c,height:l,offset:d},$?!0:m);Xn(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Mo(A),"]")),Array.isArray(A)&&(S=A)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(_ue,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),E.createElement(Sue,vo({},u,{offset:d,horizontalPoints:_,xAxis:b,yAxis:w})),E.createElement(Cue,vo({},u,{offset:d,verticalPoints:S,xAxis:b,yAxis:w})),E.createElement(Pue,vo({},u,{horizontalPoints:_})),E.createElement(Aue,vo({},u,{verticalPoints:S})))}kl.displayName="CartesianGrid";var Oue=["type","layout","connectNulls","ref"],Tue=["key"];function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function jS(e,t){if(e==null)return{};var r=$ue(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},El.apply(this,arguments)}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){Gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function di(e){return Rue(e)||Iue(e)||Due(e)||Mue()}function Mue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Due(e,t){if(e){if(typeof e=="string")return Xx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xx(e,t)}}function Iue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rue(e){if(Array.isArray(e))return Xx(e)}function Xx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_O(n.key),n)}}function Fue(e,t,r){return t&&NS(e.prototype,t),r&&NS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zue(e,t,r){return t=Ph(t),Bue(e,NO()?Reflect.construct(t,r||[],Ph(e).constructor):t.apply(e,r))}function Bue(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vue(e)}function Vue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NO=function(){return!!e})()}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ph(e)}function Uue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jx(e,t)}function Jx(e,t){return Jx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jx(e,t)}function Gn(e,t,r){return t=_O(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _O(e){var t=que(e,"string");return ec(t)=="symbol"?t:t+""}function que(e,t){if(ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xp=function(e){function t(){var r;Lue(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=zue(this,t,[].concat(s)),Gn(r,"state",{isAnimationFinished:!0,totalLength:0}),Gn(r,"generateSimpleStrokeDasharray",function(i,c){return"".concat(c,"px ").concat(i-c,"px")}),Gn(r,"getStrokeDasharray",function(i,c,l){var d=l.reduce(function(y,b){return y+b});if(!d)return r.generateSimpleStrokeDasharray(c,i);for(var u=Math.floor(i/d),f=i%d,h=c-i,p=[],v=0,m=0;v<l.length;m+=l[v],++v)if(m+l[v]>f){p=[].concat(di(l.slice(0,v)),[f-m]);break}var g=p.length%2===0?[0,h]:[h];return[].concat(di(t.repeat(l,u)),di(p),g).map(function(y){return"".concat(y,"px")}).join(", ")}),Gn(r,"id",Wo("recharts-line-")),Gn(r,"pathRef",function(i){r.mainCurve=i}),Gn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Gn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Uue(t,e),Fue(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,c=o.xAxis,l=o.yAxis,d=o.layout,u=o.children,f=hn(u,ru);if(!f)return null;var h=function(m,g){return{x:m.x,y:m.y,value:m.value,errorVal:Ht(m.payload,g)}},p={clipPath:n?"url(#clipPath-".concat(s,")"):null};return E.createElement(ct,p,f.map(function(v){return E.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:i,xAxis:c,yAxis:l,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,s,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var c=this.props,l=c.dot,d=c.points,u=c.dataKey,f=Ae(this.props,!1),h=Ae(l,!0),p=d.map(function(m,g){var y=rn(rn(rn({key:"dot-".concat(g),r:3},f),h),{},{value:m.value,dataKey:u,cx:m.x,cy:m.y,index:g,payload:m.payload});return t.renderDotItem(l,y)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return E.createElement(ct,El({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(n,s,o,i){var c=this.props,l=c.type,d=c.layout,u=c.connectNulls;c.ref;var f=jS(c,Oue),h=rn(rn(rn({},Ae(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(o,")"):null,points:n},i),{},{type:l,layout:d,connectNulls:u});return E.createElement(wo,El({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var o=this,i=this.props,c=i.points,l=i.strokeDasharray,d=i.isAnimationActive,u=i.animationBegin,f=i.animationDuration,h=i.animationEasing,p=i.animationId,v=i.animateNewValues,m=i.width,g=i.height,y=this.state,b=y.prevPoints,w=y.totalLength;return E.createElement(ra,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var N=j.t;if(b){var _=b.length/c.length,S=c.map(function(P,O){var M=Math.floor(O*_);if(b[M]){var R=b[M],T=or(R.x,P.x),D=or(R.y,P.y);return rn(rn({},P),{},{x:T(N),y:D(N)})}if(v){var I=or(m*2,P.x),U=or(g/2,P.y);return rn(rn({},P),{},{x:I(N),y:U(N)})}return rn(rn({},P),{},{x:P.x,y:P.y})});return o.renderCurveStatically(S,n,s)}var C=or(0,w),k=C(N),$;if(l){var A="".concat(l).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});$=o.getStrokeDasharray(k,w,A)}else $=o.generateSimpleStrokeDasharray(w,k);return o.renderCurveStatically(c,n,s,{strokeDasharray:$})})}},{key:"renderCurve",value:function(n,s){var o=this.props,i=o.points,c=o.isAnimationActive,l=this.state,d=l.prevPoints,u=l.totalLength;return c&&i&&i.length&&(!d&&u>0||!Oo(d,i))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(i,n,s)}},{key:"render",value:function(){var n,s=this.props,o=s.hide,i=s.dot,c=s.points,l=s.className,d=s.xAxis,u=s.yAxis,f=s.top,h=s.left,p=s.width,v=s.height,m=s.isAnimationActive,g=s.id;if(o||!c||!c.length)return null;var y=this.state.isAnimationFinished,b=c.length===1,w=Ke("recharts-line",l),j=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,_=j||N,S=We(g)?this.id:g,C=(n=Ae(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,$=k===void 0?3:k,A=C.strokeWidth,P=A===void 0?2:A,O=l2(i)?i:{},M=O.clipDot,R=M===void 0?!0:M,T=$*2+P;return E.createElement(ct,{className:w},j||N?E.createElement("defs",null,E.createElement("clipPath",{id:"clipPath-".concat(S)},E.createElement("rect",{x:j?h:h-p/2,y:N?f:f-v/2,width:j?p:p*2,height:N?v:v*2})),!R&&E.createElement("clipPath",{id:"clipPath-dots-".concat(S)},E.createElement("rect",{x:h-T/2,y:f-T/2,width:p+T,height:v+T}))):null,!b&&this.renderCurve(_,S),this.renderErrorBar(_,S),(b||i)&&this.renderDots(_,R,S),(!m||y)&&Ca.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var o=n.length%2!==0?[].concat(di(n),[0]):n,i=[],c=0;c<s;++c)i=[].concat(di(i),di(o));return i}},{key:"renderDotItem",value:function(n,s){var o;if(E.isValidElement(n))o=E.cloneElement(n,s);else if(Le(n))o=n(s);else{var i=s.key,c=jS(s,Tue),l=Ke("recharts-line-dot",typeof n!="boolean"?n.className:"");o=E.createElement(nu,El({key:i},c,{className:l}))}return o}}])}(x.PureComponent);Gn(xp,"displayName","Line");Gn(xp,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!qs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Gn(xp,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,c=e.bandSize,l=e.displayedData,d=e.offset,u=t.layout,f=l.map(function(h,p){var v=Ht(h,i);return u==="horizontal"?{x:ah({axis:r,ticks:s,bandSize:c,entry:h,index:p}),y:We(v)?null:n.scale(v),value:v,payload:h}:{x:We(v)?null:r.scale(v),y:ah({axis:n,ticks:o,bandSize:c,entry:h,index:p}),value:v,payload:h}});return rn({points:f,layout:u},d)});var Wue=["layout","type","stroke","connectNulls","isRange","ref"],Hue=["key"],SO;function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function CO(e,t){if(e==null)return{};var r=Gue(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xo.apply(this,arguments)}function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(r),!0).forEach(function(n){ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AO(n.key),n)}}function Yue(e,t,r){return t&&SS(e.prototype,t),r&&SS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zue(e,t,r){return t=Ah(t),Xue(e,PO()?Reflect.construct(t,r||[],Ah(e).constructor):t.apply(e,r))}function Xue(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jue(e)}function Jue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PO=function(){return!!e})()}function Ah(e){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ah(e)}function Que(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qx(e,t)}function Qx(e,t){return Qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Qx(e,t)}function ba(e,t,r){return t=AO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AO(e){var t=efe(e,"string");return tc(t)=="symbol"?t:t+""}function efe(e,t){if(tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cs=function(e){function t(){var r;Kue(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=Zue(this,t,[].concat(s)),ba(r,"state",{isAnimationFinished:!0}),ba(r,"id",Wo("recharts-area-")),ba(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Le(i)&&i()}),ba(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Le(i)&&i()}),r}return Que(t,e),Yue(t,[{key:"renderDots",value:function(n,s,o){var i=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(i&&!c)return null;var l=this.props,d=l.dot,u=l.points,f=l.dataKey,h=Ae(this.props,!1),p=Ae(d,!0),v=u.map(function(g,y){var b=ys(ys(ys({key:"dot-".concat(y),r:3},h),p),{},{index:y,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,b)}),m={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return E.createElement(ct,xo({className:"recharts-area-dots"},m),v)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,o=s.baseLine,i=s.points,c=s.strokeWidth,l=i[0].x,d=i[i.length-1].x,u=n*Math.abs(l-d),f=Ss(i.map(function(h){return h.y||0}));return ge(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Ss(o.map(function(h){return h.y||0})),f)),ge(f)?E.createElement("rect",{x:l<d?l:l-u,y:0,width:u,height:Math.floor(f+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,o=s.baseLine,i=s.points,c=s.strokeWidth,l=i[0].y,d=i[i.length-1].y,u=n*Math.abs(l-d),f=Ss(i.map(function(h){return h.x||0}));return ge(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Ss(o.map(function(h){return h.x||0})),f)),ge(f)?E.createElement("rect",{x:0,y:l<d?l:l-u,width:f+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,o,i){var c=this.props,l=c.layout,d=c.type,u=c.stroke,f=c.connectNulls,h=c.isRange;c.ref;var p=CO(c,Wue);return E.createElement(ct,{clipPath:o?"url(#clipPath-".concat(i,")"):null},E.createElement(wo,xo({},Ae(p,!0),{points:n,connectNulls:f,type:d,baseLine:s,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&E.createElement(wo,xo({},Ae(this.props,!1),{className:"recharts-area-curve",layout:l,type:d,connectNulls:f,fill:"none",points:n})),u!=="none"&&h&&E.createElement(wo,xo({},Ae(this.props,!1),{className:"recharts-area-curve",layout:l,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var o=this,i=this.props,c=i.points,l=i.baseLine,d=i.isAnimationActive,u=i.animationBegin,f=i.animationDuration,h=i.animationEasing,p=i.animationId,v=this.state,m=v.prevPoints,g=v.prevBaseLine;return E.createElement(ra,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(m){var w=m.length/c.length,j=c.map(function(C,k){var $=Math.floor(k*w);if(m[$]){var A=m[$],P=or(A.x,C.x),O=or(A.y,C.y);return ys(ys({},C),{},{x:P(b),y:O(b)})}return C}),N;if(ge(l)&&typeof l=="number"){var _=or(g,l);N=_(b)}else if(We(l)||$c(l)){var S=or(g,0);N=S(b)}else N=l.map(function(C,k){var $=Math.floor(k*w);if(g[$]){var A=g[$],P=or(A.x,C.x),O=or(A.y,C.y);return ys(ys({},C),{},{x:P(b),y:O(b)})}return C});return o.renderAreaStatically(j,N,n,s)}return E.createElement(ct,null,E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(s)},o.renderClipRect(b))),E.createElement(ct,{clipPath:"url(#animationClipPath-".concat(s,")")},o.renderAreaStatically(c,l,n,s)))})}},{key:"renderArea",value:function(n,s){var o=this.props,i=o.points,c=o.baseLine,l=o.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,h=d.totalLength;return l&&i&&i.length&&(!u&&h>0||!Oo(u,i)||!Oo(f,c))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(i,c,n,s)}},{key:"render",value:function(){var n,s=this.props,o=s.hide,i=s.dot,c=s.points,l=s.className,d=s.top,u=s.left,f=s.xAxis,h=s.yAxis,p=s.width,v=s.height,m=s.isAnimationActive,g=s.id;if(o||!c||!c.length)return null;var y=this.state.isAnimationFinished,b=c.length===1,w=Ke("recharts-area",l),j=f&&f.allowDataOverflow,N=h&&h.allowDataOverflow,_=j||N,S=We(g)?this.id:g,C=(n=Ae(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,$=k===void 0?3:k,A=C.strokeWidth,P=A===void 0?2:A,O=l2(i)?i:{},M=O.clipDot,R=M===void 0?!0:M,T=$*2+P;return E.createElement(ct,{className:w},j||N?E.createElement("defs",null,E.createElement("clipPath",{id:"clipPath-".concat(S)},E.createElement("rect",{x:j?u:u-p/2,y:N?d:d-v/2,width:j?p:p*2,height:N?v:v*2})),!R&&E.createElement("clipPath",{id:"clipPath-dots-".concat(S)},E.createElement("rect",{x:u-T/2,y:d-T/2,width:p+T,height:v+T}))):null,b?null:this.renderArea(_,S),(i||b)&&this.renderDots(_,R,S),(!m||y)&&Ca.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(x.PureComponent);SO=cs;ba(cs,"displayName","Area");ba(cs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!qs.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ba(cs,"getBaseValue",function(e,t,r,n){var s=e.layout,o=e.baseValue,i=t.props.baseValue,c=i??o;if(ge(c)&&typeof c=="number")return c;var l=s==="horizontal"?n:r,d=l.scale.domain();if(l.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return c==="dataMin"?f:c==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return c==="dataMin"?d[0]:c==="dataMax"?d[1]:d[0]});ba(cs,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,c=e.bandSize,l=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,h=e.offset,p=t.layout,v=d&&d.length,m=SO.getBaseValue(t,r,n,s),g=p==="horizontal",y=!1,b=f.map(function(j,N){var _;v?_=d[u+N]:(_=Ht(j,l),Array.isArray(_)?y=!0:_=[m,_]);var S=_[1]==null||v&&Ht(j,l)==null;return g?{x:ah({axis:n,ticks:o,bandSize:c,entry:j,index:N}),y:S?null:s.scale(_[1]),value:_,payload:j}:{x:S?null:n.scale(_[1]),y:ah({axis:s,ticks:i,bandSize:c,entry:j,index:N}),value:_,payload:j}}),w;return v||y?w=b.map(function(j){var N=Array.isArray(j.value)?j.value[0]:null;return g?{x:j.x,y:N!=null&&j.y!=null?s.scale(N):null}:{x:N!=null?n.scale(N):null,y:j.y}}):w=g?s.scale(m):n.scale(m),ys({points:b,baseLine:w,layout:p,isRange:y},h)});ba(cs,"renderDotItem",function(e,t){var r;if(E.isValidElement(e))r=E.cloneElement(e,t);else if(Le(e))r=e(t);else{var n=Ke("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,o=CO(t,Hue);r=E.createElement(nu,xo({},o,{key:s,className:n}))}return r});function rc(e){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function tfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OO(n.key),n)}}function nfe(e,t,r){return t&&rfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function afe(e,t,r){return t=kh(t),sfe(e,kO()?Reflect.construct(t,r||[],kh(e).constructor):t.apply(e,r))}function sfe(e,t){if(t&&(rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ofe(e)}function ofe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kO=function(){return!!e})()}function kh(e){return kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kh(e)}function ife(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}function ey(e,t){return ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ey(e,t)}function EO(e,t,r){return t=OO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OO(e){var t=cfe(e,"string");return rc(t)=="symbol"?t:t+""}function cfe(e,t){if(rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}function lfe(e){var t=e.xAxisId,r=m0(),n=p0(),s=uO(t);return s==null?null:E.createElement(Bc,ty({},s,{className:Ke("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(i){return Ya(i,!0)}}))}var es=function(e){function t(){return tfe(this,t),afe(this,t,arguments)}return ife(t,e),nfe(t,[{key:"render",value:function(){return E.createElement(lfe,this.props)}}])}(E.Component);EO(es,"displayName","XAxis");EO(es,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function dfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ufe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MO(n.key),n)}}function ffe(e,t,r){return t&&ufe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hfe(e,t,r){return t=Eh(t),mfe(e,TO()?Reflect.construct(t,r||[],Eh(e).constructor):t.apply(e,r))}function mfe(e,t){if(t&&(nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pfe(e)}function pfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TO=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eh(e)}function gfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ry(e,t)}function ry(e,t){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ry(e,t)}function $O(e,t,r){return t=MO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MO(e){var t=vfe(e,"string");return nc(t)=="symbol"?t:t+""}function vfe(e,t){if(nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(this,arguments)}var xfe=function(t){var r=t.yAxisId,n=m0(),s=p0(),o=fO(r);return o==null?null:E.createElement(Bc,ny({},o,{className:Ke("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(c){return Ya(c,!0)}}))},ts=function(e){function t(){return dfe(this,t),hfe(this,t,arguments)}return gfe(t,e),ffe(t,[{key:"render",value:function(){return E.createElement(xfe,this.props)}}])}(E.Component);$O(ts,"displayName","YAxis");$O(ts,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function CS(e){return wfe(e)||jfe(e)||bfe(e)||yfe()}function yfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bfe(e,t){if(e){if(typeof e=="string")return ay(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ay(e,t)}}function jfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wfe(e){if(Array.isArray(e))return ay(e)}function ay(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sy=function(t,r,n,s,o){var i=hn(t,v0),c=hn(t,pp),l=[].concat(CS(i),CS(c)),d=hn(t,vp),u="".concat(s,"Id"),f=s[0],h=r;if(l.length&&(h=l.reduce(function(m,g){if(g.props[u]===n&&Pa(g.props,"extendDomain")&&ge(g.props[f])){var y=g.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},h)),d.length){var p="".concat(f,"1"),v="".concat(f,"2");h=d.reduce(function(m,g){if(g.props[u]===n&&Pa(g.props,"extendDomain")&&ge(g.props[p])&&ge(g.props[v])){var y=g.props[p],b=g.props[v];return[Math.min(m[0],y,b),Math.max(m[1],y,b)]}return m},h)}return o&&o.length&&(h=o.reduce(function(m,g){return ge(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},h)),h},DO={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function o(l,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,f||l,h),v=r?r+d:d;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function i(l,d){--l._eventsCount===0?l._events=new n:delete l._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},c.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},c.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},c.prototype.emit=function(d,u,f,h,p,v){var m=r?r+d:d;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,b,w;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,p),!0;case 6:return g.fn.call(g.context,u,f,h,p,v),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];g.fn.apply(g.context,b)}else{var j=g.length,N;for(w=0;w<j;w++)switch(g[w].once&&this.removeListener(d,g[w].fn,void 0,!0),y){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,f);break;case 4:g[w].fn.call(g[w].context,u,f,h);break;default:if(!b)for(N=1,b=new Array(y-1);N<y;N++)b[N-1]=arguments[N];g[w].fn.apply(g[w].context,b)}}return!0},c.prototype.on=function(d,u,f){return o(this,d,u,f,!1)},c.prototype.once=function(d,u,f){return o(this,d,u,f,!0)},c.prototype.removeListener=function(d,u,f,h){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return i(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!h||v.once)&&(!f||v.context===f)&&i(this,p);else{for(var m=0,g=[],y=v.length;m<y;m++)(v[m].fn!==u||h&&!v[m].once||f&&v[m].context!==f)&&g.push(v[m]);g.length?this._events[p]=g.length===1?g[0]:g:i(this,p)}return this},c.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&i(this,u)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(DO);var Nfe=DO.exports;const _fe=yt(Nfe);var zg=new _fe,Bg="recharts.syncMouseEvents";function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function Sfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IO(n.key),n)}}function Pfe(e,t,r){return t&&Cfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vg(e,t,r){return t=IO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IO(e){var t=Afe(e,"string");return Nd(t)=="symbol"?t:t+""}function Afe(e,t){if(Nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kfe=function(){function e(){Sfe(this,e),Vg(this,"activeIndex",0),Vg(this,"coordinateList",[]),Vg(this,"layout","horizontal")}return Pfe(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,o=s===void 0?null:s,i=r.container,c=i===void 0?null:i,l=r.layout,d=l===void 0?null:l,u=r.offset,f=u===void 0?null:u,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),o=s.x,i=s.y,c=s.height,l=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+l+d,h=i+this.offset.top+c/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Efe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&ge(n)&&ge(s))return!0}return!1}function Ofe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function RO(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,o=e.endAngle,i=Pt(t,r,n,s),c=Pt(t,r,n,o);return{points:[i,c],cx:t,cy:r,radius:n,startAngle:s,endAngle:o}}function Tfe(e,t,r){var n,s,o,i;if(e==="horizontal")n=t.x,o=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,o=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var c=t.cx,l=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,h=Pt(c,l,d,f),p=Pt(c,l,u,f);n=h.x,s=h.y,o=p.x,i=p.y}else return RO(t);return[{x:n,y:s},{x:o,y:i}]}function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){$fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $fe(e,t,r){return t=Mfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mfe(e){var t=Dfe(e,"string");return _d(t)=="symbol"?t:t+""}function Dfe(e,t){if(_d(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ife(e){var t,r,n=e.element,s=e.tooltipEventType,o=e.isActive,i=e.activeCoordinate,c=e.activePayload,l=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!o||!i||h!=="ScatterChart"&&s!=="axis")return null;var v,m=wo;if(h==="ScatterChart")v=i,m=qoe;else if(h==="BarChart")v=Ofe(f,i,l,u),m=d0;else if(f==="radial"){var g=RO(i),y=g.cx,b=g.cy,w=g.radius,j=g.startAngle,N=g.endAngle;v={cx:y,cy:b,startAngle:j,endAngle:N,innerRadius:w,outerRadius:w},m=AE}else v={points:Tfe(f,i,l)},m=wo;var _=Wu(Wu(Wu(Wu({stroke:"#ccc",pointerEvents:"none"},l),v),Ae(p,!1)),{},{payload:c,payloadIndex:d,className:Ke("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,_):x.createElement(m,_)}var Rfe=["item"],Lfe=["children","className","width","height","style","compact","title","desc"];function ac(e){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(this,arguments)}function AS(e,t){return Bfe(e)||zfe(e,t)||FO(e,t)||Ffe()}function Ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,o,i,c=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,s=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw s}}return c}}function Bfe(e){if(Array.isArray(e))return e}function kS(e,t){if(e==null)return{};var r=Vfe(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vfe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ufe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zO(n.key),n)}}function Wfe(e,t,r){return t&&qfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hfe(e,t,r){return t=Oh(t),Gfe(e,LO()?Reflect.construct(t,r||[],Oh(e).constructor):t.apply(e,r))}function Gfe(e,t){if(t&&(ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kfe(e)}function Kfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LO=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oh(e)}function Yfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oy(e,t)}function oy(e,t){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},oy(e,t)}function sc(e){return Jfe(e)||Xfe(e)||FO(e)||Zfe()}function Zfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FO(e,t){if(e){if(typeof e=="string")return iy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iy(e,t)}}function Xfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jfe(e){if(Array.isArray(e))return iy(e)}function iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){Ie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ie(e,t,r){return t=zO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zO(e){var t=Qfe(e,"string");return ac(t)=="symbol"?t:t+""}function Qfe(e,t){if(ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ehe={xAxis:["bottom","top"],yAxis:["left","right"]},the={width:"100%",height:"100%"},BO={x:0,y:0};function Hu(e){return e}var rhe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},nhe=function(t,r,n,s){var o=r.find(function(u){return u&&u.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:o.coordinate};if(t==="centric"){var i=o.coordinate,c=s.radius;return re(re(re({},s),Pt(s.cx,s.cy,c,i)),{},{angle:i,radius:c})}var l=o.coordinate,d=s.angle;return re(re(re({},s),Pt(s.cx,s.cy,l,d)),{},{angle:d,radius:l})}return BO},yp=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,o=r.dataEndIndex,i=(n??[]).reduce(function(c,l){var d=l.props.data;return d&&d.length?[].concat(sc(c),sc(d)):c},[]);return i.length>0?i:t&&t.length&&ge(s)&&ge(o)?t.slice(s,o+1):[]};function VO(e){return e==="number"?[0,"auto"]:void 0}var cy=function(t,r,n,s){var o=t.graphicalItems,i=t.tooltipAxis,c=yp(r,t);return n<0||!o||!o.length||n>=c.length?null:o.reduce(function(l,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(i.dataKey&&!i.allowDuplicatedCategory){var p=f===void 0?c:f;h=Ef(p,i.dataKey,s)}else h=f&&f[n]||c[n];return h?[].concat(sc(l),[wE(d,h)]):l},[])},OS=function(t,r,n,s){var o=s||{x:t.chartX,y:t.chartY},i=rhe(o,n),c=t.orderedTooltipTicks,l=t.tooltipAxis,d=t.tooltipTicks,u=_ne(i,c,d,l);if(u>=0&&d){var f=d[u]&&d[u].value,h=cy(t,r,u,f),p=nhe(n,c,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},ahe=function(t,r){var n=r.axes,s=r.graphicalItems,o=r.axisType,i=r.axisIdKey,c=r.stackGroups,l=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=t.stackOffset,p=gE(u,o);return n.reduce(function(v,m){var g,y=m.type.defaultProps!==void 0?re(re({},m.type.defaultProps),m.props):m.props,b=y.type,w=y.dataKey,j=y.allowDataOverflow,N=y.allowDuplicatedCategory,_=y.scale,S=y.ticks,C=y.includeHidden,k=y[i];if(v[k])return v;var $=yp(t.data,{graphicalItems:s.filter(function(ie){var me,de=i in ie.props?ie.props[i]:(me=ie.type.defaultProps)===null||me===void 0?void 0:me[i];return de===k}),dataStartIndex:l,dataEndIndex:d}),A=$.length,P,O,M;Efe(y.domain,j,b)&&(P=jx(y.domain,null,j),p&&(b==="number"||_!=="auto")&&(M=Sl($,w,"category")));var R=VO(b);if(!P||P.length===0){var T,D=(T=y.domain)!==null&&T!==void 0?T:R;if(w){if(P=Sl($,w,b),b==="category"&&p){var I=p9(P);N&&I?(O=P,P=vh(0,A)):N||(P=X_(D,P,m).reduce(function(ie,me){return ie.indexOf(me)>=0?ie:[].concat(sc(ie),[me])},[]))}else if(b==="category")N?P=P.filter(function(ie){return ie!==""&&!We(ie)}):P=X_(D,P,m).reduce(function(ie,me){return ie.indexOf(me)>=0||me===""||We(me)?ie:[].concat(sc(ie),[me])},[]);else if(b==="number"){var U=kne($,s.filter(function(ie){var me,de,H=i in ie.props?ie.props[i]:(me=ie.type.defaultProps)===null||me===void 0?void 0:me[i],L="hide"in ie.props?ie.props.hide:(de=ie.type.defaultProps)===null||de===void 0?void 0:de.hide;return H===k&&(C||!L)}),w,o,u);U&&(P=U)}p&&(b==="number"||_!=="auto")&&(M=Sl($,w,"category"))}else p?P=vh(0,A):c&&c[k]&&c[k].hasStack&&b==="number"?P=h==="expand"?[0,1]:jE(c[k].stackGroups,l,d):P=pE($,s.filter(function(ie){var me=i in ie.props?ie.props[i]:ie.type.defaultProps[i],de="hide"in ie.props?ie.props.hide:ie.type.defaultProps.hide;return me===k&&(C||!de)}),b,u,!0);if(b==="number")P=sy(f,P,k,o,S),D&&(P=jx(D,P,j));else if(b==="category"&&D){var oe=D,J=P.every(function(ie){return oe.indexOf(ie)>=0});J&&(P=oe)}}return re(re({},v),{},Ie({},k,re(re({},y),{},{axisType:o,domain:P,categoricalDomain:M,duplicateDomain:O,originalDomain:(g=y.domain)!==null&&g!==void 0?g:R,isCategorical:p,layout:u})))},{})},she=function(t,r){var n=r.graphicalItems,s=r.Axis,o=r.axisType,i=r.axisIdKey,c=r.stackGroups,l=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=yp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:d}),p=h.length,v=gE(u,o),m=-1;return n.reduce(function(g,y){var b=y.type.defaultProps!==void 0?re(re({},y.type.defaultProps),y.props):y.props,w=b[i],j=VO("number");if(!g[w]){m++;var N;return v?N=vh(0,p):c&&c[w]&&c[w].hasStack?(N=jE(c[w].stackGroups,l,d),N=sy(f,N,w,o)):(N=jx(j,pE(h,n.filter(function(_){var S,C,k=i in _.props?_.props[i]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[i],$="hide"in _.props?_.props.hide:(C=_.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===w&&!$}),"number",u),s.defaultProps.allowDataOverflow),N=sy(f,N,w,o)),re(re({},g),{},Ie({},w,re(re({axisType:o},s.defaultProps),{},{hide:!0,orientation:fn(ehe,"".concat(o,".").concat(m%2),null),domain:N,originalDomain:j,isCategorical:v,layout:u})))}return g},{})},ohe=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,o=r.AxisComp,i=r.graphicalItems,c=r.stackGroups,l=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(s,"Id"),h=hn(u,o),p={};return h&&h.length?p=ahe(t,{axes:h,graphicalItems:i,axisType:s,axisIdKey:f,stackGroups:c,dataStartIndex:l,dataEndIndex:d}):i&&i.length&&(p=she(t,{Axis:o,graphicalItems:i,axisType:s,axisIdKey:f,stackGroups:c,dataStartIndex:l,dataEndIndex:d})),p},ihe=function(t){var r=ws(t),n=Ya(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Rb(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:sh(r,n)}},TS=function(t){var r=t.children,n=t.defaultShowTooltip,s=sn(r,Ki),o=0,i=0;return t.data&&t.data.length!==0&&(i=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(o=s.props.startIndex),s.props.endIndex>=0&&(i=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},che=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ja(r&&r.type);return n&&n.indexOf("Bar")>=0})},$S=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lhe=function(t,r){var n=t.props,s=t.graphicalItems,o=t.xAxisMap,i=o===void 0?{}:o,c=t.yAxisMap,l=c===void 0?{}:c,d=n.width,u=n.height,f=n.children,h=n.margin||{},p=sn(f,Ki),v=sn(f,_a),m=Object.keys(l).reduce(function(N,_){var S=l[_],C=S.orientation;return!S.mirror&&!S.hide?re(re({},N),{},Ie({},C,N[C]+S.width)):N},{left:h.left||0,right:h.right||0}),g=Object.keys(i).reduce(function(N,_){var S=i[_],C=S.orientation;return!S.mirror&&!S.hide?re(re({},N),{},Ie({},C,fn(N,"".concat(C))+S.height)):N},{top:h.top||0,bottom:h.bottom||0}),y=re(re({},g),m),b=y.bottom;p&&(y.bottom+=p.props.height||Ki.defaultProps.height),v&&r&&(y=Pne(y,s,n,r));var w=d-y.left-y.right,j=u-y.top-y.bottom;return re(re({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(j,0)})},dhe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},b0=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,o=s===void 0?"axis":s,i=t.validateTooltipEventTypes,c=i===void 0?["axis"]:i,l=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,h=function(g,y){var b=y.graphicalItems,w=y.stackGroups,j=y.offset,N=y.updateId,_=y.dataStartIndex,S=y.dataEndIndex,C=g.barSize,k=g.layout,$=g.barGap,A=g.barCategoryGap,P=g.maxBarSize,O=$S(k),M=O.numericAxisName,R=O.cateAxisName,T=che(b),D=[];return b.forEach(function(I,U){var oe=yp(g.data,{graphicalItems:[I],dataStartIndex:_,dataEndIndex:S}),J=I.type.defaultProps!==void 0?re(re({},I.type.defaultProps),I.props):I.props,ie=J.dataKey,me=J.maxBarSize,de=J["".concat(M,"Id")],H=J["".concat(R,"Id")],L={},Y=l.reduce(function(z,G){var ee=y["".concat(G.axisType,"Map")],Ne=J["".concat(G.axisType,"Id")];ee&&ee[Ne]||G.axisType==="zAxis"||$o();var we=ee[Ne];return re(re({},z),{},Ie(Ie({},G.axisType,we),"".concat(G.axisType,"Ticks"),Ya(we)))},L),Q=Y[R],Z=Y["".concat(R,"Ticks")],ce=w&&w[de]&&w[de].hasStack&&Lne(I,w[de].stackGroups),fe=Ja(I.type).indexOf("Bar")>=0,X=sh(Q,Z),De=[],ve=T&&Sne({barSize:C,stackGroups:w,totalSize:dhe(Y,R)});if(fe){var Be,Oe,Ce=We(me)?P:me,bt=(Be=(Oe=sh(Q,Z,!0))!==null&&Oe!==void 0?Oe:Ce)!==null&&Be!==void 0?Be:0;De=Cne({barGap:$,barCategoryGap:A,bandSize:bt!==X?bt:X,sizeList:ve[H],maxBarSize:Ce}),bt!==X&&(De=De.map(function(z){return re(re({},z),{},{position:re(re({},z.position),{},{offset:z.position.offset-bt/2})})}))}var Dt=I&&I.type&&I.type.getComposedData;Dt&&D.push({props:re(re({},Dt(re(re({},Y),{},{displayedData:oe,props:g,dataKey:ie,item:I,bandSize:X,barPosition:De,offset:j,stackedData:ce,layout:k,dataStartIndex:_,dataEndIndex:S}))),{},Ie(Ie(Ie({key:I.key||"item-".concat(U)},M,Y[M]),R,Y[R]),"animationId",N)),childIndex:C9(I,g.children),item:I})}),D},p=function(g,y){var b=g.props,w=g.dataStartIndex,j=g.dataEndIndex,N=g.updateId;if(!Ww({props:b}))return null;var _=b.children,S=b.layout,C=b.stackOffset,k=b.data,$=b.reverseStackOrder,A=$S(S),P=A.numericAxisName,O=A.cateAxisName,M=hn(_,n),R=Ine(k,M,"".concat(P,"Id"),"".concat(O,"Id"),C,$),T=l.reduce(function(J,ie){var me="".concat(ie.axisType,"Map");return re(re({},J),{},Ie({},me,ohe(b,re(re({},ie),{},{graphicalItems:M,stackGroups:ie.axisType===P&&R,dataStartIndex:w,dataEndIndex:j}))))},{}),D=lhe(re(re({},T),{},{props:b,graphicalItems:M}),y?.legendBBox);Object.keys(T).forEach(function(J){T[J]=u(b,T[J],D,J.replace("Map",""),r)});var I=T["".concat(O,"Map")],U=ihe(I),oe=h(b,re(re({},T),{},{dataStartIndex:w,dataEndIndex:j,updateId:N,graphicalItems:M,stackGroups:R,offset:D}));return re(re({formattedGraphicalItems:oe,graphicalItems:M,offset:D,stackGroups:R},U),T)},v=function(m){function g(y){var b,w,j;return Ufe(this,g),j=Hfe(this,g,[y]),Ie(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ie(j,"accessibilityManager",new kfe),Ie(j,"handleLegendBBoxUpdate",function(N){if(N){var _=j.state,S=_.dataStartIndex,C=_.dataEndIndex,k=_.updateId;j.setState(re({legendBBox:N},p({props:j.props,dataStartIndex:S,dataEndIndex:C,updateId:k},re(re({},j.state),{},{legendBBox:N}))))}}),Ie(j,"handleReceiveSyncEvent",function(N,_,S){if(j.props.syncId===N){if(S===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(_)}}),Ie(j,"handleBrushChange",function(N){var _=N.startIndex,S=N.endIndex;if(_!==j.state.dataStartIndex||S!==j.state.dataEndIndex){var C=j.state.updateId;j.setState(function(){return re({dataStartIndex:_,dataEndIndex:S},p({props:j.props,dataStartIndex:_,dataEndIndex:S,updateId:C},j.state))}),j.triggerSyncEvent({dataStartIndex:_,dataEndIndex:S})}}),Ie(j,"handleMouseEnter",function(N){var _=j.getMouseInfo(N);if(_){var S=re(re({},_),{},{isTooltipActive:!0});j.setState(S),j.triggerSyncEvent(S);var C=j.props.onMouseEnter;Le(C)&&C(S,N)}}),Ie(j,"triggeredAfterMouseMove",function(N){var _=j.getMouseInfo(N),S=_?re(re({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(S),j.triggerSyncEvent(S);var C=j.props.onMouseMove;Le(C)&&C(S,N)}),Ie(j,"handleItemMouseEnter",function(N){j.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Ie(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Ie(j,"handleMouseMove",function(N){N.persist(),j.throttleTriggeredAfterMouseMove(N)}),Ie(j,"handleMouseLeave",function(N){j.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};j.setState(_),j.triggerSyncEvent(_);var S=j.props.onMouseLeave;Le(S)&&S(_,N)}),Ie(j,"handleOuterEvent",function(N){var _=S9(N),S=fn(j.props,"".concat(_));if(_&&Le(S)){var C,k;/.*touch.*/i.test(_)?k=j.getMouseInfo(N.changedTouches[0]):k=j.getMouseInfo(N),S((C=k)!==null&&C!==void 0?C:{},N)}}),Ie(j,"handleClick",function(N){var _=j.getMouseInfo(N);if(_){var S=re(re({},_),{},{isTooltipActive:!0});j.setState(S),j.triggerSyncEvent(S);var C=j.props.onClick;Le(C)&&C(S,N)}}),Ie(j,"handleMouseDown",function(N){var _=j.props.onMouseDown;if(Le(_)){var S=j.getMouseInfo(N);_(S,N)}}),Ie(j,"handleMouseUp",function(N){var _=j.props.onMouseUp;if(Le(_)){var S=j.getMouseInfo(N);_(S,N)}}),Ie(j,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Ie(j,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseDown(N.changedTouches[0])}),Ie(j,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseUp(N.changedTouches[0])}),Ie(j,"triggerSyncEvent",function(N){j.props.syncId!==void 0&&zg.emit(Bg,j.props.syncId,N,j.eventEmitterSymbol)}),Ie(j,"applySyncEvent",function(N){var _=j.props,S=_.layout,C=_.syncMethod,k=j.state.updateId,$=N.dataStartIndex,A=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)j.setState(re({dataStartIndex:$,dataEndIndex:A},p({props:j.props,dataStartIndex:$,dataEndIndex:A,updateId:k},j.state)));else if(N.activeTooltipIndex!==void 0){var P=N.chartX,O=N.chartY,M=N.activeTooltipIndex,R=j.state,T=R.offset,D=R.tooltipTicks;if(!T)return;if(typeof C=="function")M=C(D,N);else if(C==="value"){M=-1;for(var I=0;I<D.length;I++)if(D[I].value===N.activeLabel){M=I;break}}var U=re(re({},T),{},{x:T.left,y:T.top}),oe=Math.min(P,U.x+U.width),J=Math.min(O,U.y+U.height),ie=D[M]&&D[M].value,me=cy(j.state,j.props.data,M),de=D[M]?{x:S==="horizontal"?D[M].coordinate:oe,y:S==="horizontal"?J:D[M].coordinate}:BO;j.setState(re(re({},N),{},{activeLabel:ie,activeCoordinate:de,activePayload:me,activeTooltipIndex:M}))}else j.setState(N)}),Ie(j,"renderCursor",function(N){var _,S=j.state,C=S.isTooltipActive,k=S.activeCoordinate,$=S.activePayload,A=S.offset,P=S.activeTooltipIndex,O=S.tooltipAxisBandSize,M=j.getTooltipEventType(),R=(_=N.props.active)!==null&&_!==void 0?_:C,T=j.props.layout,D=N.key||"_recharts-cursor";return E.createElement(Ife,{key:D,activeCoordinate:k,activePayload:$,activeTooltipIndex:P,chartName:r,element:N,isActive:R,layout:T,offset:A,tooltipAxisBandSize:O,tooltipEventType:M})}),Ie(j,"renderPolarAxis",function(N,_,S){var C=fn(N,"type.axisType"),k=fn(j.state,"".concat(C,"Map")),$=N.type.defaultProps,A=$!==void 0?re(re({},$),N.props):N.props,P=k&&k[A["".concat(C,"Id")]];return x.cloneElement(N,re(re({},P),{},{className:Ke(C,P.className),key:N.key||"".concat(_,"-").concat(S),ticks:Ya(P,!0)}))}),Ie(j,"renderPolarGrid",function(N){var _=N.props,S=_.radialLines,C=_.polarAngles,k=_.polarRadius,$=j.state,A=$.radiusAxisMap,P=$.angleAxisMap,O=ws(A),M=ws(P),R=M.cx,T=M.cy,D=M.innerRadius,I=M.outerRadius;return x.cloneElement(N,{polarAngles:Array.isArray(C)?C:Ya(M,!0).map(function(U){return U.coordinate}),polarRadius:Array.isArray(k)?k:Ya(O,!0).map(function(U){return U.coordinate}),cx:R,cy:T,innerRadius:D,outerRadius:I,key:N.key||"polar-grid",radialLines:S})}),Ie(j,"renderLegend",function(){var N=j.state.formattedGraphicalItems,_=j.props,S=_.children,C=_.width,k=_.height,$=j.props.margin||{},A=C-($.left||0)-($.right||0),P=hE({children:S,formattedGraphicalItems:N,legendWidth:A,legendContent:d});if(!P)return null;var O=P.item,M=kS(P,Rfe);return x.cloneElement(O,re(re({},M),{},{chartWidth:C,chartHeight:k,margin:$,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Ie(j,"renderTooltip",function(){var N,_=j.props,S=_.children,C=_.accessibilityLayer,k=sn(S,yr);if(!k)return null;var $=j.state,A=$.isTooltipActive,P=$.activeCoordinate,O=$.activePayload,M=$.activeLabel,R=$.offset,T=(N=k.props.active)!==null&&N!==void 0?N:A;return x.cloneElement(k,{viewBox:re(re({},R),{},{x:R.left,y:R.top}),active:T,label:M,payload:T?O:[],coordinate:P,accessibilityLayer:C})}),Ie(j,"renderBrush",function(N){var _=j.props,S=_.margin,C=_.data,k=j.state,$=k.offset,A=k.dataStartIndex,P=k.dataEndIndex,O=k.updateId;return x.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Bu(j.handleBrushChange,N.props.onChange),data:C,x:ge(N.props.x)?N.props.x:$.left,y:ge(N.props.y)?N.props.y:$.top+$.height+$.brushBottom-(S.bottom||0),width:ge(N.props.width)?N.props.width:$.width,startIndex:A,endIndex:P,updateId:"brush-".concat(O)})}),Ie(j,"renderReferenceElement",function(N,_,S){if(!N)return null;var C=j,k=C.clipPathId,$=j.state,A=$.xAxisMap,P=$.yAxisMap,O=$.offset,M=N.type.defaultProps||{},R=N.props,T=R.xAxisId,D=T===void 0?M.xAxisId:T,I=R.yAxisId,U=I===void 0?M.yAxisId:I;return x.cloneElement(N,{key:N.key||"".concat(_,"-").concat(S),xAxis:A[D],yAxis:P[U],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:k})}),Ie(j,"renderActivePoints",function(N){var _=N.item,S=N.activePoint,C=N.basePoint,k=N.childIndex,$=N.isRange,A=[],P=_.props.key,O=_.item.type.defaultProps!==void 0?re(re({},_.item.type.defaultProps),_.item.props):_.item.props,M=O.activeDot,R=O.dataKey,T=re(re({index:k,dataKey:R,cx:S.x,cy:S.y,r:4,fill:l0(_.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},Ae(M,!1)),Of(M));return A.push(g.renderActiveDot(M,T,"".concat(P,"-activePoint-").concat(k))),C?A.push(g.renderActiveDot(M,re(re({},T),{},{cx:C.x,cy:C.y}),"".concat(P,"-basePoint-").concat(k))):$&&A.push(null),A}),Ie(j,"renderGraphicChild",function(N,_,S){var C=j.filterFormatItem(N,_,S);if(!C)return null;var k=j.getTooltipEventType(),$=j.state,A=$.isTooltipActive,P=$.tooltipAxis,O=$.activeTooltipIndex,M=$.activeLabel,R=j.props.children,T=sn(R,yr),D=C.props,I=D.points,U=D.isRange,oe=D.baseLine,J=C.item.type.defaultProps!==void 0?re(re({},C.item.type.defaultProps),C.item.props):C.item.props,ie=J.activeDot,me=J.hide,de=J.activeBar,H=J.activeShape,L=!!(!me&&A&&T&&(ie||de||H)),Y={};k!=="axis"&&T&&T.props.trigger==="click"?Y={onClick:Bu(j.handleItemMouseEnter,N.props.onClick)}:k!=="axis"&&(Y={onMouseLeave:Bu(j.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Bu(j.handleItemMouseEnter,N.props.onMouseEnter)});var Q=x.cloneElement(N,re(re({},C.props),Y));function Z(G){return typeof P.dataKey=="function"?P.dataKey(G.payload):null}if(L)if(O>=0){var ce,fe;if(P.dataKey&&!P.allowDuplicatedCategory){var X=typeof P.dataKey=="function"?Z:"payload.".concat(P.dataKey.toString());ce=Ef(I,X,M),fe=U&&oe&&Ef(oe,X,M)}else ce=I?.[O],fe=U&&oe&&oe[O];if(H||de){var De=N.props.activeIndex!==void 0?N.props.activeIndex:O;return[x.cloneElement(N,re(re(re({},C.props),Y),{},{activeIndex:De})),null,null]}if(!We(ce))return[Q].concat(sc(j.renderActivePoints({item:C,activePoint:ce,basePoint:fe,childIndex:O,isRange:U})))}else{var ve,Be=(ve=j.getItemByXY(j.state.activeCoordinate))!==null&&ve!==void 0?ve:{graphicalItem:Q},Oe=Be.graphicalItem,Ce=Oe.item,bt=Ce===void 0?N:Ce,Dt=Oe.childIndex,z=re(re(re({},C.props),Y),{},{activeIndex:Dt});return[x.cloneElement(bt,z),null,null]}return U?[Q,null,null]:[Q,null]}),Ie(j,"renderCustomized",function(N,_,S){return x.cloneElement(N,re(re({key:"recharts-customized-".concat(S)},j.props),j.state))}),Ie(j,"renderMap",{CartesianGrid:{handler:Hu,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Hu},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Hu},YAxis:{handler:Hu},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Wo("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=fk(j.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),j.state={},j}return Yfe(g,m),Wfe(g,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,j=b.data,N=b.height,_=b.layout,S=sn(w,yr);if(S){var C=S.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,$=cy(this.state,j,C,k),A=this.state.tooltipTicks[C].coordinate,P=(this.state.offset.top+N)/2,O=_==="horizontal",M=O?{x:A,y:P}:{y:A,x:P},R=this.state.formattedGraphicalItems.find(function(D){var I=D.item;return I.type.name==="Scatter"});R&&(M=re(re({},M),R.props.points[C].tooltipPosition),$=R.props.points[C].tooltipPayload);var T={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:k,activePayload:$,activeCoordinate:M};this.setState(T),this.renderCursor(S),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,N;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(b){Iv([sn(b.children,yr)],[sn(this.props.children,yr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=sn(this.props.children,yr);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return c.indexOf(w)>=0?w:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,j=w.getBoundingClientRect(),N=JJ(j),_={chartX:Math.round(b.pageX-N.left),chartY:Math.round(b.pageY-N.top)},S=j.width/w.offsetWidth||1,C=this.inRange(_.chartX,_.chartY,S);if(!C)return null;var k=this.state,$=k.xAxisMap,A=k.yAxisMap,P=this.getTooltipEventType();if(P!=="axis"&&$&&A){var O=ws($).scale,M=ws(A).scale,R=O&&O.invert?O.invert(_.chartX):null,T=M&&M.invert?M.invert(_.chartY):null;return re(re({},_),{},{xValue:R,yValue:T})}var D=OS(this.state,this.props.data,this.props.layout,C);return D?re(re({},_),D):null}},{key:"inRange",value:function(b,w){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,_=b/j,S=w/j;if(N==="horizontal"||N==="vertical"){var C=this.state.offset,k=_>=C.left&&_<=C.left+C.width&&S>=C.top&&S<=C.top+C.height;return k?{x:_,y:S}:null}var $=this.state,A=$.angleAxisMap,P=$.radiusAxisMap;if(A&&P){var O=ws(A);return e1({x:_,y:S},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),j=sn(b,yr),N={};j&&w==="axis"&&(j.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var _=Of(this.props,this.handleOuterEvent);return re(re({},_),N)}},{key:"addListener",value:function(){zg.on(Bg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){zg.removeListener(Bg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,j){for(var N=this.state.formattedGraphicalItems,_=0,S=N.length;_<S;_++){var C=N[_];if(C.item===b||C.props.key===b.key||w===Ja(C.item.type)&&j===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,j=w.left,N=w.top,_=w.height,S=w.width;return E.createElement("defs",null,E.createElement("clipPath",{id:b},E.createElement("rect",{x:j,y:N,height:_,width:S})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,j){var N=AS(j,2),_=N[0],S=N[1];return re(re({},w),{},Ie({},_,S.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,j){var N=AS(j,2),_=N[0],S=N[1];return re(re({},w),{},Ie({},_,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,j=w.formattedGraphicalItems,N=w.activeItem;if(j&&j.length)for(var _=0,S=j.length;_<S;_++){var C=j[_],k=C.props,$=C.item,A=$.type.defaultProps!==void 0?re(re({},$.type.defaultProps),$.props):$.props,P=Ja($.type);if(P==="Bar"){var O=(k.data||[]).find(function(D){return _oe(b,D)});if(O)return{graphicalItem:C,payload:O}}else if(P==="RadialBar"){var M=(k.data||[]).find(function(D){return e1(b,D)});if(M)return{graphicalItem:C,payload:M}}else if(up(C,N)||fp(C,N)||xd(C,N)){var R=fce({graphicalItem:C,activeTooltipItem:N,itemData:A.data}),T=A.activeIndex===void 0?R:A.activeIndex;return{graphicalItem:re(re({},C),{},{childIndex:T}),payload:xd(C,N)?A.data[R]:C.props.data[R]}}}return null}},{key:"render",value:function(){var b=this;if(!Ww(this))return null;var w=this.props,j=w.children,N=w.className,_=w.width,S=w.height,C=w.style,k=w.compact,$=w.title,A=w.desc,P=kS(w,Lfe),O=Ae(P,!1);if(k)return E.createElement(cS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},E.createElement(Lv,Ol({},O,{width:_,height:S,title:$,desc:A}),this.renderClipPath(),Gw(j,this.renderMap)));if(this.props.accessibilityLayer){var M,R;O.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,O.role=(R=this.props.role)!==null&&R!==void 0?R:"application",O.onKeyDown=function(D){b.accessibilityManager.keyboardEvent(D)},O.onFocus=function(){b.accessibilityManager.focus()}}var T=this.parseEventsOfWrapper();return E.createElement(cS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},E.createElement("div",Ol({className:Ke("recharts-wrapper",N),style:re({position:"relative",cursor:"default",width:_,height:S},C)},T,{ref:function(I){b.container=I}}),E.createElement(Lv,Ol({},O,{width:_,height:S,title:$,desc:A,style:the}),this.renderClipPath(),Gw(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);return Ie(v,"displayName",r),Ie(v,"defaultProps",re({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ie(v,"getDerivedStateFromProps",function(m,g){var y=m.dataKey,b=m.data,w=m.children,j=m.width,N=m.height,_=m.layout,S=m.stackOffset,C=m.margin,k=g.dataStartIndex,$=g.dataEndIndex;if(g.updateId===void 0){var A=TS(m);return re(re(re({},A),{},{updateId:0},p(re(re({props:m},A),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:b,prevWidth:j,prevHeight:N,prevLayout:_,prevStackOffset:S,prevMargin:C,prevChildren:w})}if(y!==g.prevDataKey||b!==g.prevData||j!==g.prevWidth||N!==g.prevHeight||_!==g.prevLayout||S!==g.prevStackOffset||!_i(C,g.prevMargin)){var P=TS(m),O={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},M=re(re({},OS(g,b,_)),{},{updateId:g.updateId+1}),R=re(re(re({},P),O),M);return re(re(re({},R),p(re({props:m},R),g)),{},{prevDataKey:y,prevData:b,prevWidth:j,prevHeight:N,prevLayout:_,prevStackOffset:S,prevMargin:C,prevChildren:w})}if(!Iv(w,g.prevChildren)){var T,D,I,U,oe=sn(w,Ki),J=oe&&(T=(D=oe.props)===null||D===void 0?void 0:D.startIndex)!==null&&T!==void 0?T:k,ie=oe&&(I=(U=oe.props)===null||U===void 0?void 0:U.endIndex)!==null&&I!==void 0?I:$,me=J!==k||ie!==$,de=!We(b),H=de&&!me?g.updateId:g.updateId+1;return re(re({updateId:H},p(re(re({props:m},g),{},{updateId:H,dataStartIndex:J,dataEndIndex:ie}),g)),{},{prevChildren:w,dataStartIndex:J,dataEndIndex:ie})}return null}),Ie(v,"renderActiveDot",function(m,g,y){var b;return x.isValidElement(m)?b=x.cloneElement(m,g):Le(m)?b=m(g):b=E.createElement(nu,g),E.createElement(ct,{className:"recharts-active-dot",key:y},b)}),function(g){return E.createElement(v,g)}},Th=b0({chartName:"BarChart",GraphicalChild:na,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:es},{axisType:"yAxis",AxisComp:ts}],formatAxisMap:nO}),UO=b0({chartName:"PieChart",GraphicalChild:Da,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:dp},{axisType:"radiusAxis",AxisComp:cp}],formatAxisMap:Kne,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),uhe=b0({chartName:"AreaChart",GraphicalChild:cs,axisComponents:[{axisType:"xAxis",AxisComp:es},{axisType:"yAxis",AxisComp:ts}],formatAxisMap:nO}),fhe="Label",qO=x.forwardRef((e,t)=>a.jsx($e.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));qO.displayName=fhe;var WO=qO;const hhe=pc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=x.forwardRef(({className:e,...t},r)=>a.jsx(WO,{ref:r,className:te(hhe(),e),...t}));K.displayName=WO.displayName;function j0(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var w0="Switch",[mhe]=ia(w0),[phe,ghe]=mhe(w0),HO=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:c,value:l="on",onCheckedChange:d,form:u,...f}=e,[h,p]=x.useState(null),v=He(t,w=>p(w)),m=x.useRef(!1),g=h?u||!!h.closest("form"):!0,[y=!1,b]=ka({prop:s,defaultProp:o,onChange:d});return a.jsxs(phe,{scope:r,checked:y,disabled:c,children:[a.jsx($e.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":YO(y),"data-disabled":c?"":void 0,disabled:c,value:l,...f,ref:v,onClick:je(e.onClick,w=>{b(j=>!j),g&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),g&&a.jsx(vhe,{control:h,bubbles:!m.current,name:n,value:l,checked:y,required:i,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});HO.displayName=w0;var GO="SwitchThumb",KO=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=ghe(GO,r);return a.jsx($e.span,{"data-state":YO(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});KO.displayName=GO;var vhe=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,o=x.useRef(null),i=j0(r),c=lb(t);return x.useEffect(()=>{const l=o.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&f){const h=new Event("click",{bubbles:n});f.call(l,r),l.dispatchEvent(h)}},[i,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function YO(e){return e?"checked":"unchecked"}var ZO=HO,xhe=KO;const Mt=x.forwardRef(({className:e,...t},r)=>a.jsx(ZO,{className:te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:a.jsx(xhe,{className:te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Mt.displayName=ZO.displayName;function Sd(e,[t,r]){return Math.min(r,Math.max(t,e))}function yhe(e,t=[]){let r=[];function n(o,i){const c=x.createContext(i),l=r.length;r=[...r,i];function d(f){const{scope:h,children:p,...v}=f,m=h?.[e][l]||c,g=x.useMemo(()=>v,Object.values(v));return a.jsx(m.Provider,{value:g,children:p})}function u(f,h){const p=h?.[e][l]||c,v=x.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=r.map(i=>x.createContext(i));return function(c){const l=c?.[e]||o;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,bhe(s,...t)]}function bhe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...c,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function bp(e){const t=e+"CollectionProvider",[r,n]=yhe(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:v,children:m}=p,g=E.useRef(null),y=E.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:y,collectionRef:g,children:m})};i.displayName=t;const c=e+"CollectionSlot",l=E.forwardRef((p,v)=>{const{scope:m,children:g}=p,y=o(c,m),b=He(v,y.collectionRef);return a.jsx(Ur,{ref:b,children:g})});l.displayName=c;const d=e+"CollectionItemSlot",u="data-radix-collection-item",f=E.forwardRef((p,v)=>{const{scope:m,children:g,...y}=p,b=E.useRef(null),w=He(v,b),j=o(d,m);return E.useEffect(()=>(j.itemMap.set(b,{ref:b,...y}),()=>void j.itemMap.delete(b))),a.jsx(Ur,{[u]:"",ref:w,children:g})});f.displayName=d;function h(p){const v=o(e+"CollectionConsumer",p);return E.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((j,N)=>y.indexOf(j.ref.current)-y.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:l,ItemSlot:f},h,n]}var jhe=x.createContext(void 0);function Vc(e){const t=x.useContext(jhe);return e||t||"ltr"}var whe=[" ","Enter","ArrowUp","ArrowDown"],Nhe=[" ","Enter"],au="Select",[jp,wp,_he]=bp(au),[Uc]=ia(au,[_he,Vs]),Np=Vs(),[She,Ks]=Uc(au),[Che,Phe]=Uc(au),XO=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:i,defaultValue:c,onValueChange:l,dir:d,name:u,autoComplete:f,disabled:h,required:p,form:v}=e,m=Np(t),[g,y]=x.useState(null),[b,w]=x.useState(null),[j,N]=x.useState(!1),_=Vc(d),[S=!1,C]=ka({prop:n,defaultProp:s,onChange:o}),[k,$]=ka({prop:i,defaultProp:c,onChange:l}),A=x.useRef(null),P=g?v||!!g.closest("form"):!0,[O,M]=x.useState(new Set),R=Array.from(O).map(T=>T.props.value).join(";");return a.jsx(wm,{...m,children:a.jsxs(She,{required:p,scope:t,trigger:g,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Sn(),value:k,onValueChange:$,open:S,onOpenChange:C,dir:_,triggerPointerDownPosRef:A,disabled:h,children:[a.jsx(jp.Provider,{scope:t,children:a.jsx(Che,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(T=>{M(D=>new Set(D).add(T))},[]),onNativeOptionRemove:x.useCallback(T=>{M(D=>{const I=new Set(D);return I.delete(T),I})},[]),children:r})}),P?a.jsxs(wT,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:k,onChange:T=>$(T.target.value),disabled:h,form:v,children:[k===void 0?a.jsx("option",{value:""}):null,Array.from(O)]},R):null]})})};XO.displayName=au;var JO="SelectTrigger",QO=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=Np(r),i=Ks(JO,r),c=i.disabled||n,l=He(t,i.onTriggerChange),d=wp(r),u=x.useRef("touch"),[f,h,p]=NT(m=>{const g=d().filter(w=>!w.disabled),y=g.find(w=>w.value===i.value),b=_T(g,m,y);b!==void 0&&i.onValueChange(b.value)}),v=m=>{c||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return a.jsx(Hd,{asChild:!0,...o,children:a.jsx($e.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":jT(i.value)?"":void 0,...s,ref:l,onClick:je(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&v(m)}),onPointerDown:je(s.onPointerDown,m=>{u.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(v(m),m.preventDefault())}),onKeyDown:je(s.onKeyDown,m=>{const g=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(g&&m.key===" ")&&whe.includes(m.key)&&(v(),m.preventDefault())})})})});QO.displayName=JO;var eT="SelectValue",tT=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:i="",...c}=e,l=Ks(eT,r),{onValueNodeHasChildrenChange:d}=l,u=o!==void 0,f=He(t,l.onValueNodeChange);return _r(()=>{d(u)},[d,u]),a.jsx($e.span,{...c,ref:f,style:{pointerEvents:"none"},children:jT(l.value)?a.jsx(a.Fragment,{children:i}):o})});tT.displayName=eT;var Ahe="SelectIcon",rT=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx($e.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});rT.displayName=Ahe;var khe="SelectPortal",nT=e=>a.jsx(Vd,{asChild:!0,...e});nT.displayName=khe;var Do="SelectContent",aT=x.forwardRef((e,t)=>{const r=Ks(Do,e.__scopeSelect),[n,s]=x.useState();if(_r(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?Md.createPortal(a.jsx(sT,{scope:e.__scopeSelect,children:a.jsx(jp.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),o):null}return a.jsx(oT,{...e,ref:t})});aT.displayName=Do;var Vn=10,[sT,Ys]=Uc(Do),Ehe="SelectContentImpl",oT=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g,...y}=e,b=Ks(Do,r),[w,j]=x.useState(null),[N,_]=x.useState(null),S=He(t,Y=>j(Y)),[C,k]=x.useState(null),[$,A]=x.useState(null),P=wp(r),[O,M]=x.useState(!1),R=x.useRef(!1);x.useEffect(()=>{if(w)return pm(w)},[w]),hm();const T=x.useCallback(Y=>{const[Q,...Z]=P().map(X=>X.ref.current),[ce]=Z.slice(-1),fe=document.activeElement;for(const X of Y)if(X===fe||(X?.scrollIntoView({block:"nearest"}),X===Q&&N&&(N.scrollTop=0),X===ce&&N&&(N.scrollTop=N.scrollHeight),X?.focus(),document.activeElement!==fe))return},[P,N]),D=x.useCallback(()=>T([C,w]),[T,C,w]);x.useEffect(()=>{O&&D()},[O,D]);const{onOpenChange:I,triggerPointerDownPosRef:U}=b;x.useEffect(()=>{if(w){let Y={x:0,y:0};const Q=ce=>{Y={x:Math.abs(Math.round(ce.pageX)-(U.current?.x??0)),y:Math.abs(Math.round(ce.pageY)-(U.current?.y??0))}},Z=ce=>{Y.x<=10&&Y.y<=10?ce.preventDefault():w.contains(ce.target)||I(!1),document.removeEventListener("pointermove",Q),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",Z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",Z,{capture:!0})}}},[w,I,U]),x.useEffect(()=>{const Y=()=>I(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[I]);const[oe,J]=NT(Y=>{const Q=P().filter(fe=>!fe.disabled),Z=Q.find(fe=>fe.ref.current===document.activeElement),ce=_T(Q,Y,Z);ce&&setTimeout(()=>ce.ref.current.focus())}),ie=x.useCallback((Y,Q,Z)=>{const ce=!R.current&&!Z;(b.value!==void 0&&b.value===Q||ce)&&(k(Y),ce&&(R.current=!0))},[b.value]),me=x.useCallback(()=>w?.focus(),[w]),de=x.useCallback((Y,Q,Z)=>{const ce=!R.current&&!Z;(b.value!==void 0&&b.value===Q||ce)&&A(Y)},[b.value]),H=n==="popper"?ly:iT,L=H===ly?{side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g}:{};return a.jsx(sT,{scope:r,content:w,viewport:N,onViewportChange:_,itemRefCallback:ie,selectedItem:C,onItemLeave:me,itemTextRefCallback:de,focusSelectedItem:D,selectedItemText:$,position:n,isPositioned:O,searchRef:oe,children:a.jsx(Ud,{as:Ur,allowPinchZoom:!0,children:a.jsx(Bd,{asChild:!0,trapped:b.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:je(s,Y=>{b.trigger?.focus({preventScroll:!0}),Y.preventDefault()}),children:a.jsx(xc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:a.jsx(H,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Y=>Y.preventDefault(),...y,...L,onPlaced:()=>M(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:je(y.onKeyDown,Y=>{const Q=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!Q&&Y.key.length===1&&J(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ce=P().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const fe=Y.target,X=ce.indexOf(fe);ce=ce.slice(X+1)}setTimeout(()=>T(ce)),Y.preventDefault()}})})})})})})});oT.displayName=Ehe;var Ohe="SelectItemAlignedPosition",iT=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=Ks(Do,r),i=Ys(Do,r),[c,l]=x.useState(null),[d,u]=x.useState(null),f=He(t,S=>u(S)),h=wp(r),p=x.useRef(!1),v=x.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:b}=i,w=x.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&d&&m&&g&&y){const S=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),$=y.getBoundingClientRect();if(o.dir!=="rtl"){const fe=$.left-C.left,X=k.left-fe,De=S.left-X,ve=S.width+De,Be=Math.max(ve,C.width),Oe=window.innerWidth-Vn,Ce=Sd(X,[Vn,Math.max(Vn,Oe-Be)]);c.style.minWidth=ve+"px",c.style.left=Ce+"px"}else{const fe=C.right-$.right,X=window.innerWidth-k.right-fe,De=window.innerWidth-S.right-X,ve=S.width+De,Be=Math.max(ve,C.width),Oe=window.innerWidth-Vn,Ce=Sd(X,[Vn,Math.max(Vn,Oe-Be)]);c.style.minWidth=ve+"px",c.style.right=Ce+"px"}const A=h(),P=window.innerHeight-Vn*2,O=m.scrollHeight,M=window.getComputedStyle(d),R=parseInt(M.borderTopWidth,10),T=parseInt(M.paddingTop,10),D=parseInt(M.borderBottomWidth,10),I=parseInt(M.paddingBottom,10),U=R+T+O+I+D,oe=Math.min(g.offsetHeight*5,U),J=window.getComputedStyle(m),ie=parseInt(J.paddingTop,10),me=parseInt(J.paddingBottom,10),de=S.top+S.height/2-Vn,H=P-de,L=g.offsetHeight/2,Y=g.offsetTop+L,Q=R+T+Y,Z=U-Q;if(Q<=de){const fe=A.length>0&&g===A[A.length-1].ref.current;c.style.bottom="0px";const X=d.clientHeight-m.offsetTop-m.offsetHeight,De=Math.max(H,L+(fe?me:0)+X+D),ve=Q+De;c.style.height=ve+"px"}else{const fe=A.length>0&&g===A[0].ref.current;c.style.top="0px";const De=Math.max(de,R+m.offsetTop+(fe?ie:0)+L)+Z;c.style.height=De+"px",m.scrollTop=Q-de+m.offsetTop}c.style.margin=`${Vn}px 0`,c.style.minHeight=oe+"px",c.style.maxHeight=P+"px",n?.(),requestAnimationFrame(()=>p.current=!0)}},[h,o.trigger,o.valueNode,c,d,m,g,y,o.dir,n]);_r(()=>w(),[w]);const[j,N]=x.useState();_r(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=x.useCallback(S=>{S&&v.current===!0&&(w(),b?.(),v.current=!1)},[w,b]);return a.jsx($he,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:a.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx($e.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});iT.displayName=Ohe;var The="SelectPopperPosition",ly=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Vn,...o}=e,i=Np(r);return a.jsx(Nm,{...i,...o,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ly.displayName=The;var[$he,N0]=Uc(Do,{}),dy="SelectViewport",cT=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,o=Ys(dy,r),i=N0(dy,r),c=He(t,o.onViewportChange),l=x.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(jp.Slot,{scope:r,children:a.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:je(s.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=i;if(h?.current&&f){const p=Math.abs(l.current-u.scrollTop);if(p>0){const v=window.innerHeight-Vn*2,m=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),y=Math.max(m,g);if(y<v){const b=y+p,w=Math.min(v,b),j=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});cT.displayName=dy;var lT="SelectGroup",[Mhe,Dhe]=Uc(lT),Ihe=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Sn();return a.jsx(Mhe,{scope:r,id:s,children:a.jsx($e.div,{role:"group","aria-labelledby":s,...n,ref:t})})});Ihe.displayName=lT;var dT="SelectLabel",uT=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Dhe(dT,r);return a.jsx($e.div,{id:s.id,...n,ref:t})});uT.displayName=dT;var $h="SelectItem",[Rhe,fT]=Uc($h),hT=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...i}=e,c=Ks($h,r),l=Ys($h,r),d=c.value===n,[u,f]=x.useState(o??""),[h,p]=x.useState(!1),v=He(t,b=>l.itemRefCallback?.(b,n,s)),m=Sn(),g=x.useRef("touch"),y=()=>{s||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(Rhe,{scope:r,value:n,disabled:s,textId:m,isSelected:d,onItemTextChange:x.useCallback(b=>{f(w=>w||(b?.textContent??"").trim())},[]),children:a.jsx(jp.ItemSlot,{scope:r,value:n,disabled:s,textValue:u,children:a.jsx($e.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:je(i.onFocus,()=>p(!0)),onBlur:je(i.onBlur,()=>p(!1)),onClick:je(i.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:je(i.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:je(i.onPointerDown,b=>{g.current=b.pointerType}),onPointerMove:je(i.onPointerMove,b=>{g.current=b.pointerType,s?l.onItemLeave?.():g.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(i.onPointerLeave,b=>{b.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:je(i.onKeyDown,b=>{l.searchRef?.current!==""&&b.key===" "||(Nhe.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});hT.displayName=$h;var vl="SelectItemText",mT=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,i=Ks(vl,r),c=Ys(vl,r),l=fT(vl,r),d=Phe(vl,r),[u,f]=x.useState(null),h=He(t,y=>f(y),l.onItemTextChange,y=>c.itemTextRefCallback?.(y,l.value,l.disabled)),p=u?.textContent,v=x.useMemo(()=>a.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=d;return _r(()=>(m(v),()=>g(v)),[m,g,v]),a.jsxs(a.Fragment,{children:[a.jsx($e.span,{id:l.textId,...o,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Md.createPortal(o.children,i.valueNode):null]})});mT.displayName=vl;var pT="SelectItemIndicator",gT=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return fT(pT,r).isSelected?a.jsx($e.span,{"aria-hidden":!0,...n,ref:t}):null});gT.displayName=pT;var uy="SelectScrollUpButton",vT=x.forwardRef((e,t)=>{const r=Ys(uy,e.__scopeSelect),n=N0(uy,e.__scopeSelect),[s,o]=x.useState(!1),i=He(t,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollTop>0;o(d)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?a.jsx(yT,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});vT.displayName=uy;var fy="SelectScrollDownButton",xT=x.forwardRef((e,t)=>{const r=Ys(fy,e.__scopeSelect),n=N0(fy,e.__scopeSelect),[s,o]=x.useState(!1),i=He(t,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;o(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?a.jsx(yT,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});xT.displayName=fy;var yT=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=Ys("SelectScrollButton",r),i=x.useRef(null),c=wp(r),l=x.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),_r(()=>{c().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),a.jsx($e.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:je(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:je(s.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:je(s.onPointerLeave,()=>{l()})})}),Lhe="SelectSeparator",bT=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx($e.div,{"aria-hidden":!0,...n,ref:t})});bT.displayName=Lhe;var hy="SelectArrow",Fhe=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Np(r),o=Ks(hy,r),i=Ys(hy,r);return o.open&&i.position==="popper"?a.jsx(_m,{...s,...n,ref:t}):null});Fhe.displayName=hy;function jT(e){return e===""||e===void 0}var wT=x.forwardRef((e,t)=>{const{value:r,...n}=e,s=x.useRef(null),o=He(t,s),i=j0(r);return x.useEffect(()=>{const c=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==r&&u){const f=new Event("change",{bubbles:!0});u.call(c,r),c.dispatchEvent(f)}},[i,r]),a.jsx(fb,{asChild:!0,children:a.jsx("select",{...n,ref:o,defaultValue:r})})});wT.displayName="BubbleSelect";function NT(e){const t=ir(e),r=x.useRef(""),n=x.useRef(0),s=x.useCallback(i=>{const c=r.current+i;t(c),function l(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(c)},[t]),o=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function _T(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=zhe(e,Math.max(o,0));s.length===1&&(i=i.filter(d=>d!==r));const l=i.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function zhe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Bhe=XO,ST=QO,Vhe=tT,Uhe=rT,qhe=nT,CT=aT,Whe=cT,PT=uT,AT=hT,Hhe=mT,Ghe=gT,kT=vT,ET=xT,OT=bT;const Ue=Bhe,qe=Vhe,Fe=x.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(ST,{ref:n,className:te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(Uhe,{asChild:!0,children:a.jsx(IP,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=ST.displayName;const TT=x.forwardRef(({className:e,...t},r)=>a.jsx(kT,{ref:r,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(IL,{className:"h-4 w-4"})}));TT.displayName=kT.displayName;const $T=x.forwardRef(({className:e,...t},r)=>a.jsx(ET,{ref:r,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(IP,{className:"h-4 w-4"})}));$T.displayName=ET.displayName;const ze=x.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>a.jsx(qhe,{children:a.jsxs(CT,{ref:s,className:te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[a.jsx(TT,{}),a.jsx(Whe,{className:te("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx($T,{})]})}));ze.displayName=CT.displayName;const Khe=x.forwardRef(({className:e,...t},r)=>a.jsx(PT,{ref:r,className:te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Khe.displayName=PT.displayName;const ne=x.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(AT,{ref:n,className:te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Ghe,{children:a.jsx(jt,{className:"h-4 w-4"})})}),a.jsx(Hhe,{children:t})]}));ne.displayName=AT.displayName;const Yhe=x.forwardRef(({className:e,...t},r)=>a.jsx(OT,{ref:r,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));Yhe.displayName=OT.displayName;var MT=["PageUp","PageDown"],DT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],IT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},qc="Slider",[my,Zhe,Xhe]=bp(qc),[RT]=ia(qc,[Xhe]),[Jhe,_p]=RT(qc),LT=x.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:d=[n],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:v,...m}=e,g=x.useRef(new Set),y=x.useRef(0),w=i==="horizontal"?Qhe:eme,[j=[],N]=ka({prop:u,defaultProp:d,onChange:A=>{[...g.current][y.current]?.focus(),f(A)}}),_=x.useRef(j);function S(A){const P=sme(j,A);$(A,P)}function C(A){$(A,y.current)}function k(){const A=_.current[y.current];j[y.current]!==A&&h(j)}function $(A,P,{commit:O}={commit:!1}){const M=lme(o),R=dme(Math.round((A-n)/o)*o+n,M),T=Sd(R,[n,s]);N((D=[])=>{const I=nme(D,T,P);if(cme(I,l*o)){y.current=I.indexOf(T);const U=String(I)!==String(D);return U&&O&&h(I),U?I:D}else return D})}return a.jsx(Jhe,{scope:e.__scopeSlider,name:r,disabled:c,min:n,max:s,valueIndexToChangeRef:y,thumbs:g.current,values:j,orientation:i,form:v,children:a.jsx(my.Provider,{scope:e.__scopeSlider,children:a.jsx(my.Slot,{scope:e.__scopeSlider,children:a.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...m,ref:t,onPointerDown:je(m.onPointerDown,()=>{c||(_.current=j)}),min:n,max:s,inverted:p,onSlideStart:c?void 0:S,onSlideMove:c?void 0:C,onSlideEnd:c?void 0:k,onHomeKeyDown:()=>!c&&$(n,0,{commit:!0}),onEndKeyDown:()=>!c&&$(s,j.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:P})=>{if(!c){const R=MT.includes(A.key)||A.shiftKey&&DT.includes(A.key)?10:1,T=y.current,D=j[T],I=o*R*P;$(D+I,T,{commit:!0})}}})})})})});LT.displayName=qc;var[FT,zT]=RT(qc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Qhe=x.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:o,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:d,...u}=e,[f,h]=x.useState(null),p=He(t,w=>h(w)),v=x.useRef(),m=Vc(s),g=m==="ltr",y=g&&!o||!g&&o;function b(w){const j=v.current||f.getBoundingClientRect(),N=[0,j.width],S=_0(N,y?[r,n]:[n,r]);return v.current=j,S(w-j.left)}return a.jsx(FT,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:a.jsx(BT,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=b(w.clientX);i?.(j)},onSlideMove:w=>{const j=b(w.clientX);c?.(j)},onSlideEnd:()=>{v.current=void 0,l?.()},onStepKeyDown:w=>{const N=IT[y?"from-left":"from-right"].includes(w.key);d?.({event:w,direction:N?-1:1})}})})}),eme=x.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:c,onStepKeyDown:l,...d}=e,u=x.useRef(null),f=He(t,u),h=x.useRef(),p=!s;function v(m){const g=h.current||u.current.getBoundingClientRect(),y=[0,g.height],w=_0(y,p?[n,r]:[r,n]);return h.current=g,w(m-g.top)}return a.jsx(FT,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:a.jsx(BT,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const g=v(m.clientY);o?.(g)},onSlideMove:m=>{const g=v(m.clientY);i?.(g)},onSlideEnd:()=>{h.current=void 0,c?.()},onStepKeyDown:m=>{const y=IT[p?"from-bottom":"from-top"].includes(m.key);l?.({event:m,direction:y?-1:1})}})})}),BT=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:l,...d}=e,u=_p(qc,r);return a.jsx($e.span,{...d,ref:t,onKeyDown:je(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(c(f),f.preventDefault()):MT.concat(DT).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:je(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():n(f)}),onPointerMove:je(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:je(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),VT="SliderTrack",UT=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=_p(VT,r);return a.jsx($e.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});UT.displayName=VT;var py="SliderRange",qT=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=_p(py,r),o=zT(py,r),i=x.useRef(null),c=He(t,i),l=s.values.length,d=s.values.map(h=>HT(h,s.min,s.max)),u=l>1?Math.min(...d):0,f=100-Math.max(...d);return a.jsx($e.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:c,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:f+"%"}})});qT.displayName=py;var gy="SliderThumb",WT=x.forwardRef((e,t)=>{const r=Zhe(e.__scopeSlider),[n,s]=x.useState(null),o=He(t,c=>s(c)),i=x.useMemo(()=>n?r().findIndex(c=>c.ref.current===n):-1,[r,n]);return a.jsx(tme,{...e,ref:o,index:i})}),tme=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...o}=e,i=_p(gy,r),c=zT(gy,r),[l,d]=x.useState(null),u=He(t,b=>d(b)),f=l?i.form||!!l.closest("form"):!0,h=lb(l),p=i.values[n],v=p===void 0?0:HT(p,i.min,i.max),m=ame(n,i.values.length),g=h?.[c.size],y=g?ome(g,v,c.direction):0;return x.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${v}% + ${y}px)`},children:[a.jsx(my.ItemSlot,{scope:e.__scopeSlider,children:a.jsx($e.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:u,style:p===void 0?{display:"none"}:e.style,onFocus:je(e.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),f&&a.jsx(rme,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},n)]})});WT.displayName=gy;var rme=e=>{const{value:t,...r}=e,n=x.useRef(null),s=j0(t);return x.useEffect(()=>{const o=n.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(s!==t&&l){const d=new Event("input",{bubbles:!0});l.call(o,t),o.dispatchEvent(d)}},[s,t]),a.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function nme(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,o)=>s-o)}function HT(e,t,r){const o=100/(r-t)*(e-t);return Sd(o,[0,100])}function ame(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function sme(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function ome(e,t,r){const n=e/2,o=_0([0,50],[0,n]);return(n-o(t)*r)*r}function ime(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function cme(e,t){if(t>0){const r=ime(e);return Math.min(...r)>=t}return!0}function _0(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function lme(e){return(String(e).split(".")[1]||"").length}function dme(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var GT=LT,ume=UT,fme=qT,hme=WT;const lf=x.forwardRef(({className:e,...t},r)=>a.jsxs(GT,{ref:r,className:te("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(ume,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(fme,{className:"absolute h-full bg-primary"})}),a.jsx(hme,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lf.displayName=GT.displayName;const Sp=()=>{const{usuario:e}=Rt(),[t,r]=x.useState(!1),[n,s]=x.useState(!1),[o,i]=x.useState(null),[c,l]=x.useState(!1);x.useEffect(()=>{"serviceWorker"in navigator&&"PushManager"in window&&(r(!0),d())},[]);const d=x.useCallback(async()=>{try{const y=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(y){const b={endpoint:y.endpoint,keys:{p256dh:u(y.getKey("p256dh")),auth:u(y.getKey("auth"))}};i(b),s(!0)}}catch(g){console.error("Erro ao verificar subscription:",g)}},[]),u=g=>{const y=new Uint8Array(g);let b="";for(let w=0;w<y.byteLength;w++)b+=String.fromCharCode(y[w]);return btoa(b)},f=x.useCallback(async()=>{if(!t||!e)return!1;l(!0);try{if(await Notification.requestPermission()!=="granted")return V.error("Permisso negada - As notificaes push foram bloqueadas. Ative nas configuraes do navegador."),!1;const w=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BEl62iUYgUivxIkv69yViEuiBIa40HI0DLLfgA7X3EgMGvpADQJ1wpQOVWvwG4yA-7XVvPDn5TPBY-A3VoGcEng"}),j={endpoint:w.endpoint,keys:{p256dh:u(w.getKey("p256dh")),auth:u(w.getKey("auth"))}};return await p(j),i(j),s(!0),V.success("Notificaes ativadas! Voc receber notificaes push sobre agendamentos e lembretes."),!0}catch(g){return console.error("Erro ao subscrever push notifications:",g),V.error("Erro ao ativar notificaes - No foi possvel ativar as notificaes push. Tente novamente."),!1}finally{l(!1)}},[t,e]),h=x.useCallback(async()=>{if(n){l(!0);try{const y=await(await navigator.serviceWorker.ready).pushManager.getSubscription();y&&(await y.unsubscribe(),await v()),i(null),s(!1),V.warning("Notificaes desativadas - Voc no receber mais notificaes push.")}catch(g){console.error("Erro ao cancelar subscription:",g),V.error("Erro ao desativar notificaes - No foi possvel desativar as notificaes. Tente novamente.")}finally{l(!1)}}},[n]),p=async g=>{e&&localStorage.setItem(`push-subscription-${e.id}`,JSON.stringify(g))},v=async()=>{e&&localStorage.removeItem(`push-subscription-${e.id}`)},m=x.useCallback(async()=>{if(n)try{"serviceWorker"in navigator&&((await navigator.serviceWorker.ready).showNotification("Teste de Notificao",{body:"Esta  uma notificao de teste do seu salo!",icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",tag:"test-notification",data:{url:"/",timestamp:Date.now()}}),V.success("Notificao de teste enviada! Verifique se a notificao apareceu."))}catch(g){console.error("Erro ao enviar notificao de teste:",g),V.error("Erro no teste - No foi possvel enviar a notificao de teste.")}},[n]);return{isSupported:t,isSubscribed:n,subscription:o,isLoading:c,subscribe:f,unsubscribe:h,sendTestNotification:m,checkSubscription:d}};function KT(){const{configuracaoNotificacoes:e,loading:t,salvarNotificacoes:r}=Sc(),{isSupported:n,isSubscribed:s,subscribe:o,unsubscribe:i,sendTestNotification:c,isLoading:l}=Sp(),[d,u]=x.useState({notificacoes_push:!0,notificacoes_email:!0,notificacoes_som:!0,som_personalizado:"notification.mp3",lembrete_agendamento_minutos:60,lembrete_vencimento_dias:3,lembrete_contas_fixas_dias:7,notificar_cancelamentos:!0,notificar_reagendamentos:!0,notificar_pagamentos:!0,notificar_novos_agendamentos:!0,horario_inicio_notificacoes:"08:00",horario_fim_notificacoes:"20:00"});if(x.useEffect(()=>{e&&u({notificacoes_push:e.notificacoes_push,notificacoes_email:e.notificacoes_email,notificacoes_som:e.notificacoes_som,som_personalizado:e.som_personalizado||"notification.mp3",lembrete_agendamento_minutos:e.lembrete_agendamento_minutos,lembrete_vencimento_dias:e.lembrete_vencimento_dias,lembrete_contas_fixas_dias:e.lembrete_contas_fixas_dias,notificar_cancelamentos:e.notificar_cancelamentos,notificar_reagendamentos:e.notificar_reagendamentos,notificar_pagamentos:e.notificar_pagamentos,notificar_novos_agendamentos:e.notificar_novos_agendamentos,horario_inicio_notificacoes:e.horario_inicio_notificacoes,horario_fim_notificacoes:e.horario_fim_notificacoes})},[e]),t)return a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsx("div",{className:"text-center",children:"Carregando configuraes de notificaes..."})})});const f=async()=>{try{await r(d)}catch(v){console.error("Erro ao salvar configuraes:",v)}},h=async()=>{s?(await i(),u(v=>({...v,notificacoes_push:!1}))):await o()&&u(m=>({...m,notificacoes_push:!0}))},p=()=>{try{new Audio(`/sounds/${d.som_personalizado}`).play().catch(m=>{console.log("Erro ao reproduzir som:",m),V.error("No foi possvel reproduzir o som selecionado")})}catch(v){console.log("Erro ao criar udio:",v)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-5 w-5"}),"Status das Notificaes"]})}),a.jsxs(q,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(pe,{variant:d.notificacoes_push?"default":"secondary",children:["Push ",d.notificacoes_push?"Ativo":"Inativo"]})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(pe,{variant:d.notificacoes_email?"default":"secondary",children:["Email ",d.notificacoes_email?"Ativo":"Inativo"]})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(pe,{variant:d.notificacoes_som?"default":"secondary",children:["Som ",d.notificacoes_som?"Ativo":"Inativo"]})})]}),a.jsxs(B,{onClick:f,className:"w-full",children:[a.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Salvar Todas as Configuraes"]})]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Co,{className:"h-5 w-5"}),"Configuraes Principais"]})}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jv,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx(K,{className:"text-base font-medium",children:"Notificaes Push"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba notificaes no celular mesmo com o app fechado"}),!n&&a.jsx("p",{className:"text-xs text-orange-600",children:"No suportado neste navegador"})]})]}),a.jsx(Mt,{checked:s&&d.notificacoes_push,onCheckedChange:h,disabled:!n||l})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(um,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx(K,{className:"text-base font-medium",children:"Notificaes por Email"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba resumos e alertas importantes por email"})]})]}),a.jsx(Mt,{checked:d.notificacoes_email,onCheckedChange:v=>u(m=>({...m,notificacoes_email:v}))})]}),a.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ag,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx(K,{className:"text-base font-medium",children:"Notificaes Sonoras"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reproduzir som ao receber notificaes"})]})]}),a.jsx(Mt,{checked:d.notificacoes_som,onCheckedChange:v=>u(m=>({...m,notificacoes_som:v}))})]}),d.notificacoes_som&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"som-select",children:"Som das Notificaes"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ue,{value:d.som_personalizado,onValueChange:v=>u(m=>({...m,som_personalizado:v})),children:[a.jsx(Fe,{className:"flex-1",children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"notification.mp3",children:"Som Padro"}),a.jsx(ne,{value:"notification2.mp3",children:"Som Campainha"}),a.jsx(ne,{value:"notification3.mp3",children:"Som Suave"})]})]}),a.jsx(B,{variant:"outline",onClick:p,children:a.jsx(ag,{className:"h-4 w-4"})})]})]})]})]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-5 w-5"}),"Horrios de Notificao"]})}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{htmlFor:"inicio-notif",children:"Horrio de Incio"}),a.jsx(ue,{id:"inicio-notif",type:"time",value:d.horario_inicio_notificacoes,onChange:v=>u(m=>({...m,horario_inicio_notificacoes:v.target.value}))})]}),a.jsxs("div",{children:[a.jsx(K,{htmlFor:"fim-notif",children:"Horrio de Fim"}),a.jsx(ue,{id:"fim-notif",type:"time",value:d.horario_fim_notificacoes,onChange:v=>u(m=>({...m,horario_fim_notificacoes:v.target.value}))})]})]}),a.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Perodo ativo:"})," ",d.horario_inicio_notificacoes," s ",d.horario_fim_notificacoes,a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"Notificaes fora deste horrio sero silenciadas"})]})})]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-5 w-5"}),"Tipos de Notificao"]})}),a.jsx(q,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsx(K,{htmlFor:"novos-agend",children:"Novos Agendamentos"}),a.jsx(Mt,{id:"novos-agend",checked:d.notificar_novos_agendamentos,onCheckedChange:v=>u(m=>({...m,notificar_novos_agendamentos:v}))})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsx(K,{htmlFor:"cancelamentos",children:"Cancelamentos"}),a.jsx(Mt,{id:"cancelamentos",checked:d.notificar_cancelamentos,onCheckedChange:v=>u(m=>({...m,notificar_cancelamentos:v}))})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsx(K,{htmlFor:"reagendamentos",children:"Reagendamentos"}),a.jsx(Mt,{id:"reagendamentos",checked:d.notificar_reagendamentos,onCheckedChange:v=>u(m=>({...m,notificar_reagendamentos:v}))})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsx(K,{htmlFor:"pagamentos",children:"Pagamentos"}),a.jsx(Mt,{id:"pagamentos",checked:d.notificar_pagamentos,onCheckedChange:v=>u(m=>({...m,notificar_pagamentos:v}))})]})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Nr,{className:"h-5 w-5"}),"Lembretes e Alertas"]})}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-base font-medium",children:"Lembrete de Agendamentos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{className:"text-sm",children:["Antecedncia: ",d.lembrete_agendamento_minutos," minutos"]}),a.jsx(lf,{value:[d.lembrete_agendamento_minutos],onValueChange:([v])=>u(m=>({...m,lembrete_agendamento_minutos:v})),max:480,min:5,step:5,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"5 min"}),a.jsx("span",{children:"8 horas"})]})]})]}),a.jsx(Ha,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-base font-medium",children:"Lembrete de Vencimentos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{className:"text-sm",children:["Antecedncia: ",d.lembrete_vencimento_dias," dias"]}),a.jsx(lf,{value:[d.lembrete_vencimento_dias],onValueChange:([v])=>u(m=>({...m,lembrete_vencimento_dias:v})),max:30,min:1,step:1,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"1 dia"}),a.jsx("span",{children:"30 dias"})]})]})]}),a.jsx(Ha,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-base font-medium",children:"Lembrete de Contas Fixas"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{className:"text-sm",children:["Antecedncia: ",d.lembrete_contas_fixas_dias," dias"]}),a.jsx(lf,{value:[d.lembrete_contas_fixas_dias],onValueChange:([v])=>u(m=>({...m,lembrete_contas_fixas_dias:v})),max:30,min:1,step:1,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"1 dia"}),a.jsx("span",{children:"30 dias"})]})]})]})]})]}),s&&a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Teste de Notificaes"})}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs(B,{variant:"outline",onClick:c,className:"w-full",disabled:l,children:[a.jsx(Na,{className:"h-4 w-4 mr-2"}),"Enviar Notificao de Teste"]}),a.jsxs(B,{variant:"outline",onClick:p,className:"w-full",disabled:!d.notificacoes_som,children:[a.jsx(ag,{className:"h-4 w-4 mr-2"}),"Testar Som da Notificao"]})]})]}),a.jsx(F,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/20",children:a.jsxs(q,{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:" Sobre as Notificaes"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[a.jsx("li",{children:" Notificaes push funcionam apenas em HTTPS ou localhost"}),a.jsx("li",{children:" Configure horrios para evitar notificaes em perodos de descanso"}),a.jsx("li",{children:" Lembretes ajudam a no esquecer de agendamentos e vencimentos importantes"}),a.jsx("li",{children:" Todas as configuraes so salvas automaticamente"})]})]})})]})}console.log("Dialog component - forwardRef:",x.forwardRef);console.log("Dialog component - DialogPrimitive:",D6);const Sr=gm,Wc=vm,mme=xm,YT=x.forwardRef(({className:e,...t},r)=>a.jsx(yc,{ref:r,className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));YT.displayName=yc.displayName;const gr=x.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(mme,{children:[a.jsx(YT,{}),a.jsxs(bc,{ref:n,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,a.jsxs(qd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(qt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gr.displayName=bc.displayName;const Cr=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Cr.displayName="DialogHeader";const Cp=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Cp.displayName="DialogFooter";const Pr=x.forwardRef(({className:e,...t},r)=>a.jsx(jc,{ref:r,className:te("text-lg font-semibold leading-none tracking-tight",e),...t}));Pr.displayName=jc.displayName;const kn=x.forwardRef(({className:e,...t},r)=>a.jsx(wc,{ref:r,className:te("text-sm text-muted-foreground",e),...t}));kn.displayName=wc.displayName;function ZT(){const{user:e}=Rt(),{configuracaoNotificacoes:t}=Sc(),r=async(d,u,f,h,p)=>{if(e?.id)try{t?.notificacoes_push&&V(u,{description:f,duration:5e3}),t?.notificacoes_som&&new Audio("/sounds/notification.mp3").play().catch(console.error)}catch(v){console.error("Erro ao criar notificao:",v)}},n=(d,u,f,h,p)=>{t?.notificar_novos_agendamentos&&r("novo_agendamento","Novo Agendamento",`${d} agendou ${u} para ${f} s ${h}`)},s=(d,u,f,h)=>{r("lembrete_agendamento","Lembrete de Agendamento",`${d} tem agendamento de ${u} hoje s ${h}`)},o=(d,u,f)=>{r("retorno_cronograma","Retorno de Cronograma",`${d} tem retorno de ${u} agendado para ${f}`)},i=(d,u,f,h)=>{t?.lembrete_contas_fixas_dias&&r("despesa_fixa","Despesa Fixa Vencendo",`${d} vence em ${h} dias (${f}) - R$ ${u.toFixed(2)}`)},c=(d,u,f)=>{t?.notificar_pagamentos&&r("servico_finalizado","Servio Finalizado",`Servio ${u} para ${d} foi finalizado${f?` - R$ ${f.toFixed(2)}`:""}`)},l=(d,u,f)=>{r("alerta_ia",d,u)};return x.useEffect(()=>{if(!e?.id)return;const d=W.channel("agendamentos_notificacoes").on("postgres_changes",{event:"INSERT",schema:"public",table:"agendamentos",filter:`user_id=eq.${e.id}`},f=>{const h=f.new;n(h.cliente_nome||"Cliente",h.servico_nome||"Servio",h.data,h.hora,h.origem)}).subscribe(),u=W.channel("contas_fixas_notificacoes").on("postgres_changes",{event:"INSERT",schema:"public",table:"contas_fixas",filter:`user_id=eq.${e.id}`},f=>{const h=f.new,p=new Date,v=new Date(p.getFullYear(),p.getMonth(),h.data_vencimento),m=Math.ceil((v.getTime()-p.getTime())/(1e3*60*60*24));m<=(t?.lembrete_contas_fixas_dias||5)&&i(h.nome,h.valor,v.toLocaleDateString(),m)}).subscribe();return()=>{W.removeChannel(d),W.removeChannel(u)}},[e?.id,t]),{criarNotificacao:r,notificarNovoAgendamento:n,notificarLembreteAgendamento:s,notificarRetornoCronograma:o,notificarDespesaFixa:i,notificarServicoFinalizado:c,notificarAlertaIA:l}}function pme(){const[e,t]=$y();console.log("Dashboard: Iniciando renderizao");try{const r=A=>{window.location.href=A},{agendamentosFiltrados:n,todosAgendamentos:s,clientes:o}=la(),{lancamentos:i,resumoFinanceiro:c}=Pc(),{usuario:l,checkSubscription:d}=Rt(),{notificarAlertaIA:u}=ZT(),[f,h]=x.useState({ativo:!0,anonimizarClientes:!0,consentimentoMarketing:!1,permitirNotificacoesIA:!1}),[p,v]=x.useState({});x.useEffect(()=>{if(!l?.id)return;const A=localStorage.getItem(`ia-config-${l.id}`);if(A)try{const O=JSON.parse(A);h(M=>({...M,...O}))}catch{}const P=localStorage.getItem(`ia-feedback-${l.id}`);if(P)try{const O=JSON.parse(P);v(O)}catch{}},[l?.id]),x.useEffect(()=>{l?.id&&localStorage.setItem(`ia-config-${l.id}`,JSON.stringify(f))},[f,l?.id]);const m=(A,P)=>{if(!l?.id)return;const O=new Date().toISOString();v(M=>{const R={...M,[A]:{util:P,atualizadoEm:O}};return localStorage.setItem(`ia-feedback-${l.id}`,JSON.stringify(R)),R}),V.success(P?"Obrigado! Vamos priorizar sugestes como esta.":"Entendido! Vamos reduzir sugestes semelhantes.")};x.useEffect(()=>{e.get("payment")==="success"&&(t({}),V.success(" Pagamento confirmado! Verificando assinatura..."),setTimeout(()=>d(),1e3),setTimeout(()=>d(),3e3),setTimeout(()=>d(),6e3))},[e,t,d]);const g=new Date,y=g.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=g.toISOString().split("T")[0],w=x.useMemo(()=>n.filter(A=>A.data===b&&A.status!=="cancelado"),[n,b]),j=x.useMemo(()=>n.filter(P=>P.data===b&&P.status==="concluido").reduce((P,O)=>P+O.valor,0),[n,b]),N=x.useMemo(()=>{const P=new Date().toTimeString().slice(0,5);return w.filter(M=>M.hora>P&&M.status==="agendado").sort((M,R)=>M.hora.localeCompare(R.hora))[0]||null},[w]),_=x.useMemo(()=>{const A=new Date;A.setDate(A.getDate()+1);const P=A.toISOString().split("T")[0];return n.filter(O=>O.data===P&&O.status==="agendado").sort((O,M)=>O.hora.localeCompare(M.hora))},[n]),S=x.useMemo(()=>{const A=[];for(let P=6;P>=0;P--){const O=new Date;O.setDate(O.getDate()-P);const M=O.toISOString().split("T")[0],R=i.filter(T=>T.data.toISOString().split("T")[0]===M&&T.tipo==="entrada").reduce((T,D)=>T+D.valor,0);A.push({dia:O.toLocaleDateString("pt-BR",{weekday:"short"}),valor:R})}return A},[i]),C=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A),k=A=>{const P=A.split(" ");if(P.length===0)return"";const O=P[0];return O.length<=2?O[0]+"*".repeat(Math.max(O.length-1,1)):O[0]+"*".repeat(O.length-2)+O[O.length-1]},$=x.useMemo(()=>{if(!f.ativo)return[];const A=new Date,P=new Date;P.setDate(A.getDate()-30);const O=new Map;s.forEach(de=>{const H=new Date(de.data),L=O.get(de.clienteId);(!L||H>L)&&O.set(de.clienteId,H)});const M=o.map(de=>{let H=null;de.ultimaVisita?H=de.ultimaVisita instanceof Date?de.ultimaVisita:new Date(de.ultimaVisita):H=O.get(de.id)||null;const L=H?Math.floor((A.getTime()-H.getTime())/(1e3*60*60*24)):null;return{cliente:de,ultimaData:H,diasSemAgendar:L}}).filter(de=>!de.ultimaData||de.ultimaData<P),R=[...M].sort((de,H)=>{const L=de.diasSemAgendar??9999;return(H.diasSemAgendar??9999)-L}),T=i.filter(de=>de.tipo==="entrada").filter(de=>{const H=de.data instanceof Date?de.data:new Date(de.data),L=new Date;return L.setDate(L.getDate()-30),H>=L}).reduce((de,H)=>de+H.valor,0),D=i.filter(de=>de.tipo==="saida").filter(de=>{const H=de.data instanceof Date?de.data:new Date(de.data),L=new Date;return L.setDate(L.getDate()-30),H>=L}).reduce((de,H)=>de+H.valor,0),I=T-D,U=new Map;s.filter(de=>de.status==="concluido").forEach(de=>{const H=de.servicoNome||"Servio",L=U.get(H)||{quantidade:0,valor:0};U.set(H,{quantidade:L.quantidade+1,valor:L.valor+de.valor})});const oe=Array.from(U.entries()).map(([de,H])=>({nome:de,quantidade:H.quantidade,valor:H.valor})).sort((de,H)=>H.valor-de.valor),J=[];if(M.length>0){const de=M.length>30?"alto":M.length>10?"medio":"baixo";J.push({id:"clientes-inativos-30d",area:"clientes",titulo:"Clientes em risco de churn",descricao:`${M.length} clientes no agendam h mais de 30 dias. Crie uma campanha de reativao com ofertas personalizadas.`,impacto:de,viabilidade:f.consentimentoMarketing?"alta":"media",tipoAcao:"campanha_reengajamento",dados:{clientes:R.slice(0,20).map(H=>({id:H.cliente.id,nome:f.anonimizarClientes?k(H.cliente.nome||H.cliente.nomeCompleto||""):H.cliente.nome||H.cliente.nomeCompleto,telefone:f.consentimentoMarketing?H.cliente.telefone:void 0,email:f.consentimentoMarketing?H.cliente.email:void 0,diasSemAgendar:H.diasSemAgendar}))}})}if(i.length>0){const de=I<0?"alto":c&&c.lucro>0&&I<c.lucro*.5?"medio":"baixo";J.push({id:"fluxo-caixa-30d",area:"financeiro",titulo:"Fluxo de caixa dos ltimos 30 dias",descricao:I<0?"Seu fluxo de caixa recente est negativo. Analise despesas e considere reduzir custos ou ajustar preos.":"Seu fluxo de caixa recente est positivo. Avalie oportunidades de investimento em marketing e fidelizao.",impacto:de,viabilidade:"alta",tipoAcao:"otimizacao_gastos",dados:{totalEntradas30d:T,totalSaidas30d:D,lucro30d:I}})}if(oe.length>0){const de=oe.slice(0,3);J.push({id:"servicos-mais-lucrativos",area:"financeiro",titulo:"Servios com maior faturamento",descricao:`Os servios com maior faturamento recente so: ${de.map(H=>H.nome).join(", ")}. Considere combos e venda cruzada.`,impacto:"alto",viabilidade:"alta",tipoAcao:"precificacao_dinamica",dados:{servicos:de}})}const ie=w.reduce((de,H)=>de+H.valor,0);return w.length>0&&j<ie&&J.push({id:"aumento-ticket-medio",area:"marketing",titulo:"Oportunidade de aumentar ticket mdio",descricao:"Os valores recebidos hoje esto abaixo do potencial da agenda. Oferea produtos e servios complementares.",impacto:"medio",viabilidade:"alta",tipoAcao:"aumento_ticket_medio"}),[...J].sort((de,H)=>{const L={alto:0,medio:1,baixo:2},Y=L[de.impacto]-L[H.impacto];if(Y!==0)return Y;const Q=p[de.id]?.util,Z=p[H.id]?.util;return Q===Z?0:Q===!0?-1:Z===!0||Q===!1?1:Z===!1?-1:0})},[f.ativo,f.anonimizarClientes,f.consentimentoMarketing,o,s,i,c,w,j,p]);return x.useEffect(()=>{if(!f.permitirNotificacoesIA||$.length===0)return;const A=$.find(R=>R.impacto==="alto");if(!A)return;const P=`ia-alert-${A.id}`,O=localStorage.getItem(P),M=new Date;if(O){const R=new Date(O);if((M.getTime()-R.getTime())/(1e3*60*60)<6)return}u(A.titulo,A.descricao,{area:A.area,severidade:A.impacto}),localStorage.setItem(P,M.toISOString())},[f.permitirNotificacoesIA,$,u]),a.jsxs("div",{className:"space-responsive-lg",children:[a.jsx(zP,{variant:"card"}),a.jsxs(Sr,{children:[a.jsx(Wc,{asChild:!0,children:a.jsxs(B,{variant:"outline",size:"sm",className:"fixed bottom-4 left-4 z-40 gap-2",children:[a.jsx(Co,{className:"h-4 w-4"}),"Notificaes"]})}),a.jsx(gr,{className:"max-w-2xl",children:a.jsx(KT,{})})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-r from-primary to-lilac-light p-responsive text-primary-foreground",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3",children:[a.jsx(Mr,{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("h1",{className:"text-responsive-2xl sm:text-responsive-3xl font-bold",children:["Ol, ",l?.nome_completo?.split(" ")[0]||"Profissional","!"]}),a.jsx("p",{className:"text-responsive-sm sm:text-responsive-lg opacity-90 capitalize",children:y})]})]}),a.jsx("p",{className:"text-responsive-sm opacity-80",children:"Tenha um dia produtivo e cheio de sucesso!"})]}),a.jsx("div",{className:"absolute -right-4 sm:-right-8 -top-4 sm:-top-8 h-16 w-16 sm:h-32 sm:w-32 rounded-full bg-white/10"}),a.jsx("div",{className:"absolute -bottom-6 sm:-bottom-12 -left-6 sm:-left-12 h-20 w-20 sm:h-40 sm:w-40 rounded-full bg-white/5"})]}),a.jsxs("div",{className:"grid-responsive-3",children:[a.jsxs(F,{className:"relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 p-responsive-sm",children:[a.jsx(se,{className:"text-responsive-xs font-medium text-muted-foreground",children:"Agendamentos Hoje"}),a.jsx(Ee,{className:"h-4 w-4 text-primary flex-shrink-0"})]}),a.jsxs(q,{className:"p-responsive-sm pt-0",children:[a.jsx("div",{className:"text-responsive-xl font-bold text-foreground",children:w.length}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:w.length===0?"Nenhum agendamento hoje":"clientes agendados"})]}),a.jsx("div",{className:"absolute -right-2 -top-2 h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-gradient-to-br from-primary/10 to-transparent"})]}),a.jsxs(F,{className:"relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 p-responsive-sm",children:[a.jsx(se,{className:"text-responsive-xs font-medium text-muted-foreground",children:"Total Recebido Hoje"}),a.jsx(dt,{className:"h-4 w-4 text-green-600 flex-shrink-0"})]}),a.jsxs(q,{className:"p-responsive-sm pt-0",children:[a.jsx("div",{className:"text-responsive-xl font-bold text-green-600",children:C(j)}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"Servios concludos"})]}),a.jsx("div",{className:"absolute -right-2 -top-2 h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-gradient-to-br from-green-500/10 to-transparent"})]}),a.jsxs(F,{className:"relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm sm:col-span-1 col-span-full",children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 p-responsive-sm",children:[a.jsx(se,{className:"text-responsive-xs font-medium text-muted-foreground",children:"Agendamentos de Amanh"}),a.jsx(st,{className:"h-4 w-4 text-lilac-primary flex-shrink-0"})]}),a.jsx(q,{className:"p-responsive-sm pt-0",children:_.length>0?a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"text-responsive-lg font-bold text-foreground",children:[_.length," agendamento",_.length>1?"s":""]}),a.jsxs("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:[_.slice(0,3).map((A,P)=>a.jsxs("p",{className:"text-responsive-xs text-muted-foreground truncate",children:[A.hora," - ",A.clienteNome]},A.id)),_.length>3&&a.jsxs("p",{className:"text-responsive-xs text-muted-foreground",children:["+",_.length-3," mais"]})]})]}):a.jsxs("div",{children:[a.jsx("div",{className:"text-responsive-lg font-bold text-foreground",children:"Sem agendamentos"}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"para amanh"})]})}),a.jsx("div",{className:"absolute -right-2 -top-2 h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-gradient-to-br from-lilac-primary/10 to-transparent"})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"p-responsive flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-primary to-lilac-primary flex-shrink-0",children:a.jsx(MP,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(se,{className:"text-responsive-lg",children:"Assistente inteligente"}),a.jsx(ke,{className:"text-responsive-sm",children:"Sugestes em tempo real sobre clientes, agenda e financeiro."})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"IA ativa"}),a.jsx(Mt,{checked:f.ativo,onCheckedChange:A=>h(P=>({...P,ativo:A}))})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Mt,{checked:f.permitirNotificacoesIA,onCheckedChange:A=>h(P=>({...P,permitirNotificacoesIA:A})),disabled:!f.ativo}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Alertas inteligentes"})]})]})]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/40 px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium",children:"Anonimizar clientes"}),a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Esconde nomes completos nos insights da IA."})]}),a.jsx(Mt,{checked:f.anonimizarClientes,onCheckedChange:A=>h(P=>({...P,anonimizarClientes:A})),disabled:!f.ativo})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/40 px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium",children:"Consentimento de campanhas"}),a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Usa contatos apenas quando houver consentimento de marketing."})]}),a.jsx(Mt,{checked:f.consentimentoMarketing,onCheckedChange:A=>h(P=>({...P,consentimentoMarketing:A})),disabled:!f.ativo})]})]})]}),a.jsx(q,{className:"p-responsive pt-0 space-y-4",children:f.ativo?$.length===0?a.jsx("div",{className:"flex items-center justify-between rounded-lg border border-dashed px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mr,{className:"h-4 w-4 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Nenhuma recomendao crtica agora"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"A IA continua monitorando seus dados em tempo real."})]})]})}):a.jsx("div",{className:"space-y-3",children:$.map(A=>a.jsx(F,{className:"border-border/70 bg-background/60",children:a.jsxs(q,{className:"p-3 sm:p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[A.impacto==="alto"?a.jsx(Nr,{className:"h-4 w-4 text-destructive"}):a.jsx(Mr,{className:"h-4 w-4 text-primary"}),a.jsx("h3",{className:"text-sm font-semibold",children:A.titulo})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:A.descricao})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsxs(pe,{variant:"outline",className:"text-[10px] uppercase tracking-wide",children:[A.area==="clientes"&&"Clientes",A.area==="financeiro"&&"Financeiro",A.area==="marketing"&&"Marketing",A.area==="operacional"&&"Operacional"]}),a.jsx(pe,{className:"mt-1 text-[10px]",children:A.impacto==="alto"?"Impacto alto":A.impacto==="medio"?"Impacto mdio":"Impacto baixo"})]})]}),A.id==="clientes-inativos-30d"&&A.dados&&Array.isArray(A.dados.clientes)&&a.jsxs("div",{className:"rounded-md bg-muted/40 p-2 space-y-1",children:[a.jsx("p",{className:"mb-1 text-[11px] font-medium text-muted-foreground",children:"Alguns clientes em risco:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:A.dados.clientes.slice(0,6).map(P=>a.jsxs("span",{className:"inline-flex items-center rounded-full bg-background px-2 py-1 text-[11px] border",children:[P.nome||"Cliente",P.diasSemAgendar!=null?`  ${P.diasSemAgendar} dias`:""]},P.id))})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(B,{size:"xs",className:"text-[11px]",onClick:()=>{A.tipoAcao==="campanha_reengajamento"?r("/marketing"):A.tipoAcao==="otimizacao_gastos"||A.tipoAcao==="precificacao_dinamica"?r("/financeiro"):A.tipoAcao==="aumento_ticket_medio"&&r("/agendamentos")},children:"Aplicar recomendao"}),A.id==="clientes-inativos-30d"&&a.jsx(B,{size:"xs",variant:"outline",className:"text-[11px]",onClick:()=>{const P=f.consentimentoMarketing?"Oi, tudo bem? Sentimos sua falta aqui no salo! Preparamos uma condio especial para voc voltar a se cuidar com a gente. Responda esta mensagem para conhecer a oferta exclusiva desta semana.":"Identificamos clientes em risco de churn. Antes de contat-los, confirme que possui consentimento para envio de campanhas de marketing.";navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(P).then(()=>{V.success("Modelo de mensagem copiado para a rea de transferncia.")}).catch(()=>{V.success("Modelo sugerido: "+P)}):V.success("Modelo sugerido: "+P)},children:"Gerar mensagem sugerida"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center rounded-full border px-2 py-1 text-[11px] text-muted-foreground hover:bg-muted/60",onClick:()=>m(A.id,!0),children:[a.jsx(cF,{className:"mr-1 h-3 w-3"}),"til"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center rounded-full border px-2 py-1 text-[11px] text-muted-foreground hover:bg-muted/60",onClick:()=>m(A.id,!1),children:[a.jsx(iF,{className:"mr-1 h-3 w-3"}),"No ajudou"]})]})]})]})},A.id))}):a.jsx("div",{className:"flex items-center justify-between rounded-lg border border-dashed px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mr,{className:"h-4 w-4 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Ative o assistente inteligente"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Acompanhe automaticamente oportunidades e riscos do seu salo."})]})]})})})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(wr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0"}),"Aes Rpidas"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Acesse rapidamente as funcionalidades mais usadas"})]}),a.jsx(q,{className:"p-responsive pt-0",children:a.jsxs("div",{className:"grid-responsive-3",children:[a.jsxs(B,{onClick:()=>r("/agendamentos"),className:"btn-touch h-16 sm:h-20 flex-col gap-2 bg-gradient-to-br from-primary to-lilac-primary text-white text-responsive-xs sm:text-responsive-sm",size:"lg",children:[a.jsx(Ee,{className:"h-5 w-5 sm:h-6 sm:w-6"}),a.jsx("span",{children:"Novo Agendamento"})]}),a.jsxs(B,{onClick:()=>r("/clientes"),className:"btn-touch h-16 sm:h-20 flex-col gap-2 bg-gradient-to-br from-lilac-primary to-pink-accent text-white text-responsive-xs sm:text-responsive-sm",size:"lg",children:[a.jsx(Vy,{className:"h-5 w-5 sm:h-6 sm:w-6"}),a.jsx("span",{children:"Novo Cliente"})]}),a.jsxs(B,{onClick:()=>r("/financeiro"),className:"btn-touch h-16 sm:h-20 flex-col gap-2 bg-gradient-to-br from-pink-accent to-lavender text-white text-responsive-xs sm:text-responsive-sm",size:"lg",children:[a.jsx(LP,{className:"h-5 w-5 sm:h-6 sm:w-6"}),a.jsx("span",{children:"Nova Entrada/Sada"})]})]})})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(Ut,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0"}),"Faturamento dos ltimos 7 Dias"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Acompanhe seu desempenho semanal"})]}),a.jsx(q,{className:"p-responsive pt-0",children:a.jsx("div",{className:"h-48 sm:h-64 overflow-responsive",children:a.jsx(mo,{width:"100%",height:"100%",minWidth:300,children:a.jsxs(Th,{data:S,children:[a.jsx(es,{dataKey:"dia",axisLine:!1,tickLine:!1,className:"text-muted-foreground text-xs",tick:{fontSize:12}}),a.jsx(ts,{axisLine:!1,tickLine:!1,className:"text-muted-foreground text-xs",tickFormatter:A=>`R$ ${A}`,tick:{fontSize:12},width:60}),a.jsx(yr,{formatter:A=>[C(A),"Faturamento"],labelStyle:{color:"hsl(var(--foreground))"},contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"}}),a.jsx(na,{dataKey:"valor",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(mn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0"}),"Prximo Cliente"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Seu prximo atendimento de hoje"})]}),a.jsx(q,{className:"p-responsive pt-0",children:N?a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-gradient-to-r from-primary/5 to-lilac-light/5 border border-primary/10",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-primary to-lilac-primary flex-shrink-0",children:a.jsx(st,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-responsive-lg font-bold text-foreground truncate",children:N.clienteNome}),a.jsxs("p",{className:"text-responsive-sm text-muted-foreground",children:[N.hora," - ",N.servicoNome]}),a.jsxs("p",{className:"text-responsive-xs text-muted-foreground",children:["Valor: ",C(N.valor)]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(st,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),a.jsx("p",{className:"text-responsive-lg font-medium text-muted-foreground",children:"Sem prximos atendimentos hoje"}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"Voc pode descansar ou aproveitar para outras atividades"})]})})]}),w.length>0&&a.jsx(F,{className:"border-border/50 bg-gradient-to-r from-primary/5 to-lilac-light/5",children:a.jsx(q,{className:"p-responsive",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-full bg-gradient-to-br from-primary to-lilac-primary flex-shrink-0",children:a.jsx(Mr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("p",{className:"font-semibold text-foreground text-responsive-sm",children:["Voc j atendeu ",n.filter(A=>A.data===b&&A.status==="concluido").length," de ",w.length," clientes hoje!"]}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"Continue assim, voc est indo muito bem! "})]})]})})})]})}catch(r){return console.error("Dashboard: Erro durante renderizao:",r),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erro no Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Verifique o console para mais detalhes"})]})})}}function gme(e,t=[]){let r=[];function n(o,i){const c=x.createContext(i),l=r.length;r=[...r,i];function d(f){const{scope:h,children:p,...v}=f,m=h?.[e][l]||c,g=x.useMemo(()=>v,Object.values(v));return a.jsx(m.Provider,{value:g,children:p})}function u(f,h){const p=h?.[e][l]||c,v=x.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=r.map(i=>x.createContext(i));return function(c){const l=c?.[e]||o;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,vme(s,...t)]}function vme(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...c,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var Ug="rovingFocusGroup.onEntryFocus",xme={bubbles:!1,cancelable:!0},Pp="RovingFocusGroup",[vy,XT,yme]=bp(Pp),[bme,Ap]=gme(Pp,[yme]),[jme,wme]=bme(Pp),JT=x.forwardRef((e,t)=>a.jsx(vy.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(vy.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Nme,{...e,ref:t})})}));JT.displayName=Pp;var Nme=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,h=x.useRef(null),p=He(t,h),v=Vc(o),[m=null,g]=ka({prop:i,defaultProp:c,onChange:l}),[y,b]=x.useState(!1),w=ir(d),j=XT(r),N=x.useRef(!1),[_,S]=x.useState(0);return x.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(Ug,w),()=>C.removeEventListener(Ug,w)},[w]),a.jsx(jme,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:m,onItemFocus:x.useCallback(C=>g(C),[g]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>S(C=>C-1),[]),children:a.jsx($e.div,{tabIndex:y||_===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:je(e.onMouseDown,()=>{N.current=!0}),onFocus:je(e.onFocus,C=>{const k=!N.current;if(C.target===C.currentTarget&&k&&!y){const $=new CustomEvent(Ug,xme);if(C.currentTarget.dispatchEvent($),!$.defaultPrevented){const A=j().filter(T=>T.focusable),P=A.find(T=>T.active),O=A.find(T=>T.id===m),R=[P,O,...A].filter(Boolean).map(T=>T.ref.current);t$(R,u)}}N.current=!1}),onBlur:je(e.onBlur,()=>b(!1))})})}),QT="RovingFocusGroupItem",e$=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,...i}=e,c=Sn(),l=o||c,d=wme(QT,r),u=d.currentTabStopId===l,f=XT(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=d;return x.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),a.jsx(vy.ItemSlot,{scope:r,id:l,focusable:n,active:s,children:a.jsx($e.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:je(e.onMouseDown,v=>{n?d.onItemFocus(l):v.preventDefault()}),onFocus:je(e.onFocus,()=>d.onItemFocus(l)),onKeyDown:je(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const m=Cme(v,d.orientation,d.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=f().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();const b=y.indexOf(v.currentTarget);y=d.loop?Pme(y,b+1):y.slice(b+1)}setTimeout(()=>t$(y))}})})})});e$.displayName=QT;var _me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sme(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Cme(e,t,r){const n=Sme(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return _me[n]}function t$(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Pme(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var r$=JT,n$=e$,S0="Tabs",[Ame]=ia(S0,[Ap]),a$=Ap(),[kme,C0]=Ame(S0),s$=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:l="automatic",...d}=e,u=Vc(c),[f,h]=ka({prop:n,onChange:s,defaultProp:o});return a.jsx(kme,{scope:r,baseId:Sn(),value:f,onValueChange:h,orientation:i,dir:u,activationMode:l,children:a.jsx($e.div,{dir:u,"data-orientation":i,...d,ref:t})})});s$.displayName=S0;var o$="TabsList",i$=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=C0(o$,r),i=a$(r);return a.jsx(r$,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:a.jsx($e.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});i$.displayName=o$;var c$="TabsTrigger",l$=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,i=C0(c$,r),c=a$(r),l=f$(i.baseId,n),d=h$(i.baseId,n),u=n===i.value;return a.jsx(n$,{asChild:!0,...c,focusable:!s,active:u,children:a.jsx($e.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:t,onMouseDown:je(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(n):f.preventDefault()}),onKeyDown:je(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(n)}),onFocus:je(e.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!s&&f&&i.onValueChange(n)})})})});l$.displayName=c$;var d$="TabsContent",u$=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...i}=e,c=C0(d$,r),l=f$(c.baseId,n),d=h$(c.baseId,n),u=n===c.value,f=x.useRef(u);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),a.jsx(Ar,{present:s||u,children:({present:h})=>a.jsx($e.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});u$.displayName=d$;function f$(e,t){return`${e}-trigger-${t}`}function h$(e,t){return`${e}-content-${t}`}var Eme=s$,m$=i$,p$=l$,g$=u$;const Ia=Eme,ua=x.forwardRef(({className:e,...t},r)=>a.jsx(m$,{ref:r,className:te("inline-flex h-12 sm:h-10 items-center justify-start sm:justify-center rounded-md bg-muted p-1 text-muted-foreground overflow-x-auto scrollbar-hide w-full",e),...t}));ua.displayName=m$.displayName;const rt=x.forwardRef(({className:e,...t},r)=>a.jsx(p$,{ref:r,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-4 sm:px-3 py-2 sm:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm min-h-[44px] sm:min-h-0 flex-shrink-0",e),...t}));rt.displayName=p$.displayName;const nt=x.forwardRef(({className:e,...t},r)=>a.jsx(g$,{ref:r,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));nt.displayName=g$.displayName;const fr=x.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:te("flex min-h-[100px] sm:min-h-[80px] w-full rounded-md border border-input bg-background px-3 sm:px-4 py-3 sm:py-2 text-base sm:text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",e),ref:r,...t}));fr.displayName="Textarea";function Ome(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var P0="ScrollArea",[v$]=ia(P0),[Tme,Ln]=v$(P0),x$=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=e,[c,l]=x.useState(null),[d,u]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,g]=x.useState(null),[y,b]=x.useState(0),[w,j]=x.useState(0),[N,_]=x.useState(!1),[S,C]=x.useState(!1),k=He(t,A=>l(A)),$=Vc(s);return a.jsx(Tme,{scope:r,type:n,dir:$,scrollHideDelay:o,scrollArea:c,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:j,children:a.jsx($e.div,{dir:$,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});x$.displayName=P0;var y$="ScrollAreaViewport",b$=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:o,...i}=e,c=Ln(y$,r),l=x.useRef(null),d=He(t,l,c.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),a.jsx($e.div,{"data-radix-scroll-area-viewport":"",...i,asChild:s,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Vme({asChild:s,children:n},u=>a.jsx("div",{"data-radix-scroll-area-content":"",ref:c.onContentChange,style:{minWidth:c.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});b$.displayName=y$;var Ra="ScrollAreaScrollbar",A0=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ln(Ra,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,c=e.orientation==="horizontal";return x.useEffect(()=>(c?o(!0):i(!0),()=>{c?o(!1):i(!1)}),[c,o,i]),s.type==="hover"?a.jsx($me,{...n,ref:t,forceMount:r}):s.type==="scroll"?a.jsx(Mme,{...n,ref:t,forceMount:r}):s.type==="auto"?a.jsx(j$,{...n,ref:t,forceMount:r}):s.type==="always"?a.jsx(k0,{...n,ref:t}):null});A0.displayName=Ra;var $me=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ln(Ra,e.__scopeScrollArea),[o,i]=x.useState(!1);return x.useEffect(()=>{const c=s.scrollArea;let l=0;if(c){const d=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Ar,{present:r||o,children:a.jsx(j$,{"data-state":o?"visible":"hidden",...n,ref:t})})}),Mme=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ln(Ra,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Ep(()=>l("SCROLL_END"),100),[c,l]=Ome("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,s.scrollHideDelay,l]),x.useEffect(()=>{const d=s.viewport,u=o?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const p=d[u];f!==p&&(l("SCROLL"),i()),f=p};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,o,l,i]),a.jsx(Ar,{present:r||c!=="hidden",children:a.jsx(k0,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:je(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:je(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),j$=x.forwardRef((e,t)=>{const r=Ln(Ra,e.__scopeScrollArea),{forceMount:n,...s}=e,[o,i]=x.useState(!1),c=e.orientation==="horizontal",l=Ep(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;i(c?d:u)}},10);return oc(r.viewport,l),oc(r.content,l),a.jsx(Ar,{present:n||o,children:a.jsx(k0,{"data-state":o?"visible":"hidden",...s,ref:t})})}),k0=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Ln(Ra,e.__scopeScrollArea),o=x.useRef(null),i=x.useRef(0),[c,l]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=C$(c.viewport,c.content),u={...n,sizes:c,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function f(h,p){return zme(h,i.current,c,p)}return r==="horizontal"?a.jsx(Dme,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=MS(h,c,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,s.dir))}}):r==="vertical"?a.jsx(Ime,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=MS(h,c);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),Dme=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=Ln(Ra,e.__scopeScrollArea),[i,c]=x.useState(),l=x.useRef(null),d=He(t,l,o.onScrollbarXChange);return x.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),a.jsx(N$,{"data-orientation":"horizontal",...s,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":kp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),A$(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Dh(i.paddingLeft),paddingEnd:Dh(i.paddingRight)}})}})}),Ime=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=Ln(Ra,e.__scopeScrollArea),[i,c]=x.useState(),l=x.useRef(null),d=He(t,l,o.onScrollbarYChange);return x.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),a.jsx(N$,{"data-orientation":"vertical",...s,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":kp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),A$(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Dh(i.paddingTop),paddingEnd:Dh(i.paddingBottom)}})}})}),[Rme,w$]=v$(Ra),N$=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=e,p=Ln(Ra,r),[v,m]=x.useState(null),g=He(t,k=>m(k)),y=x.useRef(null),b=x.useRef(""),w=p.viewport,j=n.content-n.viewport,N=ir(u),_=ir(l),S=Ep(f,10);function C(k){if(y.current){const $=k.clientX-y.current.left,A=k.clientY-y.current.top;d({x:$,y:A})}}return x.useEffect(()=>{const k=$=>{const A=$.target;v?.contains(A)&&N($,j)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,v,j,N]),x.useEffect(_,[n,_]),oc(v,S),oc(p.content,S),a.jsx(Rme,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:ir(o),onThumbPointerUp:ir(i),onThumbPositionChange:_,onThumbPointerDown:ir(c),children:a.jsx($e.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:je(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(k))}),onPointerMove:je(e.onPointerMove,C),onPointerUp:je(e.onPointerUp,k=>{const $=k.target;$.hasPointerCapture(k.pointerId)&&$.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Mh="ScrollAreaThumb",_$=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=w$(Mh,e.__scopeScrollArea);return a.jsx(Ar,{present:r||s.hasThumb,children:a.jsx(Lme,{ref:t,...n})})}),Lme=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,o=Ln(Mh,r),i=w$(Mh,r),{onThumbPositionChange:c}=i,l=He(t,f=>i.onThumbChange(f)),d=x.useRef(),u=Ep(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const f=o.viewport;if(f){const h=()=>{if(u(),!d.current){const p=Bme(f,c);d.current=p,c()}};return c(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[o.viewport,u,c]),a.jsx($e.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:je(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),v=f.clientX-p.left,m=f.clientY-p.top;i.onThumbPointerDown({x:v,y:m})}),onPointerUp:je(e.onPointerUp,i.onThumbPointerUp)})});_$.displayName=Mh;var E0="ScrollAreaCorner",S$=x.forwardRef((e,t)=>{const r=Ln(E0,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(Fme,{...e,ref:t}):null});S$.displayName=E0;var Fme=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Ln(E0,r),[o,i]=x.useState(0),[c,l]=x.useState(0),d=!!(o&&c);return oc(s.scrollbarX,()=>{const u=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(u),l(u)}),oc(s.scrollbarY,()=>{const u=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(u),i(u)}),d?a.jsx($e.div,{...n,ref:t,style:{width:o,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Dh(e){return e?parseInt(e,10):0}function C$(e,t){const r=e/t;return isNaN(r)?0:r}function kp(e){const t=C$(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function zme(e,t,r,n="ltr"){const s=kp(r),o=s/2,i=t||o,c=s-i,l=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-c,u=r.content-r.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return P$([l,d],f)(e)}function MS(e,t,r="ltr"){const n=kp(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,i=t.content-t.viewport,c=o-n,l=r==="ltr"?[0,i]:[i*-1,0],d=Sd(e,l);return P$([0,i],[0,c])(d)}function P$(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function A$(e,t){return e>0&&e<t}var Bme=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,c=r.top!==o.top;(i||c)&&t(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Ep(e,t){const r=ir(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function oc(e,t){const r=ir(t);_r(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}function Vme(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const s=x.Children.only(n);return x.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var k$=x$,Ume=b$,qme=S$;const Op=x.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(k$,{ref:n,className:te("relative overflow-hidden",e),...r,children:[a.jsx(Ume,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(O0,{}),a.jsx(qme,{})]}));Op.displayName=k$.displayName;const O0=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>a.jsx(A0,{ref:n,orientation:t,className:te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(_$,{className:"relative flex-1 rounded-full bg-border"})}));O0.displayName=A0.displayName;function Ze(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function pn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function xr(e,t){const r=Ze(e);return isNaN(t)?pn(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function gn(e,t){const r=Ze(e);if(isNaN(t))return pn(e,NaN);if(!t)return r;const n=r.getDate(),s=pn(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const o=s.getDate();return n>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const T0=6048e5,Wme=864e5;let Hme={};function su(){return Hme}function vn(e,t){const r=su(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ze(e),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Io(e){return vn(e,{weekStartsOn:1})}function E$(e){const t=Ze(e),r=t.getFullYear(),n=pn(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Io(n),o=pn(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=Io(o);return t.getTime()>=s.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function ic(e){const t=Ze(e);return t.setHours(0,0,0,0),t}function Ih(e){const t=Ze(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ja(e,t){const r=ic(e),n=ic(t),s=+r-Ih(r),o=+n-Ih(n);return Math.round((s-o)/Wme)}function Gme(e){const t=E$(e),r=pn(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Io(r)}function Cd(e,t){const r=t*7;return xr(e,r)}function Kme(e,t){return gn(e,t*12)}function Yme(e){let t;return e.forEach(function(r){const n=Ze(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function Zme(e){let t;return e.forEach(r=>{const n=Ze(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Br(e,t){const r=ic(e),n=ic(t);return+r==+n}function $0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Xme(e){if(!$0(e)&&typeof e!="number")return!1;const t=Ze(e);return!isNaN(Number(t))}function Pd(e,t){const r=Ze(e),n=Ze(t),s=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return s*12+o}function Jme(e,t,r){const n=vn(e,r),s=vn(t,r),o=+n-Ih(n),i=+s-Ih(s);return Math.round((o-i)/T0)}function Za(e){const t=Ze(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function O$(e,t){const r=Ze(e.start),n=Ze(e.end);let s=+r>+n;const o=s?+r:+n,i=s?n:r;i.setHours(0,0,0,0);let c=1;const l=[];for(;+i<=o;)l.push(Ze(i)),i.setDate(i.getDate()+c),i.setHours(0,0,0,0);return s?l.reverse():l}function Qme(e){const t=Ze(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function Qt(e){const t=Ze(e);return t.setDate(1),t.setHours(0,0,0,0),t}function epe(e){const t=Ze(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function M0(e){const t=Ze(e),r=pn(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Hc(e,t){const r=su(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ze(e),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function T$(e){return Hc(e,{weekStartsOn:1})}function tpe(e){const t=Ze(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}const rpe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},npe=(e,t,r)=>{let n;const s=rpe[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Pi(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ape={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},spe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ope={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ipe={date:Pi({formats:ape,defaultWidth:"full"}),time:Pi({formats:spe,defaultWidth:"full"}),dateTime:Pi({formats:ope,defaultWidth:"full"})},cpe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lpe=(e,t,r,n)=>cpe[e];function va(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,c=r?.width?String(r.width):i;s=e.formattingValues[c]||e.formattingValues[i]}else{const i=e.defaultWidth,c=r?.width?String(r.width):e.defaultWidth;s=e.values[c]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const dpe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},upe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fpe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hpe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ppe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gpe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},vpe={ordinalNumber:gpe,era:va({values:dpe,defaultWidth:"wide"}),quarter:va({values:upe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:va({values:fpe,defaultWidth:"wide"}),day:va({values:hpe,defaultWidth:"wide"}),dayPeriod:va({values:mpe,defaultWidth:"wide",formattingValues:ppe,defaultFormattingWidth:"wide"})};function xa(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?ype(c,f=>f.test(i)):xpe(c,f=>f.test(i));let d;d=e.valueCallback?e.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function xpe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function ype(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function $$(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const c=t.slice(s.length);return{value:i,rest:c}}}const bpe=/^(\d+)(th|st|nd|rd)?/i,jpe=/\d+/i,wpe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Npe={any:[/^b/i,/^(a|c)/i]},_pe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Spe={any:[/1/i,/2/i,/3/i,/4/i]},Cpe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ppe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ape={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kpe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Epe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ope={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tpe={ordinalNumber:$$({matchPattern:bpe,parsePattern:jpe,valueCallback:e=>parseInt(e,10)}),era:xa({matchPatterns:wpe,defaultMatchWidth:"wide",parsePatterns:Npe,defaultParseWidth:"any"}),quarter:xa({matchPatterns:_pe,defaultMatchWidth:"wide",parsePatterns:Spe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xa({matchPatterns:Cpe,defaultMatchWidth:"wide",parsePatterns:Ppe,defaultParseWidth:"any"}),day:xa({matchPatterns:Ape,defaultMatchWidth:"wide",parsePatterns:kpe,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:Epe,defaultMatchWidth:"any",parsePatterns:Ope,defaultParseWidth:"any"})},M$={code:"en-US",formatDistance:npe,formatLong:ipe,formatRelative:lpe,localize:vpe,match:Tpe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $pe(e){const t=Ze(e);return ja(t,M0(t))+1}function D$(e){const t=Ze(e),r=+Io(t)-+Gme(t);return Math.round(r/T0)+1}function I$(e,t){const r=Ze(e),n=r.getFullYear(),s=su(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=pn(e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const c=vn(i,t),l=pn(e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const d=vn(l,t);return r.getTime()>=c.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function Mpe(e,t){const r=su(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=I$(e,t),o=pn(e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),vn(o,t)}function R$(e,t){const r=Ze(e),n=+vn(r,t)-+Mpe(r,t);return Math.round(n/T0)+1}function gt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const gs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return gt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):gt(r+1,2)},d(e,t){return gt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return gt(e.getHours()%12||12,t.length)},H(e,t){return gt(e.getHours(),t.length)},m(e,t){return gt(e.getMinutes(),t.length)},s(e,t){return gt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return gt(s,t.length)}},ui={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DS={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return gs.y(e,t)},Y:function(e,t,r,n){const s=I$(e,n),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return gt(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):gt(o,t.length)},R:function(e,t){const r=E$(e);return gt(r,t.length)},u:function(e,t){const r=e.getFullYear();return gt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return gt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return gt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return gs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return gt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=R$(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):gt(s,t.length)},I:function(e,t,r){const n=D$(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):gt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):gs.d(e,t)},D:function(e,t,r){const n=$pe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):gt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return gt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return gt(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return gt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=ui.noon:n===0?s=ui.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=ui.evening:n>=12?s=ui.afternoon:n>=4?s=ui.morning:s=ui.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return gs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):gs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):gt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):gs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):gs.s(e,t)},S:function(e,t){return gs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return RS(n);case"XXXX":case"XX":return co(n);case"XXXXX":case"XXX":default:return co(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return RS(n);case"xxxx":case"xx":return co(n);case"xxxxx":case"xxx":default:return co(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IS(n,":");case"OOOO":default:return"GMT"+co(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IS(n,":");case"zzzz":default:return"GMT"+co(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return gt(n,t.length)},T:function(e,t,r){const n=e.getTime();return gt(n,t.length)}};function IS(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+t+gt(o,2)}function RS(e,t){return e%60===0?(e>0?"-":"+")+gt(Math.abs(e)/60,2):co(e,t)}function co(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=gt(Math.trunc(n/60),2),o=gt(n%60,2);return r+s+t+o}const LS=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},L$=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Dpe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return LS(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",LS(n,t)).replace("{{time}}",L$(s,t))},Ipe={p:L$,P:Dpe},Rpe=/^D+$/,Lpe=/^Y+$/,Fpe=["D","DD","YY","YYYY"];function zpe(e){return Rpe.test(e)}function Bpe(e){return Lpe.test(e)}function Vpe(e,t,r){const n=Upe(e,t,r);if(console.warn(n),Fpe.includes(e))throw new RangeError(n)}function Upe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wpe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hpe=/^'([^]*?)'?$/,Gpe=/''/g,Kpe=/[a-zA-Z]/;function Me(e,t,r){const n=su(),s=r?.locale??n.locale??M$,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=Ze(e);if(!Xme(c))throw new RangeError("Invalid time value");let l=t.match(Wpe).map(u=>{const f=u[0];if(f==="p"||f==="P"){const h=Ipe[f];return h(u,s.formatLong)}return u}).join("").match(qpe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:Ype(u)};if(DS[f])return{isToken:!0,value:u};if(f.match(Kpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(c,l));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const f=u.value;(!r?.useAdditionalWeekYearTokens&&Bpe(f)||!r?.useAdditionalDayOfYearTokens&&zpe(f))&&Vpe(f,t,String(e));const h=DS[f[0]];return h(c,f,s.localize,d)}).join("")}function Ype(e){const t=e.match(Hpe);return t?t[1].replace(Gpe,"'"):e}function Zpe(e){const t=Ze(e),r=t.getFullYear(),n=t.getMonth(),s=pn(e,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function Xpe(e){return Math.trunc(+Ze(e)/1e3)}function Jpe(e){const t=Ze(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Qpe(e,t){return Jme(Jpe(e),Qt(e),t)+1}function xy(e,t){const r=Ze(e),n=Ze(t);return r.getTime()>n.getTime()}function F$(e,t){const r=Ze(e),n=Ze(t);return+r<+n}function Tp(e,t){const r=Ze(e),n=Ze(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function ege(e,t){const r=Ze(e),n=Ze(t);return r.getFullYear()===n.getFullYear()}function Gu(e,t){const r=+Ze(e),[n,s]=[+Ze(t.start),+Ze(t.end)].sort((o,i)=>o-i);return r>=n&&r<=s}function df(e,t){return xr(e,-t)}function qg(e,t){const r=Ze(e),n=r.getFullYear(),s=r.getDate(),o=pn(e,0);o.setFullYear(n,t,15),o.setHours(0,0,0,0);const i=Zpe(o);return r.setMonth(t,Math.min(s,i)),r}function FS(e,t){const r=Ze(e);return isNaN(+r)?pn(e,NaN):(r.setFullYear(t),r)}function z$(e,t){return gn(e,-t)}function tge(e,t){return Cd(e,-1)}const rge={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},nge=(e,t,r)=>{let n;const s=rge[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",String(t)),r?.addSuffix?r.comparison&&r.comparison>0?"em "+n:"h "+n:n},age={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},sge={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},oge={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ige={date:Pi({formats:age,defaultWidth:"full"}),time:Pi({formats:sge,defaultWidth:"full"}),dateTime:Pi({formats:oge,defaultWidth:"full"})},cge={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},lge=(e,t,r,n)=>{const s=cge[e];return typeof s=="function"?s(t):s},dge={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},uge={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},fge={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},hge={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},mge={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},pge={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},gge=(e,t)=>{const r=Number(e);return t?.unit==="week"?r+"":r+""},vge={ordinalNumber:gge,era:va({values:dge,defaultWidth:"wide"}),quarter:va({values:uge,defaultWidth:"wide",argumentCallback:e=>e-1}),month:va({values:fge,defaultWidth:"wide"}),day:va({values:hge,defaultWidth:"wide"}),dayPeriod:va({values:mge,defaultWidth:"wide",formattingValues:pge,defaultFormattingWidth:"wide"})},xge=/^(\d+)[o]?/i,yge=/\d+/i,bge={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},jge={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},wge={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Nge={any:[/1/i,/2/i,/3/i,/4/i]},_ge={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Sge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Cge={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},Pge={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},Age={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},kge={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Ege={ordinalNumber:$$({matchPattern:xge,parsePattern:yge,valueCallback:e=>parseInt(e,10)}),era:xa({matchPatterns:bge,defaultMatchWidth:"wide",parsePatterns:jge,defaultParseWidth:"any"}),quarter:xa({matchPatterns:wge,defaultMatchWidth:"wide",parsePatterns:Nge,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xa({matchPatterns:_ge,defaultMatchWidth:"wide",parsePatterns:Sge,defaultParseWidth:"any"}),day:xa({matchPatterns:Cge,defaultMatchWidth:"wide",parsePatterns:Pge,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:Age,defaultMatchWidth:"any",parsePatterns:kge,defaultParseWidth:"any"})},Ve={code:"pt-BR",formatDistance:nge,formatLong:ige,formatRelative:lge,localize:vge,match:Ege,options:{weekStartsOn:0,firstWeekContainsDate:1}};function B$(e,t,r){const[n,s]=x.useState({periodo:"mensal",incluirContasFixas:!0,incluirAgendamentos:!0,incluirLancamentos:!0}),o=x.useMemo(()=>{const l=new Date;switch(n.periodo){case"semanal":return{inicio:vn(l,{locale:Ve}),fim:Hc(l,{locale:Ve})};case"mensal":return{inicio:Qt(l),fim:Za(l)};case"trimestral":return{inicio:Qme(l),fim:tpe(l)};case"semestral":const d=l.getMonth()<6?new Date(l.getFullYear(),0,1):new Date(l.getFullYear(),6,1),u=l.getMonth()<6?new Date(l.getFullYear(),5,30):new Date(l.getFullYear(),11,31);return{inicio:d,fim:u};case"anual":return{inicio:M0(l),fim:epe(l)};case"personalizado":return{inicio:n.dataInicio||Qt(l),fim:n.dataFim||Za(l)};default:return{inicio:Qt(l),fim:Za(l)}}},[n.periodo,n.dataInicio,n.dataFim]),i=x.useMemo(()=>{const l=n.incluirLancamentos?e.filter(f=>{const h=new Date(f.data);return Gu(h,{start:o.inicio,end:o.fim})}):[],d=n.incluirContasFixas?t.filter(f=>{if(!f.proximoVencimento)return!1;const h=new Date(f.proximoVencimento);return Gu(h,{start:o.inicio,end:o.fim})}):[],u=n.incluirAgendamentos?r.filter(f=>{const h=new Date(f.data);return Gu(h,{start:o.inicio,end:o.fim})}):[];return{lancamentos:l,contasFixas:d,agendamentos:u}},[e,t,r,o,n]),c=x.useMemo(()=>{const{lancamentos:l,contasFixas:d,agendamentos:u}=i,f=l.filter(_=>_.tipo==="entrada").reduce((_,S)=>_+S.valor,0),h=l.filter(_=>_.tipo==="saida").reduce((_,S)=>_+S.valor,0),p=u.filter(_=>_.statusPagamento==="pago").reduce((_,S)=>_+(S.valorPago||0),0),v=u.filter(_=>_.statusPagamento!=="pago").reduce((_,S)=>_+S.valorDevido,0),m=d.filter(_=>_.status==="pago").reduce((_,S)=>_+S.valor,0),g=d.filter(_=>_.status!=="pago").reduce((_,S)=>_+S.valor,0),y=new Map;u.forEach(_=>{const S="Servio",C=y.get(S)||{quantidade:0,valor:0};y.set(S,{quantidade:C.quantidade+1,valor:C.valor+_.valor})});const b=Array.from(y.entries()).map(([_,S])=>({nome:_,quantidade:S.quantidade,valorTotal:S.valor,percentual:S.valor/(f+p)*100})).sort((_,S)=>S.valorTotal-_.valorTotal).slice(0,5),w=new Map;l.forEach(_=>{const S=_.categoria||"Sem categoria",C=w.get(S)||{entradas:0,saidas:0};_.tipo==="entrada"?C.entradas+=_.valor:C.saidas+=_.valor,w.set(S,C)});const j=Array.from(w.entries()).map(([_,S])=>({categoria:_,entradas:S.entradas,saidas:S.saidas,lucro:S.entradas-S.saidas,percentual:(S.entradas-S.saidas)/(f-h)*100})).sort((_,S)=>S.lucro-_.lucro),N=[];for(let _=5;_>=0;_--){const S=z$(new Date,_),C=Qt(S),k=Za(S),$=e.filter(O=>{const M=new Date(O.data);return Gu(M,{start:C,end:k})}),A=$.filter(O=>O.tipo==="entrada").reduce((O,M)=>O+M.valor,0),P=$.filter(O=>O.tipo==="saida").reduce((O,M)=>O+M.valor,0);N.push({periodo:Me(S,"MMM/yyyy",{locale:Ve}),entradas:A,saidas:P,lucro:A-P})}return{totalEntradas:f+p,totalSaidas:h+m,lucroLiquido:f+p-(h+m),contasAPagar:g,contasRecebidas:p,agendamentosPagos:p,agendamentosAbertos:v,contasFixasPagas:m,contasFixasAbertas:g,servicosMaisVendidos:b,categoriasMaisLucrativas:j,evolucaoMensal:N}},[i,e]);return{filtros:n,setFiltros:s,dadosRelatorio:c,intervaloData:o,dadosFiltrados:i}}function V$({resumo:e}){const t=r=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r);return a.jsxs("div",{className:"grid-responsive-5 animate-fade-in",children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm card-responsive hover-scale transition-all",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-success flex-shrink-0",children:a.jsx(Ut,{className:"h-6 w-6 text-success-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-success truncate",children:t(e.totalEntradas)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Entradas do Ms"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm card-responsive hover-scale transition-all",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-destructive flex-shrink-0",children:a.jsx(Uo,{className:"h-6 w-6 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-destructive truncate",children:t(e.totalSaidas)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Sadas do Ms"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm card-responsive hover-scale transition-all",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl flex-shrink-0 ${e.lucro>=0?"bg-primary":"bg-destructive"}`,children:e.lucro>=0?a.jsx(LP,{className:"h-6 w-6 text-primary-foreground"}):a.jsx(dt,{className:"h-6 w-6 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-responsive-lg font-bold truncate ${e.lucro>=0?"text-primary":"text-destructive"}`,children:t(e.lucro)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:e.lucro>=0?"Lucro do Ms":"Prejuzo do Ms"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm card-responsive hover-scale transition-all",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-warning flex-shrink-0",children:a.jsx(st,{className:"h-4 w-4 text-warning-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-warning truncate",children:t(e.valorEmAberto)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Valor em Aberto"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm card-responsive hover-scale transition-all",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-destructive flex-shrink-0",children:a.jsx(Ld,{className:"h-4 w-4 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-destructive truncate",children:t(e.contasAPagar)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Contas a Pagar"})]})]})})]})}const zS=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff0000","#00ffff","#ff00ff","#ffff00","#000080"];function U$({dados:e}){const t=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),r=[{categoria:"Entradas",valor:e.totalEntradas,cor:"#10b981"},{categoria:"Sadas",valor:e.totalSaidas,cor:"#ef4444"},{categoria:"Lucro",valor:e.lucroLiquido,cor:e.lucroLiquido>=0?"#3b82f6":"#ef4444"}],n=e.categoriasMaisLucrativas.slice(0,5).map((s,o)=>({name:s.categoria,value:Math.abs(s.lucro),lucro:s.lucro,percentual:s.percentual}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Resumo Financeiro"})}),a.jsx(q,{children:a.jsx(mo,{width:"100%",height:300,children:a.jsxs(Th,{data:r,children:[a.jsx(kl,{strokeDasharray:"3 3"}),a.jsx(es,{dataKey:"categoria"}),a.jsx(ts,{tickFormatter:t}),a.jsx(yr,{formatter:s=>t(Number(s))}),a.jsx(_a,{}),a.jsx(na,{dataKey:"valor",fill:"#8884d8",children:r.map((s,o)=>a.jsx(Li,{fill:s.cor},`cell-${o}`))})]})})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Evoluo dos ltimos 6 Meses"})}),a.jsx(q,{children:a.jsx(mo,{width:"100%",height:300,children:a.jsxs(uhe,{data:e.evolucaoMensal,children:[a.jsx(kl,{strokeDasharray:"3 3"}),a.jsx(es,{dataKey:"periodo"}),a.jsx(ts,{tickFormatter:t}),a.jsx(yr,{formatter:s=>t(Number(s))}),a.jsx(_a,{}),a.jsx(cs,{type:"monotone",dataKey:"entradas",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Entradas"}),a.jsx(cs,{type:"monotone",dataKey:"saidas",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Sadas"}),a.jsx(xp,{type:"monotone",dataKey:"lucro",stroke:"#3b82f6",strokeWidth:3,name:"Lucro"})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Categorias Mais Lucrativas"})}),a.jsx(q,{children:a.jsx(mo,{width:"100%",height:300,children:a.jsxs(UO,{children:[a.jsx(Da,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percentual:o})=>`${s}: ${o.toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((s,o)=>a.jsx(Li,{fill:zS[o%zS.length]},`cell-${o}`))}),a.jsx(yr,{formatter:s=>t(Number(s))})]})})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Top 5 Servios"})}),a.jsx(q,{children:a.jsx(mo,{width:"100%",height:300,children:a.jsxs(Th,{data:e.servicosMaisVendidos,layout:"horizontal",margin:{left:50},children:[a.jsx(kl,{strokeDasharray:"3 3"}),a.jsx(es,{type:"number",tickFormatter:t}),a.jsx(ts,{dataKey:"nome",type:"category",width:100}),a.jsx(yr,{formatter:(s,o)=>[o==="valorTotal"?t(Number(s)):s,o==="valorTotal"?"Valor Total":"Quantidade"]}),a.jsx(_a,{}),a.jsx(na,{dataKey:"valorTotal",fill:"#3b82f6",name:"Valor Total"})]})})})]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Detalhamento de Contas"})}),a.jsx(q,{children:a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:t(e.agendamentosPagos)}),a.jsx("div",{className:"text-sm text-green-600",children:"Agendamentos Pagos"})]}),a.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t(e.agendamentosAbertos)}),a.jsx("div",{className:"text-sm text-orange-600",children:"Agendamentos em Aberto"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t(e.contasFixasPagas)}),a.jsx("div",{className:"text-sm text-blue-600",children:"Contas Fixas Pagas"})]}),a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:t(e.contasFixasAbertas)}),a.jsx("div",{className:"text-sm text-red-600",children:"Contas Fixas em Aberto"})]})]})})]})]})}const Oge=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,o]=x.useState([]),[i,c]=x.useState(!1),[l,d]=x.useState(null),u=async()=>{try{c(!0);const{data:N,error:_}=await W.from("relatorios_auditoria").select("*").order("data_execucao",{ascending:!1});if(_)throw _;t(N||[])}catch(N){d(N instanceof Error?N.message:"Erro ao carregar relatrios")}finally{c(!1)}},f=async N=>{try{c(!0);let _=W.from("problemas_auditoria").select("*").order("created_at",{ascending:!1});N&&(_=_.eq("relatorio_id",N));const{data:S,error:C}=await _;if(C)throw C;const k=(S||[]).map($=>({id:$.id,relatorio_id:$.relatorio_id,user_id:$.user_id,categoria:$.categoria,tipo:$.tipo,descricao:$.descricao,entidade:$.entidade,entidade_id:$.entidade_id,campo:$.campo,valor_atual:$.valor_atual,valor_esperado:$.valor_esperado,sugestao:$.sugestao,resolvido:$.resolvido,data_resolucao:$.data_resolucao,created_at:$.created_at,updated_at:$.updated_at}));n(k)}catch(_){d(_ instanceof Error?_.message:"Erro ao carregar problemas")}finally{c(!1)}},h=async N=>{try{c(!0);let _=W.from("logs_sistema").select("*").order("created_at",{ascending:!1});N?.nivel&&(_=_.eq("nivel",N.nivel)),N?.categoria&&(_=_.eq("categoria",N.categoria)),N?.limite?_=_.limit(N.limite):_=_.limit(100);const{data:S,error:C}=await _;if(C)throw C;const k=(S||[]).map($=>({id:$.id,user_id:$.user_id,nivel:$.nivel,categoria:$.categoria,acao:$.acao,descricao:$.descricao,entidade_tipo:$.entidade_tipo,entidade_id:$.entidade_id,metadados:$.metadados,ip_address:$.ip_address,user_agent:$.user_agent,created_at:$.created_at}));o(k)}catch(_){d(_ instanceof Error?_.message:"Erro ao carregar logs")}finally{c(!1)}},p=async N=>{try{const{data:_}=await W.auth.getUser();if(!_.user)throw new Error("Usurio no autenticado");const{data:S,error:C}=await W.from("relatorios_auditoria").insert({user_id:_.user.id,...N}).select().single();if(C)throw C;return await u(),S.id}catch(_){throw d(_ instanceof Error?_.message:"Erro ao criar relatrio"),_}},v=async N=>{try{const{data:_}=await W.auth.getUser();if(!_.user)throw new Error("Usurio no autenticado");const{data:S,error:C}=await W.from("problemas_auditoria").insert({user_id:_.user.id,...N}).select().single();if(C)throw C;return await f(),S}catch(_){throw d(_ instanceof Error?_.message:"Erro ao criar problema"),_}},m=async(N,_)=>{try{const{data:S}=await W.auth.getUser();if(!S.user)throw new Error("Usurio no autenticado");const C=_.map($=>({user_id:S.user.id,relatorio_id:N,...$})),{error:k}=await W.from("problemas_auditoria").insert(C);if(k)throw k;await f()}catch(S){throw d(S instanceof Error?S.message:"Erro ao criar problemas em lote"),S}},g=async N=>{try{const{error:_}=await W.from("problemas_auditoria").update({resolvido:!0,data_resolucao:new Date().toISOString()}).eq("id",N);if(_)throw _;await f()}catch(_){throw d(_ instanceof Error?_.message:"Erro ao resolver problema"),_}},y=async N=>{try{const{data:_}=await W.auth.getUser(),{error:S}=await W.from("logs_sistema").insert({user_id:_.user?.id,...N});if(S)throw S}catch(_){console.error("Erro ao criar log:",_)}},b=async()=>{try{const{data:N,error:_}=await W.from("relatorios_auditoria").select("*").order("data_execucao",{ascending:!1}).limit(1).single();if(_&&_.code!=="PGRST116")throw _;return N||null}catch(N){return d(N instanceof Error?N.message:"Erro ao buscar ltimo relatrio"),null}},w=async()=>{try{const{data:N,error:_}=await W.from("problemas_auditoria").select("*").eq("resolvido",!1).order("created_at",{ascending:!1});if(_)throw _;return(N||[]).map(C=>({id:C.id,relatorio_id:C.relatorio_id,user_id:C.user_id,categoria:C.categoria,tipo:C.tipo,descricao:C.descricao,entidade:C.entidade,entidade_id:C.entidade_id,campo:C.campo,valor_atual:C.valor_atual,valor_esperado:C.valor_esperado,sugestao:C.sugestao,resolvido:C.resolvido,data_resolucao:C.data_resolucao,created_at:C.created_at,updated_at:C.updated_at}))}catch(N){return d(N instanceof Error?N.message:"Erro ao buscar problemas no resolvidos"),[]}},j=async()=>{try{const[N,_]=await Promise.all([W.from("relatorios_auditoria").select("id",{count:"exact"}),W.from("problemas_auditoria").select("id, resolvido",{count:"exact"})]),S=N.count||0,C=_.count||0,{count:k}=await W.from("problemas_auditoria").select("id",{count:"exact"}).eq("resolvido",!1),$=k||0;return{totalRelatorios:S,totalProblemas:C,problemasAbertos:$,problemasResolvidos:C-$}}catch(N){return d(N instanceof Error?N.message:"Erro ao buscar estatsticas gerais"),{totalRelatorios:0,totalProblemas:0,problemasAbertos:0,problemasResolvidos:0}}};return x.useEffect(()=>{u(),h();const N=W.channel("auditoria-realtime").on("postgres_changes",{event:"*",schema:"public",table:"relatorios_auditoria"},()=>{u()}).on("postgres_changes",{event:"*",schema:"public",table:"problemas_auditoria"},()=>{f()}).on("postgres_changes",{event:"*",schema:"public",table:"logs_sistema"},()=>{h()}).subscribe();return()=>{W.removeChannel(N)}},[]),{relatorios:e,problemas:r,logs:s,loading:i,error:l,loadRelatorios:u,loadProblemas:f,loadLogs:h,createRelatorio:p,createProblema:v,createProblemasLote:m,resolverProblema:g,createLog:y,getUltimoRelatorio:b,getProblemasNaoResolvidos:w,getEstatisticasGerais:j}},q$=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,o]=x.useState(!0),[i,c]=x.useState(null),l=async()=>{try{o(!0);const{data:g,error:y}=await W.from("cronogramas_completos").select("*").order("created_at",{ascending:!1});if(y)throw y;const b=(g||[]).map(w=>({id_cronograma:w.id_cronograma,cliente_id:w.cliente_id,cliente_nome:w.cliente_nome,servico_id:w.servico_id,tipo_servico:w.tipo_servico,data_inicio:w.data_inicio,hora_inicio:w.hora_inicio,duracao_minutos:w.duracao_minutos,recorrencia:w.recorrencia,intervalo_dias:w.intervalo_dias,observacoes:w.observacoes,status:w.status,created_at:w.created_at,updated_at:w.updated_at,cliente_nome_real:w.cliente_nome_real,cliente_telefone:w.cliente_telefone,cliente_email:w.cliente_email,servico_nome_real:w.servico_nome_real,servico_valor:w.servico_valor,servico_duracao:w.servico_duracao,total_retornos:w.total_retornos||0,retornos_pendentes:w.retornos_pendentes||0,retornos_realizados:w.retornos_realizados||0,proximo_retorno:w.proximo_retorno}));t(b)}catch(g){c(g instanceof Error?g.message:"Erro ao carregar cronogramas")}finally{o(!1)}},d=async()=>{try{const{data:g,error:y}=await W.from("retornos_completos").select("*").order("data_retorno",{ascending:!0});if(y)throw y;const b=(g||[]).map(w=>({id_retorno:w.id_retorno,id_cliente:w.id_cliente,id_cronograma:w.id_cronograma,data_retorno:w.data_retorno,status:w.status,id_agendamento_retorno:w.id_agendamento_retorno,created_at:w.created_at,updated_at:w.updated_at,cliente_nome:w.cliente_nome,cliente_telefone:w.cliente_telefone,tipo_servico:w.tipo_servico,hora_inicio:w.hora_inicio,recorrencia:w.recorrencia,agendamento_data:w.agendamento_data,agendamento_hora:w.agendamento_hora,agendamento_status:w.agendamento_status}));n(b)}catch(g){c(g instanceof Error?g.message:"Erro ao carregar retornos")}},u=async g=>{try{const{data:y}=await W.auth.getUser();if(!y.user)throw new Error("Usurio no autenticado");const{data:b,error:w}=await W.from("cronogramas_novos").insert({user_id:y.user.id,cliente_id:g.cliente_id,cliente_nome:g.cliente_nome,servico_id:g.servico_id,tipo_servico:g.tipo_servico,data_inicio:g.data_inicio,hora_inicio:g.hora_inicio,duracao_minutos:g.duracao_minutos,recorrencia:g.recorrencia,intervalo_dias:g.intervalo_dias,observacoes:g.observacoes,status:g.status}).select().single();if(w)throw w;return await l(),b}catch(y){throw c(y instanceof Error?y.message:"Erro ao criar cronograma"),y}},f=async(g,y)=>{try{const{error:b}=await W.from("cronogramas_novos").update(y).eq("id_cronograma",g);if(b)throw b;await l()}catch(b){throw c(b instanceof Error?b.message:"Erro ao atualizar cronograma"),b}},h=async g=>{try{const{error:y}=await W.from("cronogramas_novos").delete().eq("id_cronograma",g);if(y)throw y;await l()}catch(y){throw c(y instanceof Error?y.message:"Erro ao deletar cronograma"),y}},p=async g=>{try{const{data:y}=await W.auth.getUser();if(!y.user)throw new Error("Usurio no autenticado");const{data:b,error:w}=await W.from("retornos_novos").insert({user_id:y.user.id,id_cliente:g.id_cliente,id_cronograma:g.id_cronograma,data_retorno:g.data_retorno,status:g.status,id_agendamento_retorno:g.id_agendamento_retorno}).select().single();if(w)throw w;return await d(),b}catch(y){throw c(y instanceof Error?y.message:"Erro ao criar retorno"),y}},v=async(g,y)=>{try{const{error:b}=await W.from("retornos_novos").update(y).eq("id_retorno",g);if(b)throw b;await d()}catch(b){throw c(b instanceof Error?b.message:"Erro ao atualizar retorno"),b}},m=async(g,y,b)=>{try{const{data:w}=await W.auth.getUser();if(!w.user)throw new Error("Usurio no autenticado");const j=r.find(k=>k.id_retorno===g);if(!j)throw new Error("Retorno no encontrado");const{data:N,error:_}=await W.from("cronogramas_novos").select("*, servicos(*)").eq("id_cronograma",j.id_cronograma).single();if(_)throw _;const{data:S,error:C}=await W.from("agendamentos").insert({user_id:w.user.id,cliente_id:j.id_cliente,servico_id:N.servico_id,data:y,hora:b,duracao:N.duracao_minutos,valor:N.servicos?.valor||0,valor_devido:N.servicos?.valor||0,status:"agendado",observacoes:`Retorno do cronograma: ${N.tipo_servico}`}).select().single();if(C)throw C;return await v(g,{status:"Realizado",id_agendamento_retorno:S.id}),S}catch(w){throw c(w instanceof Error?w.message:"Erro ao criar agendamento de retorno"),w}};return x.useEffect(()=>{l(),d();const g=W.channel("cronogramas-realtime").on("postgres_changes",{event:"*",schema:"public",table:"cronogramas_novos"},()=>{l()}).on("postgres_changes",{event:"*",schema:"public",table:"retornos_novos"},()=>{d(),l()}).on("postgres_changes",{event:"*",schema:"public",table:"clientes"},()=>{l()}).on("postgres_changes",{event:"*",schema:"public",table:"servicos"},()=>{l()}).on("postgres_changes",{event:"*",schema:"public",table:"agendamentos"},()=>{d()}).subscribe();return()=>{W.removeChannel(g)}},[]),{cronogramas:e,retornos:r,loading:s,error:i,createCronograma:u,updateCronograma:f,deleteCronograma:h,createRetorno:p,updateRetorno:v,criarAgendamentoDeRetorno:m,loadCronogramas:l,loadRetornos:d}},$p=()=>{const{cronogramas:e,createCronograma:t,updateCronograma:r,deleteCronograma:n,loading:s}=q$();return{cronogramas:e,loading:s,error:null,createCronograma:async l=>await t(l),updateCronograma:async(l,d)=>await r(l,d),deleteCronograma:async l=>await n(l)}},ou=()=>{const{retornos:e,createRetorno:t,updateRetorno:r,loading:n}=q$();return{retornos:e,loading:n,error:null,createRetorno:t,updateRetorno:r,marcarRetornoRealizado:async(d,u)=>{await r(d,{status:"Realizado",id_agendamento_retorno:u})},cancelarRetorno:async d=>{await r(d,{status:"Cancelado"})},getRetornosPendentes:()=>e.filter(d=>d.status==="Pendente"),getRetornosPorCliente:d=>e.filter(u=>u.id_cliente===d),getRetornosPorCronograma:d=>e.filter(u=>u.id_cronograma===d)}};function Tge(){const{createRelatorio:e,createProblemasLote:t,createLog:r}=Oge(),{agendamentosFiltrados:n,clientes:s}=la(),{todosServicos:o}=Cc(),{lancamentos:i}=Pc(),{cronogramas:c}=$p(),{retornos:l}=ou(),d=async()=>{const f=[];let h=1;const p=T=>{f.push({...T,id:(h++).toString()})};await r({nivel:"info",categoria:"auditoria",acao:"inicio_auditoria",descricao:"Iniciando auditoria do sistema",metadados:{totalAgendamentos:n.length,totalClientes:s.length,totalServicos:o.length,totalLancamentos:i.length}}),s.forEach(T=>{(!T.nomeCompleto||T.nomeCompleto.trim()==="")&&p({categoria:"critico",tipo:"dados_incompletos",descricao:"Cliente sem nome",entidade:"cliente",entidadeId:T.id,campo:"nome",valorAtual:T.nomeCompleto,valorEsperado:"Nome vlido",sugestao:"Adicionar nome ao cliente"}),(!T.telefone||T.telefone.trim()==="")&&p({categoria:"critico",tipo:"dados_incompletos",descricao:"Cliente sem telefone",entidade:"cliente",entidadeId:T.id,campo:"telefone",valorAtual:T.telefone,valorEsperado:"Telefone vlido",sugestao:"Adicionar telefone ao cliente"})}),o.forEach(T=>{(!T.nome||T.nome.trim()==="")&&p({categoria:"critico",tipo:"dados_incompletos",descricao:"Servio sem nome",entidade:"servico",entidadeId:T.id,campo:"nome",valorAtual:T.nome,valorEsperado:"Nome vlido",sugestao:"Adicionar nome ao servio"}),T.valor<=0&&p({categoria:"critico",tipo:"dados_inconsistentes",descricao:"Servio com valor invlido",entidade:"servico",entidadeId:T.id,campo:"valor",valorAtual:T.valor,valorEsperado:"Valor > 0",sugestao:"Definir valor vlido para o servio"})}),n.forEach(T=>{T.clienteId||p({categoria:"critico",tipo:"dados_incompletos",descricao:"Agendamento sem cliente",entidade:"agendamento",entidadeId:T.id,campo:"clienteId",valorAtual:T.clienteId,valorEsperado:"ID de cliente vlido",sugestao:"Associar cliente ao agendamento"}),T.valorPago>T.valor&&p({categoria:"alto",tipo:"dados_inconsistentes",descricao:"Valor pago maior que valor total",entidade:"agendamento",entidadeId:T.id,campo:"valorPago",valorAtual:T.valorPago,valorEsperado:`<= ${T.valor}`,sugestao:"Corrigir valores de pagamento"})});const v=n.filter(T=>T.status!=="cancelado");for(let T=0;T<v.length;T++)for(let D=T+1;D<v.length;D++){const I=v[T],U=v[D];if(I.data===U.data){const oe=new Date(`${I.data}T${I.hora}`),J=new Date(oe.getTime()+I.duracao*6e4),ie=new Date(`${U.data}T${U.hora}`),me=new Date(ie.getTime()+U.duracao*6e4);oe<me&&J>ie&&p({categoria:"critico",tipo:"conflito_agendamento",descricao:"Conflito de horrio entre agendamentos",entidade:"agendamento",entidadeId:I.id,campo:"horario",valorAtual:`${I.data} ${I.hora}`,valorEsperado:"Horrio livre",sugestao:`Conflito com agendamento ${U.id} (${U.clienteNome} - ${U.data} ${U.hora})`})}}const m=n.filter(T=>T.status==="agendado"),g=n.filter(T=>T.status==="concluido"),y=n.filter(T=>T.status==="cancelado"),b=i.filter(T=>T.tipo==="entrada").reduce((T,D)=>T+D.valor,0),w=i.filter(T=>T.tipo==="saida").reduce((T,D)=>T+D.valor,0),j=new Set(n.map(T=>T.servicoId)),N=o.filter(T=>!j.has(T.id)),_=new Set,S=new Date;S.setDate(S.getDate()-30),n.forEach(T=>{new Date(T.data)>=S&&_.add(T.clienteId)});const C=s.length-_.size,k=[];N.length>0&&k.push(`${N.length} servios nunca foram agendados. Considere promov-los ou remov-los.`),C>0&&k.push(`${C} clientes no tm agendamentos recentes. Considere uma campanha de reativao.`);const $=f.filter(T=>T.categoria==="critico").length,A=f.filter(T=>T.categoria==="alto").length,P=f.filter(T=>T.categoria==="medio").length,O=f.filter(T=>T.categoria==="baixo").length,M={totalClientes:s.length,totalServicos:o.length,totalAgendamentos:n.length,totalLancamentos:i.length,totalCronogramas:c.length,totalRetornos:l.length,agendamentosAtivos:m.length,agendamentosConcluidos:g.length,agendamentosCancelados:y.length,valorTotalReceitas:b,valorTotalDespesas:w,servicosNuncaUsados:N.length,clientesInativos:C};try{const T=await e({total_problemas:f.length,problemas_criticos:$,problemas_altos:A,problemas_medios:P,problemas_baixos:O,estatisticas:M,sugestoes_melhorias:k});f.length>0&&await t(T,f.map(D=>({categoria:D.categoria,tipo:D.tipo,descricao:D.descricao,entidade:D.entidade,entidade_id:D.entidadeId,campo:D.campo,valor_atual:D.valorAtual?String(D.valorAtual):void 0,valor_esperado:D.valorEsperado?String(D.valorEsperado):void 0,sugestao:D.sugestao}))),await r({nivel:"info",categoria:"auditoria",acao:"fim_auditoria",descricao:`Auditoria concluda: ${f.length} problemas encontrados`,metadados:{totalProblemas:f.length,problemasCriticos:$,problemasAltos:A,problemasMedios:P,problemasBaixos:O}})}catch(T){await r({nivel:"error",categoria:"auditoria",acao:"erro_salvar_relatorio",descricao:"Erro ao salvar relatrio de auditoria",metadados:{error:T instanceof Error?T.message:"Erro desconhecido"}})}return{dataExecucao:new Date().toISOString(),totalProblemas:f.length,problemasCriticos:$,problemasAltos:A,problemasMedios:P,problemasBaixos:O,problemas:f,estatisticas:M,sugestoesMelhorias:k}};return{executarAuditoria:d,exportarRelatorio:async f=>{const h=await d();if(f==="json"){const p=JSON.stringify(h,null,2),v=new Blob([p],{type:"application/json"}),m=URL.createObjectURL(v),g=document.createElement("a");g.href=m,g.download=`relatorio-auditoria-${new Date().toISOString().split("T")[0]}.json`,g.click()}else if(f==="csv"){const p=`Categoria,Tipo,Descrio,Entidade,ID,Campo,Valor Atual,Valor Esperado,Sugesto
`,v=h.problemas.map(b=>`"${b.categoria}","${b.tipo}","${b.descricao}","${b.entidade}","${b.entidadeId}","${b.campo||""}","${b.valorAtual||""}","${b.valorEsperado||""}","${b.sugestao||""}"`).join(`
`),m=new Blob([p+v],{type:"text/csv"}),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,y.download=`relatorio-auditoria-${new Date().toISOString().split("T")[0]}.csv`,y.click()}await r({nivel:"info",categoria:"auditoria",acao:"exportar_relatorio",descricao:`Relatrio exportado em formato ${f}`,metadados:{formato:f,totalProblemas:h.totalProblemas}})}}}function $ge(){const{usuario:e,session:t}=Rt(),{agendamentosFiltrados:r,todosAgendamentos:n}=la(),{lancamentos:s,categorias:o}=Pc(),{contasFixas:i}=B$(s,[],r),{executarAuditoria:c}=Tge(),{notificarAlertaIA:l}=ZT(),[d,u]=x.useState("analises"),[f,h]=x.useState(!1),[p,v]=x.useState({ativo:!0,anonimizarClientes:!0,consentimentoMarketing:!1,permitirNotificacoesIA:!1}),[m,g]=x.useState([]),[y,b]=x.useState(""),[w,j]=x.useState(!1),N=x.useRef(null),_=void 0,S=void 0;x.useEffect(()=>{if(!e?.id)return;const H=localStorage.getItem(`assistente-chat-${e.id}`);if(H)try{const L=JSON.parse(H);g(L)}catch{}else{const L={id:"bem-vindo",autor:"ia",conteudo:"Ol! Eu sou o assistente inteligente do seu salo. Posso explicar seus nmeros, sugerir aes e ajud-lo a decidir prximos passos. O que voc gostaria de analisar hoje?",criadoEm:new Date().toISOString()};g([L])}},[e?.id]),x.useEffect(()=>{if(!e?.id)return;const H=localStorage.getItem(`ia-config-${e.id}`);if(H)try{const L=JSON.parse(H);v(Y=>({...Y,...L}))}catch{}},[e?.id]),x.useEffect(()=>{e?.id&&localStorage.setItem(`assistente-chat-${e.id}`,JSON.stringify(m.slice(-50)))},[m,e?.id]),x.useEffect(()=>{N.current?.scrollIntoView({behavior:"smooth"})},[m,w]),p.ativo;const C=x.useMemo(()=>{const H=s.filter(Ce=>Ce.tipo==="entrada"),L=s.filter(Ce=>Ce.tipo==="saida"),Y=H.reduce((Ce,bt)=>Ce+bt.valor,0),Q=L.reduce((Ce,bt)=>Ce+bt.valor,0),Z=Y-Q,ce=new Date,fe=new Date;fe.setDate(ce.getDate()-30);const X=H.filter(Ce=>Ce.data>=fe),De=L.filter(Ce=>Ce.data>=fe),ve=X.reduce((Ce,bt)=>Ce+bt.valor,0),Be=De.reduce((Ce,bt)=>Ce+bt.valor,0),Oe=ve-Be;return{resumo:{totalEntradas:Y,totalSaidas:Q,lucro:Z,pendente:0,mediaDiaria:ve/30,mediaSemanal:ve/4,mediaMensal:Y,tendencia:Oe>=0?"positivo":"negativo",saldoDisponivel:Z},relatorio:{totalEntradas:Y,totalSaidas:Q,lucroLiquido:Z,entradasPorMes:[],categoriasMaisLucrativas:o.map(Ce=>({categoria:Ce.nome,lucro:0,percentual:0})),servicosMaisVendidos:[],diasComMaisAtendimentos:[],distribuicaoPorFormaPagamento:[],contasAtrasadas:[],agendamentosPagos:Y,receitasAgendadasFuturas:0,receitasRecorrentes:0,despesasFixas:i?.reduce((Ce,bt)=>Ce+bt.valor,0)||0}}},[s,o,i]),k=x.useMemo(()=>{const H=n.length,L=n.filter(fe=>fe.status==="concluido").length,Y=n.filter(fe=>fe.status==="cancelado").length,Q=n.filter(fe=>fe.status==="agendado").length,Z=H>0?Y/H*100:0,ce=H>0?L/H*100:0;return{total:H,concluidos:L,cancelados:Y,agendados:Q,taxaCancelamento:Z,taxaConclusao:ce}},[n]),$=x.useMemo(()=>{const H=new Map;return n.forEach(L=>{if(L.status!=="concluido")return;const Y=L.servicoNome||"Servio",Q=H.get(Y)||{nome:Y,quantidade:0,receitaTotal:0};Q.quantidade+=1,Q.receitaTotal+=L.valor||0,H.set(Y,Q)}),Array.from(H.values()).sort((L,Y)=>Y.receitaTotal-L.receitaTotal)},[n]),A=x.useMemo(()=>{const H=[0,0,0,0,0,0,0];n.forEach(Y=>{const Q=new Date(Y.data);if(!Number.isNaN(Q.getTime())){const Z=Q.getDay();Z>=0&&Z<=6&&(H[Z]+=1)}});const L=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"];return H.map((Y,Q)=>({dia:L[Q],total:Y}))},[n]),P=x.useMemo(()=>{const H=new Map;return n.forEach(L=>{if(!L.hora)return;const Q=`${L.hora.slice(0,2)}:00`,Z=H.get(Q)||0;H.set(Q,Z+1)}),Array.from(H.entries()).map(([L,Y])=>({hora:L,total:Y})).sort((L,Y)=>L.hora.localeCompare(Y.hora))},[n]),O=x.useMemo(()=>{const H=new Map;n.forEach(ce=>{const fe=ce.clienteId||ce.clienteNome;if(!fe)return;const X=new Date(ce.data);if(Number.isNaN(X.getTime()))return;const De=H.get(fe)||{ultimoAtendimento:X,quantidade:0};X>De.ultimoAtendimento&&(De.ultimoAtendimento=X),De.quantidade+=1,H.set(fe,De)});const L=new Date,Y=60*24*60*60*1e3;let Q=0,Z=0;return H.forEach(ce=>{ce.quantidade>=3&&(Q+=1),L.getTime()-ce.ultimoAtendimento.getTime()>Y&&(Z+=1)}),{total:H.size,recorrentes:Q,inativos60d:Z}},[n]),M=x.useMemo(()=>({minhaAgenda:{nome:"Minha Agenda",caminho:"/minha-agenda",proposito:"Centraliza a viso de horrios do salo: calendrio dirio/semanal/mensal e lista detalhada de agendamentos com edio, reagendamento, troca de horrio e registro de pagamento.",perguntasExemplo:["Minha agenda est cheia nos prximos dias?","Quais horrios esto mais ociosos esta semana?","Como usar a viso de lista e gesto?"]},financeiro:{nome:"Financeiro",caminho:"/financeiro",proposito:"Controla entradas, sadas, contas fixas e mostra a sade financeira do salo.",perguntasExemplo:["Estou lucrando ou perdendo dinheiro neste ms?","Quais so minhas maiores despesas fixas?","Como melhorar meu resultado financeiro com os dados atuais?"]},clientes:{nome:"Clientes",caminho:"/clientes",proposito:"Organiza dados de clientes, histrico de atendimentos e recorrncia.",perguntasExemplo:["Tenho muitos clientes inativos h mais de 60 dias?","Quais clientes mais retornam ao salo?"]},marketing:{nome:"Marketing",caminho:"/marketing",proposito:"Apoia campanhas e aes para preencher horrios ociosos e aumentar faturamento.",perguntasExemplo:["Quando  um bom momento para fazer campanha de preenchimento de agenda?","Quais servios devo destacar em promoes?"]},produtos:{nome:"Produtos",caminho:"/produtos",proposito:"Organiza produtos utilizados e vendidos para apoiar controle financeiro e de estoque.",perguntasExemplo:["Qual o impacto da venda de produtos no meu faturamento?"]},assistente:{nome:"Assistente",caminho:"/assistente",proposito:"Central de inteligncia que analisa dados de agenda, clientes e financeiro para gerar anlises, dicas, recomendaes, alertas e responder perguntas.",perguntasExemplo:["Como est a sade geral do meu negcio?","Quais riscos ou oportunidades voc enxerga agora?"]}}),[]),R=x.useMemo(()=>{if(!n.length)return[];const H=new Date,L=H.toISOString().split("T")[0],Y=H.toTimeString().slice(0,5);return n.filter(Q=>{if(!Q.data||!Q.hora||Q.status==="cancelado"||Q.status==="concluido")return!1;const Z=Q.data,ce=Q.hora.slice(0,5);return Z<L||Z===L&&ce<Y})},[n]),T=x.useMemo(()=>{const H=[];return k.taxaCancelamento>15&&H.push("Sua taxa de cancelamento est acima de 15%. Avalie polticas de confirmao e lembretes mais fortes para reduzir cancelamentos."),C.resumo.lucro<0&&H.push("Seu resultado financeiro est negativo. Analise despesas fixas e considere reajustar preos dos servios mais procurados."),k.taxaConclusao>70&&C.resumo.lucro>0&&H.push("Seu ndice de concluso  alto e o financeiro est positivo. Este  um bom momento para investir em fidelizao e upgrades de servio."),H.length===0&&H.push("Tudo parece estvel neste momento. Use o chat para pedir anlises especficas, como 'como est minha taxa de cancelamento nos ltimos 30 dias?'."),H},[k,C.resumo.lucro]),D=x.useMemo(()=>{const H=[];return C.resumo.lucro<0&&H.push({titulo:"Revisar estrutura de custos",descricao:"Seu lucro est negativo. Priorize reviso de despesas no essenciais e renegociao de contratos recorrentes.",tipo:"alerta",acao:"Abrir financeiro detalhado",area:"financeiro",severidade:"alto"}),k.agendados<5&&H.push({titulo:"Campanha de preenchimento de agenda",descricao:"Sua agenda possui poucos agendamentos futuros. Considere uma campanha rpida com pacotes promocionais para horrios ociosos.",tipo:"oportunidade",acao:"Criar campanha de marketing",area:"marketing",severidade:"medio"}),H.length===0&&H.push({titulo:"Monitoramento contnuo",descricao:"Nenhum risco imediato identificado. Use o chat para testar cenrios, como 'o que acontece se eu aumentar meu preo mdio em 10%?'.",tipo:"otimizacao",area:"operacional",severidade:"baixo"}),H},[C.resumo.lucro,k.agendados]);x.useEffect(()=>{if(!p.permitirNotificacoesIA||D.length===0)return;const H=D.find(Z=>Z.tipo==="alerta");if(!H)return;const L=`assistente-ia-alert-${H.titulo}`,Y=new Date,Q=localStorage.getItem(L);if(Q){const Z=new Date(Q);if((Y.getTime()-Z.getTime())/(1e3*60*60)<6)return}l(H.titulo,H.descricao,{area:H.area||"financeiro",severidade:H.severidade||"medio",metricaPrincipal:H.area==="financeiro"?"lucro":void 0}),localStorage.setItem(L,Y.toISOString())},[p.permitirNotificacoesIA,D,l]),x.useEffect(()=>{if(!p.permitirNotificacoesIA||!e?.id||R.length===0)return;const H=`assistente-ia-overdue-${e.id}`,L=new Date,Y=localStorage.getItem(H);if(Y){const fe=new Date(Y);if((L.getTime()-fe.getTime())/(1e3*60)<60)return}const Q=R.filter(fe=>fe.statusPagamento!=="pago").length,Z="Agendamentos atrasados para reviso",ce=`Voc tem ${R.length} atendimento(s) que j passaram do horrio e ainda esto como 'agendado'`+(Q?`, sendo ${Q} com pagamento em aberto.`:".")+" Acesse Minha Agenda > Lista & Gesto para atualizar status e pagamentos.";l(Z,ce,{totalAtrasados:R.length,naoPagos:Q,exemplos:R.slice(0,5).map(fe=>({id:fe.id,clienteNome:fe.clienteNome,data:fe.data,hora:fe.hora,statusPagamento:fe.statusPagamento}))}),localStorage.setItem(H,L.toISOString())},[p.permitirNotificacoesIA,e?.id,R,l]);const I=H=>new Date(H).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),U=()=>{const H=$.slice(0,5),L=p.anonimizarClientes?H.map((Q,Z)=>({...Q,nome:`Servio ${Z+1}`})):H,Y=p.consentimentoMarketing;return{financeiro:{resumo:C.resumo,principaisServicos:L},agendamentos:{...k,distribuicaoDiasSemana:A,distribuicaoHorarios:P},secoes:M,...Y?{clientes:O}:{}}},oe=H=>{const L=H.toLowerCase(),Y=[],Q=[],Z=[];return Y.push(`Atualmente voc possui ${k.total} agendamentos no sistema, com taxa de concluso de ${k.taxaConclusao.toFixed(1)}% e taxa de cancelamento de ${k.taxaCancelamento.toFixed(1)}%.`),Y.push(`No financeiro, o total de entradas registradas  de ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(C.resumo.totalEntradas)} e o total de sadas  de ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(C.resumo.totalSaidas)}.`),L.includes("cancelamento")&&Q.push("Considere enviar lembretes automticos algumas horas antes de cada atendimento e oferecer remarcao facilitada para reduzir cancelamentos."),L.includes("lucro")&&Q.push("Analise quais servios tm melhor margem de lucro e foque em divulg-los mais, ou crie combos com esses servios."),L.includes("agenda")&&Z.push("Organize blocos de horrio para servios similares, reduzindo o tempo ocioso entre atendimentos."),L.includes("minha agenda")?Z.push("Na seo 'Minha Agenda' voc encontra a viso de calendrio (dia, semana, ms) e tambm a lista detalhada de agendamentos para reagendar, trocar horrios e registrar pagamentos."):L.includes("financeiro")?Z.push("A seo 'Financeiro' centraliza entradas, sadas, contas fixas e lucro, ajudando voc a enxergar a sade do negcio."):L.includes("marketing")&&Z.push("A seo de 'Marketing'  ideal para planejar campanhas para preencher horrios ociosos e divulgar servios mais lucrativos."),Q.length===0&&Z.length===0&&Q.push("Posso ajudar a interpretar seus nmeros. Experimente perguntar algo como 'como posso aumentar meu faturamento usando os dados atuais?'."),{texto:"Com base nos dados recentes (aprox. ltimos 30 dias), analisei sua agenda e financeiro e gerei alguns pontos que podem ajudar na sua deciso.",analises:Y,dicas:Q,recomendacoes:Z}},J=async H=>{if(!p.ativo)return oe(H);const L=new AbortController,Y=setTimeout(()=>L.abort(),3e3);try{const Q={"Content-Type":"application/json"};t?.access_token&&(Q.Authorization=`Bearer ${t.access_token}`);const Z=m.slice(-10).map(X=>({autor:X.autor,conteudo:X.conteudo,criadoEm:X.criadoEm})),ce=await fetch(_,{method:"POST",headers:Q,body:JSON.stringify({pergunta:H,contexto:U(),usuarioId:e?.id,historico:Z}),signal:L.signal});if(clearTimeout(Y),!ce.ok)return oe(H);const fe=await ce.json();return!fe||typeof fe.texto!="string"?oe(H):{texto:fe.texto,analises:fe.analises??[],dicas:fe.dicas??[],recomendacoes:fe.recomendacoes??[],nivelConfianca:fe.nivelConfianca}}catch{return clearTimeout(Y),oe(H)}},ie=async H=>{const L={id:`user-${Date.now()}`,autor:"usuario",conteudo:H,criadoEm:new Date().toISOString()};g(Q=>[...Q,L]),j(!0);const Y=Date.now();try{const Q=await J(H);Date.now()-Y>3e3&&V.message("A resposta pode demorar um pouco mais em alguns momentos.");const ce=[];ce.push(Q.texto),Q.analises&&Q.analises.length>0&&(ce.push(""),ce.push("Anlises principais:"),Q.analises.forEach(X=>ce.push(` ${X}`))),Q.dicas&&Q.dicas.length>0&&(ce.push(""),ce.push("Dicas prticas:"),Q.dicas.forEach(X=>ce.push(` ${X}`))),Q.recomendacoes&&Q.recomendacoes.length>0&&(ce.push(""),ce.push("Recomendaes sugeridas:"),Q.recomendacoes.forEach(X=>ce.push(` ${X}`)));const fe={id:`ia-${Date.now()}`,autor:"ia",conteudo:ce.join(`
`),criadoEm:new Date().toISOString()};g(X=>[...X,fe])}catch{V.error("No foi possvel gerar a resposta da IA agora.");const Q={id:`ia-erro-${Date.now()}`,autor:"ia",conteudo:"Encontrei um erro ao processar sua pergunta. Verifique sua conexo e tente novamente em alguns instantes.",criadoEm:new Date().toISOString()};g(Z=>[...Z,Q])}finally{j(!1)}},me=async()=>{const H=y.trim();!H||w||(b(""),await ie(H))},de=async()=>{h(!0);try{const H=await c();if(V.success("Auditoria executada com sucesso. Recomendaes atualizadas."),H.sugestoesMelhorias&&H.sugestoesMelhorias.length>0){const L={id:`ia-auditoria-${Date.now()}`,autor:"ia",conteudo:`Executei uma auditoria completa no sistema. Principais sugestes:
`+H.sugestoesMelhorias.slice(0,5).map(Y=>` ${Y}`).join(`
`),criadoEm:new Date().toISOString()};g(Y=>[...Y,L])}}catch{V.error("No foi possvel executar a auditoria agora.")}finally{h(!1)}};return a.jsxs("div",{className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-r from-primary to-lilac-light p-responsive text-primary-foreground",children:[a.jsxs("div",{className:"relative z-10 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-white/15",children:a.jsx(MP,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-responsive-2xl sm:text-responsive-3xl font-bold",children:"Assistente inteligente"}),a.jsx("p",{className:"text-responsive-sm sm:text-responsive-lg opacity-90",children:"Anlises, dicas e recomendaes em tempo real para o seu salo."})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{variant:"outline",className:"bg-white/10 text-primary-foreground",children:"Beta"}),a.jsx(pe,{className:"bg-primary-foreground text-primary",children:p.ativo?"IA local (backend no configurado)":"IA desativada (modo local)"})]})]}),a.jsx("div",{className:"pointer-events-none absolute -right-8 -top-8 h-24 w-24 rounded-full bg-white/15 blur-2xl"}),a.jsx("div",{className:"pointer-events-none absolute -left-10 -bottom-10 h-32 w-32 rounded-full bg-white/10 blur-3xl"})]}),a.jsxs(Ia,{value:d,onValueChange:u,className:"space-y-4",children:[a.jsxs(ua,{className:"grid w-full grid-cols-4",children:[a.jsx(rt,{value:"analises",children:"Anlises"}),a.jsx(rt,{value:"dicas",children:"Dicas"}),a.jsx(rt,{value:"recomendacoes",children:"Recomendaes"}),a.jsx(rt,{value:"chat",children:"Chat"})]}),a.jsxs(nt,{value:"analises",className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr,1.3fr]",children:[a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsx(ae,{className:"flex flex-row items-center justify-between space-y-0",children:a.jsxs("div",{children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(aw,{className:"h-5 w-5 text-primary"}),"Viso financeira assistida"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Resumo automtico de entradas, sadas e lucro."})]})}),a.jsx(q,{className:"space-y-4",children:a.jsx(V$,{resumo:C.resumo})})]}),a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsxs(ae,{className:"space-y-1",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(nw,{className:"h-5 w-5 text-primary"}),"Sade da agenda"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Indicadores rpidos da performance de agendamentos."})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"rounded-xl border border-border/60 bg-muted/40 p-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Agendamentos totais"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:k.total})]}),a.jsxs("div",{className:"rounded-xl border border-border/60 bg-muted/40 p-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Concluso"}),a.jsxs("p",{className:"mt-1 text-xl font-bold text-success",children:[k.taxaConclusao.toFixed(1),"%"]})]}),a.jsxs("div",{className:"rounded-xl border border-border/60 bg-muted/40 p-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancelamento"}),a.jsxs("p",{className:"mt-1 text-xl font-bold text-destructive",children:[k.taxaCancelamento.toFixed(1),"%"]})]}),a.jsxs("div",{className:"rounded-xl border border-border/60 bg-muted/40 p-3",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Agendados futuros"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:k.agendados})]})]}),a.jsxs(B,{variant:"outline",size:"sm",className:"w-full gap-2",disabled:f,onClick:de,children:[f&&a.jsx(Wn,{className:"h-4 w-4 animate-spin"}),!f&&a.jsx(Mr,{className:"h-4 w-4"}),"Executar auditoria inteligente"]})]})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsxs(ae,{className:"space-y-1",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(aw,{className:"h-5 w-5 text-primary"}),"Grficos avanados"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Visualizao consolidada da performance financeira."})]}),a.jsx(q,{children:a.jsx(U$,{dados:C.relatorio})})]})]}),a.jsx(nt,{value:"dicas",className:"space-y-4 animate-fade-in",children:a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsxs(ae,{className:"space-y-1",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(dm,{className:"h-5 w-5 text-primary"}),"Dicas personalizadas"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Sugestes geradas com base no comportamento da sua agenda e financeiro."})]}),a.jsx(q,{children:a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:T.map((H,L)=>a.jsx(F,{className:"group border-border/60 bg-muted/40 transition-all hover:-translate-y-0.5 hover:border-primary/60 hover:shadow-lg",children:a.jsxs(q,{className:"space-y-2 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"h-4 w-4 text-primary"}),a.jsx(pe,{variant:"outline",className:"text-[10px] uppercase",children:"Dica da IA"})]}),a.jsx("p",{className:"text-sm text-foreground",children:H})]})},L))})})]})}),a.jsx(nt,{value:"recomendacoes",className:"space-y-4 animate-fade-in",children:a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsxs(ae,{className:"space-y-1",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(oF,{className:"h-5 w-5 text-primary"}),"Recomendaes acionveis"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Aes especficas para melhorar resultados ou corrigir riscos."})]}),a.jsx(q,{className:"space-y-4",children:a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:D.map((H,L)=>a.jsx(F,{className:"group border-border/60 bg-muted/40 transition-all hover:-translate-y-0.5 hover:border-primary/60 hover:shadow-lg",children:a.jsxs(q,{className:"space-y-3 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[H.tipo==="alerta"&&a.jsx(Nr,{className:"h-4 w-4 text-destructive"}),H.tipo==="oportunidade"&&a.jsx(Mr,{className:"h-4 w-4 text-primary"}),H.tipo==="otimizacao"&&a.jsx(nw,{className:"h-4 w-4 text-success"}),a.jsx("h3",{className:"text-sm font-semibold",children:H.titulo})]}),a.jsxs(pe,{variant:"outline",className:"text-[10px] uppercase",children:[H.tipo==="alerta"&&"Alerta",H.tipo==="oportunidade"&&"Oportunidade",H.tipo==="otimizacao"&&"Otimizao"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:H.descricao}),H.acao&&a.jsx(B,{variant:"outline",size:"sm",className:"text-[11px]",children:H.acao})]})},L))})})]})}),a.jsx(nt,{value:"chat",className:"space-y-4 animate-fade-in",children:a.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr,1.2fr]",children:[a.jsxs(F,{className:"flex min-h-[380px] flex-col border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsx(ae,{className:"flex flex-row items-center justify-between space-y-0",children:a.jsxs("div",{children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(Es,{className:"h-5 w-5 text-primary"}),"Chat com o assistente"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Pergunte sobre seus dados, resultados e prximas aes."})]})}),a.jsxs(q,{className:"flex flex-1 flex-col gap-3 p-0",children:[a.jsx(Op,{className:"flex-1 px-4 pt-2",children:a.jsxs("div",{className:"flex flex-col gap-3 pb-4",children:[m.map(H=>a.jsx("div",{className:`flex ${H.autor==="usuario"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm transition-all ${H.autor==="usuario"?"bg-primary text-primary-foreground rounded-br-sm":"bg-muted text-foreground rounded-bl-sm"}`,children:[a.jsx("div",{className:"whitespace-pre-wrap",children:H.conteudo}),a.jsx("div",{className:"mt-1 text-[10px] opacity-70 text-right",children:I(H.criadoEm)})]})},H.id)),a.jsx("div",{ref:N}),w&&a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-muted px-3 py-2 text-xs text-muted-foreground",children:[a.jsx(Wn,{className:"h-3 w-3 animate-spin"}),"Pensando na melhor resposta para voc..."]})})]})}),a.jsx("div",{className:"border-t border-border/50 p-3",children:a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[a.jsx(fr,{value:y,onChange:H=>b(H.target.value),placeholder:"Pergunte algo como: 'como posso melhorar meu faturamento usando os dados atuais?'",className:"min-h-[60px] flex-1 resize-none text-sm"}),a.jsxs(B,{className:"mt-2 w-full gap-2 sm:mt-0 sm:w-auto",onClick:me,disabled:w||!y.trim(),children:[w?a.jsx(Wn,{className:"h-4 w-4 animate-spin"}):a.jsx(nF,{className:"h-4 w-4"}),"Enviar"]})]})})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:[a.jsxs(ae,{className:"space-y-1",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(Mr,{className:"h-5 w-5 text-primary"}),"Sugestes de perguntas"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Use atalhos para explorar rapidamente anlises importantes."})]}),a.jsxs(q,{className:"space-y-3",children:[a.jsx("div",{className:"grid gap-2",children:["Como est minha taxa de cancelamento e o que posso fazer para reduzir?","Quais servios parecem ter o maior potencial de lucro?","Estou ganhando ou perdendo dinheiro nos ltimos 30 dias?","Como posso aumentar meu faturamento mantendo a mesma agenda?"].map(H=>a.jsx(B,{variant:"outline",size:"sm",className:"justify-start text-left text-xs",onClick:()=>{u("chat"),w||ie(H)},children:H},H))}),a.jsx("div",{className:"rounded-lg border border-dashed border-border/60 bg-muted/40 p-3 text-xs text-muted-foreground",children:"O chat usa os dados atuais de agenda, clientes e financeiro para gerar respostas contextualizadas. Latncia tpica de resposta: at 3 segundos, dependendo da sua conexo."})]})]})]})})]})]})}var iu=e=>e.type==="checkbox",yo=e=>e instanceof Date,Tr=e=>e==null;const W$=e=>typeof e=="object";var Kt=e=>!Tr(e)&&!Array.isArray(e)&&W$(e)&&!yo(e),H$=e=>Kt(e)&&e.target?iu(e.target)?e.target.checked:e.target.value:e,Mge=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,G$=(e,t)=>e.has(Mge(t)),Dge=e=>{const t=e.constructor&&e.constructor.prototype;return Kt(t)&&t.hasOwnProperty("isPrototypeOf")},D0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ar(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(D0&&(e instanceof Blob||n))&&(r||Kt(e)))if(t=r?[]:{},!r&&!Dge(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=ar(e[s]));else return e;return t}var Mp=e=>/^\w*$/.test(e),Wt=e=>e===void 0,I0=e=>Array.isArray(e)?e.filter(Boolean):[],R0=e=>I0(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(e,t,r)=>{if(!t||!Kt(e))return r;const n=(Mp(t)?[t]:R0(t)).reduce((s,o)=>Tr(s)?s:s[o],e);return Wt(n)||n===e?Wt(e[t])?r:e[t]:n},on=e=>typeof e=="boolean",pt=(e,t,r)=>{let n=-1;const s=Mp(t)?[t]:R0(t),o=s.length,i=o-1;for(;++n<o;){const c=s[n];let l=r;if(n!==i){const d=e[c];l=Kt(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=l,e=e[c]}};const Rh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Yn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},za={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},L0=E.createContext(null);L0.displayName="HookFormContext";const Dp=()=>E.useContext(L0),Ige=e=>{const{children:t,...r}=e;return E.createElement(L0.Provider,{value:r},t)};var K$=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return t._proxyFormState[i]!==Yn.all&&(t._proxyFormState[i]=!n||Yn.all),r&&(r[i]=!0),e[i]}});return s};const F0=typeof window<"u"?E.useLayoutEffect:E.useEffect;function Rge(e){const t=Dp(),{control:r=t.control,disabled:n,name:s,exact:o}=e||{},[i,c]=E.useState(r._formState),l=E.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return F0(()=>r._subscribe({name:s,formState:l.current,exact:o,callback:d=>{!n&&c({...r._formState,...d})}}),[s,n,o]),E.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),E.useMemo(()=>K$(i,r,l.current,!1),[i,r])}var wa=e=>typeof e=="string",Y$=(e,t,r,n,s)=>wa(e)?(n&&t.watch.add(e),_e(r,e,s)):Array.isArray(e)?e.map(o=>(n&&t.watch.add(o),_e(r,o))):(n&&(t.watchAll=!0),r),yy=e=>Tr(e)||!W$(e);function Wa(e,t,r=new WeakSet){if(yy(e)||yy(t))return e===t;if(yo(e)&&yo(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const o of n){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const c=t[o];if(yo(i)&&yo(c)||Kt(i)&&Kt(c)||Array.isArray(i)&&Array.isArray(c)?!Wa(i,c,r):i!==c)return!1}}return!0}function Lge(e){const t=Dp(),{control:r=t.control,name:n,defaultValue:s,disabled:o,exact:i,compute:c}=e||{},l=E.useRef(s),d=E.useRef(c),u=E.useRef(void 0);d.current=c;const f=E.useMemo(()=>r._getWatch(n,l.current),[r,n]),[h,p]=E.useState(d.current?d.current(f):f);return F0(()=>r._subscribe({name:n,formState:{values:!0},exact:i,callback:v=>{if(!o){const m=Y$(n,r._names,v.values||r._formValues,!1,l.current);if(d.current){const g=d.current(m);Wa(g,u.current)||(p(g),u.current=g)}else p(m)}}}),[r,o,n,i]),E.useEffect(()=>r._removeUnmounted()),h}function Fge(e){const t=Dp(),{name:r,disabled:n,control:s=t.control,shouldUnregister:o,defaultValue:i}=e,c=G$(s._names.array,r),l=E.useMemo(()=>_e(s._formValues,r,_e(s._defaultValues,r,i)),[s,r,i]),d=Lge({control:s,name:r,defaultValue:l,exact:!0}),u=Rge({control:s,name:r,exact:!0}),f=E.useRef(e),h=E.useRef(s.register(r,{...e.rules,value:d,...on(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const p=E.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!_e(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!_e(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!_e(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!_e(u.validatingFields,r)},error:{enumerable:!0,get:()=>_e(u.errors,r)}}),[u,r]),v=E.useCallback(b=>h.current.onChange({target:{value:H$(b),name:r},type:Rh.CHANGE}),[r]),m=E.useCallback(()=>h.current.onBlur({target:{value:_e(s._formValues,r),name:r},type:Rh.BLUR}),[r,s._formValues]),g=E.useCallback(b=>{const w=_e(s._fields,r);w&&b&&(w._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:j=>b.setCustomValidity(j),reportValidity:()=>b.reportValidity()})},[s._fields,r]),y=E.useMemo(()=>({name:r,value:d,...on(n)||u.disabled?{disabled:u.disabled||n}:{},onChange:v,onBlur:m,ref:g}),[r,n,u.disabled,v,m,g,d]);return E.useEffect(()=>{const b=s._options.shouldUnregister||o;s.register(r,{...f.current.rules,...on(f.current.disabled)?{disabled:f.current.disabled}:{}});const w=(j,N)=>{const _=_e(s._fields,j);_&&_._f&&(_._f.mount=N)};if(w(r,!0),b){const j=ar(_e(s._options.defaultValues,r));pt(s._defaultValues,r,j),Wt(_e(s._formValues,r))&&pt(s._formValues,r,j)}return!c&&s.register(r),()=>{(c?b&&!s._state.action:b)?s.unregister(r):w(r,!1)}},[r,s,c,o]),E.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),E.useMemo(()=>({field:y,formState:u,fieldState:p}),[y,u,p])}const zge=e=>e.render(Fge(e));var z0=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Tl=e=>Array.isArray(e)?e:[e],BS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}},Hr=e=>Kt(e)&&!Object.keys(e).length,B0=e=>e.type==="file",Zn=e=>typeof e=="function",Lh=e=>{if(!D0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Z$=e=>e.type==="select-multiple",V0=e=>e.type==="radio",Bge=e=>V0(e)||iu(e),Wg=e=>Lh(e)&&e.isConnected;function Vge(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Wt(e)?n++:e[t[n++]];return e}function Uge(e){for(const t in e)if(e.hasOwnProperty(t)&&!Wt(e[t]))return!1;return!0}function Zt(e,t){const r=Array.isArray(t)?t:Mp(t)?[t]:R0(t),n=r.length===1?e:Vge(e,r),s=r.length-1,o=r[s];return n&&delete n[o],s!==0&&(Kt(n)&&Hr(n)||Array.isArray(n)&&Uge(n))&&Zt(e,r.slice(0,-1)),e}var X$=e=>{for(const t in e)if(Zn(e[t]))return!0;return!1};function Fh(e,t={}){const r=Array.isArray(e);if(Kt(e)||r)for(const n in e)Array.isArray(e[n])||Kt(e[n])&&!X$(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Fh(e[n],t[n])):Tr(e[n])||(t[n]=!0);return t}function J$(e,t,r){const n=Array.isArray(e);if(Kt(e)||n)for(const s in e)Array.isArray(e[s])||Kt(e[s])&&!X$(e[s])?Wt(t)||yy(r[s])?r[s]=Array.isArray(e[s])?Fh(e[s],[]):{...Fh(e[s])}:J$(e[s],Tr(t)?{}:t[s],r[s]):r[s]=!Wa(e[s],t[s]);return r}var dl=(e,t)=>J$(e,t,Fh(t));const VS={value:!1,isValid:!1},US={value:!0,isValid:!0};var Q$=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Wt(e[0].attributes.value)?Wt(e[0].value)||e[0].value===""?US:{value:e[0].value,isValid:!0}:US:VS}return VS},eM=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Wt(e)?e:t?e===""?NaN:e&&+e:r&&wa(e)?new Date(e):n?n(e):e;const qS={isValid:!1,value:null};var tM=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,qS):qS;function WS(e){const t=e.ref;return B0(t)?t.files:V0(t)?tM(e.refs).value:Z$(t)?[...t.selectedOptions].map(({value:r})=>r):iu(t)?Q$(e.refs).value:eM(Wt(t.value)?e.ref.value:t.value,e)}var qge=(e,t,r,n)=>{const s={};for(const o of e){const i=_e(t,o);i&&pt(s,o,i._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},zh=e=>e instanceof RegExp,ul=e=>Wt(e)?e:zh(e)?e.source:Kt(e)?zh(e.value)?e.value.source:e.value:e,HS=e=>({isOnSubmit:!e||e===Yn.onSubmit,isOnBlur:e===Yn.onBlur,isOnChange:e===Yn.onChange,isOnAll:e===Yn.all,isOnTouch:e===Yn.onTouched});const GS="AsyncFunction";var Wge=e=>!!e&&!!e.validate&&!!(Zn(e.validate)&&e.validate.constructor.name===GS||Kt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===GS)),Hge=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),KS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const $l=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const o=_e(e,s);if(o){const{_f:i,...c}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],s)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if($l(c,t))break}else if(Kt(c)&&$l(c,t))break}}};function YS(e,t,r){const n=_e(e,r);if(n||Mp(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const o=s.join("."),i=_e(t,o),c=_e(e,o);if(i&&!Array.isArray(i)&&r!==o)return{name:r};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};s.pop()}return{name:r}}var Gge=(e,t,r,n)=>{r(e);const{name:s,...o}=e;return Hr(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!n||Yn.all))},Kge=(e,t,r)=>!e||!t||e===t||Tl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Yge=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,Zge=(e,t)=>!I0(_e(e,t)).length&&Zt(e,t),Xge=(e,t,r)=>{const n=Tl(_e(e,r));return pt(n,"root",t[r]),pt(e,r,n),e},uf=e=>wa(e);function ZS(e,t,r="validate"){if(uf(e)||Array.isArray(e)&&e.every(uf)||on(e)&&!e)return{type:r,message:uf(e)?e:"",ref:t}}var fi=e=>Kt(e)&&!zh(e)?e:{value:e,message:""},XS=async(e,t,r,n,s,o)=>{const{ref:i,refs:c,required:l,maxLength:d,minLength:u,min:f,max:h,pattern:p,validate:v,name:m,valueAsNumber:g,mount:y}=e._f,b=_e(r,m);if(!y||t.has(m))return{};const w=c?c[0]:i,j=P=>{s&&w.reportValidity&&(w.setCustomValidity(on(P)?"":P||""),w.reportValidity())},N={},_=V0(i),S=iu(i),C=_||S,k=(g||B0(i))&&Wt(i.value)&&Wt(b)||Lh(i)&&i.value===""||b===""||Array.isArray(b)&&!b.length,$=z0.bind(null,m,n,N),A=(P,O,M,R=za.maxLength,T=za.minLength)=>{const D=P?O:M;N[m]={type:P?R:T,message:D,ref:i,...$(P?R:T,D)}};if(o?!Array.isArray(b)||!b.length:l&&(!C&&(k||Tr(b))||on(b)&&!b||S&&!Q$(c).isValid||_&&!tM(c).isValid)){const{value:P,message:O}=uf(l)?{value:!!l,message:l}:fi(l);if(P&&(N[m]={type:za.required,message:O,ref:w,...$(za.required,O)},!n))return j(O),N}if(!k&&(!Tr(f)||!Tr(h))){let P,O;const M=fi(h),R=fi(f);if(!Tr(b)&&!isNaN(b)){const T=i.valueAsNumber||b&&+b;Tr(M.value)||(P=T>M.value),Tr(R.value)||(O=T<R.value)}else{const T=i.valueAsDate||new Date(b),D=oe=>new Date(new Date().toDateString()+" "+oe),I=i.type=="time",U=i.type=="week";wa(M.value)&&b&&(P=I?D(b)>D(M.value):U?b>M.value:T>new Date(M.value)),wa(R.value)&&b&&(O=I?D(b)<D(R.value):U?b<R.value:T<new Date(R.value))}if((P||O)&&(A(!!P,M.message,R.message,za.max,za.min),!n))return j(N[m].message),N}if((d||u)&&!k&&(wa(b)||o&&Array.isArray(b))){const P=fi(d),O=fi(u),M=!Tr(P.value)&&b.length>+P.value,R=!Tr(O.value)&&b.length<+O.value;if((M||R)&&(A(M,P.message,O.message),!n))return j(N[m].message),N}if(p&&!k&&wa(b)){const{value:P,message:O}=fi(p);if(zh(P)&&!b.match(P)&&(N[m]={type:za.pattern,message:O,ref:i,...$(za.pattern,O)},!n))return j(O),N}if(v){if(Zn(v)){const P=await v(b,r),O=ZS(P,w);if(O&&(N[m]={...O,...$(za.validate,O.message)},!n))return j(O.message),N}else if(Kt(v)){let P={};for(const O in v){if(!Hr(P)&&!n)break;const M=ZS(await v[O](b,r),w,O);M&&(P={...M,...$(O,M.message)},j(M.message),n&&(N[m]=P))}if(!Hr(P)&&(N[m]={ref:w,...P},!n))return N}}return j(!0),N};const Jge={mode:Yn.onSubmit,reValidateMode:Yn.onChange,shouldFocusError:!0};function Qge(e={}){let t={...Jge,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Zn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Kt(t.defaultValues)||Kt(t.values)?ar(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:ar(s),i={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:BS(),state:BS()},p=t.criteriaMode===Yn.all,v=z=>G=>{clearTimeout(d),d=setTimeout(z,G)},m=async z=>{if(!t.disabled&&(u.isValid||f.isValid||z)){const G=t.resolver?Hr((await S()).errors):await k(n,!0);G!==r.isValid&&h.state.next({isValid:G})}},g=(z,G)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((z||Array.from(c.mount)).forEach(ee=>{ee&&(G?pt(r.validatingFields,ee,G):Zt(r.validatingFields,ee))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Hr(r.validatingFields)}))},y=(z,G=[],ee,Ne,we=!0,ye=!0)=>{if(Ne&&ee&&!t.disabled){if(i.action=!0,ye&&Array.isArray(_e(n,z))){const Pe=ee(_e(n,z),Ne.argA,Ne.argB);we&&pt(n,z,Pe)}if(ye&&Array.isArray(_e(r.errors,z))){const Pe=ee(_e(r.errors,z),Ne.argA,Ne.argB);we&&pt(r.errors,z,Pe),Zge(r.errors,z)}if((u.touchedFields||f.touchedFields)&&ye&&Array.isArray(_e(r.touchedFields,z))){const Pe=ee(_e(r.touchedFields,z),Ne.argA,Ne.argB);we&&pt(r.touchedFields,z,Pe)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=dl(s,o)),h.state.next({name:z,isDirty:A(z,G),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else pt(o,z,G)},b=(z,G)=>{pt(r.errors,z,G),h.state.next({errors:r.errors})},w=z=>{r.errors=z,h.state.next({errors:r.errors,isValid:!1})},j=(z,G,ee,Ne)=>{const we=_e(n,z);if(we){const ye=_e(o,z,Wt(ee)?_e(s,z):ee);Wt(ye)||Ne&&Ne.defaultChecked||G?pt(o,z,G?ye:WS(we._f)):M(z,ye),i.mount&&m()}},N=(z,G,ee,Ne,we)=>{let ye=!1,Pe=!1;const lt={name:z};if(!t.disabled){if(!ee||Ne){(u.isDirty||f.isDirty)&&(Pe=r.isDirty,r.isDirty=lt.isDirty=A(),ye=Pe!==lt.isDirty);const mt=Wa(_e(s,z),G);Pe=!!_e(r.dirtyFields,z),mt?Zt(r.dirtyFields,z):pt(r.dirtyFields,z,!0),lt.dirtyFields=r.dirtyFields,ye=ye||(u.dirtyFields||f.dirtyFields)&&Pe!==!mt}if(ee){const mt=_e(r.touchedFields,z);mt||(pt(r.touchedFields,z,ee),lt.touchedFields=r.touchedFields,ye=ye||(u.touchedFields||f.touchedFields)&&mt!==ee)}ye&&we&&h.state.next(lt)}return ye?lt:{}},_=(z,G,ee,Ne)=>{const we=_e(r.errors,z),ye=(u.isValid||f.isValid)&&on(G)&&r.isValid!==G;if(t.delayError&&ee?(l=v(()=>b(z,ee)),l(t.delayError)):(clearTimeout(d),l=null,ee?pt(r.errors,z,ee):Zt(r.errors,z)),(ee?!Wa(we,ee):we)||!Hr(Ne)||ye){const Pe={...Ne,...ye&&on(G)?{isValid:G}:{},errors:r.errors,name:z};r={...r,...Pe},h.state.next(Pe)}},S=async z=>{g(z,!0);const G=await t.resolver(o,t.context,qge(z||c.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(z),G},C=async z=>{const{errors:G}=await S(z);if(z)for(const ee of z){const Ne=_e(G,ee);Ne?pt(r.errors,ee,Ne):Zt(r.errors,ee)}else r.errors=G;return G},k=async(z,G,ee={valid:!0})=>{for(const Ne in z){const we=z[Ne];if(we){const{_f:ye,...Pe}=we;if(ye){const lt=c.array.has(ye.name),mt=we._f&&Wge(we._f);mt&&u.validatingFields&&g([Ne],!0);const tr=await XS(we,c.disabled,o,p,t.shouldUseNativeValidation&&!G,lt);if(mt&&u.validatingFields&&g([Ne]),tr[ye.name]&&(ee.valid=!1,G))break;!G&&(_e(tr,ye.name)?lt?Xge(r.errors,tr,ye.name):pt(r.errors,ye.name,tr[ye.name]):Zt(r.errors,ye.name))}!Hr(Pe)&&await k(Pe,G,ee)}}return ee.valid},$=()=>{for(const z of c.unMount){const G=_e(n,z);G&&(G._f.refs?G._f.refs.every(ee=>!Wg(ee)):!Wg(G._f.ref))&&Y(z)}c.unMount=new Set},A=(z,G)=>!t.disabled&&(z&&G&&pt(o,z,G),!Wa(oe(),s)),P=(z,G,ee)=>Y$(z,c,{...i.mount?o:Wt(G)?s:wa(z)?{[z]:G}:G},ee,G),O=z=>I0(_e(i.mount?o:s,z,t.shouldUnregister?_e(s,z,[]):[])),M=(z,G,ee={})=>{const Ne=_e(n,z);let we=G;if(Ne){const ye=Ne._f;ye&&(!ye.disabled&&pt(o,z,eM(G,ye)),we=Lh(ye.ref)&&Tr(G)?"":G,Z$(ye.ref)?[...ye.ref.options].forEach(Pe=>Pe.selected=we.includes(Pe.value)):ye.refs?iu(ye.ref)?ye.refs.forEach(Pe=>{(!Pe.defaultChecked||!Pe.disabled)&&(Array.isArray(we)?Pe.checked=!!we.find(lt=>lt===Pe.value):Pe.checked=we===Pe.value||!!we)}):ye.refs.forEach(Pe=>Pe.checked=Pe.value===we):B0(ye.ref)?ye.ref.value="":(ye.ref.value=we,ye.ref.type||h.state.next({name:z,values:ar(o)})))}(ee.shouldDirty||ee.shouldTouch)&&N(z,we,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&U(z)},R=(z,G,ee)=>{for(const Ne in G){if(!G.hasOwnProperty(Ne))return;const we=G[Ne],ye=z+"."+Ne,Pe=_e(n,ye);(c.array.has(z)||Kt(we)||Pe&&!Pe._f)&&!yo(we)?R(ye,we,ee):M(ye,we,ee)}},T=(z,G,ee={})=>{const Ne=_e(n,z),we=c.array.has(z),ye=ar(G);pt(o,z,ye),we?(h.array.next({name:z,values:ar(o)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ee.shouldDirty&&h.state.next({name:z,dirtyFields:dl(s,o),isDirty:A(z,ye)})):Ne&&!Ne._f&&!Tr(ye)?R(z,ye,ee):M(z,ye,ee),KS(z,c)&&h.state.next({...r,name:z}),h.state.next({name:i.mount?z:void 0,values:ar(o)})},D=async z=>{i.mount=!0;const G=z.target;let ee=G.name,Ne=!0;const we=_e(n,ee),ye=mt=>{Ne=Number.isNaN(mt)||yo(mt)&&isNaN(mt.getTime())||Wa(mt,_e(o,ee,mt))},Pe=HS(t.mode),lt=HS(t.reValidateMode);if(we){let mt,tr;const Js=G.type?WS(we._f):H$(z),fa=z.type===Rh.BLUR||z.type===Rh.FOCUS_OUT,xu=!Hge(we._f)&&!t.resolver&&!_e(r.errors,ee)&&!we._f.deps||Yge(fa,_e(r.touchedFields,ee),r.isSubmitted,lt,Pe),Jo=KS(ee,c,fa);pt(o,ee,Js),fa?(we._f.onBlur&&we._f.onBlur(z),l&&l(0)):we._f.onChange&&we._f.onChange(z);const Yc=N(ee,Js,fa),Zc=!Hr(Yc)||Jo;if(!fa&&h.state.next({name:ee,type:z.type,values:ar(o)}),xu)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?fa&&m():fa||m()),Zc&&h.state.next({name:ee,...Jo?{}:Yc});if(!fa&&Jo&&h.state.next({...r}),t.resolver){const{errors:Fn}=await S([ee]);if(ye(Js),Ne){const Gp=YS(r.errors,n,ee),Ge=YS(Fn,n,Gp.name||ee);mt=Ge.error,ee=Ge.name,tr=Hr(Fn)}}else g([ee],!0),mt=(await XS(we,c.disabled,o,p,t.shouldUseNativeValidation))[ee],g([ee]),ye(Js),Ne&&(mt?tr=!1:(u.isValid||f.isValid)&&(tr=await k(n,!0)));Ne&&(we._f.deps&&U(we._f.deps),_(ee,tr,mt,Yc))}},I=(z,G)=>{if(_e(r.errors,G)&&z.focus)return z.focus(),1},U=async(z,G={})=>{let ee,Ne;const we=Tl(z);if(t.resolver){const ye=await C(Wt(z)?z:we);ee=Hr(ye),Ne=z?!we.some(Pe=>_e(ye,Pe)):ee}else z?(Ne=(await Promise.all(we.map(async ye=>{const Pe=_e(n,ye);return await k(Pe&&Pe._f?{[ye]:Pe}:Pe)}))).every(Boolean),!(!Ne&&!r.isValid)&&m()):Ne=ee=await k(n);return h.state.next({...!wa(z)||(u.isValid||f.isValid)&&ee!==r.isValid?{}:{name:z},...t.resolver||!z?{isValid:ee}:{},errors:r.errors}),G.shouldFocus&&!Ne&&$l(n,I,z?we:c.mount),Ne},oe=z=>{const G={...i.mount?o:s};return Wt(z)?G:wa(z)?_e(G,z):z.map(ee=>_e(G,ee))},J=(z,G)=>({invalid:!!_e((G||r).errors,z),isDirty:!!_e((G||r).dirtyFields,z),error:_e((G||r).errors,z),isValidating:!!_e(r.validatingFields,z),isTouched:!!_e((G||r).touchedFields,z)}),ie=z=>{z&&Tl(z).forEach(G=>Zt(r.errors,G)),h.state.next({errors:z?r.errors:{}})},me=(z,G,ee)=>{const Ne=(_e(n,z,{_f:{}})._f||{}).ref,we=_e(r.errors,z)||{},{ref:ye,message:Pe,type:lt,...mt}=we;pt(r.errors,z,{...mt,...G,ref:Ne}),h.state.next({name:z,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},de=(z,G)=>Zn(z)?h.state.subscribe({next:ee=>"values"in ee&&z(P(void 0,G),ee)}):P(z,G,!0),H=z=>h.state.subscribe({next:G=>{Kge(z.name,G.name,z.exact)&&Gge(G,z.formState||u,Ce,z.reRenderRoot)&&z.callback({values:{...o},...r,...G,defaultValues:s})}}).unsubscribe,L=z=>(i.mount=!0,f={...f,...z.formState},H({...z,formState:f})),Y=(z,G={})=>{for(const ee of z?Tl(z):c.mount)c.mount.delete(ee),c.array.delete(ee),G.keepValue||(Zt(n,ee),Zt(o,ee)),!G.keepError&&Zt(r.errors,ee),!G.keepDirty&&Zt(r.dirtyFields,ee),!G.keepTouched&&Zt(r.touchedFields,ee),!G.keepIsValidating&&Zt(r.validatingFields,ee),!t.shouldUnregister&&!G.keepDefaultValue&&Zt(s,ee);h.state.next({values:ar(o)}),h.state.next({...r,...G.keepDirty?{isDirty:A()}:{}}),!G.keepIsValid&&m()},Q=({disabled:z,name:G})=>{(on(z)&&i.mount||z||c.disabled.has(G))&&(z?c.disabled.add(G):c.disabled.delete(G))},Z=(z,G={})=>{let ee=_e(n,z);const Ne=on(G.disabled)||on(t.disabled);return pt(n,z,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:z}},name:z,mount:!0,...G}}),c.mount.add(z),ee?Q({disabled:on(G.disabled)?G.disabled:t.disabled,name:z}):j(z,!0,G.value),{...Ne?{disabled:G.disabled||t.disabled}:{},...t.progressive?{required:!!G.required,min:ul(G.min),max:ul(G.max),minLength:ul(G.minLength),maxLength:ul(G.maxLength),pattern:ul(G.pattern)}:{},name:z,onChange:D,onBlur:D,ref:we=>{if(we){Z(z,G),ee=_e(n,z);const ye=Wt(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Pe=Bge(ye),lt=ee._f.refs||[];if(Pe?lt.find(mt=>mt===ye):ye===ee._f.ref)return;pt(n,z,{_f:{...ee._f,...Pe?{refs:[...lt.filter(Wg),ye,...Array.isArray(_e(s,z))?[{}]:[]],ref:{type:ye.type,name:z}}:{ref:ye}}}),j(z,!1,void 0,ye)}else ee=_e(n,z,{}),ee._f&&(ee._f.mount=!1),(t.shouldUnregister||G.shouldUnregister)&&!(G$(c.array,z)&&i.action)&&c.unMount.add(z)}}},ce=()=>t.shouldFocusError&&$l(n,I,c.mount),fe=z=>{on(z)&&(h.state.next({disabled:z}),$l(n,(G,ee)=>{const Ne=_e(n,ee);Ne&&(G.disabled=Ne._f.disabled||z,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(we=>{we.disabled=Ne._f.disabled||z}))},0,!1))},X=(z,G)=>async ee=>{let Ne;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let we=ar(o);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ye,values:Pe}=await S();r.errors=ye,we=ar(Pe)}else await k(n);if(c.disabled.size)for(const ye of c.disabled)Zt(we,ye);if(Zt(r.errors,"root"),Hr(r.errors)){h.state.next({errors:{}});try{await z(we,ee)}catch(ye){Ne=ye}}else G&&await G({...r.errors},ee),ce(),setTimeout(ce);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Hr(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},De=(z,G={})=>{_e(n,z)&&(Wt(G.defaultValue)?T(z,ar(_e(s,z))):(T(z,G.defaultValue),pt(s,z,ar(G.defaultValue))),G.keepTouched||Zt(r.touchedFields,z),G.keepDirty||(Zt(r.dirtyFields,z),r.isDirty=G.defaultValue?A(z,ar(_e(s,z))):A()),G.keepError||(Zt(r.errors,z),u.isValid&&m()),h.state.next({...r}))},ve=(z,G={})=>{const ee=z?ar(z):s,Ne=ar(ee),we=Hr(z),ye=we?s:Ne;if(G.keepDefaultValues||(s=ee),!G.keepValues){if(G.keepDirtyValues){const Pe=new Set([...c.mount,...Object.keys(dl(s,o))]);for(const lt of Array.from(Pe))_e(r.dirtyFields,lt)?pt(ye,lt,_e(o,lt)):T(lt,_e(ye,lt))}else{if(D0&&Wt(z))for(const Pe of c.mount){const lt=_e(n,Pe);if(lt&&lt._f){const mt=Array.isArray(lt._f.refs)?lt._f.refs[0]:lt._f.ref;if(Lh(mt)){const tr=mt.closest("form");if(tr){tr.reset();break}}}}if(G.keepFieldsRef)for(const Pe of c.mount)T(Pe,_e(ye,Pe));else n={}}o=t.shouldUnregister?G.keepDefaultValues?ar(s):{}:ar(ye),h.array.next({values:{...ye}}),h.state.next({values:{...ye}})}c={mount:G.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!G.keepIsValid||!!G.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:G.keepSubmitCount?r.submitCount:0,isDirty:we?!1:G.keepDirty?r.isDirty:!!(G.keepDefaultValues&&!Wa(z,s)),isSubmitted:G.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:G.keepDirtyValues?G.keepDefaultValues&&o?dl(s,o):r.dirtyFields:G.keepDefaultValues&&z?dl(s,z):G.keepDirty?r.dirtyFields:{},touchedFields:G.keepTouched?r.touchedFields:{},errors:G.keepErrors?r.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Be=(z,G)=>ve(Zn(z)?z(o):z,G),Oe=(z,G={})=>{const ee=_e(n,z),Ne=ee&&ee._f;if(Ne){const we=Ne.refs?Ne.refs[0]:Ne.ref;we.focus&&(we.focus(),G.shouldSelect&&Zn(we.select)&&we.select())}},Ce=z=>{r={...r,...z}},Dt={control:{register:Z,unregister:Y,getFieldState:J,handleSubmit:X,setError:me,_subscribe:H,_runSchema:S,_focusError:ce,_getWatch:P,_getDirty:A,_setValid:m,_setFieldArray:y,_setDisabledField:Q,_setErrors:w,_getFieldArray:O,_reset:ve,_resetDefaultValues:()=>Zn(t.defaultValues)&&t.defaultValues().then(z=>{Be(z,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:fe,_subjects:h,_proxyFormState:u,get _fields(){return n},get _formValues(){return o},get _state(){return i},set _state(z){i=z},get _defaultValues(){return s},get _names(){return c},set _names(z){c=z},get _formState(){return r},get _options(){return t},set _options(z){t={...t,...z}}},subscribe:L,trigger:U,register:Z,handleSubmit:X,watch:de,setValue:T,getValues:oe,reset:Be,resetField:De,clearErrors:ie,unregister:Y,setError:me,setFocus:Oe,getFieldState:J};return{...Dt,formControl:Dt}}function Ds(e={}){const t=E.useRef(void 0),r=E.useRef(void 0),[n,s]=E.useState({isDirty:!1,isValidating:!1,isLoading:Zn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Zn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Zn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...c}=Qge(e);t.current={...c,formState:n}}const o=t.current.control;return o._options=e,F0(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),o._formState.isReady=!0,i},[o]),E.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),E.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),E.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),E.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),E.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==n.isDirty&&o._subjects.state.next({isDirty:i})}},[o,n.isDirty]),E.useEffect(()=>{e.values&&!Wa(e.values,r.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),r.current=e.values,s(i=>({...i}))):o._resetDefaultValues()},[o,e.values]),E.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=K$(n,o),t.current}const JS=(e,t,r)=>{if(e&&"reportValidity"in e){const n=_e(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},by=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?JS(n.ref,r,e):n&&n.refs&&n.refs.forEach(s=>JS(s,r,e))}},QS=(e,t)=>{t.shouldUseNativeValidation&&by(e,t);const r={};for(const n in e){const s=_e(t.fields,n),o=Object.assign(e[n]||{},{ref:s&&s.ref});if(eve(t.names||Object.keys(e),n)){const i=Object.assign({},_e(r,n));pt(i,"root",o),pt(r,n,i)}else pt(r,n,o)}return r},eve=(e,t)=>{const r=eC(t);return e.some(n=>eC(n).match(`^${r}\\.\\d+`))};function eC(e){return e.replace(/\]|\[/g,"")}function le(e,t,r){function n(c,l){var d;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(d=c._zod).traits??(d.traits=new Set),c._zod.traits.add(e),t(c,l);for(const u in i.prototype)u in c||Object.defineProperty(c,u,{value:i.prototype[u].bind(c)});c._zod.constr=i,c._zod.def=l}const s=r?.Parent??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(c){var l;const d=r?.Parent?new o:this;n(d,c),(l=d._zod).deferred??(l.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class Ad extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const rM={};function Ro(e){return rM}function tve(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function jy(e,t){return typeof t=="bigint"?t.toString():t}function nM(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function U0(e){return e==null}function q0(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function rve(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l?.[1]&&(s=Number.parseInt(l[1]))}const o=r>s?r:s,i=Number.parseInt(e.toFixed(o).replace(".","")),c=Number.parseInt(t.toFixed(o).replace(".",""));return i%c/10**o}function At(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Ko(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Gc(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function tC(e){return JSON.stringify(e)}const aM="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function wy(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const nve=nM(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ny(e){if(wy(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(wy(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const ave=new Set(["string","number","symbol"]);function Ip(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Yo(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function Te(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function sve(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const ove={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ive(e,t){const r=e._zod.def,n=Gc(e._zod.def,{get shape(){const s={};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=r.shape[o])}return Ko(this,"shape",s),s},checks:[]});return Yo(e,n)}function cve(e,t){const r=e._zod.def,n=Gc(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete s[o]}return Ko(this,"shape",s),s},checks:[]});return Yo(e,n)}function lve(e,t){if(!Ny(t))throw new Error("Invalid input to extend: expected a plain object");const r=Gc(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Ko(this,"shape",n),n},checks:[]});return Yo(e,r)}function dve(e,t){const r=Gc(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Ko(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Yo(e,r)}function uve(e,t,r){const n=Gc(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=e?new e({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)o[i]=e?new e({type:"optional",innerType:s[i]}):s[i];return Ko(this,"shape",o),o},checks:[]});return Yo(t,n)}function fve(e,t,r){const n=Gc(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)o[i]=new e({type:"nonoptional",innerType:s[i]});return Ko(this,"shape",o),o},checks:[]});return Yo(t,n)}function Ml(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function sM(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ku(e){return typeof e=="string"?e:e?.message}function Lo(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const s=Ku(e.inst?._zod.def?.error?.(e))??Ku(t?.error?.(e))??Ku(r.customError?.(e))??Ku(r.localeError?.(e))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function W0(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function kd(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const oM=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,jy,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},H0=le("$ZodError",oM),Rp=le("$ZodError",oM,{Parent:Error});function hve(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function mve(e,t){const r=t||function(o){return o.message},n={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(c=>s({issues:c}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(r(i));else{let c=n,l=0;for(;l<i.path.length;){const d=i.path[l];l===i.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(i))):c[d]=c[d]||{_errors:[]},c=c[d],l++}}};return s(e),n}const iM=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new Ad;if(i.issues.length){const c=new(s?.Err??e)(i.issues.map(l=>Lo(l,o,Ro())));throw aM(c,s?.callee),c}return i.value},pve=iM(Rp),cM=e=>async(t,r,n,s)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const c=new(s?.Err??e)(i.issues.map(l=>Lo(l,o,Ro())));throw aM(c,s?.callee),c}return i.value},gve=cM(Rp),lM=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new Ad;return o.issues.length?{success:!1,error:new(e??H0)(o.issues.map(i=>Lo(i,s,Ro())))}:{success:!0,data:o.value}},vve=lM(Rp),dM=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>Lo(i,s,Ro())))}:{success:!0,data:o.value}},xve=dM(Rp),yve=/^[cC][^\s-]{8,}$/,bve=/^[0-9a-z]+$/,jve=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wve=/^[0-9a-vA-V]{20}$/,Nve=/^[A-Za-z0-9]{27}$/,_ve=/^[a-zA-Z0-9_-]{21}$/,Sve=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Cve=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rC=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Pve=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ave="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function kve(){return new RegExp(Ave,"u")}const Eve=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ove=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Tve=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,$ve=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mve=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,uM=/^[A-Za-z0-9_-]*$/,Dve=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Ive=/^\+(?:[0-9]){6,14}[0-9]$/,fM="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Rve=new RegExp(`^${fM}$`);function hM(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Lve(e){return new RegExp(`^${hM(e)}$`)}function Fve(e){const t=hM({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${fM}T(?:${n})$`)}const zve=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Bve=/^\d+$/,Vve=/^-?\d+(?:\.\d+)?/i,Uve=/true|false/i,qve=/^[^A-Z]*$/,Wve=/^[^a-z]*$/,en=le("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),mM={number:"number",bigint:"bigint",object:"date"},pM=le("$ZodCheckLessThan",(e,t)=>{en.init(e,t);const r=mM[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),gM=le("$ZodCheckGreaterThan",(e,t)=>{en.init(e,t);const r=mM[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Hve=le("$ZodCheckMultipleOf",(e,t)=>{en.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):rve(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Gve=le("$ZodCheckNumberFormat",(e,t)=>{en.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[s,o]=ove[t.format];e._zod.onattach.push(i=>{const c=i._zod.bag;c.format=t.format,c.minimum=s,c.maximum=o,r&&(c.pattern=Bve)}),e._zod.check=i=>{const c=i.value;if(r){if(!Number.isInteger(c)){i.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?i.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):i.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}c<s&&i.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),c>o&&i.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:e})}}),Kve=le("$ZodCheckMaxLength",(e,t)=>{var r;en.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!U0(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=W0(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Yve=le("$ZodCheckMinLength",(e,t)=>{var r;en.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!U0(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=W0(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Zve=le("$ZodCheckLengthEquals",(e,t)=>{var r;en.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!U0(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const i=W0(s),c=o>t.length;n.issues.push({origin:i,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Lp=le("$ZodCheckStringFormat",(e,t)=>{var r,n;en.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Xve=le("$ZodCheckRegex",(e,t)=>{Lp.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Jve=le("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=qve),Lp.init(e,t)}),Qve=le("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Wve),Lp.init(e,t)}),exe=le("$ZodCheckIncludes",(e,t)=>{en.init(e,t);const r=Ip(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),txe=le("$ZodCheckStartsWith",(e,t)=>{en.init(e,t);const r=new RegExp(`^${Ip(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),rxe=le("$ZodCheckEndsWith",(e,t)=>{en.init(e,t);const r=new RegExp(`.*${Ip(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),nxe=le("$ZodCheckOverwrite",(e,t)=>{en.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class axe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),s=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this?.args,s=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const sxe={major:4,minor:0,patch:13},zt=le("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sxe;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const s of n)for(const o of s._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(o,i,c)=>{let l=Ml(o),d;for(const u of i){if(u._zod.def.when){if(!u._zod.def.when(o))continue}else if(l)continue;const f=o.issues.length,h=u._zod.check(o);if(h instanceof Promise&&c?.async===!1)throw new Ad;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,o.issues.length!==f&&(l||(l=Ml(o,f)))});else{if(o.issues.length===f)continue;l||(l=Ml(o,f))}}return d?d.then(()=>o):o};e._zod.run=(o,i)=>{const c=e._zod.parse(o,i);if(c instanceof Promise){if(i.async===!1)throw new Ad;return c.then(l=>s(l,n,i))}return s(c,n,i)}}e["~standard"]={validate:s=>{try{const o=vve(e,s);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return xve(e,s).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),G0=le("$ZodString",(e,t)=>{zt.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??zve(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Lt=le("$ZodStringFormat",(e,t)=>{Lp.init(e,t),G0.init(e,t)}),oxe=le("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Cve),Lt.init(e,t)}),ixe=le("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rC(n))}else t.pattern??(t.pattern=rC());Lt.init(e,t)}),cxe=le("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Pve),Lt.init(e,t)}),lxe=le("$ZodURL",(e,t)=>{Lt.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Dve.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),dxe=le("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=kve()),Lt.init(e,t)}),uxe=le("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=_ve),Lt.init(e,t)}),fxe=le("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=yve),Lt.init(e,t)}),hxe=le("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=bve),Lt.init(e,t)}),mxe=le("$ZodULID",(e,t)=>{t.pattern??(t.pattern=jve),Lt.init(e,t)}),pxe=le("$ZodXID",(e,t)=>{t.pattern??(t.pattern=wve),Lt.init(e,t)}),gxe=le("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Nve),Lt.init(e,t)}),vxe=le("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Fve(t)),Lt.init(e,t)}),xxe=le("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Rve),Lt.init(e,t)}),yxe=le("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Lve(t)),Lt.init(e,t)}),bxe=le("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Sve),Lt.init(e,t)}),jxe=le("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Eve),Lt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),wxe=le("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ove),Lt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Nxe=le("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Tve),Lt.init(e,t)}),_xe=le("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=$ve),Lt.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function vM(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Sxe=le("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Mve),Lt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{vM(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Cxe(e){if(!uM.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return vM(r)}const Pxe=le("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=uM),Lt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Cxe(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Axe=le("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Ive),Lt.init(e,t)});function kxe(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Exe=le("$ZodJWT",(e,t)=>{Lt.init(e,t),e._zod.check=r=>{kxe(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),xM=le("$ZodNumber",(e,t)=>{zt.init(e,t),e._zod.pattern=e._zod.bag.pattern??Vve,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),Oxe=le("$ZodNumber",(e,t)=>{Gve.init(e,t),xM.init(e,t)}),Txe=le("$ZodBoolean",(e,t)=>{zt.init(e,t),e._zod.pattern=Uve,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),$xe=le("$ZodUnknown",(e,t)=>{zt.init(e,t),e._zod.parse=r=>r}),Mxe=le("$ZodNever",(e,t)=>{zt.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),Dxe=le("$ZodDate",(e,t)=>{zt.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}const s=r.value,o=s instanceof Date;return o&&!Number.isNaN(s.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:s,...o?{received:"Invalid Date"}:{},inst:e}),r}});function nC(e,t,r){e.issues.length&&t.issues.push(...sM(r,e.issues)),t.value[r]=e.value}const Ixe=le("$ZodArray",(e,t)=>{zt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const c=s[i],l=t.element._zod.run({value:c,issues:[]},n);l instanceof Promise?o.push(l.then(d=>nC(d,r,i))):nC(l,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function Yu(e,t,r,n){e.issues.length&&t.issues.push(...sM(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Rxe=le("$ZodObject",(e,t)=>{zt.init(e,t);const r=nM(()=>{const f=Object.keys(t.shape);for(const p of f)if(!(t.shape[p]instanceof zt))throw new Error(`Invalid element at key "${p}": expected a Zod schema`);const h=sve(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(h)}});At(e._zod,"propValues",()=>{const f=t.shape,h={};for(const p in f){const v=f[p]._zod;if(v.values){h[p]??(h[p]=new Set);for(const m of v.values)h[p].add(m)}}return h});const n=f=>{const h=new axe(["shape","payload","ctx"]),p=r.value,v=b=>{const w=tC(b);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};h.write("const input = payload.value;");const m=Object.create(null);let g=0;for(const b of p.keys)m[b]=`key_${g++}`;h.write("const newResult = {}");for(const b of p.keys){const w=m[b],j=tC(b);h.write(`const ${w} = ${v(b)};`),h.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${w}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${w}.value;
        }
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const y=h.compile();return(b,w)=>y(f,b,w)};let s;const o=wy,i=!rM.jitless,l=i&&nve.value,d=t.catchall;let u;e._zod.parse=(f,h)=>{u??(u=r.value);const p=f.value;if(!o(p))return f.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),f;const v=[];if(i&&l&&h?.async===!1&&h.jitless!==!0)s||(s=n(t.shape)),f=s(f,h);else{f.value={};const w=u.shape;for(const j of u.keys){const _=w[j]._zod.run({value:p[j],issues:[]},h);_ instanceof Promise?v.push(_.then(S=>Yu(S,f,j,p))):Yu(_,f,j,p)}}if(!d)return v.length?Promise.all(v).then(()=>f):f;const m=[],g=u.keySet,y=d._zod,b=y.def.type;for(const w of Object.keys(p)){if(g.has(w))continue;if(b==="never"){m.push(w);continue}const j=y.run({value:p[w],issues:[]},h);j instanceof Promise?v.push(j.then(N=>Yu(N,f,w,p))):Yu(j,f,w,p)}return m.length&&f.issues.push({code:"unrecognized_keys",keys:m,input:p,inst:e}),v.length?Promise.all(v).then(()=>f):f}});function aC(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!Ml(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>Lo(i,n,Ro())))}),t)}const Lxe=le("$ZodUnion",(e,t)=>{zt.init(e,t),At(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),At(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),At(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),At(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>q0(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return n(s,o);let i=!1;const c=[];for(const l of t.options){const d=l._zod.run({value:s.value,issues:[]},o);if(d instanceof Promise)c.push(d),i=!0;else{if(d.issues.length===0)return d;c.push(d)}}return i?Promise.all(c).then(l=>aC(l,s,e,o)):aC(c,s,e,o)}}),Fxe=le("$ZodIntersection",(e,t)=>{zt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([l,d])=>sC(r,l,d)):sC(r,o,i)}});function _y(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ny(e)&&Ny(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of n){const i=_y(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=t[n],i=_y(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function sC(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Ml(e))return e;const n=_y(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const zxe=le("$ZodEnum",(e,t)=>{zt.init(e,t);const r=tve(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>ave.has(typeof s)).map(s=>typeof s=="string"?Ip(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const i=s.value;return n.has(i)||s.issues.push({code:"invalid_value",values:r,input:i,inst:e}),s}}),Bxe=le("$ZodTransform",(e,t)=>{zt.init(e,t),e._zod.parse=(r,n)=>{const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new Ad;return r.value=s,r}});function oC(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Vxe=le("$ZodOptional",(e,t)=>{zt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",At(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),At(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${q0(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>oC(o,r.value)):oC(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Uxe=le("$ZodNullable",(e,t)=>{zt.init(e,t),At(e._zod,"optin",()=>t.innerType._zod.optin),At(e._zod,"optout",()=>t.innerType._zod.optout),At(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${q0(r.source)}|null)$`):void 0}),At(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),qxe=le("$ZodDefault",(e,t)=>{zt.init(e,t),e._zod.optin="optional",At(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>iC(o,t)):iC(s,t)}});function iC(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Wxe=le("$ZodPrefault",(e,t)=>{zt.init(e,t),e._zod.optin="optional",At(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Hxe=le("$ZodNonOptional",(e,t)=>{zt.init(e,t),At(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>cC(o,e)):cC(s,e)}});function cC(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Gxe=le("$ZodCatch",(e,t)=>{zt.init(e,t),At(e._zod,"optin",()=>t.innerType._zod.optin),At(e._zod,"optout",()=>t.innerType._zod.optout),At(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>Lo(i,n,Ro()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>Lo(o,n,Ro()))},input:r.value}),r.issues=[]),r)}}),Kxe=le("$ZodPipe",(e,t)=>{zt.init(e,t),At(e._zod,"values",()=>t.in._zod.values),At(e._zod,"optin",()=>t.in._zod.optin),At(e._zod,"optout",()=>t.out._zod.optout),At(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(o=>lC(o,t,n)):lC(s,t,n)}});function lC(e,t,r){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Yxe=le("$ZodReadonly",(e,t)=>{zt.init(e,t),At(e._zod,"propValues",()=>t.innerType._zod.propValues),At(e._zod,"values",()=>t.innerType._zod.values),At(e._zod,"optin",()=>t.innerType._zod.optin),At(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(dC):dC(s)}});function dC(e){return e.value=Object.freeze(e.value),e}const Zxe=le("$ZodCustom",(e,t)=>{en.init(e,t),zt.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(o=>uC(o,r,n,e));uC(s,r,n,e)}});function uC(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(kd(s))}}class Xxe{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Jxe(){return new Xxe}const Zu=Jxe();function Qxe(e,t){return new e({type:"string",...Te(t)})}function eye(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Te(t)})}function fC(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Te(t)})}function tye(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Te(t)})}function rye(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Te(t)})}function nye(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Te(t)})}function aye(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Te(t)})}function sye(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Te(t)})}function oye(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Te(t)})}function iye(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Te(t)})}function cye(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Te(t)})}function lye(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Te(t)})}function dye(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Te(t)})}function uye(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Te(t)})}function fye(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Te(t)})}function hye(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Te(t)})}function mye(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Te(t)})}function pye(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Te(t)})}function gye(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Te(t)})}function vye(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Te(t)})}function xye(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Te(t)})}function yye(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Te(t)})}function bye(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Te(t)})}function jye(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Te(t)})}function wye(e,t){return new e({type:"string",format:"date",check:"string_format",...Te(t)})}function Nye(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Te(t)})}function _ye(e,t){return new e({type:"string",format:"duration",check:"string_format",...Te(t)})}function Sye(e,t){return new e({type:"number",checks:[],...Te(t)})}function Cye(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Te(t)})}function Pye(e,t){return new e({type:"boolean",...Te(t)})}function Aye(e){return new e({type:"unknown"})}function kye(e,t){return new e({type:"never",...Te(t)})}function Eye(e,t){return new e({type:"date",...Te(t)})}function hC(e,t){return new pM({check:"less_than",...Te(t),value:e,inclusive:!1})}function ff(e,t){return new pM({check:"less_than",...Te(t),value:e,inclusive:!0})}function mC(e,t){return new gM({check:"greater_than",...Te(t),value:e,inclusive:!1})}function hf(e,t){return new gM({check:"greater_than",...Te(t),value:e,inclusive:!0})}function pC(e,t){return new Hve({check:"multiple_of",...Te(t),value:e})}function yM(e,t){return new Kve({check:"max_length",...Te(t),maximum:e})}function Bh(e,t){return new Yve({check:"min_length",...Te(t),minimum:e})}function bM(e,t){return new Zve({check:"length_equals",...Te(t),length:e})}function Oye(e,t){return new Xve({check:"string_format",format:"regex",...Te(t),pattern:e})}function Tye(e){return new Jve({check:"string_format",format:"lowercase",...Te(e)})}function $ye(e){return new Qve({check:"string_format",format:"uppercase",...Te(e)})}function Mye(e,t){return new exe({check:"string_format",format:"includes",...Te(t),includes:e})}function Dye(e,t){return new txe({check:"string_format",format:"starts_with",...Te(t),prefix:e})}function Iye(e,t){return new rxe({check:"string_format",format:"ends_with",...Te(t),suffix:e})}function cu(e){return new nxe({check:"overwrite",tx:e})}function Rye(e){return cu(t=>t.normalize(e))}function Lye(){return cu(e=>e.trim())}function Fye(){return cu(e=>e.toLowerCase())}function zye(){return cu(e=>e.toUpperCase())}function Bye(e,t,r){return new e({type:"array",element:t,...Te(r)})}function Vye(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Te(r)})}function Uye(e){const t=qye(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(kd(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(kd(s))}},e(r.value,r)));return t}function qye(e,t){const r=new en({check:"custom",...Te(t)});return r._zod.check=e,r}function gC(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function Wye(e,t){for(var r={};e.length;){var n=e[0],s=n.code,o=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var c=n.unionErrors[0].errors[0];r[i]={message:c.message,type:c.code}}else r[i]={message:o,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var l=r[i].types,d=l&&l[n.code];r[i]=z0(i,t,r,s,d?[].concat(d,n.message):n.message)}e.shift()}return r}function Hye(e,t){for(var r={};e.length;){var n=e[0],s=n.code,o=n.message,i=n.path.join(".");if(!r[i])if(n.code==="invalid_union"&&n.errors.length>0){var c=n.errors[0][0];r[i]={message:c.message,type:c.code}}else r[i]={message:o,type:s};if(n.code==="invalid_union"&&n.errors.forEach(function(u){return u.forEach(function(f){return e.push(f)})}),t){var l=r[i].types,d=l&&l[n.code];r[i]=z0(i,t,r,s,d?[].concat(d,n.message):n.message)}e.shift()}return r}function Is(e,t,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(e))return function(n,s,o){try{return Promise.resolve(gC(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(i){return o.shouldUseNativeValidation&&by({},o),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if(function(c){return Array.isArray(c?.issues)}(i))return{values:{},errors:QS(Wye(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(e))return function(n,s,o){try{return Promise.resolve(gC(function(){return Promise.resolve((r.mode==="sync"?pve:gve)(e,n,t)).then(function(i){return o.shouldUseNativeValidation&&by({},o),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if(function(c){return c instanceof H0}(i))return{values:{},errors:QS(Hye(i.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}const Gye=le("ZodISODateTime",(e,t)=>{vxe.init(e,t),Bt.init(e,t)});function Kye(e){return jye(Gye,e)}const Yye=le("ZodISODate",(e,t)=>{xxe.init(e,t),Bt.init(e,t)});function Zye(e){return wye(Yye,e)}const Xye=le("ZodISOTime",(e,t)=>{yxe.init(e,t),Bt.init(e,t)});function Jye(e){return Nye(Xye,e)}const Qye=le("ZodISODuration",(e,t)=>{bxe.init(e,t),Bt.init(e,t)});function ebe(e){return _ye(Qye,e)}const jM=(e,t)=>{H0.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>mve(e,r)},flatten:{value:r=>hve(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,jy,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,jy,2)}},isEmpty:{get(){return e.issues.length===0}}})},F1e=le("ZodError",jM),Fp=le("ZodError",jM,{Parent:Error}),tbe=iM(Fp),rbe=cM(Fp),nbe=lM(Fp),abe=dM(Fp),Yt=le("ZodType",(e,t)=>(zt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Yo(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>tbe(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>nbe(e,r,n),e.parseAsync=async(r,n)=>rbe(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>abe(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(Zbe(r,n)),e.superRefine=r=>e.check(Xbe(r)),e.overwrite=r=>e.check(cu(r)),e.optional=()=>jC(e),e.nullable=()=>wC(e),e.nullish=()=>jC(wC(e)),e.nonoptional=r=>Ube(e,r),e.array=()=>Ebe(e),e.or=r=>$be([e,r]),e.and=r=>Dbe(e,r),e.transform=r=>NC(e,Rbe(r)),e.default=r=>zbe(e,r),e.prefault=r=>Vbe(e,r),e.catch=r=>Wbe(e,r),e.pipe=r=>NC(e,r),e.readonly=()=>Kbe(e),e.describe=r=>{const n=e.clone();return Zu.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return Zu.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Zu.get(e);const n=e.clone();return Zu.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),wM=le("_ZodString",(e,t)=>{G0.init(e,t),Yt.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Oye(...n)),e.includes=(...n)=>e.check(Mye(...n)),e.startsWith=(...n)=>e.check(Dye(...n)),e.endsWith=(...n)=>e.check(Iye(...n)),e.min=(...n)=>e.check(Bh(...n)),e.max=(...n)=>e.check(yM(...n)),e.length=(...n)=>e.check(bM(...n)),e.nonempty=(...n)=>e.check(Bh(1,...n)),e.lowercase=n=>e.check(Tye(n)),e.uppercase=n=>e.check($ye(n)),e.trim=()=>e.check(Lye()),e.normalize=(...n)=>e.check(Rye(...n)),e.toLowerCase=()=>e.check(Fye()),e.toUpperCase=()=>e.check(zye())}),sbe=le("ZodString",(e,t)=>{G0.init(e,t),wM.init(e,t),e.email=r=>e.check(eye(obe,r)),e.url=r=>e.check(sye(ibe,r)),e.jwt=r=>e.check(bye(wbe,r)),e.emoji=r=>e.check(oye(cbe,r)),e.guid=r=>e.check(fC(vC,r)),e.uuid=r=>e.check(tye(Xu,r)),e.uuidv4=r=>e.check(rye(Xu,r)),e.uuidv6=r=>e.check(nye(Xu,r)),e.uuidv7=r=>e.check(aye(Xu,r)),e.nanoid=r=>e.check(iye(lbe,r)),e.guid=r=>e.check(fC(vC,r)),e.cuid=r=>e.check(cye(dbe,r)),e.cuid2=r=>e.check(lye(ube,r)),e.ulid=r=>e.check(dye(fbe,r)),e.base64=r=>e.check(vye(ybe,r)),e.base64url=r=>e.check(xye(bbe,r)),e.xid=r=>e.check(uye(hbe,r)),e.ksuid=r=>e.check(fye(mbe,r)),e.ipv4=r=>e.check(hye(pbe,r)),e.ipv6=r=>e.check(mye(gbe,r)),e.cidrv4=r=>e.check(pye(vbe,r)),e.cidrv6=r=>e.check(gye(xbe,r)),e.e164=r=>e.check(yye(jbe,r)),e.datetime=r=>e.check(Kye(r)),e.date=r=>e.check(Zye(r)),e.time=r=>e.check(Jye(r)),e.duration=r=>e.check(ebe(r))});function ut(e){return Qxe(sbe,e)}const Bt=le("ZodStringFormat",(e,t)=>{Lt.init(e,t),wM.init(e,t)}),obe=le("ZodEmail",(e,t)=>{cxe.init(e,t),Bt.init(e,t)}),vC=le("ZodGUID",(e,t)=>{oxe.init(e,t),Bt.init(e,t)}),Xu=le("ZodUUID",(e,t)=>{ixe.init(e,t),Bt.init(e,t)}),ibe=le("ZodURL",(e,t)=>{lxe.init(e,t),Bt.init(e,t)}),cbe=le("ZodEmoji",(e,t)=>{dxe.init(e,t),Bt.init(e,t)}),lbe=le("ZodNanoID",(e,t)=>{uxe.init(e,t),Bt.init(e,t)}),dbe=le("ZodCUID",(e,t)=>{fxe.init(e,t),Bt.init(e,t)}),ube=le("ZodCUID2",(e,t)=>{hxe.init(e,t),Bt.init(e,t)}),fbe=le("ZodULID",(e,t)=>{mxe.init(e,t),Bt.init(e,t)}),hbe=le("ZodXID",(e,t)=>{pxe.init(e,t),Bt.init(e,t)}),mbe=le("ZodKSUID",(e,t)=>{gxe.init(e,t),Bt.init(e,t)}),pbe=le("ZodIPv4",(e,t)=>{jxe.init(e,t),Bt.init(e,t)}),gbe=le("ZodIPv6",(e,t)=>{wxe.init(e,t),Bt.init(e,t)}),vbe=le("ZodCIDRv4",(e,t)=>{Nxe.init(e,t),Bt.init(e,t)}),xbe=le("ZodCIDRv6",(e,t)=>{_xe.init(e,t),Bt.init(e,t)}),ybe=le("ZodBase64",(e,t)=>{Sxe.init(e,t),Bt.init(e,t)}),bbe=le("ZodBase64URL",(e,t)=>{Pxe.init(e,t),Bt.init(e,t)}),jbe=le("ZodE164",(e,t)=>{Axe.init(e,t),Bt.init(e,t)}),wbe=le("ZodJWT",(e,t)=>{Exe.init(e,t),Bt.init(e,t)}),NM=le("ZodNumber",(e,t)=>{xM.init(e,t),Yt.init(e,t),e.gt=(n,s)=>e.check(mC(n,s)),e.gte=(n,s)=>e.check(hf(n,s)),e.min=(n,s)=>e.check(hf(n,s)),e.lt=(n,s)=>e.check(hC(n,s)),e.lte=(n,s)=>e.check(ff(n,s)),e.max=(n,s)=>e.check(ff(n,s)),e.int=n=>e.check(xC(n)),e.safe=n=>e.check(xC(n)),e.positive=n=>e.check(mC(0,n)),e.nonnegative=n=>e.check(hf(0,n)),e.negative=n=>e.check(hC(0,n)),e.nonpositive=n=>e.check(ff(0,n)),e.multipleOf=(n,s)=>e.check(pC(n,s)),e.step=(n,s)=>e.check(pC(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ps(e){return Sye(NM,e)}const Nbe=le("ZodNumberFormat",(e,t)=>{Oxe.init(e,t),NM.init(e,t)});function xC(e){return Cye(Nbe,e)}const _be=le("ZodBoolean",(e,t)=>{Txe.init(e,t),Yt.init(e,t)});function yC(e){return Pye(_be,e)}const Sbe=le("ZodUnknown",(e,t)=>{$xe.init(e,t),Yt.init(e,t)});function bC(){return Aye(Sbe)}const Cbe=le("ZodNever",(e,t)=>{Mxe.init(e,t),Yt.init(e,t)});function Pbe(e){return kye(Cbe,e)}const Abe=le("ZodDate",(e,t)=>{Dxe.init(e,t),Yt.init(e,t),e.min=(n,s)=>e.check(hf(n,s)),e.max=(n,s)=>e.check(ff(n,s));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function _M(e){return Eye(Abe,e)}const kbe=le("ZodArray",(e,t)=>{Ixe.init(e,t),Yt.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Bh(r,n)),e.nonempty=r=>e.check(Bh(1,r)),e.max=(r,n)=>e.check(yM(r,n)),e.length=(r,n)=>e.check(bM(r,n)),e.unwrap=()=>e.element});function Ebe(e,t){return Bye(kbe,e,t)}const Obe=le("ZodObject",(e,t)=>{Rxe.init(e,t),Yt.init(e,t),At(e,"shape",()=>t.shape),e.keyof=()=>No(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:bC()}),e.loose=()=>e.clone({...e._zod.def,catchall:bC()}),e.strict=()=>e.clone({...e._zod.def,catchall:Pbe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>lve(e,r),e.merge=r=>dve(e,r),e.pick=r=>ive(e,r),e.omit=r=>cve(e,r),e.partial=(...r)=>uve(SM,e,r[0]),e.required=(...r)=>fve(CM,e,r[0])});function Zs(e,t){const r={type:"object",get shape(){return Ko(this,"shape",{...e}),this.shape},...Te(t)};return new Obe(r)}const Tbe=le("ZodUnion",(e,t)=>{Lxe.init(e,t),Yt.init(e,t),e.options=t.options});function $be(e,t){return new Tbe({type:"union",options:e,...Te(t)})}const Mbe=le("ZodIntersection",(e,t)=>{Fxe.init(e,t),Yt.init(e,t)});function Dbe(e,t){return new Mbe({type:"intersection",left:e,right:t})}const Sy=le("ZodEnum",(e,t)=>{zxe.init(e,t),Yt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Sy({...t,checks:[],...Te(s),entries:o})},e.exclude=(n,s)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new Sy({...t,checks:[],...Te(s),entries:o})}});function No(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Sy({type:"enum",entries:r,...Te(t)})}const Ibe=le("ZodTransform",(e,t)=>{Bxe.init(e,t),Yt.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=o=>{if(typeof o=="string")r.issues.push(kd(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(kd(i))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function Rbe(e){return new Ibe({type:"transform",transform:e})}const SM=le("ZodOptional",(e,t)=>{Vxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function jC(e){return new SM({type:"optional",innerType:e})}const Lbe=le("ZodNullable",(e,t)=>{Uxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function wC(e){return new Lbe({type:"nullable",innerType:e})}const Fbe=le("ZodDefault",(e,t)=>{qxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function zbe(e,t){return new Fbe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Bbe=le("ZodPrefault",(e,t)=>{Wxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Vbe(e,t){return new Bbe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const CM=le("ZodNonOptional",(e,t)=>{Hxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ube(e,t){return new CM({type:"nonoptional",innerType:e,...Te(t)})}const qbe=le("ZodCatch",(e,t)=>{Gxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Wbe(e,t){return new qbe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Hbe=le("ZodPipe",(e,t)=>{Kxe.init(e,t),Yt.init(e,t),e.in=t.in,e.out=t.out});function NC(e,t){return new Hbe({type:"pipe",in:e,out:t})}const Gbe=le("ZodReadonly",(e,t)=>{Yxe.init(e,t),Yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Kbe(e){return new Gbe({type:"readonly",innerType:e})}const Ybe=le("ZodCustom",(e,t)=>{Zxe.init(e,t),Yt.init(e,t)});function Zbe(e,t={}){return Vye(Ybe,e,t)}function Xbe(e){return Uye(e)}var Re=function(){return Re=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Re.apply(this,arguments)};function Jbe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function PM(e,t,r){for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function lu(e){return e.mode==="multiple"}function du(e){return e.mode==="range"}function zp(e){return e.mode==="single"}var Qbe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function e0e(e,t){return Me(e,"LLLL y",t)}function t0e(e,t){return Me(e,"d",t)}function r0e(e,t){return Me(e,"LLLL",t)}function n0e(e){return"".concat(e)}function a0e(e,t){return Me(e,"cccccc",t)}function s0e(e,t){return Me(e,"yyyy",t)}var o0e=Object.freeze({__proto__:null,formatCaption:e0e,formatDay:t0e,formatMonthCaption:r0e,formatWeekNumber:n0e,formatWeekdayName:a0e,formatYearCaption:s0e}),i0e=function(e,t,r){return Me(e,"do MMMM (EEEE)",r)},c0e=function(){return"Month: "},l0e=function(){return"Go to next month"},d0e=function(){return"Go to previous month"},u0e=function(e,t){return Me(e,"cccc",t)},f0e=function(e){return"Week n. ".concat(e)},h0e=function(){return"Year: "},m0e=Object.freeze({__proto__:null,labelDay:i0e,labelMonthDropdown:c0e,labelNext:l0e,labelPrevious:d0e,labelWeekNumber:f0e,labelWeekday:u0e,labelYearDropdown:h0e});function p0e(){var e="buttons",t=Qbe,r=M$,n={},s={},o=1,i={},c=new Date;return{captionLayout:e,classNames:t,formatters:o0e,labels:m0e,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:o,styles:i,today:c,mode:"default"}}function g0e(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,s=e.toMonth,o=e.fromDate,i=e.toDate;return n?o=Qt(n):t&&(o=new Date(t,0,1)),s?i=Za(s):r&&(i=new Date(r,11,31)),{fromDate:o?ic(o):void 0,toDate:i?ic(i):void 0}}var AM=x.createContext(void 0);function v0e(e){var t,r=e.initialProps,n=p0e(),s=g0e(r),o=s.fromDate,i=s.toDate,c=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;c!=="buttons"&&(!o||!i)&&(c="buttons");var l;(zp(r)||lu(r)||du(r))&&(l=r.onSelect);var d=Re(Re(Re({},n),r),{captionLayout:c,classNames:Re(Re({},n.classNames),r.classNames),components:Re({},r.components),formatters:Re(Re({},n.formatters),r.formatters),fromDate:o,labels:Re(Re({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Re(Re({},n.modifiers),r.modifiers),modifiersClassNames:Re(Re({},n.modifiersClassNames),r.modifiersClassNames),onSelect:l,styles:Re(Re({},n.styles),r.styles),toDate:i});return a.jsx(AM.Provider,{value:d,children:e.children})}function kt(){var e=x.useContext(AM);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function kM(e){var t=kt(),r=t.locale,n=t.classNames,s=t.styles,o=t.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:r})})}function x0e(e){return a.jsx("svg",Re({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function EM(e){var t,r,n=e.onChange,s=e.value,o=e.children,i=e.caption,c=e.className,l=e.style,d=kt(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:x0e;return a.jsxs("div",{className:c,style:l,children:[a.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),a.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:n,children:o}),a.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function y0e(e){var t,r=kt(),n=r.fromDate,s=r.toDate,o=r.styles,i=r.locale,c=r.formatters.formatMonthCaption,l=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var f=[];if(ege(n,s))for(var h=Qt(n),p=n.getMonth();p<=s.getMonth();p++)f.push(qg(h,p));else for(var h=Qt(new Date),p=0;p<=11;p++)f.push(qg(h,p));var v=function(g){var y=Number(g.target.value),b=qg(Qt(e.displayMonth),y);e.onChange(b)},m=(t=d?.Dropdown)!==null&&t!==void 0?t:EM;return a.jsx(m,{name:"months","aria-label":u(),className:l.dropdown_month,style:o.dropdown_month,onChange:v,value:e.displayMonth.getMonth(),caption:c(e.displayMonth,{locale:i}),children:f.map(function(g){return a.jsx("option",{value:g.getMonth(),children:c(g,{locale:i})},g.getMonth())})})}function b0e(e){var t,r=e.displayMonth,n=kt(),s=n.fromDate,o=n.toDate,i=n.locale,c=n.styles,l=n.classNames,d=n.components,u=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!s)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});for(var p=s.getFullYear(),v=o.getFullYear(),m=p;m<=v;m++)h.push(FS(M0(new Date),m));var g=function(b){var w=FS(Qt(r),Number(b.target.value));e.onChange(w)},y=(t=d?.Dropdown)!==null&&t!==void 0?t:EM;return a.jsx(y,{name:"years","aria-label":f(),className:l.dropdown_year,style:c.dropdown_year,onChange:g,value:r.getFullYear(),caption:u(r,{locale:i}),children:h.map(function(b){return a.jsx("option",{value:b.getFullYear(),children:u(b,{locale:i})},b.getFullYear())})})}function j0e(e,t){var r=x.useState(e),n=r[0],s=r[1],o=t===void 0?n:t;return[o,s]}function w0e(e){var t=e.month,r=e.defaultMonth,n=e.today,s=t||r||n||new Date,o=e.toDate,i=e.fromDate,c=e.numberOfMonths,l=c===void 0?1:c;if(o&&Pd(o,s)<0){var d=-1*(l-1);s=gn(o,d)}return i&&Pd(s,i)<0&&(s=i),Qt(s)}function N0e(){var e=kt(),t=w0e(e),r=j0e(t,e.month),n=r[0],s=r[1],o=function(i){var c;if(!e.disableNavigation){var l=Qt(i);s(l),(c=e.onMonthChange)===null||c===void 0||c.call(e,l)}};return[n,o]}function _0e(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,s=Qt(e),o=Qt(gn(s,n)),i=Pd(o,s),c=[],l=0;l<i;l++){var d=gn(s,l);c.push(d)}return r&&(c=c.reverse()),c}function S0e(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,i=n?o:1,c=Qt(e);if(!r)return gn(c,i);var l=Pd(r,e);if(!(l<o))return gn(c,i)}}function C0e(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,i=n?o:1,c=Qt(e);if(!r)return gn(c,-i);var l=Pd(c,r);if(!(l<=0))return gn(c,-i)}}var OM=x.createContext(void 0);function P0e(e){var t=kt(),r=N0e(),n=r[0],s=r[1],o=_0e(n,t),i=S0e(n,t),c=C0e(n,t),l=function(f){return o.some(function(h){return Tp(f,h)})},d=function(f,h){l(f)||(h&&F$(f,h)?s(gn(f,1+t.numberOfMonths*-1)):s(f))},u={currentMonth:n,displayMonths:o,goToMonth:s,goToDate:d,previousMonth:c,nextMonth:i,isDateDisplayed:l};return a.jsx(OM.Provider,{value:u,children:e.children})}function uu(){var e=x.useContext(OM);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function _C(e){var t,r=kt(),n=r.classNames,s=r.styles,o=r.components,i=uu().goToMonth,c=function(u){i(gn(u,e.displayIndex?-e.displayIndex:0))},l=(t=o?.CaptionLabel)!==null&&t!==void 0?t:kM,d=a.jsx(l,{id:e.id,displayMonth:e.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:d}),a.jsx(y0e,{onChange:c,displayMonth:e.displayMonth}),a.jsx(b0e,{onChange:c,displayMonth:e.displayMonth})]})}function A0e(e){return a.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function k0e(e){return a.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Vh=x.forwardRef(function(e,t){var r=kt(),n=r.classNames,s=r.styles,o=[n.button_reset,n.button];e.className&&o.push(e.className);var i=o.join(" "),c=Re(Re({},s.button_reset),s.button);return e.style&&Object.assign(c,e.style),a.jsx("button",Re({},e,{ref:t,type:"button",className:i,style:c}))});function E0e(e){var t,r,n=kt(),s=n.dir,o=n.locale,i=n.classNames,c=n.styles,l=n.labels,d=l.labelPrevious,u=l.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return a.jsx(a.Fragment,{});var h=d(e.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),v=u(e.nextMonth,{locale:o}),m=[i.nav_button,i.nav_button_next].join(" "),g=(t=f?.IconRight)!==null&&t!==void 0?t:k0e,y=(r=f?.IconLeft)!==null&&r!==void 0?r:A0e;return a.jsxs("div",{className:i.nav,style:c.nav,children:[!e.hidePrevious&&a.jsx(Vh,{name:"previous-month","aria-label":h,className:p,style:c.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?a.jsx(g,{className:i.nav_icon,style:c.nav_icon}):a.jsx(y,{className:i.nav_icon,style:c.nav_icon})}),!e.hideNext&&a.jsx(Vh,{name:"next-month","aria-label":v,className:m,style:c.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?a.jsx(y,{className:i.nav_icon,style:c.nav_icon}):a.jsx(g,{className:i.nav_icon,style:c.nav_icon})})]})}function SC(e){var t=kt().numberOfMonths,r=uu(),n=r.previousMonth,s=r.nextMonth,o=r.goToMonth,i=r.displayMonths,c=i.findIndex(function(v){return Tp(e.displayMonth,v)}),l=c===0,d=c===i.length-1,u=t>1&&(l||!d),f=t>1&&(d||!l),h=function(){n&&o(n)},p=function(){s&&o(s)};return a.jsx(E0e,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:f,nextMonth:s,previousMonth:n,onPreviousClick:h,onNextClick:p})}function O0e(e){var t,r=kt(),n=r.classNames,s=r.disableNavigation,o=r.styles,i=r.captionLayout,c=r.components,l=(t=c?.CaptionLabel)!==null&&t!==void 0?t:kM,d;return s?d=a.jsx(l,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=a.jsx(_C,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=a.jsxs(a.Fragment,{children:[a.jsx(_C,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),a.jsx(SC,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=a.jsxs(a.Fragment,{children:[a.jsx(l,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(SC,{displayMonth:e.displayMonth,id:e.id})]}),a.jsx("div",{className:n.caption,style:o.caption,children:d})}function T0e(e){var t=kt(),r=t.footer,n=t.styles,s=t.classNames.tfoot;return r?a.jsx("tfoot",{className:s,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:r})})}):a.jsx(a.Fragment,{})}function $0e(e,t,r){for(var n=r?Io(new Date):vn(new Date,{locale:e,weekStartsOn:t}),s=[],o=0;o<7;o++){var i=xr(n,o);s.push(i)}return s}function M0e(){var e=kt(),t=e.classNames,r=e.styles,n=e.showWeekNumber,s=e.locale,o=e.weekStartsOn,i=e.ISOWeek,c=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,d=$0e(s,o,i);return a.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&a.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,f){return a.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":l(u,{locale:s}),children:c(u,{locale:s})},f)})]})}function D0e(){var e,t=kt(),r=t.classNames,n=t.styles,s=t.components,o=(e=s?.HeadRow)!==null&&e!==void 0?e:M0e;return a.jsx("thead",{style:n.head,className:r.head,children:a.jsx(o,{})})}function I0e(e){var t=kt(),r=t.locale,n=t.formatters.formatDay;return a.jsx(a.Fragment,{children:n(e.date,{locale:r})})}var K0=x.createContext(void 0);function R0e(e){if(!lu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return a.jsx(K0.Provider,{value:t,children:e.children})}return a.jsx(L0e,{initialProps:e.initialProps,children:e.children})}function L0e(e){var t=e.initialProps,r=e.children,n=t.selected,s=t.min,o=t.max,i=function(d,u,f){var h,p;(h=t.onDayClick)===null||h===void 0||h.call(t,d,u,f);var v=!!(u.selected&&s&&n?.length===s);if(!v){var m=!!(!u.selected&&o&&n?.length===o);if(!m){var g=n?PM([],n):[];if(u.selected){var y=g.findIndex(function(b){return Br(d,b)});g.splice(y,1)}else g.push(d);(p=t.onSelect)===null||p===void 0||p.call(t,g,d,u,f)}}},c={disabled:[]};n&&c.disabled.push(function(d){var u=o&&n.length>o-1,f=n.some(function(h){return Br(h,d)});return!!(u&&!f)});var l={selected:n,onDayClick:i,modifiers:c};return a.jsx(K0.Provider,{value:l,children:r})}function Y0(){var e=x.useContext(K0);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function F0e(e,t){var r=t||{},n=r.from,s=r.to;return n&&s?Br(s,e)&&Br(n,e)?void 0:Br(s,e)?{from:s,to:void 0}:Br(n,e)?void 0:xy(n,e)?{from:e,to:s}:{from:n,to:e}:s?xy(e,s)?{from:s,to:e}:{from:e,to:s}:n?F$(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Z0=x.createContext(void 0);function z0e(e){if(!du(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(Z0.Provider,{value:t,children:e.children})}return a.jsx(B0e,{initialProps:e.initialProps,children:e.children})}function B0e(e){var t=e.initialProps,r=e.children,n=t.selected,s=n||{},o=s.from,i=s.to,c=t.min,l=t.max,d=function(p,v,m){var g,y;(g=t.onDayClick)===null||g===void 0||g.call(t,p,v,m);var b=F0e(p,n);(y=t.onSelect)===null||y===void 0||y.call(t,b,p,v,m)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],Br(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),c&&(o&&!i&&u.disabled.push({after:df(o,c-1),before:xr(o,c-1)}),o&&i&&u.disabled.push({after:o,before:xr(o,c-1)}),!o&&i&&u.disabled.push({after:df(i,c-1),before:xr(i,c-1)})),l){if(o&&!i&&(u.disabled.push({before:xr(o,-l+1)}),u.disabled.push({after:xr(o,l-1)})),o&&i){var f=ja(i,o)+1,h=l-f;u.disabled.push({before:df(o,h)}),u.disabled.push({after:xr(i,h)})}!o&&i&&(u.disabled.push({before:xr(i,-l+1)}),u.disabled.push({after:xr(i,l-1)}))}return a.jsx(Z0.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function X0(){var e=x.useContext(Z0);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function mf(e){return Array.isArray(e)?PM([],e):e!==void 0?[e]:[]}function V0e(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],s=r[1];t[n]=mf(s)}),t}var aa;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(aa||(aa={}));var U0e=aa.Selected,Ba=aa.Disabled,q0e=aa.Hidden,W0e=aa.Today,Hg=aa.RangeEnd,Gg=aa.RangeMiddle,Kg=aa.RangeStart,H0e=aa.Outside;function G0e(e,t,r){var n,s=(n={},n[U0e]=mf(e.selected),n[Ba]=mf(e.disabled),n[q0e]=mf(e.hidden),n[W0e]=[e.today],n[Hg]=[],n[Gg]=[],n[Kg]=[],n[H0e]=[],n);return e.fromDate&&s[Ba].push({before:e.fromDate}),e.toDate&&s[Ba].push({after:e.toDate}),lu(e)?s[Ba]=s[Ba].concat(t.modifiers[Ba]):du(e)&&(s[Ba]=s[Ba].concat(r.modifiers[Ba]),s[Kg]=r.modifiers[Kg],s[Gg]=r.modifiers[Gg],s[Hg]=r.modifiers[Hg]),s}var TM=x.createContext(void 0);function K0e(e){var t=kt(),r=Y0(),n=X0(),s=G0e(t,r,n),o=V0e(t.modifiers),i=Re(Re({},s),o);return a.jsx(TM.Provider,{value:i,children:e.children})}function $M(){var e=x.useContext(TM);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Y0e(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Z0e(e){return!!(e&&typeof e=="object"&&"from"in e)}function X0e(e){return!!(e&&typeof e=="object"&&"after"in e)}function J0e(e){return!!(e&&typeof e=="object"&&"before"in e)}function Q0e(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function eje(e,t){var r,n=t.from,s=t.to;if(n&&s){var o=ja(s,n)<0;o&&(r=[s,n],n=r[0],s=r[1]);var i=ja(e,n)>=0&&ja(s,e)>=0;return i}return s?Br(s,e):n?Br(n,e):!1}function tje(e){return $0(e)}function rje(e){return Array.isArray(e)&&e.every($0)}function nje(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(tje(r))return Br(e,r);if(rje(r))return r.includes(e);if(Z0e(r))return eje(e,r);if(Q0e(r))return r.dayOfWeek.includes(e.getDay());if(Y0e(r)){var n=ja(r.before,e),s=ja(r.after,e),o=n>0,i=s<0,c=xy(r.before,r.after);return c?i&&o:o||i}return X0e(r)?ja(e,r.after)>0:J0e(r)?ja(r.before,e)>0:typeof r=="function"?r(e):!1})}function J0(e,t,r){var n=Object.keys(t).reduce(function(o,i){var c=t[i];return nje(e,c)&&o.push(i),o},[]),s={};return n.forEach(function(o){return s[o]=!0}),r&&!Tp(e,r)&&(s.outside=!0),s}function aje(e,t){for(var r=Qt(e[0]),n=Za(e[e.length-1]),s,o,i=r;i<=n;){var c=J0(i,t),l=!c.disabled&&!c.hidden;if(!l){i=xr(i,1);continue}if(c.selected)return i;c.today&&!o&&(o=i),s||(s=i),i=xr(i,1)}return o||s}var sje=365;function MM(e,t){var r=t.moveBy,n=t.direction,s=t.context,o=t.modifiers,i=t.retry,c=i===void 0?{count:0,lastFocused:e}:i,l=s.weekStartsOn,d=s.fromDate,u=s.toDate,f=s.locale,h={day:xr,week:Cd,month:gn,year:Kme,startOfWeek:function(g){return s.ISOWeek?Io(g):vn(g,{locale:f,weekStartsOn:l})},endOfWeek:function(g){return s.ISOWeek?T$(g):Hc(g,{locale:f,weekStartsOn:l})}},p=h[r](e,n==="after"?1:-1);n==="before"&&d?p=Yme([d,p]):n==="after"&&u&&(p=Zme([u,p]));var v=!0;if(o){var m=J0(p,o);v=!m.disabled&&!m.hidden}return v?p:c.count>sje?c.lastFocused:MM(p,{moveBy:r,direction:n,context:s,modifiers:o,retry:Re(Re({},c),{count:c.count+1})})}var DM=x.createContext(void 0);function oje(e){var t=uu(),r=$M(),n=x.useState(),s=n[0],o=n[1],i=x.useState(),c=i[0],l=i[1],d=aje(t.displayMonths,r),u=s??(c&&t.isDateDisplayed(c))?c:d,f=function(){l(s),o(void 0)},h=function(g){o(g)},p=kt(),v=function(g,y){if(s){var b=MM(s,{moveBy:g,direction:y,context:p,modifiers:r});Br(s,b)||(t.goToDate(b,s),h(b))}},m={focusedDay:s,focusTarget:u,blur:f,focus:h,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return a.jsx(DM.Provider,{value:m,children:e.children})}function Q0(){var e=x.useContext(DM);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function ije(e,t){var r=$M(),n=J0(e,r,t);return n}var ej=x.createContext(void 0);function cje(e){if(!zp(e.initialProps)){var t={selected:void 0};return a.jsx(ej.Provider,{value:t,children:e.children})}return a.jsx(lje,{initialProps:e.initialProps,children:e.children})}function lje(e){var t=e.initialProps,r=e.children,n=function(o,i,c){var l,d,u;if((l=t.onDayClick)===null||l===void 0||l.call(t,o,i,c),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,c);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,c)},s={selected:t.selected,onDayClick:n};return a.jsx(ej.Provider,{value:s,children:r})}function IM(){var e=x.useContext(ej);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function dje(e,t){var r=kt(),n=IM(),s=Y0(),o=X0(),i=Q0(),c=i.focusDayAfter,l=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,f=i.blur,h=i.focus,p=i.focusMonthBefore,v=i.focusMonthAfter,m=i.focusYearBefore,g=i.focusYearAfter,y=i.focusStartOfWeek,b=i.focusEndOfWeek,w=function(D){var I,U,oe,J;zp(r)?(I=n.onDayClick)===null||I===void 0||I.call(n,e,t,D):lu(r)?(U=s.onDayClick)===null||U===void 0||U.call(s,e,t,D):du(r)?(oe=o.onDayClick)===null||oe===void 0||oe.call(o,e,t,D):(J=r.onDayClick)===null||J===void 0||J.call(r,e,t,D)},j=function(D){var I;h(e),(I=r.onDayFocus)===null||I===void 0||I.call(r,e,t,D)},N=function(D){var I;f(),(I=r.onDayBlur)===null||I===void 0||I.call(r,e,t,D)},_=function(D){var I;(I=r.onDayMouseEnter)===null||I===void 0||I.call(r,e,t,D)},S=function(D){var I;(I=r.onDayMouseLeave)===null||I===void 0||I.call(r,e,t,D)},C=function(D){var I;(I=r.onDayPointerEnter)===null||I===void 0||I.call(r,e,t,D)},k=function(D){var I;(I=r.onDayPointerLeave)===null||I===void 0||I.call(r,e,t,D)},$=function(D){var I;(I=r.onDayTouchCancel)===null||I===void 0||I.call(r,e,t,D)},A=function(D){var I;(I=r.onDayTouchEnd)===null||I===void 0||I.call(r,e,t,D)},P=function(D){var I;(I=r.onDayTouchMove)===null||I===void 0||I.call(r,e,t,D)},O=function(D){var I;(I=r.onDayTouchStart)===null||I===void 0||I.call(r,e,t,D)},M=function(D){var I;(I=r.onDayKeyUp)===null||I===void 0||I.call(r,e,t,D)},R=function(D){var I;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),d();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),u();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?m():p();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?g():v();break;case"Home":D.preventDefault(),D.stopPropagation(),y();break;case"End":D.preventDefault(),D.stopPropagation(),b();break}(I=r.onDayKeyDown)===null||I===void 0||I.call(r,e,t,D)},T={onClick:w,onFocus:j,onBlur:N,onKeyDown:R,onKeyUp:M,onMouseEnter:_,onMouseLeave:S,onPointerEnter:C,onPointerLeave:k,onTouchCancel:$,onTouchEnd:A,onTouchMove:P,onTouchStart:O};return T}function uje(){var e=kt(),t=IM(),r=Y0(),n=X0(),s=zp(e)?t.selected:lu(e)?r.selected:du(e)?n.selected:void 0;return s}function fje(e){return Object.values(aa).includes(e)}function hje(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var s=e.modifiersClassNames[n];if(s)r.push(s);else if(fje(n)){var o=e.classNames["day_".concat(n)];o&&r.push(o)}}),r}function mje(e,t){var r=Re({},e.styles.day);return Object.keys(t).forEach(function(n){var s;r=Re(Re({},r),(s=e.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function pje(e,t,r){var n,s,o,i=kt(),c=Q0(),l=ije(e,t),d=dje(e,l),u=uje(),f=!!(i.onDayClick||i.mode!=="default");x.useEffect(function(){var _;l.outside||c.focusedDay&&f&&Br(c.focusedDay,e)&&((_=r.current)===null||_===void 0||_.focus())},[c.focusedDay,e,r,f,l.outside]);var h=hje(i,l).join(" "),p=mje(i,l),v=!!(l.outside&&!i.showOutsideDays||l.hidden),m=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:I0e,g=a.jsx(m,{date:e,displayMonth:t,activeModifiers:l}),y={style:p,className:h,children:g,role:"gridcell"},b=c.focusTarget&&Br(c.focusTarget,e)&&!l.outside,w=c.focusedDay&&Br(c.focusedDay,e),j=Re(Re(Re({},y),(n={disabled:l.disabled,role:"gridcell"},n["aria-selected"]=l.selected,n.tabIndex=w||b?0:-1,n)),d),N={isButton:f,isHidden:v,activeModifiers:l,selectedDays:u,buttonProps:j,divProps:y};return N}function gje(e){var t=x.useRef(null),r=pje(e.date,e.displayMonth,t);return r.isHidden?a.jsx("div",{role:"gridcell"}):r.isButton?a.jsx(Vh,Re({name:"day",ref:t},r.buttonProps)):a.jsx("div",Re({},r.divProps))}function vje(e){var t=e.number,r=e.dates,n=kt(),s=n.onWeekNumberClick,o=n.styles,i=n.classNames,c=n.locale,l=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(t),{locale:c});if(!s)return a.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var f=l(Number(t),{locale:c}),h=function(p){s(t,r,p)};return a.jsx(Vh,{name:"week-number","aria-label":f,className:i.weeknumber,style:o.weeknumber,onClick:h,children:u})}function xje(e){var t,r,n=kt(),s=n.styles,o=n.classNames,i=n.showWeekNumber,c=n.components,l=(t=c?.Day)!==null&&t!==void 0?t:gje,d=(r=c?.WeekNumber)!==null&&r!==void 0?r:vje,u;return i&&(u=a.jsx("td",{className:o.cell,style:s.cell,children:a.jsx(d,{number:e.weekNumber,dates:e.dates})})),a.jsxs("tr",{className:o.row,style:s.row,children:[u,e.dates.map(function(f){return a.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:a.jsx(l,{displayMonth:e.displayMonth,date:f})},Xpe(f))})]})}function CC(e,t,r){for(var n=r?.ISOWeek?T$(t):Hc(t,r),s=r?.ISOWeek?Io(e):vn(e,r),o=ja(n,s),i=[],c=0;c<=o;c++)i.push(xr(s,c));var l=i.reduce(function(d,u){var f=r?.ISOWeek?D$(u):R$(u,r),h=d.find(function(p){return p.weekNumber===f});return h?(h.dates.push(u),d):(d.push({weekNumber:f,dates:[u]}),d)},[]);return l}function yje(e,t){var r=CC(Qt(e),Za(e),t);if(t?.useFixedWeeks){var n=Qpe(e,t);if(n<6){var s=r[r.length-1],o=s.dates[s.dates.length-1],i=Cd(o,6-n),c=CC(Cd(o,1),i,t);r.push.apply(r,c)}}return r}function bje(e){var t,r,n,s=kt(),o=s.locale,i=s.classNames,c=s.styles,l=s.hideHead,d=s.fixedWeeks,u=s.components,f=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,v=yje(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:o,weekStartsOn:f,firstWeekContainsDate:h}),m=(t=u?.Head)!==null&&t!==void 0?t:D0e,g=(r=u?.Row)!==null&&r!==void 0?r:xje,y=(n=u?.Footer)!==null&&n!==void 0?n:T0e;return a.jsxs("table",{id:e.id,className:i.table,style:c.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&a.jsx(m,{}),a.jsx("tbody",{className:i.tbody,style:c.tbody,children:v.map(function(b){return a.jsx(g,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),a.jsx(y,{displayMonth:e.displayMonth})]})}function jje(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var wje=jje()?x.useLayoutEffect:x.useEffect,Yg=!1,Nje=0;function PC(){return"react-day-picker-".concat(++Nje)}function _je(e){var t,r=e??(Yg?PC():null),n=x.useState(r),s=n[0],o=n[1];return wje(function(){s===null&&o(PC())},[]),x.useEffect(function(){Yg===!1&&(Yg=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function Sje(e){var t,r,n=kt(),s=n.dir,o=n.classNames,i=n.styles,c=n.components,l=uu().displayMonths,d=_je(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[o.month],h=i.month,p=e.displayIndex===0,v=e.displayIndex===l.length-1,m=!p&&!v;s==="rtl"&&(t=[p,v],v=t[0],p=t[1]),p&&(f.push(o.caption_start),h=Re(Re({},h),i.caption_start)),v&&(f.push(o.caption_end),h=Re(Re({},h),i.caption_end)),m&&(f.push(o.caption_between),h=Re(Re({},h),i.caption_between));var g=(r=c?.Caption)!==null&&r!==void 0?r:O0e;return a.jsxs("div",{className:f.join(" "),style:h,children:[a.jsx(g,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(bje,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function Cje(e){var t=kt(),r=t.classNames,n=t.styles;return a.jsx("div",{className:r.months,style:n.months,children:e.children})}function Pje(e){var t,r,n=e.initialProps,s=kt(),o=Q0(),i=uu(),c=x.useState(!1),l=c[0],d=c[1];x.useEffect(function(){s.initialFocus&&o.focusTarget&&(l||(o.focus(o.focusTarget),d(!0)))},[s.initialFocus,l,o.focus,o.focusTarget,o]);var u=[s.classNames.root,s.className];s.numberOfMonths>1&&u.push(s.classNames.multiple_months),s.showWeekNumber&&u.push(s.classNames.with_weeknumber);var f=Re(Re({},s.styles.root),s.style),h=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,m){var g;return Re(Re({},v),(g={},g[m]=n[m],g))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:Cje;return a.jsx("div",Re({className:u.join(" "),style:f,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:a.jsx(p,{children:i.displayMonths.map(function(v,m){return a.jsx(Sje,{displayIndex:m,displayMonth:v},m)})})}))}function Aje(e){var t=e.children,r=Jbe(e,["children"]);return a.jsx(v0e,{initialProps:r,children:a.jsx(P0e,{children:a.jsx(cje,{initialProps:r,children:a.jsx(R0e,{initialProps:r,children:a.jsx(z0e,{initialProps:r,children:a.jsx(K0e,{children:a.jsx(oje,{children:t})})})})})})})}function kje(e){return a.jsx(Aje,Re({},e,{children:a.jsx(Pje,{initialProps:e})}))}function Ed({className:e,classNames:t,showOutsideDays:r=!0,...n}){return a.jsx(kje,{showOutsideDays:r,className:te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:te(Ei({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:te(Ei({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>a.jsx(vc,{className:"h-4 w-4"}),IconRight:({...s})=>a.jsx(Bo,{className:"h-4 w-4"})},...n})}Ed.displayName="Calendar";var tj="Popover",[RM]=ia(tj,[Vs]),fu=Vs(),[Eje,Xs]=RM(tj),LM=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,c=fu(t),l=x.useRef(null),[d,u]=x.useState(!1),[f=!1,h]=ka({prop:n,defaultProp:s,onChange:o});return a.jsx(wm,{...c,children:a.jsx(Eje,{scope:t,contentId:Sn(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:i,children:r})})};LM.displayName=tj;var FM="PopoverAnchor",Oje=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xs(FM,r),o=fu(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return x.useEffect(()=>(i(),()=>c()),[i,c]),a.jsx(Hd,{...o,...n,ref:t})});Oje.displayName=FM;var zM="PopoverTrigger",BM=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xs(zM,r),o=fu(r),i=He(t,s.triggerRef),c=a.jsx($e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":HM(s.open),...n,ref:i,onClick:je(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:a.jsx(Hd,{asChild:!0,...o,children:c})});BM.displayName=zM;var rj="PopoverPortal",[Tje,$je]=RM(rj,{forceMount:void 0}),VM=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=Xs(rj,t);return a.jsx(Tje,{scope:t,forceMount:r,children:a.jsx(Ar,{present:r||o.open,children:a.jsx(Vd,{asChild:!0,container:s,children:n})})})};VM.displayName=rj;var cc="PopoverContent",UM=x.forwardRef((e,t)=>{const r=$je(cc,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=Xs(cc,e.__scopePopover);return a.jsx(Ar,{present:n||o.open,children:o.modal?a.jsx(Mje,{...s,ref:t}):a.jsx(Dje,{...s,ref:t})})});UM.displayName=cc;var Mje=x.forwardRef((e,t)=>{const r=Xs(cc,e.__scopePopover),n=x.useRef(null),s=He(t,n),o=x.useRef(!1);return x.useEffect(()=>{const i=n.current;if(i)return pm(i)},[]),a.jsx(Ud,{as:Ur,allowPinchZoom:!0,children:a.jsx(qM,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,i=>{i.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,d=c.button===2||l;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Dje=x.forwardRef((e,t)=>{const r=Xs(cc,e.__scopePopover),n=x.useRef(!1),s=x.useRef(!1);return a.jsx(qM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;r.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),qM=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...f}=e,h=Xs(cc,r),p=fu(r);return hm(),a.jsx(Bd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(xc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:a.jsx(Nm,{"data-state":HM(h.open),role:"dialog",id:h.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),WM="PopoverClose",Ije=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xs(WM,r);return a.jsx($e.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>s.onOpenChange(!1))})});Ije.displayName=WM;var Rje="PopoverArrow",Lje=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=fu(r);return a.jsx(_m,{...s,...n,ref:t})});Lje.displayName=Rje;function HM(e){return e?"open":"closed"}var Fje=LM,zje=BM,Bje=VM,GM=UM;const Uh=Fje,qh=zje,Od=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>a.jsx(Bje,{children:a.jsx(GM,{ref:s,align:t,sideOffset:r,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Od.displayName=GM.displayName;const lc=Ige,KM=x.createContext({}),at=({...e})=>a.jsx(KM.Provider,{value:{name:e.name},children:a.jsx(zge,{...e})}),Bp=()=>{const e=x.useContext(KM),t=x.useContext(YM),{getFieldState:r,formState:n}=Dp(),s=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},YM=x.createContext({}),Qe=x.forwardRef(({className:e,...t},r)=>{const n=x.useId();return a.jsx(YM.Provider,{value:{id:n},children:a.jsx("div",{ref:r,className:te("space-y-2",e),...t})})});Qe.displayName="FormItem";const et=x.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:s}=Bp();return a.jsx(K,{ref:r,className:te(n&&"text-destructive",e),htmlFor:s,...t})});et.displayName="FormLabel";const tt=x.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:o}=Bp();return a.jsx(Ur,{ref:t,id:n,"aria-describedby":r?`${s} ${o}`:`${s}`,"aria-invalid":!!r,...e})});tt.displayName="FormControl";const Vje=x.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Bp();return a.jsx("p",{ref:r,id:n,className:te("text-sm text-muted-foreground",e),...t})});Vje.displayName="FormDescription";const it=x.forwardRef(({className:e,children:t,...r},n)=>{const{error:s,formMessageId:o}=Bp(),i=s?String(s?.message):t;return i?a.jsx("p",{ref:n,id:o,className:te("text-sm font-medium text-destructive",e),...r,children:i}):null});it.displayName="FormMessage";const Uje=Zs({nomeCompleto:ut().min(2,"Nome deve ter pelo menos 2 caracteres"),email:ut().email("E-mail invlido").optional(),telefone:ut().min(10,"Telefone deve ter pelo menos 10 dgitos").regex(/^[\d\s\-\+\(\)]+$/,"Telefone deve conter apenas nmeros e smbolos padres"),endereco:ut().optional(),dataNascimento:ut().optional(),servicoFrequente:ut().optional(),ultimaVisita:_M().optional(),observacoes:ut().optional()});function Wh({cliente:e,onSubmit:t,trigger:r}){const[n,s]=x.useState(!1),o=Ds({resolver:Is(Uje),defaultValues:{nomeCompleto:e?.nomeCompleto||e?.nome||"",email:e?.email||"",telefone:e?.telefone||"",endereco:e?.endereco||"",dataNascimento:e?.dataNascimento||"",servicoFrequente:e?.servicoFrequente||"",ultimaVisita:e?.ultimaVisita?new Date(e.ultimaVisita):void 0,observacoes:e?.observacoes||""}}),i=l=>{t(l),o.reset(),s(!1),V.success(e?"Cliente atualizada - Os dados da cliente foram atualizados com sucesso.":"Cliente cadastrada - Nova cliente foi cadastrada com sucesso.")},c=a.jsxs(B,{className:"bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx(Vy,{className:"mr-2 h-4 w-4"}),"Nova Cliente"]});return a.jsxs(Sr,{open:n,onOpenChange:s,children:[a.jsx(Wc,{asChild:!0,children:r||c}),a.jsxs(gr,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[a.jsx(Cr,{children:a.jsx(Pr,{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary to-lilac-primary bg-clip-text text-transparent",children:e?"Editar Cliente":"Nova Cliente"})}),a.jsx(lc,{...o,children:a.jsxs("form",{onSubmit:o.handleSubmit(i),className:"space-y-5 sm:space-y-6",children:[a.jsx(at,{control:o.control,name:"nomeCompleto",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-foreground font-medium text-sm sm:text-base",children:"Nome Completo"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Digite o nome completo",className:"h-12 sm:h-11 text-base sm:text-sm border-border/50 focus:ring-primary",...l})}),a.jsx(it,{})]})}),a.jsx(at,{control:o.control,name:"email",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-foreground font-medium",children:"E-mail (opcional)"}),a.jsx(tt,{children:a.jsx(ue,{type:"email",placeholder:"cliente@exemplo.com",className:"border-border/50 focus:ring-primary",...l})}),a.jsx(it,{})]})}),a.jsx(at,{control:o.control,name:"telefone",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-foreground font-medium",children:"Telefone"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"(11) 99999-9999",className:"border-border/50 focus:ring-primary",...l})}),a.jsx(it,{})]})}),a.jsx(at,{control:o.control,name:"servicoFrequente",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-foreground font-medium",children:"Servio Frequente (opcional)"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Ex: Corte e Escova",className:"border-border/50 focus:ring-primary",...l})}),a.jsx(it,{})]})}),a.jsx(at,{control:o.control,name:"ultimaVisita",render:({field:l})=>a.jsxs(Qe,{className:"flex flex-col",children:[a.jsx(et,{className:"text-foreground font-medium",children:"ltima Visita (opcional)"}),a.jsxs(Uh,{children:[a.jsx(qh,{asChild:!0,children:a.jsx(tt,{children:a.jsxs(B,{variant:"outline",className:te("w-full pl-3 text-left font-normal border-border/50",!l.value&&"text-muted-foreground"),children:[l.value?Me(l.value,"PPP",{locale:Ve}):a.jsx("span",{children:"Selecione uma data"}),a.jsx(Ee,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),a.jsx(Od,{className:"w-auto p-0",align:"start",children:a.jsx(Ed,{mode:"single",selected:l.value,onSelect:l.onChange,disabled:d=>d>new Date,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),a.jsx(it,{})]})}),a.jsx(at,{control:o.control,name:"observacoes",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-foreground font-medium",children:"Observaes"}),a.jsx(tt,{children:a.jsx(fr,{placeholder:"Observaes adicionais sobre a cliente...",className:"min-h-[100px] border-border/50 focus:ring-primary resize-none",...l})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(B,{type:"button",variant:"outline",className:"flex-1 h-11 btn-touch",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(B,{type:"submit",className:"flex-1 h-11 btn-touch bg-gradient-to-r from-primary to-lilac-primary",children:e?"Atualizar":"Cadastrar"})]})]})})]})]})}const Dr=x.forwardRef(({className:e,...t},r)=>a.jsx("div",{className:"table-responsive",children:a.jsx("table",{ref:r,className:te("w-full caption-bottom text-responsive-sm",e),...t})}));Dr.displayName="Table";const Ir=x.forwardRef(({className:e,...t},r)=>a.jsx("thead",{ref:r,className:te("[&_tr]:border-b",e),...t}));Ir.displayName="TableHeader";const Rr=x.forwardRef(({className:e,...t},r)=>a.jsx("tbody",{ref:r,className:te("[&_tr:last-child]:border-0",e),...t}));Rr.displayName="TableBody";const qje=x.forwardRef(({className:e,...t},r)=>a.jsx("tfoot",{ref:r,className:te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));qje.displayName="TableFooter";const ht=x.forwardRef(({className:e,...t},r)=>a.jsx("tr",{ref:r,className:te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ht.displayName="TableRow";const be=x.forwardRef(({className:e,...t},r)=>a.jsx("th",{ref:r,className:te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));be.displayName="TableHead";const xe=x.forwardRef(({className:e,...t},r)=>a.jsx("td",{ref:r,className:te("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));xe.displayName="TableCell";const Wje=x.forwardRef(({className:e,...t},r)=>a.jsx("caption",{ref:r,className:te("mt-4 text-sm text-muted-foreground",e),...t}));Wje.displayName="TableCaption";var ZM="AlertDialog",[Hje]=ia(ZM,[qy]),fs=qy(),XM=e=>{const{__scopeAlertDialog:t,...r}=e,n=fs(t);return a.jsx(gm,{...n,...r,modal:!0})};XM.displayName=ZM;var Gje="AlertDialogTrigger",JM=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=fs(r);return a.jsx(vm,{...s,...n,ref:t})});JM.displayName=Gje;var Kje="AlertDialogPortal",QM=e=>{const{__scopeAlertDialog:t,...r}=e,n=fs(t);return a.jsx(xm,{...n,...r})};QM.displayName=Kje;var Yje="AlertDialogOverlay",eD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=fs(r);return a.jsx(yc,{...s,...n,ref:t})});eD.displayName=Yje;var Ai="AlertDialogContent",[Zje,Xje]=Hje(Ai),tD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,o=fs(r),i=x.useRef(null),c=He(t,i),l=x.useRef(null);return a.jsx(lA,{contentName:Ai,titleName:rD,docsSlug:"alert-dialog",children:a.jsx(Zje,{scope:r,cancelRef:l,children:a.jsxs(bc,{role:"alertdialog",...o,...s,ref:c,onOpenAutoFocus:je(s.onOpenAutoFocus,d=>{d.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[a.jsx(Fy,{children:n}),a.jsx(Qje,{contentRef:i})]})})})});tD.displayName=Ai;var rD="AlertDialogTitle",nD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=fs(r);return a.jsx(jc,{...s,...n,ref:t})});nD.displayName=rD;var aD="AlertDialogDescription",sD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=fs(r);return a.jsx(wc,{...s,...n,ref:t})});sD.displayName=aD;var Jje="AlertDialogAction",oD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=fs(r);return a.jsx(qd,{...s,...n,ref:t})});oD.displayName=Jje;var iD="AlertDialogCancel",cD=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=Xje(iD,r),o=fs(r),i=He(t,s);return a.jsx(qd,{...o,...n,ref:i})});cD.displayName=iD;var Qje=({contentRef:e})=>{const t=`\`${Ai}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ai}\` by passing a \`${aD}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ai}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ewe=XM,twe=JM,rwe=QM,lD=eD,dD=tD,uD=oD,fD=cD,hD=nD,mD=sD;const sa=ewe,Fo=twe,nwe=rwe,pD=x.forwardRef(({className:e,...t},r)=>a.jsx(lD,{className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));pD.displayName=lD.displayName;const En=x.forwardRef(({className:e,...t},r)=>a.jsxs(nwe,{children:[a.jsx(pD,{}),a.jsx(dD,{ref:r,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));En.displayName=dD.displayName;const On=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...t});On.displayName="AlertDialogHeader";const Tn=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Tn.displayName="AlertDialogFooter";const $n=x.forwardRef(({className:e,...t},r)=>a.jsx(hD,{ref:r,className:te("text-lg font-semibold",e),...t}));$n.displayName=hD.displayName;const Mn=x.forwardRef(({className:e,...t},r)=>a.jsx(mD,{ref:r,className:te("text-sm text-muted-foreground",e),...t}));Mn.displayName=mD.displayName;const Dn=x.forwardRef(({className:e,...t},r)=>a.jsx(uD,{ref:r,className:te(Ei(),e),...t}));Dn.displayName=uD.displayName;const oa=x.forwardRef(({className:e,...t},r)=>a.jsx(fD,{ref:r,className:te(Ei({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));oa.displayName=fD.displayName;const awe=1,swe=1e6;let Zg=0;function owe(){return Zg=(Zg+1)%Number.MAX_SAFE_INTEGER,Zg.toString()}const Xg=new Map,AC=e=>{if(Xg.has(e))return;const t=setTimeout(()=>{Xg.delete(e),Dl({type:"REMOVE_TOAST",toastId:e})},swe);Xg.set(e,t)},iwe=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,awe)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?AC(r):e.toasts.forEach(n=>{AC(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},pf=[];let gf={toasts:[]};function Dl(e){gf=iwe(gf,e),pf.forEach(t=>{t(gf)})}function Jt({...e}){const t=owe(),r=s=>Dl({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Dl({type:"DISMISS_TOAST",toastId:t});return Dl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Vp(){const[e,t]=x.useState(gf);return x.useEffect(()=>(pf.push(t),()=>{const r=pf.indexOf(t);r>-1&&pf.splice(r,1)}),[e]),{...e,toast:Jt,dismiss:r=>Dl({type:"DISMISS_TOAST",toastId:r})}}const Hh=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),cwe=(e,t)=>{const r=Hh(e);return t.every(n=>r.includes(n))},kC=(e,t)=>{if(!t.trim())return e;const r=Hh(t).split(/\s+/).filter(Boolean);if(r.length===0)return e;const n=Hh(e);let s=[],o=0;const i=[];r.forEach(l=>{let d=n.indexOf(l);for(;d!==-1;)i.push({start:d,end:d+l.length}),d=n.indexOf(l,d+1)}),i.sort((l,d)=>l.start-d.start);const c=[];for(const l of i)c.length===0||l.start>c[c.length-1].end?c.push({...l}):c[c.length-1].end=Math.max(c[c.length-1].end,l.end);for(const l of c)l.start>o&&s.push(e.slice(o,l.start)),s.push(a.jsx("mark",{className:"bg-primary/20 text-primary rounded px-0.5",children:e.slice(l.start,l.end)},l.start)),o=l.end;return o<e.length&&s.push(e.slice(o)),s.length>0?s:e};function lwe({clientes:e,onEdit:t,onDelete:r,onViewDetails:n}){const[s,o]=x.useState(""),[i,c]=x.useState(1),l=10,d=x.useMemo(()=>{if(!s.trim())return e;const j=Hh(s).split(/\s+/).filter(Boolean);return j.length===0?e:e.filter(N=>{const _=N.nomeCompleto||N.nome||"",S=N.telefone?.replace(/\D/g,"")||"",C=N.telefone||"",k=N.email||"",$=N.servicoFrequente||"",A=`${_} ${S} ${C} ${k} ${$}`;return cwe(A,j)})},[e,s]),u=x.useCallback(()=>{o(""),c(1)},[]),f=d.sort((j,N)=>(j.nomeCompleto||j.nome||"").localeCompare(N.nomeCompleto||N.nome||"")),h=Math.ceil(f.length/l),p=(i-1)*l,v=p+l,m=f.slice(p,v),g=j=>{const N=j.replace(/\D/g,"");return N.length===11?`(${N.slice(0,2)}) ${N.slice(2,7)}-${N.slice(7)}`:j},y=(j,N)=>{const _=j.replace(/\D/g,""),S=`Ol ${N}! Tudo bem?`,C=`https://wa.me/55${_}?text=${encodeURIComponent(S)}`;window.open(C,"_blank")},b=j=>{window.open(`tel:${j}`,"_self")},w=(j,N)=>{r(j),Jt({title:"Cliente removida",description:`${N} foi removida com sucesso.`})};return a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between",children:[a.jsxs(se,{className:"text-xl font-semibold",children:["Lista de Clientes (",d.length,")"]}),a.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[a.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar por nome, telefone, email...",value:s,onChange:j=>{o(j.target.value),c(1)},className:"pl-10 pr-10 border-border/50"}),s&&a.jsx(B,{variant:"ghost",size:"sm",onClick:u,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0 hover:bg-muted",children:a.jsx(qt,{className:"h-4 w-4"})})]})]}),s&&a.jsx("div",{className:"px-6 pb-2 text-sm text-muted-foreground",children:d.length===0?a.jsxs("span",{children:['Nenhum cliente encontrado para "',a.jsx("strong",{children:s}),'"']}):a.jsxs("span",{children:[d.length," cliente",d.length!==1?"s":""," encontrado",d.length!==1?"s":"",' para "',a.jsx("strong",{children:s}),'"']})})]}),a.jsx(q,{className:"p-0",children:m.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden lg:block overflow-responsive",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{className:"border-border/50",children:[a.jsx(be,{className:"font-semibold text-responsive-xs",children:"Nome Completo"}),a.jsx(be,{className:"font-semibold text-responsive-xs",children:"Telefone"}),a.jsx(be,{className:"font-semibold text-responsive-xs",children:"Servio Frequente"}),a.jsx(be,{className:"font-semibold text-responsive-xs",children:"ltima Visita"}),a.jsx(be,{className:"font-semibold text-right text-responsive-xs",children:"Aes"})]})}),a.jsx(Rr,{children:m.map(j=>a.jsxs(ht,{className:"border-border/50 hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>n(j),children:[a.jsx(xe,{className:"font-medium text-responsive-sm",children:kC(j.nomeCompleto||j.nome||"",s)}),a.jsx(xe,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-responsive-xs",children:g(j.telefone)}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(B,{size:"sm",variant:"ghost",onClick:N=>{N.stopPropagation(),b(j.telefone)},className:"btn-touch",children:a.jsx(rs,{className:"h-3 w-3"})}),a.jsx(B,{size:"sm",variant:"ghost",onClick:N=>{N.stopPropagation(),y(j.telefone,j.nomeCompleto||j.nome||"")},className:"btn-touch hover:bg-green-100",children:a.jsx(Es,{className:"h-3 w-3 text-green-600"})})]})]})}),a.jsx(xe,{children:a.jsx(pe,{variant:"outline",className:"bg-accent/50 text-responsive-xs",children:j.servicoFrequente||"No definido"})}),a.jsx(xe,{className:"text-responsive-xs",children:j.ultimaVisita?(()=>{try{const N=new Date(j.ultimaVisita);return isNaN(N.getTime())?"Data invlida":Me(N,"dd/MM/yyyy",{locale:Ve})}catch{return"Data invlida"}})():"No definido"}),a.jsx(xe,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[a.jsx(B,{size:"sm",variant:"ghost",onClick:N=>{N.stopPropagation(),n(j)},className:"btn-touch",children:a.jsx(FL,{className:"h-3 w-3"})}),a.jsx(Wh,{cliente:j,onSubmit:N=>t({...j,...N}),trigger:a.jsx(B,{size:"sm",variant:"ghost",onClick:N=>N.stopPropagation(),className:"btn-touch",children:a.jsx(Qn,{className:"h-3 w-3"})})}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsx(B,{size:"sm",variant:"ghost",onClick:N=>N.stopPropagation(),className:"btn-touch hover:bg-destructive/10 hover:text-destructive",children:a.jsx(pr,{className:"h-3 w-3"})})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{className:"text-responsive-lg",children:"Confirmar excluso"}),a.jsxs(Mn,{className:"text-responsive-sm",children:["Tem certeza que deseja excluir ",a.jsx("strong",{children:j.nomeCompleto||j.nome}),"? Esta ao no pode ser desfeita."]})]}),a.jsxs(Tn,{children:[a.jsx(oa,{className:"btn-touch text-responsive-sm",children:"Cancelar"}),a.jsx(Dn,{onClick:()=>w(j.id,j.nomeCompleto||j.nome||""),className:"bg-destructive hover:bg-destructive/90 btn-touch text-responsive-sm",children:"Excluir"})]})]})]})]})})]},j.id))})]})}),a.jsx("div",{className:"lg:hidden space-y-3 p-4",children:m.map(j=>a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm cursor-pointer hover:shadow-md transition-all active:scale-[0.98]",onClick:()=>n(j),children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx(Vr,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:kC(j.nomeCompleto||j.nome||"",s)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:g(j.telefone)})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(pe,{variant:"outline",className:"bg-accent/50 text-xs h-6",children:j.servicoFrequente||"No definido"}),a.jsxs(pe,{variant:"outline",className:"text-xs h-6",children:[a.jsx(Ee,{className:"h-3 w-3 mr-1"}),j.ultimaVisita?(()=>{try{const N=new Date(j.ultimaVisita);return isNaN(N.getTime())?"Sem visita":Me(N,"dd/MM/yy",{locale:Ve})}catch{return"Sem visita"}})():"Sem visita"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{size:"sm",variant:"outline",onClick:N=>{N.stopPropagation(),b(j.telefone)},className:"flex-1 h-11 btn-touch",children:[a.jsx(rs,{className:"h-4 w-4 mr-2"}),"Ligar"]}),a.jsxs(B,{size:"sm",variant:"outline",onClick:N=>{N.stopPropagation(),y(j.telefone,j.nomeCompleto||j.nome||"")},className:"flex-1 h-11 btn-touch bg-green-50 hover:bg-green-100",children:[a.jsx(Es,{className:"h-4 w-4 mr-2 text-green-600"}),"WhatsApp"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border/50",children:[a.jsx(Wh,{cliente:j,onSubmit:N=>t({...j,...N}),trigger:a.jsxs(B,{size:"sm",variant:"outline",onClick:N=>N.stopPropagation(),className:"h-10 text-xs btn-touch",children:[a.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Editar"]})}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsxs(B,{size:"sm",variant:"outline",onClick:N=>N.stopPropagation(),className:"h-10 text-xs btn-touch hover:bg-destructive/10 hover:text-destructive hover:border-destructive/50",children:[a.jsx(pr,{className:"h-3 w-3 mr-1"}),"Excluir"]})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsxs(Mn,{children:["Tem certeza que deseja excluir ",a.jsx("strong",{children:j.nomeCompleto||j.nome}),"? Esta ao no pode ser desfeita."]})]}),a.jsxs(Tn,{className:"flex-col sm:flex-row gap-2",children:[a.jsx(oa,{className:"btn-touch m-0",children:"Cancelar"}),a.jsx(Dn,{onClick:()=>w(j.id,j.nomeCompleto||j.nome||""),className:"bg-destructive hover:bg-destructive/90 btn-touch m-0",children:"Excluir"})]})]})]})]})]})})},j.id))}),h>1&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-t border-border/50",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",p+1," a ",Math.min(v,f.length)," de ",f.length," clientes"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{variant:"outline",size:"sm",onClick:()=>c(j=>Math.max(j-1,1)),disabled:i===1,children:a.jsx(vc,{className:"h-4 w-4"})}),a.jsxs("span",{className:"text-sm font-medium",children:[i," de ",h]}),a.jsx(B,{variant:"outline",size:"sm",onClick:()=>c(j=>Math.min(j+1,h)),disabled:i===h,children:a.jsx(Bo,{className:"h-4 w-4"})})]})]})]}):a.jsxs("div",{className:"text-center py-12 px-4",children:[a.jsx("div",{className:"mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10 mx-auto",children:a.jsx(Jn,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h3",{className:"mb-2 text-lg font-semibold",children:s?"Nenhuma cliente encontrada":"Nenhuma cliente cadastrada"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:s?"Tente buscar com outros termos ou limpe o filtro.":"Comece cadastrando sua primeira cliente para comear a usar o sistema."}),s&&a.jsx(B,{variant:"outline",onClick:()=>o(""),children:"Limpar busca"})]})})]})}function dwe({cliente:e,open:t,onOpenChange:r,onEdit:n}){const[s,o]=x.useState([]),[i,c]=x.useState(!0);x.useEffect(()=>{e&&t&&l()},[e?.id,t]);const l=async()=>{if(e)try{c(!0);const{data:m,error:g}=await W.from("vendas_produtos").select("*, itens_venda(*)").eq("cliente_id",e.id).order("data_venda",{ascending:!1});if(g)throw g;o(m||[])}catch(m){console.error("Erro ao carregar vendas:",m)}finally{c(!1)}};if(!e)return null;const d=m=>{const g=m.replace(/\D/g,"");return g.length===11?`(${g.slice(0,2)}) ${g.slice(2,7)}-${g.slice(7)}`:m},u=m=>{const y=`https://wa.me/55${m.replace(/\D/g,"")}`;window.open(y,"_blank")},f=m=>{window.open(`tel:${m}`,"_self")},h=e.historicoServicos.reduce((m,g)=>m+g.valor,0),p=s.reduce((m,g)=>m+Number(g.valor_total),0),v=h+p;return a.jsx(Sr,{open:t,onOpenChange:r,children:a.jsxs(gr,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[a.jsx(Cr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Pr,{className:"text-2xl font-bold bg-gradient-to-r from-primary to-lilac-primary bg-clip-text text-transparent",children:e.nomeCompleto}),a.jsx(Wh,{cliente:e,onSubmit:m=>n({...e,...m}),trigger:a.jsxs(B,{variant:"outline",size:"sm",children:[a.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Editar"]})})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsx(se,{className:"text-lg",children:"Informaes de Contato"})}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rs,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-medium",children:d(e.telefone)}),a.jsxs("div",{className:"flex gap-2 ml-auto",children:[a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>f(e.telefone),className:"h-8",children:[a.jsx(rs,{className:"h-3 w-3 mr-1"}),"Ligar"]}),a.jsxs(B,{size:"sm",onClick:()=>u(e.telefone),className:"h-8 bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Es,{className:"h-3 w-3 mr-1"}),"WhatsApp"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4 text-lilac-primary"}),a.jsx("span",{children:"ltima visita: "}),a.jsx(pe,{variant:"secondary",children:e.ultimaVisita?(()=>{try{const m=typeof e.ultimaVisita=="string"?new Date(e.ultimaVisita):e.ultimaVisita;return isNaN(m.getTime())?"Data invlida":Me(m,"dd 'de' MMMM, yyyy",{locale:Ve})}catch{return"Data invlida"}})():"No informado"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"h-4 w-4 text-pink-accent"}),a.jsx("span",{children:"Servio frequente: "}),a.jsx(pe,{variant:"outline",className:"bg-accent/50",children:e.servicoFrequente})]})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{children:[a.jsx(se,{className:"text-lg",children:"Histrico de Servios"}),a.jsxs(ke,{children:["Total de ",e.historicoServicos.length," servios realizados  Valor total: R$ ",h.toFixed(2)]})]}),a.jsx(q,{children:e.historicoServicos.length>0?a.jsx("div",{className:"space-y-3",children:e.historicoServicos.sort((m,g)=>new Date(g.data).getTime()-new Date(m.data).getTime()).map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border/50 bg-background/50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:m.servico}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Me(m.data,"dd/MM/yyyy",{locale:Ve})})]}),a.jsxs(pe,{variant:"secondary",className:"bg-primary/10 text-primary",children:["R$ ",m.valor.toFixed(2)]})]},m.id))}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum servio registrado ainda"})})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"text-lg flex items-center gap-2",children:[a.jsx(FP,{className:"h-5 w-5"}),"Histrico de Compras de Produtos"]}),a.jsxs(ke,{children:["Total de ",s.length," compras  Valor total: R$ ",p.toFixed(2)]})]}),a.jsx(q,{children:i?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando compras..."}):s.length>0?a.jsx("div",{className:"space-y-3",children:s.map(m=>a.jsxs("div",{className:"p-3 rounded-lg border border-border/50 bg-background/50 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Compra de Produtos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Me(new Date(m.data_venda),"dd/MM/yyyy",{locale:Ve})})]}),a.jsxs(pe,{variant:"secondary",className:"bg-primary/10 text-primary",children:["R$ ",Number(m.valor_total).toFixed(2)]})]}),m.itens_venda&&m.itens_venda.length>0&&a.jsx("div",{className:"pl-4 border-l-2 border-border/50 space-y-1",children:m.itens_venda.map(g=>a.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",g.quantidade,"x - R$ ",Number(g.valor_unitario).toFixed(2)]},g.id))})]},m.id))}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma compra de produtos registrada ainda"})})]}),a.jsx(F,{className:"border-border/50 bg-gradient-to-br from-primary/5 to-lilac-primary/5",children:a.jsx(q,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Gasto (Servios + Produtos)"}),a.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-lilac-primary bg-clip-text text-transparent",children:["R$ ",v.toFixed(2)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Servios: R$ ",h.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Produtos: R$ ",p.toFixed(2)]})]})]})})}),e.observacoes&&a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsx(se,{className:"text-lg",children:"Observaes"})}),a.jsx(q,{children:a.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:e.observacoes})})]})]})]})})}function uwe(){const{clientes:e,criarCliente:t,atualizarCliente:r,excluirCliente:n}=Kd(),[s,o]=x.useState(null),[i,c]=x.useState(!1),l=async m=>{await t(m)},d=async m=>{await r(m.id,m),s?.id===m.id&&o(m)},u=async m=>{await n(m),s?.id===m&&(o(null),c(!1))},f=m=>{o(m),c(!0)},h=e.length,p=e.filter(m=>{if(!m.ultimaVisita)return!1;try{const g=new Date,y=new Date(g.getFullYear(),g.getMonth(),1);let b;if(typeof m.ultimaVisita=="string")b=new Date(m.ultimaVisita);else if(m.ultimaVisita instanceof Date)b=m.ultimaVisita;else return!1;return isNaN(b.getTime())?!1:b>=y}catch(g){return console.error("Erro ao processar data da ltima visita:",g),!1}}).length,v=e.reduce((m,g)=>m+(g.historicoServicos?.length||0),0);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Clientes"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerencie o cadastro e histrico das suas clientes"})]}),a.jsx(Wh,{onSubmit:l})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-lilac-light",children:a.jsx(mn,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:h}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Clientes"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-lilac-primary to-pink-accent",children:a.jsx(Vy,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:p}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Visitas Este Ms"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-pink-accent to-lavender",children:a.jsx(Ut,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Servios"})]})]})})]}),a.jsx(lwe,{clientes:e,onEdit:d,onDelete:u,onViewDetails:f}),a.jsx(dwe,{cliente:s,open:i,onOpenChange:c,onEdit:d})]})}function fwe({servicos:e,filtros:t,onFiltrosChange:r,onEdit:n,onDelete:s}){const[o,i]=x.useState(null),c=f=>`R$ ${f.toFixed(2).replace(".",",")}`,l=f=>{const h=Math.floor(f/60),p=f%60;return h>0&&p>0?`${h}h ${p}min`:h>0?`${h}h`:`${p}min`},d=f=>{const h=t.ordenacao===f&&t.direcao==="asc"?"desc":"asc";r({...t,ordenacao:f,direcao:h})},u=f=>t.ordenacao!==f?a.jsx(OL,{className:"h-4 w-4 text-muted-foreground"}):t.direcao==="asc"?a.jsx(TL,{className:"h-4 w-4 text-primary"}):a.jsx(EL,{className:"h-4 w-4 text-primary"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Bs,{className:"h-5 w-5 text-primary"}),"Filtros e Ordenao"]})}),a.jsxs(q,{children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar servio...",value:t.busca||"",onChange:f=>r({...t,busca:f.target.value}),className:"pl-10"})]}),a.jsxs(Ue,{value:`${t.ordenacao}-${t.direcao}`,onValueChange:f=>{const[h,p]=f.split("-");r({...t,ordenacao:h,direcao:p})},children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Ordenar por"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"nome-asc",children:"Nome (A-Z)"}),a.jsx(ne,{value:"nome-desc",children:"Nome (Z-A)"}),a.jsx(ne,{value:"valor-asc",children:"Valor (Menor primeiro)"}),a.jsx(ne,{value:"valor-desc",children:"Valor (Maior primeiro)"}),a.jsx(ne,{value:"duracao-asc",children:"Durao (Menor primeiro)"}),a.jsx(ne,{value:"duracao-desc",children:"Durao (Maior primeiro)"})]})]})]}),t.busca&&a.jsx("div",{className:"mt-4",children:a.jsx(B,{variant:"outline",size:"sm",onClick:()=>r({...t,busca:""}),children:"Limpar busca"})})]})]}),a.jsx("div",{className:"space-y-4",children:e.length===0?a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx(dn,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum servio encontrado"}),a.jsx("p",{className:"text-muted-foreground",children:t.busca?"Tente ajustar os filtros ou criar um novo servio.":"Comece criando seu primeiro servio."})]})}):a.jsxs(a.Fragment,{children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hidden md:block",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center font-semibold text-sm text-muted-foreground",children:[a.jsxs("button",{className:"flex items-center gap-2 hover:text-foreground transition-colors text-left",onClick:()=>d("nome"),children:["Servio",u("nome")]}),a.jsxs("button",{className:"flex items-center gap-2 hover:text-foreground transition-colors",onClick:()=>d("valor"),children:["Valor",u("valor")]}),a.jsxs("button",{className:"flex items-center gap-2 hover:text-foreground transition-colors",onClick:()=>d("duracao"),children:["Durao",u("duracao")]}),a.jsx("div",{children:"Descrio"}),a.jsx("div",{className:"text-right",children:"Aes"})]})})}),e.map(f=>a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:bg-card/70 transition-all duration-200",children:a.jsxs(q,{className:"p-6",children:[a.jsxs("div",{className:"md:hidden space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10",children:a.jsx(dn,{className:"h-4 w-4 text-primary"})}),f.nome]}),f.descricao&&a.jsx("p",{className:"text-sm text-muted-foreground",children:f.descricao})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>n(f),children:a.jsx(Qn,{className:"h-4 w-4"})}),a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>i(f),className:"text-destructive hover:text-destructive",children:a.jsx(pr,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-primary",children:c(f.valor)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:l(f.duracao)})]})]})]}),a.jsxs("div",{className:"hidden md:grid md:grid-cols-5 md:gap-4 md:items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10",children:a.jsx(dn,{className:"h-5 w-5 text-primary"})}),a.jsx("div",{children:a.jsx("h3",{className:"font-semibold text-foreground",children:f.nome})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-primary",children:c(f.valor)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:l(f.duracao)})]}),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:f.descricao||"-"})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>n(f),children:a.jsx(Qn,{className:"h-4 w-4"})}),a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>i(f),className:"text-destructive hover:text-destructive",children:a.jsx(pr,{className:"h-4 w-4"})})]})]})]})},f.id))]})}),a.jsx(sa,{open:!!o,onOpenChange:()=>i(null),children:a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsxs(Mn,{children:['Tem certeza que deseja excluir o servio "',o?.nome,'"? Esta ao no pode ser desfeita e pode afetar agendamentos existentes.']})]}),a.jsxs(Tn,{children:[a.jsx(oa,{children:"Cancelar"}),a.jsx(Dn,{onClick:()=>{o&&(s(o.id),i(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const hwe=Zs({nome:ut().min(1,"Nome do servio  obrigatrio").max(100,"Nome muito longo"),valor:Ps().min(.01,"Valor deve ser maior que zero"),duracao:Ps().int().min(1,"Durao deve ser pelo menos 1 minuto"),descricao:ut().optional(),observacoes:ut().optional()});function mwe({servico:e,onSubmit:t,onCancel:r}){const n=Ds({resolver:Is(hwe),defaultValues:{nome:e?.nome||"",valor:e?.valor||0,duracao:e?.duracao||30,descricao:e?.descricao||"",observacoes:e?.observacoes||""}}),s=i=>{t(i)},o=!!e;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(B,{variant:"ghost",size:"sm",onClick:r,className:"flex items-center gap-2",children:[a.jsx(Rd,{className:"h-4 w-4"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:o?"Editar Servio":"Novo Servio"}),a.jsx("p",{className:"text-muted-foreground",children:o?"Atualize as informaes do servio":"Preencha os dados do novo servio"})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10",children:a.jsx(dn,{className:"h-5 w-5 text-primary"})}),"Informaes do Servio"]}),a.jsx(ke,{children:"Preencha todos os campos obrigatrios para cadastrar o servio"})]}),a.jsx(q,{children:a.jsx(lc,{...n,children:a.jsxs("form",{onSubmit:n.handleSubmit(s),className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(at,{control:n.control,name:"nome",render:({field:i})=>a.jsxs(Qe,{children:[a.jsxs(et,{children:["Nome do Servio ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Ex: Corte Feminino",...i})}),a.jsx(it,{})]})}),a.jsx(at,{control:n.control,name:"valor",render:({field:i})=>a.jsxs(Qe,{children:[a.jsxs(et,{children:["Valor (R$) ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(tt,{children:a.jsx(ue,{type:"number",step:"0.01",min:"0.01",placeholder:"0,00",...i,onChange:c=>i.onChange(parseFloat(c.target.value)||0)})}),a.jsx(it,{})]})})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(at,{control:n.control,name:"duracao",render:({field:i})=>a.jsxs(Qe,{children:[a.jsxs(et,{children:["Durao (minutos) ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"1",placeholder:"30",...i,onChange:c=>i.onChange(parseInt(c.target.value)||0)})}),a.jsx(it,{})]})}),a.jsx("div",{})]}),a.jsx(at,{control:n.control,name:"descricao",render:({field:i})=>a.jsxs(Qe,{children:[a.jsx(et,{children:"Descrio"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Breve descrio do servio",...i})}),a.jsx(it,{})]})}),a.jsx(at,{control:n.control,name:"observacoes",render:({field:i})=>a.jsxs(Qe,{children:[a.jsx(et,{children:"Observaes"}),a.jsx(tt,{children:a.jsx(fr,{placeholder:"Observaes adicionais sobre o servio (opcional)",rows:3,...i})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:justify-end",children:[a.jsx(B,{type:"button",variant:"outline",onClick:r,className:"sm:w-auto",children:"Cancelar"}),a.jsx(B,{type:"submit",className:"bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300 sm:w-auto",children:o?"Atualizar Servio":"Criar Servio"})]})]})})})]})]})}function pwe(){const{servicos:e,filtros:t,setFiltros:r,criarServico:n,atualizarServico:s,excluirServico:o}=Cc(),[i,c]=x.useState("lista"),[l,d]=x.useState(null),u=()=>{d(null),c("formulario")},f=v=>{d(v),c("formulario")},h=v=>{(l?s(l.id,v):n(v))&&(c("lista"),d(null))},p=()=>{c("lista"),d(null)};return i==="formulario"?a.jsx("div",{className:"space-y-8",children:a.jsx(mwe,{servico:l||void 0,onSubmit:h,onCancel:p})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Servios"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerencie todos os servios oferecidos pelo seu salo"})]}),a.jsxs(B,{onClick:u,className:"bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx(wr,{className:"mr-2 h-4 w-4"}),"Novo Servio"]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-lilac-light",children:a.jsx(dn,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:e.length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Servios"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-lilac-primary to-pink-accent",children:a.jsx(dn,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:["R$ ",e.length>0?Math.min(...e.map(v=>v.valor)).toFixed(2):"0,00"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Menor Valor"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-pink-accent to-lavender",children:a.jsx(dn,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:["R$ ",e.length>0?Math.max(...e.map(v=>v.valor)).toFixed(2):"0,00"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maior Valor"})]})]})})]}),a.jsx(fwe,{servicos:e,filtros:t,onFiltrosChange:r,onEdit:f,onDelete:o})]})}function gwe({cronograma:e,onSuccess:t,onCancel:r}){const[n,s]=x.useState({cliente_id:e?.cliente_id||"",servico_id:e?.servico_id||"",data_inicio:e?.data_inicio||"",hora_inicio:e?.hora_inicio||"09:00",recorrencia:e?.recorrencia||"Semanal",intervalo_dias:e?.intervalo_dias||void 0,observacoes:e?.observacoes||"",status:e?.status||"ativo"}),{createCronograma:o,updateCronograma:i,loading:c}=$p(),{clientes:l}=Kd(),{servicos:d}=Cc(),{toast:u}=Vp(),f=async p=>{if(p.preventDefault(),!n.cliente_id||!n.servico_id||!n.data_inicio){u({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios.",variant:"destructive"});return}const v=l.find(y=>y.id===n.cliente_id),m=d.find(y=>y.id===n.servico_id);if(!v||!m){u({title:"Erro",description:"Cliente ou servio no encontrado.",variant:"destructive"});return}let g=n.intervalo_dias;n.recorrencia==="Semanal"?g=7:n.recorrencia==="Quinzenal"?g=14:n.recorrencia==="Mensal"&&(g=30);try{const y={cliente_id:n.cliente_id,cliente_nome:v.nome,servico_id:n.servico_id,tipo_servico:m.nome,data_inicio:n.data_inicio,hora_inicio:n.hora_inicio,duracao_minutos:m.duracao,recorrencia:n.recorrencia,intervalo_dias:g,observacoes:n.observacoes,status:n.status};e?(await i(e.id_cronograma,y),u({title:"Cronograma atualizado",description:"O cronograma foi atualizado com sucesso."})):(await o(y),u({title:"Cronograma criado",description:"O cronograma foi criado com sucesso."})),t?.()}catch{u({title:"Erro",description:"Ocorreu um erro ao salvar o cronograma.",variant:"destructive"})}},h=(p,v)=>{s(m=>({...m,[p]:v}))};return a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:e?"Editar Cronograma":"Novo Cronograma"})}),a.jsx(q,{children:a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cliente_id",children:"Cliente *"}),a.jsxs(Ue,{value:n.cliente_id,onValueChange:p=>h("cliente_id",p),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o cliente"})}),a.jsx(ze,{children:l.filter(p=>p.id&&p.id.trim()!=="").map(p=>a.jsx(ne,{value:p.id,children:p.nome},p.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"servico_id",children:"Servio *"}),a.jsxs(Ue,{value:n.servico_id,onValueChange:p=>h("servico_id",p),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o servio"})}),a.jsx(ze,{children:d.filter(p=>p.id&&p.id.trim()!=="").map(p=>a.jsxs(ne,{value:p.id,children:[p.nome," - ",p.duracao,"min - R$ ",p.valor]},p.id))})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"data_inicio",children:"Data de Incio *"}),a.jsx(ue,{id:"data_inicio",type:"date",value:n.data_inicio,onChange:p=>h("data_inicio",p.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"hora_inicio",children:"Horrio de Incio *"}),a.jsx(ue,{id:"hora_inicio",type:"time",value:n.hora_inicio,onChange:p=>h("hora_inicio",p.target.value),required:!0})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"recorrencia",children:"Recorrncia *"}),a.jsxs(Ue,{value:n.recorrencia,onValueChange:p=>h("recorrencia",p),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione a recorrncia"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"Semanal",children:"Semanal (7 dias)"}),a.jsx(ne,{value:"Quinzenal",children:"Quinzenal (14 dias)"}),a.jsx(ne,{value:"Mensal",children:"Mensal (30 dias)"}),a.jsx(ne,{value:"Personalizada",children:"Personalizada"})]})]})]}),n.recorrencia==="Personalizada"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"intervalo_dias",children:"Intervalo (dias)"}),a.jsx(ue,{id:"intervalo_dias",type:"number",min:"1",max:"365",value:n.intervalo_dias||"",onChange:p=>h("intervalo_dias",parseInt(p.target.value)||void 0),placeholder:"Ex: 21 dias",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"status",children:"Status"}),a.jsxs(Ue,{value:n.status,onValueChange:p=>h("status",p),children:[a.jsx(Fe,{children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"ativo",children:"Ativo"}),a.jsx(ne,{value:"cancelado",children:"Cancelado"}),a.jsx(ne,{value:"concluido",children:"Concludo"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"observacoes",children:"Observaes"}),a.jsx(fr,{id:"observacoes",value:n.observacoes,onChange:p=>h("observacoes",p.target.value),placeholder:"Observaes sobre o cronograma...",rows:3})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(B,{type:"submit",disabled:c,children:c?"Salvando...":e?"Atualizar":"Criar"}),r&&a.jsx(B,{type:"button",variant:"outline",onClick:r,children:"Cancelar"})]})]})})]})}const vwe=()=>{const[e,t]=x.useState(!1),r=x.useCallback((i,c,l,d="09:00")=>{const u=l.filter(h=>h.data===i&&h.status!=="cancelado"),f=[];for(let h=9;h<18;h++)for(let p=0;p<60;p+=30){const v=`${h.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`;f.push(v)}for(const h of f){const p=new Date(`${i}T${h}`),v=new Date(p.getTime()+c*6e4);if(!u.some(g=>{const y=new Date(`${g.data}T${g.hora}`),b=new Date(y.getTime()+g.duracao*6e4);return p<b&&v>y}))return h}return d},[]),n=x.useCallback((i,c,l,d,u)=>{const f=[],h=new Date(l);for(let p=0;p<d;p++){const v=new Date(h);v.setDate(h.getDate()+p*i.intervalo_dias);const m=v.toISOString().split("T")[0],g=r(m,c.duracao,[...u,...f]),y={id:`cronograma_${i.id_cronograma}_${p}_${Date.now()}`,clienteId:c.clienteId,clienteNome:c.clienteNome,servicoId:c.servicoId,servicoNome:c.servicoNome,data:m,hora:g,duracao:c.duracao,valor:c.valor,valorPago:0,valorDevido:c.valor,formaPagamento:"fiado",statusPagamento:"em_aberto",status:"agendado",observacoes:`Agendamento gerado automaticamente pelo cronograma: ${i.tipo_servico}`,origem:"cronograma",origem_cronograma:!0,cronogramaId:i.id_cronograma,confirmado:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};f.push(y)}return f},[r]),s=x.useCallback((i,c)=>{i.origem==="cronograma"&&i.cronogramaId&&V.success("Cronograma atualizado - O progresso do cronograma foi atualizado automaticamente.")},[]),o=x.useCallback((i,c)=>{i.origem==="cronograma"&&i.cronogramaId&&V.warning("Cronograma atualizado - O retorno foi cancelado no cronograma.")},[]);return{loading:e,gerarAgendamentosCronograma:n,processarConclusaoAgendamento:s,processarCancelamentoAgendamento:o,encontrarHorarioDisponivel:r}};function xwe({cronograma:e,clientes:t,servicos:r,agendamentosExistentes:n,onGerarAgendamentos:s,onSuccess:o,onCancel:i}){const[c,l]=x.useState(""),[d,u]=x.useState(""),[f,h]=x.useState(""),[p,v]=x.useState(4),[m,g]=x.useState(!1),{gerarAgendamentosCronograma:y}=vwe(),b=async w=>{if(w.preventDefault(),!e||!c||!d||!f){Jt({title:"Campos obrigatrios",description:"Preencha todos os campos obrigatrios.",variant:"destructive"});return}const j=t.find(_=>_.id===c),N=r.find(_=>_.id===d);if(!j||!N){Jt({title:"Erro",description:"Cliente ou servio no encontrado.",variant:"destructive"});return}g(!0);try{const _={clienteId:j.id,clienteNome:j.nome,servicoId:N.id,servicoNome:N.nome,data:f,duracao:N.duracao,valor:N.valor,cronogramaId:e.id_cronograma},S=y(e,_,f,p,n);s(S),Jt({title:"Cronograma ativado",description:`${S.length} agendamentos foram criados automaticamente.`}),o?.()}catch{Jt({title:"Erro",description:"Erro ao gerar agendamentos do cronograma.",variant:"destructive"})}finally{g(!1)}};return a.jsxs(F,{className:"w-full max-w-2xl mx-auto",children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-5 w-5 text-primary"}),"Ativar Cronograma: ",e?.tipo_servico]}),a.jsx(ke,{children:"Configure os detalhes para gerar agendamentos automticos"})]}),a.jsx(q,{children:a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cliente",children:"Cliente *"}),a.jsxs(Ue,{value:c,onValueChange:l,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o cliente"})}),a.jsx(ze,{children:t.map(w=>a.jsx(ne,{value:w.id,children:w.nome},w.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"servico",children:"Servio *"}),a.jsxs(Ue,{value:d,onValueChange:u,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o servio"})}),a.jsx(ze,{children:r.map(w=>a.jsxs(ne,{value:w.id,children:[w.nome," - ",w.duracao,"min - R$ ",w.valor]},w.id))})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"dataInicio",children:"Data de Incio *"}),a.jsx(ue,{id:"dataInicio",type:"date",value:f,onChange:w=>h(w.target.value),min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"numeroSessoes",children:"Nmero de Sesses"}),a.jsx(ue,{id:"numeroSessoes",type:"number",min:"1",max:"20",value:p,onChange:w=>v(parseInt(w.target.value)||1)})]})]}),e&&a.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),"Resumo do Cronograma"]}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.jsx("strong",{children:"Intervalo:"})," A cada ",e.intervalo_dias," dias"]}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.jsx("strong",{children:"Descrio:"})," ",e.observacoes||"Sem observaes"]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Sesses:"})," ",p," agendamentos sero criados"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(B,{type:"submit",disabled:m,className:"flex-1",children:m?a.jsxs(a.Fragment,{children:[a.jsx(st,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(wr,{className:"mr-2 h-4 w-4"}),"Gerar Agendamentos"]})}),i&&a.jsx(B,{type:"button",variant:"outline",onClick:i,children:"Cancelar"})]})]})})]})}function ywe(){const[e,t]=x.useState(null),[r,n]=x.useState(!1),[s,o]=x.useState(null),[i,c]=x.useState(!1),{cronogramas:l,loading:d,deleteCronograma:u}=$p(),{clientes:f}=Kd(),{servicos:h}=Cc(),{agendamentos:p,criarAgendamento:v}=KA(),{toast:m}=Vp(),g=async k=>{try{await u(k),m({title:"Cronograma removido",description:"O cronograma foi removido com sucesso."})}catch{m({title:"Erro",description:"Erro ao remover cronograma.",variant:"destructive"})}},y=()=>{n(!1),t(null)},b=()=>{n(!1),t(null)},w=k=>{o(k),c(!0)},j=async k=>{try{for(const $ of k)await v($);c(!1),o(null),m({title:"Cronograma ativado",description:`${k.length} agendamentos foram criados com sucesso.`})}catch{m({title:"Erro",description:"Erro ao gerar agendamentos.",variant:"destructive"})}},N=()=>{c(!1),o(null)},_=k=>{switch(k){case"ativo":return a.jsxs(pe,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[a.jsx(Pn,{className:"w-3 h-3 mr-1"}),"Ativo"]});case"cancelado":return a.jsxs(pe,{variant:"destructive",children:[a.jsx(eF,{className:"w-3 h-3 mr-1"}),"Cancelado"]});case"concluido":return a.jsxs(pe,{variant:"secondary",children:[a.jsx(Pn,{className:"w-3 h-3 mr-1"}),"Concludo"]});default:return a.jsx(pe,{variant:"outline",children:k})}},S=k=>k.recorrencia==="Personalizada"&&k.intervalo_dias?`A cada ${k.intervalo_dias} dias`:k.recorrencia,C=k=>{const $=new Date(k.data_inicio),A=new Date;let P=7;k.recorrencia==="Quinzenal"?P=14:k.recorrencia==="Mensal"?P=30:k.recorrencia==="Personalizada"&&k.intervalo_dias&&(P=k.intervalo_dias);let O=new Date($);for(;O<=A;)O.setDate(O.getDate()+P);return O.toLocaleDateString("pt-BR")};return d?a.jsx("div",{children:"Carregando cronogramas..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"Lista de Cronogramas"}),a.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gerencie cronogramas de retorno dos seus clientes"})]}),a.jsxs(Sr,{open:r,onOpenChange:n,children:[a.jsx(Wc,{asChild:!0,children:a.jsx(B,{onClick:()=>t(null),className:"w-full sm:w-auto",children:"Novo Cronograma"})}),a.jsxs(gr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Cr,{children:[a.jsx(Pr,{children:e?"Editar Cronograma":"Novo Cronograma"}),a.jsx(kn,{children:"Configure os detalhes do cronograma de retorno"})]}),a.jsx(gwe,{cronograma:e,onSuccess:y,onCancel:b})]})]})]}),a.jsx(Sr,{open:i,onOpenChange:c,children:a.jsxs(gr,{className:"max-w-3xl",children:[a.jsxs(Cr,{children:[a.jsx(Pr,{children:"Ativar Cronograma"}),a.jsx(kn,{children:"Configure os agendamentos automticos para este cronograma"})]}),s&&a.jsx(xwe,{cronograma:s,clientes:f.map(k=>({id:k.id,nome:k.nome})),servicos:h,agendamentosExistentes:p,onGerarAgendamentos:j,onSuccess:()=>c(!1),onCancel:N})]})}),l.length===0?a.jsx(F,{children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx(Ee,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum cronograma cadastrado"}),a.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Crie seu primeiro cronograma para automatizar retornos de clientes"}),a.jsx(B,{onClick:()=>n(!0),children:"Criar Primeiro Cronograma"})]})}):a.jsx("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:l.map(k=>a.jsxs(F,{className:"hover:shadow-md transition-shadow",children:[a.jsxs(ae,{className:"pb-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsx(se,{className:"text-lg truncate",children:k.cliente_nome}),_(k.status)]}),a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:k.tipo_servico})]})]}),a.jsxs(q,{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Prximo retorno:"}),a.jsx("span",{className:"font-medium",children:C(k)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Durao:"}),a.jsxs("span",{children:[k.duracao_minutos," min"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Recorrncia:"}),a.jsx("span",{className:"break-words",children:S(k)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Horrio:"}),a.jsx("span",{children:k.hora_inicio})]})]}),k.observacoes&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Obs:"}),a.jsx("p",{className:"text-foreground mt-1 break-words",children:k.observacoes})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3",children:[k.status==="ativo"&&a.jsxs(B,{variant:"default",size:"sm",onClick:()=>w(k),className:"flex-1",children:[a.jsx(tF,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Ativar"}),a.jsx("span",{className:"sm:hidden",children:"Ativar"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>{t(k),n(!0)},className:"flex-1 sm:flex-initial",children:[a.jsx(Qn,{className:"h-4 w-4"}),a.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsxs(B,{variant:"outline",size:"sm",className:"flex-1 sm:flex-initial",children:[a.jsx(pr,{className:"h-4 w-4"}),a.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})}),a.jsxs(En,{className:"mx-4 max-w-sm sm:max-w-lg",children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsx(Mn,{children:"Tem certeza que deseja excluir este cronograma? Esta ao no pode ser desfeita."})]}),a.jsxs(Tn,{className:"flex-col sm:flex-row gap-2",children:[a.jsx(oa,{className:"w-full sm:w-auto",children:"Cancelar"}),a.jsx(Dn,{onClick:()=>g(k.id_cronograma),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 w-full sm:w-auto",children:"Excluir"})]})]})]})]})]})]})]},k.id_cronograma))})]})}const EC=[{id_cliente:"1",nome_completo:"Maria Silva"},{id_cliente:"2",nome_completo:"Ana Santos"}],bwe=[{id_cronograma:"1",nome:"Hidratao Quinzenal"},{id_cronograma:"2",nome:"Cauterizao Mensal"}];function jwe(){const[e,t]=x.useState("all"),[r,n]=x.useState("all"),{retornos:s,marcarRetornoRealizado:o,cancelarRetorno:i,loading:c}=ou(),{toast:l}=Vp(),d=m=>EC.find(g=>g.id_cliente===m)?.nome_completo||"Cliente no encontrado",u=m=>bwe.find(g=>g.id_cronograma===m)?.nome||"Cronograma no encontrado",f=async m=>{try{await o(m),l({title:"Retorno marcado como realizado",description:"O prximo retorno ser automaticamente agendado."})}catch{l({title:"Erro",description:"Ocorreu um erro ao marcar o retorno como realizado.",variant:"destructive"})}},h=async m=>{try{await i(m),l({title:"Retorno cancelado",description:"O retorno foi cancelado com sucesso."})}catch{l({title:"Erro",description:"Ocorreu um erro ao cancelar o retorno.",variant:"destructive"})}},p=s.filter(m=>{const g=e==="all"||m.status===e,y=r==="all"||m.id_cliente===r;return g&&y}),v=m=>{switch(m){case"Pendente":return a.jsxs(pe,{variant:"secondary",children:[a.jsx(st,{className:"h-3 w-3 mr-1"}),"Pendente"]});case"Realizado":return a.jsxs(pe,{variant:"default",children:[a.jsx(Pn,{className:"h-3 w-3 mr-1"}),"Realizado"]});case"Cancelado":return a.jsxs(pe,{variant:"destructive",children:[a.jsx(_o,{className:"h-3 w-3 mr-1"}),"Cancelado"]});default:return a.jsx(pe,{variant:"outline",children:m})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Retornos dos Clientes"}),a.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Acompanhe e gerencie os retornos programados"})]})}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Bs,{className:"h-5 w-5"}),"Filtros"]})}),a.jsx(q,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Status"}),a.jsxs(Ue,{value:e,onValueChange:t,children:[a.jsx(Fe,{className:"w-full sm:w-40",children:a.jsx(qe,{placeholder:"Filtrar por status"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"all",children:"Todos"}),a.jsx(ne,{value:"Pendente",children:"Pendente"}),a.jsx(ne,{value:"Realizado",children:"Realizado"}),a.jsx(ne,{value:"Cancelado",children:"Cancelado"})]})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Cliente"}),a.jsxs(Ue,{value:r,onValueChange:n,children:[a.jsx(Fe,{className:"w-full sm:w-48",children:a.jsx(qe,{placeholder:"Filtrar por cliente"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"all",children:"Todos os clientes"}),EC.map(m=>a.jsx(ne,{value:m.id_cliente,children:m.nome_completo},m.id_cliente))]})]})]})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Lista de Retornos"})}),a.jsx(q,{children:p.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(Ee,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum retorno encontrado"}),a.jsx("p",{className:"text-muted-foreground text-center",children:"No h retornos que correspondam aos filtros selecionados"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{className:"min-w-[150px]",children:"Cliente"}),a.jsx(be,{className:"min-w-[120px] hidden sm:table-cell",children:"Cronograma"}),a.jsx(be,{className:"min-w-[120px]",children:"Data do Retorno"}),a.jsx(be,{className:"min-w-[100px]",children:"Status"}),a.jsx(be,{className:"min-w-[150px]",children:"Aes"})]})}),a.jsx(Rr,{children:p.map(m=>a.jsxs(ht,{children:[a.jsx(xe,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vr,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),a.jsx("span",{className:"truncate",children:d(m.id_cliente)})]})}),a.jsx(xe,{className:"hidden sm:table-cell",children:a.jsx("span",{className:"truncate",children:u(m.id_cronograma)})}),a.jsx(xe,{children:a.jsx("div",{className:"text-sm",children:Me(new Date(m.data_retorno),"dd/MM/yyyy",{locale:Ve})})}),a.jsx(xe,{children:v(m.status)}),a.jsx(xe,{children:a.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:m.status==="Pendente"&&a.jsxs(a.Fragment,{children:[a.jsxs(B,{size:"sm",onClick:()=>f(m.id_retorno),disabled:c,className:"w-full sm:w-auto text-xs",children:[a.jsx(Pn,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Realizado"}),a.jsx("span",{className:"sm:hidden",children:"OK"})]}),a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>h(m.id_retorno),disabled:c,className:"w-full sm:w-auto text-xs",children:[a.jsx(_o,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Cancelar"}),a.jsx("span",{className:"sm:hidden",children:"X"})]})]})})})]},m.id_retorno))})]})})})]})]})}function wwe(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Cronogramas"}),a.jsx("p",{className:"text-muted-foreground",children:"Gerencie cronogramas de retorno e integre automaticamente com agendamentos"})]}),a.jsxs(Zr,{className:"bg-purple-50 border-purple-200",children:[a.jsx(WL,{className:"h-4 w-4 text-purple-600"}),a.jsxs(Xr,{className:"text-purple-700",children:[a.jsx("strong",{children:"Nova funcionalidade:"}),' Agora voc pode ativar cronogramas para gerar agendamentos automticos! Clique em "Ativar" em qualquer cronograma para criar uma srie de agendamentos automaticamente.']})]}),a.jsxs(Ia,{defaultValue:"cronogramas",className:"space-y-6",children:[a.jsxs(ua,{className:"grid w-full grid-cols-2 max-w-full sm:max-w-md",children:[a.jsx(rt,{value:"cronogramas",className:"text-sm",children:"Cronogramas"}),a.jsx(rt,{value:"retornos",className:"text-sm",children:"Retornos"})]}),a.jsx(nt,{value:"cronogramas",className:"space-y-6",children:a.jsx(ywe,{})}),a.jsx(nt,{value:"retornos",className:"space-y-6",children:a.jsx(jwe,{})})]})]})}function gD(){const e=YA(),t=x.useMemo(()=>{const r=e.contasFixas.length,n=e.contasFixas.filter(i=>i.status==="pago").length,s=e.contasFixas.filter(i=>i.status==="em_aberto").length,o=e.contasFixas.reduce((i,c)=>i+c.valor,0);return{total:r,pagas:n,emAberto:s,valorTotal:o}},[e.contasFixas]);return{...e,criarContaFixa:e.createContaFixa,atualizarContaFixa:e.updateContaFixa,removerContaFixa:e.deleteContaFixa,criarCategoria:e.createCategoria,recarregar:e.loadContasFixas,estatisticas:t,marcarComoPaga:async r=>e.updateContaFixa(r,{status:"pago"}),pagarContaFixa:async r=>e.updateContaFixa(r,{status:"pago"}),marcarComoEmAberto:async r=>e.updateContaFixa(r,{status:"em_aberto"}),toggleAtiva:async r=>{const n=e.contasFixas.find(s=>s.id===r);if(n)return e.updateContaFixa(r,{ativa:!n.ativa})},getContasVencidas:()=>{const r=new Date;return e.contasFixas.filter(n=>{if(!n.ativa||n.status==="pago")return!1;const s=n.proximoVencimento?new Date(n.proximoVencimento):null;return s&&s<r})},getContasAVencer:()=>{const r=new Date,n=new Date;return n.setDate(r.getDate()+7),e.contasFixas.filter(s=>{if(!s.ativa||s.status==="pago")return!1;const o=s.proximoVencimento?new Date(s.proximoVencimento):null;return o&&o>=r&&o<=n})}}}const Nwe=640,Jg=1024;function nj(){const[e,t]=x.useState("desktop"),[r,n]=x.useState(!1),[s,o]=x.useState(!1),[i,c]=x.useState(!1);return x.useEffect(()=>{const l=()=>{const u=window.innerWidth;o(u<Nwe),n(u<768),c(u>=768&&u<Jg),u<768?t("mobile"):u<Jg?t("tablet"):t("desktop")};l();const d=window.matchMedia(`(max-width: ${Jg-1}px)`);return d.addEventListener("change",l),()=>d.removeEventListener("change",l)},[]),{breakpoint:e,isMobile:r,isSmallMobile:s,isTablet:i,isDesktop:e==="desktop"}}function _we({lancamentos:e,filtros:t,categorias:r,onFiltrosChange:n,onEdit:s,onDelete:o}){const[i,c]=x.useState(""),l=e.filter(f=>f.descricao.toLowerCase().includes(i.toLowerCase())||(f.categoria?.toLowerCase().includes(i.toLowerCase())??!1)),d=f=>{o(f),Jt({title:"Lanamento excludo",description:"O lanamento foi removido com sucesso."})},u=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f);return a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm animate-fade-in",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Bs,{className:"h-5 w-5 text-primary"}),"Lanamentos Financeiros"]})}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar lanamento...",value:i,onChange:f=>c(f.target.value),className:"pl-9"})]}),a.jsxs(Ue,{value:t.tipo||"todos",onValueChange:f=>n({...t,tipo:f==="todos"?void 0:f}),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Tipo"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todos",children:"Todos os tipos"}),a.jsx(ne,{value:"entrada",children:"Entradas"}),a.jsx(ne,{value:"saida",children:"Sadas"})]})]}),a.jsxs(Ue,{value:t.categoria||"todas",onValueChange:f=>n({...t,categoria:f==="todas"?void 0:f}),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Categoria"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todas",children:"Todas as categorias"}),r.map(f=>a.jsx(ne,{value:f,children:f},f))]})]}),a.jsxs(Ue,{value:t.mes?`${t.mes}-${t.ano}`:"todos",onValueChange:f=>{if(f==="todos")n({...t,mes:void 0,ano:void 0});else{const[h,p]=f.split("-").map(Number);n({...t,mes:h,ano:p})}},children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Ms"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todos",children:"Todos os meses"}),a.jsx(ne,{value:"12-2024",children:"Dezembro 2024"}),a.jsx(ne,{value:"11-2024",children:"Novembro 2024"}),a.jsx(ne,{value:"10-2024",children:"Outubro 2024"})]})]})]}),a.jsx("div",{className:"rounded-md border border-border/50",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Tipo"}),a.jsx(be,{children:"Descrio"}),a.jsx(be,{children:"Categoria"}),a.jsx(be,{children:"Data"}),a.jsx(be,{children:"Valor"}),a.jsx(be,{className:"w-[100px]",children:"Aes"})]})}),a.jsx(Rr,{children:l.length===0?a.jsx(ht,{children:a.jsx(xe,{colSpan:6,className:"text-center py-12",children:a.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in",children:[a.jsx(wl,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Nenhum lanamento encontrado"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i||t.tipo||t.categoria?"Tente ajustar os filtros de busca":"Adicione seu primeiro lanamento financeiro"})]})]})})}):l.map(f=>a.jsxs(ht,{children:[a.jsx(xe,{children:a.jsxs(pe,{variant:f.tipo==="entrada"?"default":"destructive",className:"flex items-center gap-1 w-fit",children:[f.tipo==="entrada"?a.jsx(Ut,{className:"h-3 w-3"}):a.jsx(Uo,{className:"h-3 w-3"}),f.tipo==="entrada"?"Entrada":"Sada"]})}),a.jsx(xe,{className:"font-medium",children:a.jsxs("div",{children:[a.jsx("p",{children:f.descricao}),f.origemTipo&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[f.origemTipo==="agendamento"&&" Agendamento",f.origemTipo==="compra_produto"&&" Compra de Produto",f.origemTipo==="venda_produto"&&" Venda de Produto",f.origemTipo==="conta_fixa"&&" Conta Fixa"]})]})}),a.jsx(xe,{children:f.categoria&&a.jsx(pe,{variant:"outline",children:f.categoria})}),a.jsx(xe,{children:Me(new Date(f.data),"dd/MM/yyyy",{locale:Ve})}),a.jsx(xe,{className:`font-semibold ${f.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:u(f.valor)}),a.jsx(xe,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>s(f),className:"hover-scale","aria-label":"Editar lanamento",children:a.jsx(RP,{className:"h-4 w-4"})}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsx(B,{variant:"ghost",size:"sm",className:"hover-scale","aria-label":"Excluir lanamento",children:a.jsx(pr,{className:"h-4 w-4"})})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Excluir lanamento"}),a.jsx(Mn,{children:"Tem certeza que deseja excluir este lanamento? Esta ao no pode ser desfeita."})]}),a.jsxs(Tn,{children:[a.jsx(oa,{children:"Cancelar"}),a.jsx(Dn,{onClick:()=>d(f.id),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})})]},f.id))})]})})]})]})}function Swe({lancamentos:e,onEdit:t,onDelete:r}){const n=s=>`R$ ${s.toFixed(2).replace(".",",")}`;return e.length===0?a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsx(q,{className:"py-12",children:a.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in",children:[a.jsx(wl,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Nenhum lanamento encontrado"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Adicione seu primeiro lanamento financeiro"})]})]})})}):a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm overflow-hidden hover-scale animate-fade-in",children:a.jsx(q,{className:"p-4 mobile-card",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.tipo==="entrada"?a.jsx(Ut,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):a.jsx(Uo,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:s.descricao}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Me(new Date(s.data),"dd/MM/yyyy",{locale:Ve})})]})]}),a.jsx("div",{className:"text-right flex-shrink-0",children:a.jsxs("p",{className:`font-bold text-base sm:text-lg ${s.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:[s.tipo==="entrada"?"+":"-"," ",n(s.valor)]})})]}),s.categoria&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zd,{className:"h-3 w-3 text-muted-foreground"}),a.jsx(pe,{variant:"outline",className:"text-xs",children:s.categoria})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border/50",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>t(s),className:"h-10 text-xs btn-touch hover-scale","aria-label":"Editar lanamento",children:[a.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Editar"]}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsxs(B,{variant:"outline",size:"sm",className:"h-10 text-xs btn-touch hover:bg-destructive/10 hover:text-destructive hover:border-destructive/50 hover-scale","aria-label":"Excluir lanamento",children:[a.jsx(pr,{className:"h-3 w-3 mr-1"}),"Excluir"]})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsxs(Mn,{children:['Tem certeza que deseja excluir o lanamento "',s.descricao,'"? Esta ao no pode ser desfeita.']})]}),a.jsxs(Tn,{children:[a.jsx(oa,{className:"btn-touch",children:"Cancelar"}),a.jsx(Dn,{onClick:()=>r(s.id),className:"bg-destructive hover:bg-destructive/90 btn-touch",children:"Excluir"})]})]})]})]})]})})},s.id))})}function Cwe({contas:e,onEdit:t,onDelete:r,onPagar:n,onToggleAtiva:s}){const o=d=>`R$ ${d.toFixed(2).replace(".",",")}`,i=d=>{switch(d){case"pago":return"bg-green-100 text-green-800 border-green-200";case"em_aberto":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=d=>{switch(d){case"pago":return"Pago";case"em_aberto":return"Em Aberto";default:return d}},l=d=>{switch(d){case"mensal":return"Mensal";case"trimestral":return"Trimestral";case"semestral":return"Semestral";case"anual":return"Anual";default:return d}};return e.length===0?a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsx(q,{className:"py-12",children:a.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in",children:[a.jsx(Ee,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Nenhuma conta fixa encontrada"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Adicione sua primeira conta fixa recorrente"})]})]})})}):a.jsx("div",{className:"space-y-3",children:e.map(d=>a.jsx(F,{className:`border-border/50 bg-card/50 backdrop-blur-sm overflow-hidden hover-scale animate-fade-in ${d.ativa?"":"opacity-60"}`,children:a.jsx(q,{className:"p-4 mobile-card",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[a.jsx(dt,{className:`h-5 w-5 flex-shrink-0 ${d.status==="pago"?"text-green-600":"text-red-600"}`}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:d.nome}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vence dia ",d.dataVencimento]})]})]}),a.jsx("div",{className:"text-right flex-shrink-0",children:a.jsx("p",{className:"font-bold text-base sm:text-lg text-foreground",children:o(d.valor)})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(pe,{variant:"outline",className:`text-xs ${i(d.status)}`,children:c(d.status)}),d.categoria&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zd,{className:"h-3 w-3 text-muted-foreground"}),a.jsx(pe,{variant:"outline",className:"text-xs",children:d.categoria})]}),d.repetir&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(By,{className:"h-3 w-3 text-muted-foreground"}),a.jsx(pe,{variant:"outline",className:"text-xs",children:l(d.frequencia)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border/50",children:[d.status==="em_aberto"&&d.ativa&&a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>n(d.id),className:"h-10 text-xs btn-touch border-green-500/50 hover:bg-green-50 hover:text-green-700 hover-scale","aria-label":"Marcar conta como paga",children:[a.jsx(yv,{className:"h-3 w-3 mr-1"}),"Pagar"]}),a.jsx(B,{variant:"outline",size:"sm",onClick:()=>s(d.id,!d.ativa),className:"h-10 text-xs btn-touch hover-scale","aria-label":d.ativa?"Desativar conta":"Ativar conta",children:d.ativa?a.jsxs(a.Fragment,{children:[a.jsx(rF,{className:"h-3 w-3 mr-1"}),"Desativar"]}):a.jsxs(a.Fragment,{children:[a.jsx(bv,{className:"h-3 w-3 mr-1"}),"Ativar"]})}),a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>t(d),className:"h-10 text-xs btn-touch hover-scale","aria-label":"Editar conta",children:[a.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Editar"]}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsxs(B,{variant:"outline",size:"sm",className:"h-10 text-xs btn-touch hover:bg-destructive/10 hover:text-destructive hover:border-destructive/50 hover-scale","aria-label":"Excluir conta",children:[a.jsx(pr,{className:"h-3 w-3 mr-1"}),"Excluir"]})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsxs(Mn,{children:['Tem certeza que deseja excluir a conta "',d.nome,'"? Esta ao no pode ser desfeita.']})]}),a.jsxs(Tn,{children:[a.jsx(oa,{className:"btn-touch",children:"Cancelar"}),a.jsx(Dn,{onClick:()=>r(d.id),className:"bg-destructive hover:bg-destructive/90 btn-touch",children:"Excluir"})]})]})]})]})]})})},d.id))})}const Pwe=Zs({tipo:No(["entrada","saida"],{message:"Selecione o tipo do lanamento"}),valor:ut().min(1,"Valor  obrigatrio").refine(e=>{const t=parseFloat(e.replace(",","."));return!isNaN(t)&&t>0},"Valor deve ser maior que zero"),data:_M({message:"Data  obrigatria"}),descricao:ut().min(1,"Descrio  obrigatria"),categoria:ut().optional()});function Awe({lancamento:e,categorias:t,onSubmit:r,onCancel:n}){const[s,o]=x.useState(!1),i=Ds({resolver:Is(Pwe),defaultValues:{tipo:e?.tipo||void 0,valor:e?.valor?e.valor.toString():"",data:e?.data?new Date(e.data):new Date,descricao:e?.descricao||"",categoria:e?.categoria||""}}),c=async l=>{o(!0);try{const d={tipo:l.tipo,valor:parseFloat(l.valor.replace(",",".")),data:l.data,descricao:l.descricao,categoria:l.categoria||void 0};r(d),Jt({title:e?"Lanamento atualizado":"Lanamento criado",description:`${e?"Alteraes salvas":"Novo lanamento adicionado"} com sucesso.`})}catch{Jt({title:"Erro",description:"Ocorreu um erro ao salvar o lanamento.",variant:"destructive"})}finally{o(!1)}};return a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:n,children:a.jsx(Rd,{className:"h-4 w-4"})}),a.jsx(se,{children:e?"Editar Lanamento":"Novo Lanamento"})]})}),a.jsx(q,{children:a.jsx(lc,{...i,children:a.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(at,{control:i.control,name:"tipo",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Tipo *"}),a.jsxs(Ue,{onValueChange:l.onChange,defaultValue:l.value,children:[a.jsx(tt,{children:a.jsx(Fe,{className:"h-12",children:a.jsx(qe,{placeholder:"Selecione o tipo"})})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"entrada",children:"Entrada"}),a.jsx(ne,{value:"saida",children:"Sada"})]})]}),a.jsx(it,{})]})}),a.jsx(at,{control:i.control,name:"valor",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Valor (R$) *"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"0,00",className:"h-12",...l,onChange:d=>{let u=d.target.value.replace(/[^\d,]/g,"");if(u.includes(",")){const f=u.split(",");f[1]&&f[1].length>2&&(u=f[0]+","+f[1].substring(0,2))}l.onChange(u)}})}),a.jsx(it,{})]})}),a.jsx(at,{control:i.control,name:"data",render:({field:l})=>a.jsxs(Qe,{className:"flex flex-col",children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Data *"}),a.jsxs(Uh,{children:[a.jsx(qh,{asChild:!0,children:a.jsx(tt,{children:a.jsxs(B,{variant:"outline",className:te("w-full pl-3 text-left font-normal h-12",!l.value&&"text-muted-foreground"),children:[l.value?Me(l.value,"dd/MM/yyyy",{locale:Ve}):a.jsx("span",{children:"Selecione a data"}),a.jsx(Ee,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),a.jsx(Od,{className:"w-auto p-0",align:"start",children:a.jsx(Ed,{mode:"single",selected:l.value,onSelect:l.onChange,disabled:d=>d>new Date||d<new Date("1900-01-01"),initialFocus:!0,className:te("p-3 pointer-events-auto")})})]}),a.jsx(it,{})]})}),a.jsx(at,{control:i.control,name:"categoria",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Categoria"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Ex: Servios, Produtos, Despesas...",className:"h-12",...l,list:"categorias"})}),a.jsx("datalist",{id:"categorias",children:t.map(d=>a.jsx("option",{value:d},d))}),a.jsx(it,{})]})})]}),a.jsx(at,{control:i.control,name:"descricao",render:({field:l})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Descrio *"}),a.jsx(tt,{children:a.jsx(fr,{placeholder:"Descreva o lanamento...",className:"resize-none min-h-[100px]",rows:3,...l})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4",children:[a.jsxs(B,{type:"submit",disabled:s,className:"bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300 h-12 btn-touch",children:[a.jsx(Vo,{className:"mr-2 h-4 w-4"}),s?"Salvando...":"Salvar Lanamento"]}),a.jsx(B,{type:"button",variant:"outline",onClick:n,className:"h-12 btn-touch",children:"Cancelar"})]})]})})})]})}function hu(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),s=async()=>{try{const{data:{user:c}}=await W.auth.getUser();if(!c)return;const{data:l,error:d}=await W.from("compras").select("*, itens_compra(*)").eq("user_id",c.id).order("data_compra",{ascending:!1});if(d)throw d;t(l||[])}catch(c){V.error("Erro ao carregar compras: "+c.message)}finally{n(!1)}},o=async c=>{try{const{data:{user:l}}=await W.auth.getUser();if(!l)throw new Error("Usurio no autenticado");const{data:d,error:u}=await W.from("compras").insert([{user_id:l.id,fornecedor_id:c.fornecedor_id,numero_nota:c.numero_nota,data_compra:c.data_compra,data_vencimento:c.data_vencimento,valor_total:c.valor_total,forma_pagamento:c.forma_pagamento,observacoes:c.observacoes}]).select().single();if(u)throw u;const f=c.itens.map(g=>({...g,compra_id:d.id})),{error:h}=await W.from("itens_compra").insert(f);if(h)throw h;const p=c.itens.map(g=>({user_id:l.id,produto_id:g.produto_id,tipo:"entrada",quantidade:g.quantidade,valor_unitario:g.valor_unitario,valor_total:g.valor_total,motivo:`Compra ${d.numero_nota||d.id}`,origem_id:d.id,origem_tipo:"compra_produto"})),{error:v}=await W.from("movimentacoes_estoque").insert(p);if(v)throw v;const{error:m}=await W.from("lancamentos").insert([{user_id:l.id,tipo:"saida",valor:c.valor_total,data:c.data_compra,descricao:`Compra de produtos${c.numero_nota?` - Nota ${c.numero_nota}`:""}`,categoria:"Compra de Produtos",origem_id:d.id,origem_tipo:"compra_produto"}]);if(m)throw m;V.success("Compra registrada com sucesso!"),await s()}catch(l){throw V.error("Erro ao registrar compra: "+l.message),l}},i=async(c,l)=>{try{const d=e.find(h=>h.id===c);if(!d)throw new Error("Compra no encontrada");const u=d.valor_pago+l,{error:f}=await W.from("compras").update({valor_pago:u}).eq("id",c);if(f)throw f;V.success("Pagamento registrado com sucesso!"),await s()}catch(d){throw V.error("Erro ao registrar pagamento: "+d.message),d}};return x.useEffect(()=>{s()},[]),{compras:e,loading:r,createCompra:o,registrarPagamento:i,recarregar:s}}function mu(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),s=async()=>{try{const{data:{user:i}}=await W.auth.getUser();if(!i)return;const{data:c,error:l}=await W.from("vendas_produtos").select("*, itens_venda(*)").eq("user_id",i.id).order("data_venda",{ascending:!1});if(l)throw l;t(c||[])}catch(i){V.error("Erro ao carregar vendas: "+i.message)}finally{n(!1)}},o=async i=>{try{const{data:{user:c}}=await W.auth.getUser();if(!c)throw new Error("Usurio no autenticado");const l=i.itens.reduce((g,y)=>g+y.valor_total,0),{data:d,error:u}=await W.from("vendas_produtos").insert([{user_id:c.id,cliente_id:i.cliente_id,agendamento_id:i.agendamento_id,data_venda:i.data_venda,valor_total:l,status_pagamento:"pago",forma_pagamento:i.forma_pagamento,observacoes:i.observacoes}]).select().single();if(u)throw u;const f=i.itens.map(g=>({...g,venda_id:d.id})),{error:h}=await W.from("itens_venda").insert(f);if(h)throw h;const p=i.itens.map(g=>({user_id:c.id,produto_id:g.produto_id,tipo:"saida",quantidade:g.quantidade,valor_unitario:g.valor_unitario,valor_total:g.valor_total,motivo:`Venda ${d.id}`,origem_id:d.id,origem_tipo:"venda"})),{error:v}=await W.from("movimentacoes_estoque").insert(p);if(v)throw v;const{error:m}=await W.from("lancamentos").insert([{user_id:c.id,tipo:"entrada",valor:l,data:i.data_venda,descricao:"Venda de produtos",categoria:"Venda de Produtos",origem_id:d.id,origem_tipo:"venda_produto",cliente_id:i.cliente_id}]);if(m)throw m;V.success("Venda registrada com sucesso!"),await s()}catch(c){throw V.error("Erro ao registrar venda: "+c.message),c}};return x.useEffect(()=>{s()},[]),{vendas:e,loading:r,createVenda:o,recarregar:s}}function kwe({lancamentos:e}){const{compras:t}=hu(),{vendas:r}=mu(),n=new Date,s=n.getMonth(),o=n.getFullYear(),i=e.filter(b=>{const w=new Date(b.data);return w.getMonth()===s&&w.getFullYear()===o}),c=x.useMemo(()=>t.filter(b=>{const w=new Date(b.data_compra);return w.getMonth()===s&&w.getFullYear()===o}),[t,s,o]),l=x.useMemo(()=>r.filter(b=>{const w=new Date(b.data_venda);return w.getMonth()===s&&w.getFullYear()===o}),[r,s,o]),d=c.reduce((b,w)=>b+w.valor_total,0),u=l.reduce((b,w)=>b+w.valor_total,0),f=i.filter(b=>b.tipo==="entrada").reduce((b,w)=>b+w.valor,0)+u,h=i.filter(b=>b.tipo==="saida").reduce((b,w)=>b+w.valor,0)+d,p=[{name:"Entradas",value:f,fill:"#22c55e"},{name:"Sadas",value:h,fill:"#ef4444"}],v=i.reduce((b,w)=>{const j=w.categoria||"Sem categoria";return b[j]||(b[j]={entradas:0,saidas:0}),w.tipo==="entrada"?b[j].entradas+=w.valor:b[j].saidas+=w.valor,b},{});u>0&&(v["Venda de Produtos"]||(v["Venda de Produtos"]={entradas:0,saidas:0}),v["Venda de Produtos"].entradas+=u),d>0&&(v["Compra de Produtos"]||(v["Compra de Produtos"]={entradas:0,saidas:0}),v["Compra de Produtos"].saidas+=d);const m=Object.entries(v).map(([b,w])=>({categoria:b,entradas:w.entradas,saidas:w.saidas})),g=b=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(b),y=f>0||h>0;return a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm animate-fade-in",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-primary"}),"Entradas vs Sadas"]})}),a.jsx(q,{children:y?a.jsx(mo,{width:"100%",height:300,children:a.jsxs(UO,{children:[a.jsx(Da,{data:p,cx:"50%",cy:"50%",labelLine:!1,label:({name:b,value:w})=>`${b}: ${g(w)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",animationDuration:800,children:p.map((b,w)=>a.jsx(Li,{fill:b.fill},`cell-${w}`))}),a.jsx(yr,{formatter:b=>g(Number(b))})]})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] gap-3 animate-fade-in",children:[a.jsx(Ut,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Sem dados para exibir"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Adicione lanamentos para visualizar o grfico"})]})]})})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm animate-fade-in",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-primary"}),"Por Categoria"]})}),a.jsx(q,{children:m.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] gap-3 animate-fade-in",children:[a.jsx(Ut,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Sem categorias para exibir"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Organize seus lanamentos em categorias"})]})]}):a.jsx(mo,{width:"100%",height:300,children:a.jsxs(Th,{data:m,children:[a.jsx(kl,{strokeDasharray:"3 3"}),a.jsx(es,{dataKey:"categoria",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),a.jsx(ts,{tick:{fontSize:12}}),a.jsx(yr,{formatter:b=>g(Number(b))}),a.jsx(_a,{}),a.jsx(na,{dataKey:"entradas",fill:"#22c55e",name:"Entradas",animationDuration:800}),a.jsx(na,{dataKey:"saidas",fill:"#ef4444",name:"Sadas",animationDuration:800})]})})})]})]})}function Ewe({agendamentos:e}){const[t,r]=x.useState(""),n=e.filter(c=>(c.status==="concluido"||c.valorPago>0)&&c.clienteNome.toLowerCase().includes(t.toLowerCase())),s=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),o=c=>{const l="",d=`Ol ${c.clienteNome}! 

Voc tem um saldo devedor de ${s(c.valorDevido||0)} referente ao servio ${c.servicoNome} realizado em ${Me(new Date(c.data),"dd/MM/yyyy",{locale:Ve})}.

${c.dataPrevistaPagamento?`Data prevista para pagamento: ${Me(new Date(c.dataPrevistaPagamento),"dd/MM/yyyy",{locale:Ve})}`:""}

Por favor, entre em contato para acertarmos o pagamento. Obrigado!`,u=`https://wa.me/${l}?text=${encodeURIComponent(d)}`;window.open(u,"_blank"),Jt({title:"WhatsApp aberto",description:"Mensagem de cobrana preparada no WhatsApp."})},i=c=>c.statusPagamento==="pago"?a.jsx(pe,{variant:"default",className:"bg-green-500",children:"Pago"}):c.statusPagamento==="parcial"?a.jsx(pe,{variant:"outline",className:"border-orange-500 text-orange-600",children:"Parcial"}):a.jsx(pe,{variant:"destructive",children:"Em Aberto"});return a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Vr,{className:"h-5 w-5 text-primary"}),"Pagamentos dos Clientes"]})}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"relative max-w-sm",children:[a.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar cliente...",value:t,onChange:c=>r(c.target.value),className:"pl-9"})]}),a.jsx("div",{className:"rounded-md border border-border/50",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Cliente"}),a.jsx(be,{children:"Servio"}),a.jsx(be,{children:"Data"}),a.jsx(be,{children:"Valor Total"}),a.jsx(be,{children:"Valor Pago"}),a.jsx(be,{children:"Saldo Devedor"}),a.jsx(be,{children:"Status"}),a.jsx(be,{children:"Data Prevista"}),a.jsx(be,{className:"w-[100px]",children:"Aes"})]})}),a.jsx(Rr,{children:n.length===0?a.jsx(ht,{children:a.jsx(xe,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Nenhum pagamento encontrado"})}):n.map(c=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:c.clienteNome}),a.jsx(xe,{children:c.servicoNome}),a.jsx(xe,{children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),Me(new Date(c.data),"dd/MM/yy",{locale:Ve})]})}),a.jsx(xe,{className:"font-semibold",children:s(c.valor)}),a.jsx(xe,{className:"text-green-600 font-semibold",children:s(c.valorPago)}),a.jsx(xe,{className:`font-semibold ${(c.valorDevido||0)>0?"text-red-600":"text-green-600"}`,children:s(c.valorDevido||0)}),a.jsx(xe,{children:i(c)}),a.jsx(xe,{children:c.dataPrevistaPagamento?a.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx(Ld,{className:"h-4 w-4 text-orange-500"}),Me(new Date(c.dataPrevistaPagamento),"dd/MM/yy",{locale:Ve})]}):a.jsx("span",{className:"text-muted-foreground",children:"-"})}),a.jsx(xe,{children:(c.valorDevido||0)>0&&a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>o(c),className:"flex items-center gap-1",children:[a.jsx(Es,{className:"h-4 w-4"}),"Cobrar"]})})]},c.id))})]})}),n.length>0&&a.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Clientes"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:new Set(n.map(c=>c.clienteId)).size})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Total Pago"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:s(n.reduce((c,l)=>c+l.valorPago,0))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Saldo Total Devedor"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:s(n.reduce((c,l)=>c+(l.valorDevido||0),0))})]})]})})]})]})}function Owe({contas:e,categorias:t,onEdit:r,onDelete:n,onPagar:s,onToggleAtiva:o}){const[i,c]=x.useState("todas"),[l,d]=x.useState("todos"),[u,f]=x.useState(""),h=e.filter(w=>{const j=w.nome.toLowerCase().includes(u.toLowerCase()),N=i==="todas"||w.categoria===i,_=l==="todos"||w.status===l;return j&&N&&_}),p=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),v=w=>{switch(w){case"pago":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"em_aberto":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},m=w=>{const j=new Date,N=j.getMonth()+1,_=j.getFullYear();j.getDate();const S=new Date(_,N-1,w),C=Math.ceil((S.getTime()-j.getTime())/(1e3*60*60*24));return C<0?{texto:"Vencido",cor:"text-red-600"}:C<=3?{texto:"Vence em breve",cor:"text-orange-600"}:{texto:`Vence dia ${w}`,cor:"text-gray-600"}},g=w=>{switch(w){case"mensal":return"Mensal";case"trimestral":return"Trimestral";case"semestral":return"Semestral";case"anual":return"Anual";default:return"nica"}},y=h.filter(w=>w.status==="em_aberto").reduce((w,j)=>w+j.valor,0),b=h.filter(w=>w.status==="pago").reduce((w,j)=>w+j.valor,0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Em Aberto"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:p(y)})]}),a.jsx(So,{className:"h-8 w-8 text-red-600"})]})})}),a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pagas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:p(b)})]}),a.jsx(dt,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total de Contas"}),a.jsx("p",{className:"text-2xl font-bold",children:h.length})]}),a.jsx(Ee,{className:"h-8 w-8 text-primary"})]})})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Bs,{className:"h-5 w-5"}),"Filtros"]})}),a.jsx(q,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar conta...",value:u,onChange:w=>f(w.target.value),className:"pl-9"})]}),a.jsxs(Ue,{value:i,onValueChange:c,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Todas as categorias"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todas",children:"Todas as categorias"}),t.filter(w=>w.tipo==="despesa").map(w=>a.jsx(ne,{value:w.nome,children:w.nome},w.id))]})]}),a.jsxs(Ue,{value:l,onValueChange:d,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Todos os status"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todos",children:"Todos os status"}),a.jsx(ne,{value:"em_aberto",children:"Em Aberto"}),a.jsx(ne,{value:"pago",children:"Pago"})]})]}),a.jsx(B,{variant:"outline",onClick:()=>{f(""),c("todas"),d("todos")},children:"Limpar Filtros"})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Contas Fixas"})}),a.jsx(q,{children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Nome"}),a.jsx(be,{children:"Categoria"}),a.jsx(be,{children:"Valor"}),a.jsx(be,{children:"Vencimento"}),a.jsx(be,{children:"Repetio"}),a.jsx(be,{children:"Status"}),a.jsx(be,{className:"text-right",children:"Aes"})]})}),a.jsx(Rr,{children:h.map(w=>{const j=m(w.dataVencimento);return a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:w.nome}),a.jsx(xe,{children:a.jsx(pe,{variant:"outline",children:w.categoria})}),a.jsx(xe,{className:"font-mono",children:p(w.valor)}),a.jsx(xe,{children:a.jsx("span",{className:j.cor,children:j.texto})}),a.jsx(xe,{children:a.jsx("div",{className:"flex items-center gap-2",children:w.repetir?a.jsxs(a.Fragment,{children:[a.jsx(By,{className:"h-4 w-4 text-blue-600"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:g(w.frequencia)}),a.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(bv,{className:`h-3 w-3 ${w.ativa?"text-green-600":"text-gray-400"}`}),w.ativa?"Ativa":"Inativa"]})]})]}):a.jsx(pe,{variant:"outline",className:"text-xs",children:"nica"})})}),a.jsx(xe,{children:a.jsx(pe,{className:v(w.status),children:w.status==="pago"?"Pago":"Em Aberto"})}),a.jsx(xe,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[w.status==="em_aberto"&&a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>s(w.id),className:"text-green-600 border-green-600 hover:bg-green-50 hover-scale btn-touch","aria-label":"Marcar conta como paga",children:[a.jsx(dt,{className:"h-4 w-4 mr-1"}),"Pagar"]}),w.repetir&&a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>o(w.id,!w.ativa),className:`hover-scale btn-touch ${w.ativa?"text-orange-600 border-orange-600":"text-green-600 border-green-600"}`,"aria-label":w.ativa?"Desativar conta":"Ativar conta",children:[a.jsx(bv,{className:"h-4 w-4 mr-1"}),w.ativa?"Desativar":"Ativar"]}),a.jsx(B,{size:"sm",variant:"outline",onClick:()=>r(w),className:"hover-scale btn-touch","aria-label":"Editar conta",children:a.jsx(RP,{className:"h-4 w-4"})}),a.jsxs(sa,{children:[a.jsx(Fo,{asChild:!0,children:a.jsx(B,{size:"sm",variant:"outline",className:"text-red-600 hover-scale btn-touch","aria-label":"Excluir conta",children:a.jsx(pr,{className:"h-4 w-4"})})}),a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Excluir Conta Fixa"}),a.jsxs(Mn,{children:['Tem certeza que deseja excluir a conta "',w.nome,'"? Esta ao no pode ser desfeita.']})]}),a.jsxs(Tn,{children:[a.jsx(oa,{children:"Cancelar"}),a.jsx(Dn,{onClick:()=>n(w.id),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})})]},w.id)})})]}),h.length===0&&a.jsxs("div",{className:"flex flex-col items-center gap-3 py-12 animate-fade-in",children:[a.jsx(Ee,{className:"h-12 w-12 text-muted-foreground/50"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base font-medium text-foreground",children:"Nenhuma conta fixa encontrada"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u||i!=="todas"||l!=="todos"?"Tente ajustar os filtros de busca":"Adicione sua primeira conta fixa recorrente"})]})]})]})})]})]})}const Twe=Zs({nome:ut().min(1,"Nome  obrigatrio"),valor:Ps().min(.01,"Valor deve ser maior que zero"),dataVencimento:Ps().min(1).max(31,"Dia deve estar entre 1 e 31"),categoria:ut().min(1,"Categoria  obrigatria"),observacoes:ut().optional(),repetir:yC(),frequencia:No(["mensal","trimestral","semestral","anual"]),ativa:yC().optional()}),$we=Zs({nome:ut().min(1,"Nome da categoria  obrigatrio"),cor:ut().optional()});function Mwe({conta:e,categorias:t,onSubmit:r,onCancel:n,onCreateCategoria:s}){const[o,i]=x.useState(!1),[c,l]=x.useState(!1),[d,u]=x.useState(!1),f=Ds({resolver:Is(Twe),defaultValues:{nome:e?.nome||"",valor:e?.valor||0,dataVencimento:e?.dataVencimento||1,categoria:e?.categoria||"",observacoes:e?.observacoes||"",repetir:e?.repetir??!0,frequencia:e?.frequencia||"mensal",ativa:e?.ativa??!0}}),h=Ds({resolver:Is($we),defaultValues:{nome:"",cor:"#3b82f6"}}),p=async g=>{i(!0);try{await r(g)}finally{i(!1)}},v=async g=>{if(s){u(!0);try{await s(g.nome,g.cor),h.reset(),l(!1),f.setValue("categoria",g.nome),Jt({title:"Categoria criada",description:`A categoria "${g.nome}" foi criada com sucesso.`})}catch{Jt({title:"Erro ao criar categoria",description:"No foi possvel criar a categoria. Tente novamente.",variant:"destructive"})}finally{u(!1)}}},m=t.filter(g=>g.tipo==="despesa");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(B,{variant:"outline",size:"icon",onClick:n,children:a.jsx(Rd,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e?"Editar Conta Fixa":"Nova Conta Fixa"}),a.jsx("p",{className:"text-muted-foreground",children:e?"Atualize os dados da conta fixa":"Cadastre uma nova despesa recorrente"})]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Dados da Conta"})}),a.jsx(q,{children:a.jsx(lc,{...f,children:a.jsxs("form",{onSubmit:f.handleSubmit(p),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(at,{control:f.control,name:"nome",render:({field:g})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Nome da Conta"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Ex: Aluguel, Energia, Internet...",className:"h-12",...g})}),a.jsx(it,{})]})}),a.jsx(at,{control:f.control,name:"valor",render:({field:g})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Valor (R$)"}),a.jsx(tt,{children:a.jsx(ue,{type:"number",step:"0.01",placeholder:"0,00",className:"h-12",...g,onChange:y=>g.onChange(parseFloat(y.target.value)||0)})}),a.jsx(it,{})]})}),a.jsx(at,{control:f.control,name:"dataVencimento",render:({field:g})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Dia do Vencimento"}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"1",max:"31",placeholder:"1",className:"h-12",...g,onChange:y=>g.onChange(parseInt(y.target.value)||1)})}),a.jsx(it,{})]})}),a.jsx(at,{control:f.control,name:"categoria",render:({field:g})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ue,{onValueChange:g.onChange,defaultValue:g.value,children:[a.jsx(tt,{children:a.jsx(Fe,{className:"flex-1 h-12",children:a.jsx(qe,{placeholder:"Selecione uma categoria"})})}),a.jsx(ze,{children:m.map(y=>a.jsx(ne,{value:y.nome,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.cor}}),y.nome]})},y.id))})]}),s&&a.jsxs(Sr,{open:c,onOpenChange:l,children:[a.jsx(Wc,{asChild:!0,children:a.jsx(B,{type:"button",variant:"outline",size:"icon",className:"flex-shrink-0 h-12 w-12 btn-touch",children:a.jsx(wr,{className:"h-4 w-4"})})}),a.jsxs(gr,{children:[a.jsx(Cr,{children:a.jsx(Pr,{children:"Nova Categoria"})}),a.jsx(lc,{...h,children:a.jsxs("form",{onSubmit:h.handleSubmit(v),className:"space-y-4",children:[a.jsx(at,{control:h.control,name:"nome",render:({field:y})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Nome da Categoria"}),a.jsx(tt,{children:a.jsx(ue,{placeholder:"Ex: Aluguel, Energia, Internet...",className:"h-12",...y})}),a.jsx(it,{})]})}),a.jsx(at,{control:h.control,name:"cor",render:({field:y})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Cor"}),a.jsx(tt,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ue,{type:"color",className:"w-16 h-12 p-1 border rounded",...y}),a.jsx(ue,{placeholder:"#3b82f6",...y,className:"flex-1 h-12"})]})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[a.jsx(B,{type:"submit",disabled:d,className:"bg-gradient-to-r from-primary to-lilac-primary h-12 btn-touch",children:d?"Criando...":"Criar Categoria"}),a.jsx(B,{type:"button",variant:"outline",onClick:()=>l(!1),className:"h-12 btn-touch",children:"Cancelar"})]})]})})]})]})]}),a.jsx(it,{})]})})]}),a.jsxs(F,{className:"bg-muted/50",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2 text-base",children:[a.jsx(By,{className:"h-4 w-4 text-primary"}),"Configuraes de Repetio"]})}),a.jsxs(q,{className:"space-y-4",children:[a.jsx(at,{control:f.control,name:"repetir",render:({field:g})=>a.jsxs(Qe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(et,{className:"text-base font-medium",children:"Conta Recorrente"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Esta conta se repete automaticamente"})]}),a.jsx(tt,{children:a.jsx(Mt,{checked:g.value,onCheckedChange:g.onChange})})]})}),f.watch("repetir")&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(at,{control:f.control,name:"frequencia",render:({field:g})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),"Frequncia de Repetio"]}),a.jsxs(Ue,{onValueChange:g.onChange,defaultValue:g.value,children:[a.jsx(tt,{children:a.jsx(Fe,{className:"h-12",children:a.jsx(qe,{placeholder:"Selecione a frequncia"})})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"mensal",children:" Mensal"}),a.jsx(ne,{value:"trimestral",children:" Trimestral (3 meses)"}),a.jsx(ne,{value:"semestral",children:" Semestral (6 meses)"}),a.jsx(ne,{value:"anual",children:" Anual (12 meses)"})]})]}),a.jsx(it,{})]})}),a.jsx(at,{control:f.control,name:"ativa",render:({field:g})=>a.jsxs(Qe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(et,{className:"text-sm font-medium",children:"Conta Ativa"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Gerar automaticamente"})]}),a.jsx(tt,{children:a.jsx(Mt,{checked:g.value??!0,onCheckedChange:g.onChange})})]})})]}),f.watch("repetir")&&a.jsx("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"rounded-full bg-blue-100 p-1",children:a.jsx(Ee,{className:"h-4 w-4 text-blue-600"})}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Como funciona a repetio:"}),a.jsxs("ul",{className:"text-blue-700 space-y-1 text-xs",children:[a.jsx("li",{children:" A conta ser criada automaticamente conforme a frequncia"}),a.jsxs("li",{children:[" O vencimento ser no dia ",f.watch("dataVencimento")," de cada perodo"]}),a.jsx("li",{children:" Voc pode ativar/desativar a gerao automtica"}),a.jsx("li",{children:" Contas j vencidas podem ser marcadas como pagas individualmente"})]})]})]})})]})]}),a.jsx(at,{control:f.control,name:"observacoes",render:({field:g})=>a.jsxs(Qe,{children:[a.jsx(et,{className:"text-sm sm:text-base",children:"Observaes"}),a.jsx(tt,{children:a.jsx(fr,{placeholder:"Informaes adicionais sobre a conta...",rows:3,className:"min-h-[100px]",...g})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-6",children:[a.jsxs(B,{type:"submit",disabled:o,className:"bg-gradient-to-r from-primary to-lilac-primary h-12 btn-touch",children:[a.jsx(Vo,{className:"mr-2 h-4 w-4"}),o?"Salvando...":"Salvar Conta"]}),a.jsx(B,{type:"button",variant:"outline",onClick:n,className:"h-12 btn-touch",children:"Cancelar"})]})]})})})]})]})}function Dwe({agendamentos:e}){const[t,r]=x.useState(""),n=e.filter(l=>(l.statusPagamento==="em_aberto"||l.statusPagamento==="parcial")&&l.valorDevido>0).filter(l=>l.clienteNome.toLowerCase().includes(t.toLowerCase())),s=n.reduce((l,d)=>l+d.valorDevido,0),o=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l),i=l=>new Date(l).toLocaleDateString("pt-BR"),c=l=>{const d=`Ol ${l.clienteNome}! 
    
Voc tem um saldo pendente de ${o(l.valorDevido)} referente ao servio de ${l.servicoNome} realizado em ${i(l.data)}.

Para facilitar o pagamento, entre em contato conosco.

Obrigado!`,f=`https://wa.me/?text=${encodeURIComponent(d)}`;window.open(f,"_blank")};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total a Receber"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o(s)})]}),a.jsx(dt,{className:"h-8 w-8 text-orange-600"})]})})}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Buscar Cliente"})}),a.jsx(q,{children:a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar por nome do cliente...",value:t,onChange:l=>r(l.target.value),className:"pl-9"})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Contas a Receber"})}),a.jsx(q,{children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Cliente"}),a.jsx(be,{children:"Servio"}),a.jsx(be,{children:"Data"}),a.jsx(be,{children:"Valor Total"}),a.jsx(be,{children:"Valor Pago"}),a.jsx(be,{children:"Valor Devedor"}),a.jsx(be,{children:"Status"}),a.jsx(be,{className:"text-right",children:"Aes"})]})}),a.jsx(Rr,{children:n.map(l=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:l.clienteNome}),a.jsx(xe,{children:l.servicoNome}),a.jsx(xe,{children:i(l.data)}),a.jsx(xe,{className:"font-mono",children:o(l.valor)}),a.jsx(xe,{className:"font-mono",children:o(l.valorPago)}),a.jsx(xe,{className:"font-mono font-bold text-orange-600",children:o(l.valorDevido)}),a.jsx(xe,{children:a.jsx(pe,{variant:"outline",className:l.statusPagamento==="em_aberto"?"border-red-500 text-red-700":"border-orange-500 text-orange-700",children:l.statusPagamento==="em_aberto"?"Em Aberto":"Parcial"})}),a.jsx(xe,{className:"text-right",children:a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>c(l),className:"text-green-600 border-green-600 hover:bg-green-50",children:[a.jsx(Es,{className:"h-4 w-4 mr-1"}),"WhatsApp"]})})]},l.id))})]}),n.length===0&&a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t?"Nenhum cliente encontrado":"Nenhuma conta a receber no momento"})]})})]})]})}function Iwe({filtros:e,onFiltrosChange:t}){const{isMobile:r}=nj(),n=l=>{t({...e,periodo:l})},s=l=>{t({...e,dataInicio:l})},o=l=>{t({...e,dataFim:l})},i=(l,d)=>{t({...e,[l]:d})},c=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{className:"text-responsive-sm",children:"Perodo"}),a.jsxs(Ue,{value:e.periodo,onValueChange:n,children:[a.jsx(Fe,{className:"h-12",children:a.jsx(qe,{placeholder:"Selecione o perodo"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"semanal",children:"Esta Semana"}),a.jsx(ne,{value:"mensal",children:"Este Ms"}),a.jsx(ne,{value:"trimestral",children:"Este Trimestre"}),a.jsx(ne,{value:"semestral",children:"Este Semestre"}),a.jsx(ne,{value:"anual",children:"Este Ano"}),a.jsx(ne,{value:"personalizado",children:"Perodo Personalizado"})]})]})]}),e.periodo==="personalizado"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{className:"text-responsive-sm",children:"Data Incio"}),a.jsxs(Uh,{children:[a.jsx(qh,{asChild:!0,children:a.jsxs(B,{variant:"outline",className:te("w-full justify-start text-left font-normal h-12",!e.dataInicio&&"text-muted-foreground"),children:[a.jsx(Ee,{className:"mr-2 h-4 w-4"}),e.dataInicio?Me(e.dataInicio,"PPP",{locale:Ve}):a.jsx("span",{children:"Selecione a data"})]})}),a.jsx(Od,{className:"w-auto p-0",align:"start",children:a.jsx(Ed,{mode:"single",selected:e.dataInicio,onSelect:s,initialFocus:!0,className:te("p-3 pointer-events-auto")})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{className:"text-responsive-sm",children:"Data Fim"}),a.jsxs(Uh,{children:[a.jsx(qh,{asChild:!0,children:a.jsxs(B,{variant:"outline",className:te("w-full justify-start text-left font-normal h-12",!e.dataFim&&"text-muted-foreground"),children:[a.jsx(Ee,{className:"mr-2 h-4 w-4"}),e.dataFim?Me(e.dataFim,"PPP",{locale:Ve}):a.jsx("span",{children:"Selecione a data"})]})}),a.jsx(Od,{className:"w-auto p-0",align:"start",children:a.jsx(Ed,{mode:"single",selected:e.dataFim,onSelect:o,initialFocus:!0,className:te("p-3 pointer-events-auto")})})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(K,{className:"text-responsive-sm font-semibold",children:"Incluir nos Relatrios"}),a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsx(K,{htmlFor:"incluir-lancamentos",className:"text-responsive-sm cursor-pointer",children:"Lanamentos Manuais"}),a.jsx(Mt,{id:"incluir-lancamentos",checked:e.incluirLancamentos,onCheckedChange:l=>i("incluirLancamentos",l)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsx(K,{htmlFor:"incluir-agendamentos",className:"text-responsive-sm cursor-pointer",children:"Agendamentos"}),a.jsx(Mt,{id:"incluir-agendamentos",checked:e.incluirAgendamentos,onCheckedChange:l=>i("incluirAgendamentos",l)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsx(K,{htmlFor:"incluir-contas-fixas",className:"text-responsive-sm cursor-pointer",children:"Contas Fixas"}),a.jsx(Mt,{id:"incluir-contas-fixas",checked:e.incluirContasFixas,onCheckedChange:l=>i("incluirContasFixas",l)})]})]})]});return r?a.jsxs(uA,{children:[a.jsx(I6,{asChild:!0,children:a.jsxs(B,{variant:"outline",className:"btn-touch w-full sm:w-auto",children:[a.jsx(Bs,{className:"mr-2 h-4 w-4"}),"Filtros"]})}),a.jsxs(rb,{side:"bottom",className:"h-[90vh]",children:[a.jsx(hA,{children:a.jsx(mA,{children:"Filtros do Relatrio"})}),a.jsx("div",{className:"mt-6 overflow-y-auto h-[calc(90vh-80px)]",children:a.jsx(c,{})})]})]}):a.jsxs(F,{className:"animate-fade-in",children:[a.jsx(ae,{children:a.jsx(se,{children:"Filtros do Relatrio"})}),a.jsx(q,{children:a.jsx(c,{})})]})}function Rwe({dados:e,dadosDetalhados:t}){const[r,n]=x.useState(1),[s,o]=x.useState(1),[i,c]=x.useState(1),l=10,d=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y),u=y=>Me(new Date(y),"dd/MM/yyyy",{locale:Ve}),f=y=>{const w={pago:{variant:"default",label:"Pago"},em_aberto:{variant:"destructive",label:"Em Aberto"},pendente:{variant:"outline",label:"Pendente"},agendado:{variant:"secondary",label:"Agendado"},concluido:{variant:"default",label:"Concludo"},cancelado:{variant:"destructive",label:"Cancelado"}}[y]||{variant:"outline",label:y};return a.jsx(pe,{variant:w.variant,children:w.label})},h=()=>{console.log("Exportando relatrio para PDF...")},p=()=>{console.log("Exportando relatrio para Excel...")},v=t.lancamentos.slice((r-1)*l,r*l),m=t.contasFixas.slice((s-1)*l,s*l),g=t.agendamentos.slice((i-1)*l,i*l);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between",children:[a.jsx(se,{children:"Anlise por Categorias"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:h,children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"PDF"]}),a.jsxs(B,{variant:"outline",size:"sm",onClick:p,children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"Excel"]})]})]}),a.jsx(q,{children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Categoria"}),a.jsx(be,{className:"text-right",children:"Entradas"}),a.jsx(be,{className:"text-right",children:"Sadas"}),a.jsx(be,{className:"text-right",children:"Lucro"}),a.jsx(be,{className:"text-right",children:"Participao"})]})}),a.jsx(Rr,{children:e.categoriasMaisLucrativas.map((y,b)=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:y.categoria}),a.jsx(xe,{className:"text-right text-green-600",children:d(y.entradas)}),a.jsx(xe,{className:"text-right text-red-600",children:d(y.saidas)}),a.jsx(xe,{className:`text-right ${y.lucro>=0?"text-green-600":"text-red-600"}`,children:d(y.lucro)}),a.jsxs(xe,{className:"text-right",children:[y.percentual.toFixed(1),"%"]})]},b))})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Servios Mais Vendidos"})}),a.jsx(q,{children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Servio"}),a.jsx(be,{className:"text-right",children:"Quantidade"}),a.jsx(be,{className:"text-right",children:"Valor Total"}),a.jsx(be,{className:"text-right",children:"Participao"})]})}),a.jsx(Rr,{children:e.servicosMaisVendidos.map((y,b)=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:y.nome}),a.jsx(xe,{className:"text-right",children:y.quantidade}),a.jsx(xe,{className:"text-right text-green-600",children:d(y.valorTotal)}),a.jsxs(xe,{className:"text-right",children:[y.percentual.toFixed(1),"%"]})]},b))})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Dados Detalhados"})}),a.jsx(q,{children:a.jsxs(Ia,{defaultValue:"lancamentos",children:[a.jsxs(ua,{className:"grid w-full grid-cols-3",children:[a.jsxs(rt,{value:"lancamentos",children:["Lanamentos (",t.lancamentos.length,")"]}),a.jsxs(rt,{value:"agendamentos",children:["Agendamentos (",t.agendamentos.length,")"]}),a.jsxs(rt,{value:"contas",children:["Contas Fixas (",t.contasFixas.length,")"]})]}),a.jsx(nt,{value:"lancamentos",className:"space-y-4",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Data"}),a.jsx(be,{children:"Descrio"}),a.jsx(be,{children:"Categoria"}),a.jsx(be,{children:"Tipo"}),a.jsx(be,{className:"text-right",children:"Valor"})]})}),a.jsx(Rr,{children:v.map(y=>a.jsxs(ht,{children:[a.jsx(xe,{children:u(y.data)}),a.jsx(xe,{children:y.descricao}),a.jsx(xe,{children:y.categoria||"Sem categoria"}),a.jsx(xe,{children:a.jsx(pe,{variant:y.tipo==="entrada"?"default":"destructive",children:y.tipo==="entrada"?"Entrada":"Sada"})}),a.jsx(xe,{className:`text-right ${y.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:d(y.valor)})]},y.id))})]})}),a.jsx(nt,{value:"agendamentos",className:"space-y-4",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Data"}),a.jsx(be,{children:"Cliente"}),a.jsx(be,{children:"Status"}),a.jsx(be,{children:"Pagamento"}),a.jsx(be,{className:"text-right",children:"Valor"}),a.jsx(be,{className:"text-right",children:"Pago"})]})}),a.jsx(Rr,{children:g.map(y=>a.jsxs(ht,{children:[a.jsx(xe,{children:u(y.data)}),a.jsx(xe,{children:"Cliente"}),a.jsx(xe,{children:f(y.status||"agendado")}),a.jsx(xe,{children:f(y.statusPagamento||"em_aberto")}),a.jsx(xe,{className:"text-right",children:d(y.valor)}),a.jsx(xe,{className:"text-right text-green-600",children:d(y.valorPago||0)})]},y.id))})]})}),a.jsx(nt,{value:"contas",className:"space-y-4",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Nome"}),a.jsx(be,{children:"Categoria"}),a.jsx(be,{children:"Vencimento"}),a.jsx(be,{children:"Status"}),a.jsx(be,{className:"text-right",children:"Valor"})]})}),a.jsx(Rr,{children:m.map(y=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:y.nome}),a.jsx(xe,{children:y.categoria}),a.jsx(xe,{children:y.proximoVencimento?u(y.proximoVencimento):"-"}),a.jsx(xe,{children:f(y.status)}),a.jsx(xe,{className:"text-right text-red-600",children:d(y.valor)})]},y.id))})]})})]})})]})]})}function Lwe(){const{lancamentos:e}=Pc(),{contasFixas:t}=gD(),{agendamentos:r}=la(),{filtros:n,setFiltros:s,dadosRelatorio:o,intervaloData:i,dadosFiltrados:c}=B$(e,t,r),l=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f),d=()=>{const f=Me(i.inicio,"dd/MM/yyyy",{locale:Ve}),h=Me(i.fim,"dd/MM/yyyy",{locale:Ve});return`${f} a ${h}`},u=()=>{console.log("Exportando relatrio completo...",{periodo:d(),dados:o,detalhes:c})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Relatrios Financeiros"}),a.jsxs("p",{className:"text-muted-foreground",children:["Anlise detalhada do perodo: ",d()]})]}),a.jsxs(B,{onClick:u,className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4"}),"Exportar Relatrio Completo"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(F,{children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-success",children:a.jsx(Ut,{className:"h-6 w-6 text-success-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-2xl font-bold text-success",children:l(o.totalEntradas)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Entradas"})]})]})}),a.jsx(F,{children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-destructive",children:a.jsx(Uo,{className:"h-6 w-6 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-2xl font-bold text-destructive",children:l(o.totalSaidas)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Sadas"})]})]})}),a.jsx(F,{children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl ${o.lucroLiquido>=0?"bg-info":"bg-destructive"}`,children:a.jsx(dt,{className:"h-6 w-6 text-primary-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-2xl font-bold ${o.lucroLiquido>=0?"text-info":"text-destructive"}`,children:l(o.lucroLiquido)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o.lucroLiquido>=0?"Lucro Lquido":"Prejuzo"})]})]})}),a.jsx(F,{children:a.jsxs(q,{className:"flex items-center gap-4 p-6",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-warning",children:a.jsx(Aa,{className:"h-6 w-6 text-warning-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-2xl font-bold text-warning",children:l(o.contasAPagar)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Contas a Pagar"})]})]})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Indicadores de Performance"})}),a.jsx(q,{children:a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"text-lg font-semibold",children:[o.lucroLiquido>0?(o.lucroLiquido/o.totalEntradas*100).toFixed(1):"0.0","%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Margem de Lucro"})]}),a.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:o.servicosMaisVendidos.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Servios Ativos"})]}),a.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:l(o.agendamentosAbertos)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Pendente Recebimento"})]}),a.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-lg font-semibold",children:o.categoriasMaisLucrativas.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Categorias Ativas"})]})]})})]}),a.jsxs(Ia,{defaultValue:"visao-geral",className:"space-y-6",children:[a.jsxs(ua,{className:"grid w-full grid-cols-3",children:[a.jsx(rt,{value:"visao-geral",children:"Viso Geral"}),a.jsx(rt,{value:"graficos",children:"Grficos"}),a.jsx(rt,{value:"detalhado",children:"Dados Detalhados"})]}),a.jsx(nt,{value:"visao-geral",className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Iwe,{filtros:n,onFiltrosChange:s})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Top 5 Categorias Mais Lucrativas"})}),a.jsx(q,{children:a.jsx("div",{className:"space-y-3",children:o.categoriasMaisLucrativas.slice(0,5).map((f,h)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),a.jsx("span",{className:"font-medium",children:f.categoria})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`font-semibold ${f.lucro>=0?"text-success":"text-destructive"}`,children:l(f.lucro)}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.percentual.toFixed(1),"% do total"]})]})]},h))})})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsx(se,{children:"Top 5 Servios Mais Vendidos"})}),a.jsx(q,{children:a.jsx("div",{className:"space-y-3",children:o.servicosMaisVendidos.slice(0,5).map((f,h)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(pe,{variant:"outline",children:[f.quantidade,"x"]}),a.jsx("span",{className:"font-medium",children:f.nome})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"font-semibold text-success",children:l(f.valorTotal)}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.percentual.toFixed(1),"% do faturamento"]})]})]},h))})})]})]})]})}),a.jsx(nt,{value:"graficos",children:a.jsx(U$,{dados:o})}),a.jsx(nt,{value:"detalhado",children:a.jsx(Rwe,{dados:o,dadosDetalhados:c})})]})]})}function Fwe({contasFixas:e,onPagarConta:t}){const n=(()=>{const f=new Date,h=new Date;h.setDate(f.getDate()+7);const p=f.getMonth()+1,v=f.getFullYear();return e.filter(m=>{if(m.status==="pago")return!1;const g=new Date(v,p-1,m.dataVencimento);return g<f&&g.setMonth(g.getMonth()+1),g<=h}).map(m=>{const g=new Date(v,p-1,m.dataVencimento);g<f&&g.setMonth(g.getMonth()+1);const y=Math.ceil((g.getTime()-f.getTime())/(1e3*60*60*24));return{...m,dataVencimento:g,diasParaVencimento:y,situacao:y<0?"vencido":y===0?"venceHoje":y<=3?"venceEmBreve":"normal"}}).sort((m,g)=>m.diasParaVencimento-g.diasParaVencimento)})(),s=n.filter(f=>f.situacao==="vencido"),o=n.filter(f=>f.situacao==="venceHoje"),i=n.filter(f=>f.situacao==="venceEmBreve");x.useEffect(()=>{if(s.length>0||o.length>0){Notification.permission==="granted"&&new Notification("Ateno: Contas Vencendo!",{body:`Voc tem ${s.length+o.length} conta(s) que requer(em) ateno imediata.`,icon:"/icons/icon-192x192.png"});try{const f=new Audio("/sounds/notification.mp3");f.volume=.3,f.play().catch(()=>{})}catch{}}},[s.length,o.length]);const c=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f),l=f=>f.toLocaleDateString("pt-BR"),d=f=>{switch(f){case"vencido":return"bg-destructive/10 text-destructive";case"venceHoje":return"bg-warning/10 text-warning";case"venceEmBreve":return"bg-warning/10 text-warning";default:return"bg-info/10 text-info"}},u=f=>{switch(f.situacao){case"vencido":return`Venceu h ${Math.abs(f.diasParaVencimento)} dia(s)`;case"venceHoje":return"Vence hoje";case"venceEmBreve":return`Vence em ${f.diasParaVencimento} dia(s)`;default:return`Vence em ${f.diasParaVencimento} dia(s)`}};return n.length===0?a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2 text-success",children:[a.jsx(Na,{className:"h-5 w-5"}),"Avisos de Vencimento"]})}),a.jsx(q,{children:a.jsxs("div",{className:"text-center py-6",children:[a.jsx(Ee,{className:"h-12 w-12 text-success mx-auto mb-4"}),a.jsx("p",{className:"text-success font-medium",children:"Parabns!"}),a.jsx("p",{className:"text-muted-foreground",children:"No h contas vencendo nos prximos 7 dias."})]})})]}):a.jsxs("div",{className:"space-y-4",children:[(s.length>0||o.length>0)&&a.jsxs(Zr,{className:"border-destructive/20 bg-destructive/10",children:[a.jsx(Nr,{className:"h-4 w-4 text-destructive"}),a.jsxs(Xr,{className:"text-destructive",children:[a.jsx("strong",{children:"Ateno:"})," Voc tem ",s.length+o.length," conta(s) que requer(em) pagamento imediato!"]})]}),i.length>0&&a.jsxs(Zr,{className:"border-warning/20 bg-warning/10",children:[a.jsx(Na,{className:"h-4 w-4 text-warning"}),a.jsxs(Xr,{className:"text-warning",children:["Voc tem ",i.length," conta(s) vencendo nos prximos dias."]})]}),a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-5 w-5"}),"Contas Vencendo"]})}),a.jsx(q,{children:a.jsx("div",{className:"space-y-3",children:n.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-medium",children:f.nome}),a.jsx(pe,{className:d(f.situacao),children:u(f)})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ee,{className:"h-4 w-4"}),l(f.dataVencimento)]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(dt,{className:"h-4 w-4"}),c(f.valor)]}),a.jsxs("span",{children:["Categoria: ",f.categoria]})]})]}),a.jsx(B,{onClick:()=>t(f.id),className:f.situacao==="vencido"||f.situacao==="venceHoje"?"bg-destructive hover:bg-destructive/90":"bg-success hover:bg-success/90",children:"Pagar Agora"})]},f.id))})})]})]})}function zwe(){nj();const{compras:e,loading:t}=hu(),{vendas:r,loading:n}=mu(),[s,o]=x.useState("todos"),[i,c]=x.useState(""),l=x.useMemo(()=>{const v=[];return e.forEach(m=>{v.push({id:m.id,tipo:"compra",data:m.data_compra,valor:m.valor_total,descricao:`Compra ${m.numero_nota?`- Nota ${m.numero_nota}`:""}`,status:m.status_pagamento||"pendente",itens:m.itens_compra?.length||0})}),r.forEach(m=>{v.push({id:m.id,tipo:"venda",data:m.data_venda,valor:m.valor_total,descricao:"Venda de produtos",status:m.status_pagamento||"pago",itens:m.itens_venda?.length||0})}),v.sort((m,g)=>new Date(g.data).getTime()-new Date(m.data).getTime())},[e,r]),d=x.useMemo(()=>l.filter(v=>{const m=s==="todos"||v.tipo===s,g=v.descricao.toLowerCase().includes(i.toLowerCase());return m&&g}),[l,s,i]),u=x.useMemo(()=>{const v=l.filter(g=>g.tipo==="compra").reduce((g,y)=>g+y.valor,0),m=l.filter(g=>g.tipo==="venda").reduce((g,y)=>g+y.valor,0);return{compras:v,vendas:m,lucro:m-v}},[l]),f=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),h=v=>{switch(v){case"pago":return"bg-success text-success-foreground";case"pendente":return"bg-warning text-warning-foreground";case"pago_parcial":return"bg-primary text-primary-foreground";case"vencido":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},p=v=>{switch(v){case"pago":return"Pago";case"pendente":return"Pendente";case"pago_parcial":return"Parcial";case"vencido":return"Vencido";default:return v}};return t||n?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-responsive-lg",children:[a.jsxs("div",{className:"grid-responsive-3",children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-destructive flex-shrink-0",children:a.jsx(_f,{className:"h-6 w-6 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-destructive truncate",children:f(u.compras)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Total em Compras"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-success flex-shrink-0",children:a.jsx(Xa,{className:"h-6 w-6 text-success-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-responsive-lg font-bold text-success truncate",children:f(u.vendas)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Total em Vendas"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex items-center gap-4 p-responsive-sm",children:[a.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl flex-shrink-0 ${u.lucro>=0?"bg-primary":"bg-destructive"}`,children:u.lucro>=0?a.jsx(Ut,{className:"h-6 w-6 text-primary-foreground"}):a.jsx(Uo,{className:"h-6 w-6 text-destructive-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-responsive-lg font-bold truncate ${u.lucro>=0?"text-primary":"text-destructive"}`,children:f(u.lucro)}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Margem de Lucro"})]})]})})]}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsx(q,{className:"p-responsive-sm",children:a.jsxs("div",{className:"flex-responsive flex-responsive-row-sm gap-4",children:[a.jsxs("div",{className:"relative flex-1 min-w-0",children:[a.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar movimentao...",value:i,onChange:v=>c(v.target.value),className:"pl-10 h-12"})]}),a.jsxs(Ue,{value:s,onValueChange:v=>o(v),children:[a.jsxs(Fe,{className:"w-full sm:w-[200px] h-12",children:[a.jsx(Bs,{className:"mr-2 h-4 w-4"}),a.jsx(qe,{})]}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todos",children:"Todos"}),a.jsx(ne,{value:"compra",children:"Compras"}),a.jsx(ne,{value:"venda",children:"Vendas"})]})]})]})})}),a.jsx("div",{className:"space-responsive-md",children:d.length===0?a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsx(q,{className:"p-responsive-lg text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma movimentao encontrada"})})}):d.map(v=>a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:shadow-md transition-shadow",children:a.jsx(q,{className:"p-responsive-sm",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[a.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl flex-shrink-0 ${v.tipo==="compra"?"bg-destructive":"bg-success"}`,children:v.tipo==="compra"?a.jsx(_f,{className:"h-5 w-5 text-destructive-foreground"}):a.jsx(Xa,{className:"h-5 w-5 text-success-foreground"})}),a.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-semibold text-foreground truncate",children:v.descricao}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Me(new Date(v.data),"dd 'de' MMMM 'de' yyyy",{locale:Ve})})]}),a.jsxs("p",{className:`font-bold text-lg whitespace-nowrap ${v.tipo==="compra"?"text-destructive":"text-success"}`,children:[v.tipo==="compra"?"- ":"+ ",f(v.valor)]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(pe,{variant:"outline",className:"capitalize",children:v.tipo==="compra"?"Compra":"Venda"}),v.status&&a.jsx(pe,{className:h(v.status),children:p(v.status)}),v.itens&&v.itens>0&&a.jsxs(pe,{variant:"secondary",children:[v.itens," ",v.itens===1?"item":"itens"]})]})]})]})})})},v.id))})]})}function Bwe(){const{isMobile:e}=nj(),[t,r]=x.useState("list"),[n,s]=x.useState("lancamento"),[o,i]=x.useState(),[c,l]=x.useState(),{lancamentos:d,resumoFinanceiro:u,categorias:f,filtros:h,setFiltros:p,adicionarLancamento:v,atualizarLancamento:m,removerLancamento:g}=Pc(),y=[],{contasFixas:b,categorias:w,criarContaFixa:j,atualizarContaFixa:N,removerContaFixa:_,pagarContaFixa:S,toggleAtiva:C,criarCategoria:k}=gD(),$=()=>{i(void 0),s("lancamento"),r("form")},A=()=>{l(void 0),s("conta_fixa"),r("form")},P=T=>{i(T),r("form")},O=async T=>{o?await m(o.id,T):await v(T),r("list"),i(void 0)},M=async T=>{c?await N(c.id,T):await j(T),r("list"),l(void 0)},R=()=>{r("list"),i(void 0),l(void 0)};return t==="form"?n==="lancamento"?a.jsx("div",{className:"space-y-6",children:a.jsx(Awe,{lancamento:o,categorias:f.map(T=>T.nome),onSubmit:O,onCancel:R})}):a.jsx("div",{className:"space-y-6",children:a.jsx(Mwe,{conta:c,categorias:w,onSubmit:M,onCancel:R,onCreateCategoria:async(T,D)=>{await k({nome:T,tipo:"despesa",cor:D})}})}):a.jsxs("div",{className:"space-responsive-lg",children:[a.jsx("div",{className:"flex-responsive flex-responsive-row-md items-start justify-between",children:a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"text-responsive-3xl font-bold text-foreground",children:"Financeiro"}),a.jsx("p",{className:"text-responsive-base text-muted-foreground mt-2",children:"Controle completo das finanas do seu salo"})]})}),a.jsx(Fwe,{contasFixas:b,onPagarConta:T=>S(T)}),a.jsx(V$,{resumo:u}),a.jsxs(Ia,{defaultValue:"lancamentos",className:"space-responsive-lg",children:[a.jsxs(Op,{className:"w-full",children:[a.jsxs(ua,{className:"inline-flex h-auto w-max min-w-full md:w-full md:grid md:grid-cols-7 gap-1 p-1",children:[a.jsxs(rt,{value:"lancamentos",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(wl,{className:"mr-1 h-4 w-4 md:hidden"}),"Lanamentos"]}),a.jsxs(rt,{value:"contas-fixas",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(Nr,{className:"mr-1 h-4 w-4 md:hidden"}),"Contas Fixas"]}),a.jsxs(rt,{value:"produtos",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(Aa,{className:"mr-1 h-4 w-4 md:hidden"}),"Produtos"]}),a.jsxs(rt,{value:"contas-receber",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(mn,{className:"mr-1 h-4 w-4 md:hidden"}),"A Receber"]}),a.jsxs(rt,{value:"pagamentos",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(wl,{className:"mr-1 h-4 w-4 md:hidden"}),"Pagamentos"]}),a.jsxs(rt,{value:"graficos",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(Ut,{className:"mr-1 h-4 w-4 md:hidden"}),"Grficos"]}),a.jsxs(rt,{value:"relatorios",className:"text-responsive-xs whitespace-nowrap min-h-[44px] data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[a.jsx(Aa,{className:"mr-1 h-4 w-4 md:hidden"}),"Relatrios"]})]}),a.jsx(O0,{orientation:"horizontal",className:"md:hidden"})]}),a.jsxs(nt,{value:"lancamentos",className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"flex-responsive flex-responsive-row-sm items-start justify-between gap-4",children:[a.jsx("h2",{className:"text-responsive-xl font-semibold",children:"Lanamentos Financeiros"}),a.jsxs(B,{onClick:$,className:"bg-gradient-to-r from-primary to-lilac-primary btn-touch flex-shrink-0 hover-scale",children:[a.jsx(wr,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Novo Lanamento"}),a.jsx("span",{className:"sm:hidden",children:"Novo"})]})]}),e?a.jsx(Swe,{lancamentos:d,onEdit:P,onDelete:g}):a.jsx(_we,{lancamentos:d,filtros:h,categorias:f.map(T=>T.nome),onFiltrosChange:p,onEdit:P,onDelete:g})]}),a.jsxs(nt,{value:"contas-fixas",className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"flex-responsive flex-responsive-row-sm items-start justify-between gap-4",children:[a.jsx("h2",{className:"text-responsive-xl font-semibold",children:"Contas Fixas Mensais"}),a.jsxs(B,{onClick:A,className:"bg-gradient-to-r from-primary to-lilac-primary btn-touch flex-shrink-0 hover-scale",children:[a.jsx(wr,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nova Conta Fixa"}),a.jsx("span",{className:"sm:hidden",children:"Nova"})]})]}),e?a.jsx(Cwe,{contas:b,onEdit:T=>{l(T),s("conta_fixa"),r("form")},onDelete:_,onPagar:S,onToggleAtiva:C}):a.jsx(Owe,{contas:b,categorias:w,onEdit:T=>{l(T),s("conta_fixa"),r("form")},onDelete:_,onPagar:S,onToggleAtiva:C})]}),a.jsxs(nt,{value:"produtos",className:"space-responsive-lg animate-fade-in",children:[a.jsx("h2",{className:"text-responsive-xl font-semibold mb-4",children:"Movimentaes de Produtos"}),a.jsx(zwe,{})]}),a.jsxs(nt,{value:"contas-receber",className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(mn,{className:"h-6 w-6 flex-shrink-0"}),a.jsx("h2",{className:"text-responsive-xl font-semibold",children:"Contas a Receber"})]}),a.jsx(Dwe,{agendamentos:y})]}),a.jsxs(nt,{value:"pagamentos",className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(wl,{className:"h-6 w-6 flex-shrink-0"}),a.jsx("h2",{className:"text-responsive-xl font-semibold",children:"Pagamentos dos Clientes"})]}),a.jsx(Ewe,{agendamentos:y})]}),a.jsxs(nt,{value:"graficos",className:"space-responsive-lg animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ut,{className:"h-6 w-6 flex-shrink-0"}),a.jsx("h2",{className:"text-responsive-xl font-semibold",children:"Grficos e Anlises"})]}),a.jsx(kwe,{lancamentos:d})]}),a.jsx(nt,{value:"relatorios",className:"space-responsive-lg animate-fade-in",children:a.jsx(Lwe,{})})]})]})}const aj=e=>{const[t,r]=x.useState([]),[n,s]=x.useState(!0);x.useEffect(()=>{o()},[e]);const o=async()=>{try{let u=W.from("configuracoes_horarios").select("*").eq("ativo",!0).order("dia_semana");if(!e){const{data:p}=await W.from("usuarios").select("id").limit(1);p&&p.length>0&&(u=u.eq("user_id",p[0].id))}const{data:f,error:h}=await u;if(h)throw h;r(f||[])}catch(u){console.error("Erro ao carregar configuraes de horrio:",u)}finally{s(!1)}},i=u=>!!t.find(h=>h.dia_semana===u&&h.ativo),c=(u,f)=>{const h=t.find(g=>g.dia_semana===u&&g.ativo);if(!h)return!1;const p=tn(f),v=tn(h.horario_abertura),m=tn(h.horario_fechamento);if(p<v||p>=m)return!1;if(h.intervalo_inicio&&h.intervalo_fim){const g=tn(h.intervalo_inicio),y=tn(h.intervalo_fim);if(p>=g&&p<y)return!1}return!0};return{configuracoes:t,loading:n,isDiaAtivo:i,isHorarioValido:c,isAgendamentoValido:(u,f,h=60)=>{console.log("Validando agendamento:",{data:u,horario:f,duracao:h});const v=new Date(u+"T00:00:00").getDay();if(console.log("Dia da semana:",v),!i(v))return console.log("Dia no est ativo"),!1;if(!c(v,f))return console.log("Horrio no  vlido"),!1;const m=t.find(w=>w.dia_semana===v&&w.ativo);if(!m)return console.log("Nenhuma configurao encontrada"),!1;const g=tn(f),y=g+h,b=tn(m.horario_fechamento);if(y>b)return console.log("Servio terminaria aps fechamento"),!1;if(m.intervalo_inicio&&m.intervalo_fim){const w=tn(m.intervalo_inicio),j=tn(m.intervalo_fim);if(g<j&&y>w)return console.log("Conflito com intervalo de almoo"),!1}return console.log("Agendamento  vlido!"),!0},getHorariosDisponiveis:(u,f=60)=>{const h=t.find(b=>b.dia_semana===u&&b.ativo);if(!h)return[];const p=[],v=tn(h.horario_abertura),m=tn(h.horario_fechamento),g=h.intervalo_inicio?tn(h.intervalo_inicio):null,y=h.intervalo_fim?tn(h.intervalo_fim):null;for(let b=v;b<m;b+=30){const w=b+f;w>m||g&&y&&(b>=g&&b<y||w>g&&w<=y||b<g&&w>y)||p.push(Vwe(b))}return p},refetch:o}},tn=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},Vwe=e=>{const t=Math.floor(e/60),r=e%60;return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};function Uwe(e){switch(e){case"online":return{label:"Online",emoji:"",className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border-0"};case"cronograma":return{label:"Cronograma",emoji:"",className:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border-0"};case"manual":return{label:"Manual",emoji:"",className:"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300 border-0"};default:return null}}function qwe(e){switch(e){case"agendado":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"concluido":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";case"cancelado":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";case"reagendado":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"}}function Wwe({buscaTexto:e=""}){const[t,r]=x.useState(new Date),{todosAgendamentos:n,loading:s,converterAgendamentoOnlineParaRegular:o}=la(),{getHorariosDisponiveis:i,isAgendamentoValido:c}=aj(),l=e.trim().toLowerCase(),d=Or(t),u=x.useMemo(()=>n.filter(N=>Or(N.data)===d).filter(N=>l?[N.clienteNome,N.servicoNome,N.status,N.origem,N.hora,N.observacoes||""].map(S=>String(S||"").toLowerCase()).some(S=>S.includes(l)):!0).sort((N,_)=>N.hora.localeCompare(_.hora)),[n,d,l]),f=new Date,h=Or(f),p=`${f.getHours().toString().padStart(2,"0")}:${f.getMinutes().toString().padStart(2,"0")}`,v=pi(p),m=x.useMemo(()=>u.find(N=>Or(N.data)===h&&pi(N.hora)>=v&&N.status==="agendado"),[u,h,v]),g=x.useMemo(()=>({agendados:u.filter(N=>N.status==="agendado").length,concluidos:u.filter(N=>N.status==="concluido").length,cancelados:u.filter(N=>N.status==="cancelado").length,valorTotal:u.reduce((N,_)=>N+Number(_.valor??0),0),valorRecebido:u.filter(N=>N.status==="concluido").reduce((N,_)=>N+Number(_.valorPago??_.valor??0),0),tempoTotalAtendimento:u.reduce((N,_)=>N+(_.duracao||0),0)}),[u]),y=x.useMemo(()=>{const N=new Date(d+"T00:00:00").getDay();return(i?.(N,60)||[]).filter(S=>{const C=pi(S),k=C+60;return!u.some(A=>{const P=pi(A.hora),O=P+(A.duracao||60);return TP(C,k,P,O)})})},[i,d,u]),b=()=>r(N=>df(N,1)),w=()=>r(N=>xr(N,1)),j=()=>r(new Date);return s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"}),a.jsx("div",{className:"h-96 bg-muted animate-pulse rounded-lg"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 rounded-xl bg-gradient-to-r from-accent/10 to-primary/10 border border-border/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(B,{variant:"outline",size:"sm",onClick:b,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(vc,{className:"h-4 w-4"})}),a.jsxs("div",{className:"text-center min-w-[200px] lg:min-w-[250px]",children:[a.jsx("h2",{className:"text-lg lg:text-xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:Me(t,"EEEE, dd 'de' MMMM",{locale:Ve})}),a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:Me(t,"yyyy",{locale:Ve})})]}),a.jsx(B,{variant:"outline",size:"sm",onClick:w,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(Bo,{className:"h-4 w-4"})})]}),a.jsx(B,{variant:"default",size:"sm",onClick:j,className:"w-full sm:w-auto transition-all hover:scale-105 shadow-md",children:"Hoje"})]}),m&&new Date(t).toDateString()===new Date().toDateString()&&a.jsx(F,{className:"border-0 bg-gradient-to-r from-primary/10 via-accent/5 to-primary/10 shadow-xl",children:a.jsx(q,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/20",children:a.jsx(Vr,{className:"h-4 w-4 text-primary"})}),a.jsx("h3",{className:"text-lg font-bold text-primary",children:"Prximo Cliente"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xl font-bold",children:m.clienteNome}),a.jsx("p",{className:"text-muted-foreground",children:m.servicoNome}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(st,{className:"h-3 w-3"}),m.hora," (",m.duracao,"min)"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(dt,{className:"h-3 w-3"}),"R$ ",Number(m.valor??0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:"text-center lg:text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:m.hora}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Horrio previsto"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsx(F,{className:"group border-0 bg-gradient-to-br from-info/10 to-info/5 dark:from-info/10 dark:to-info/5 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-info/20",children:a.jsx(st,{className:"h-5 w-5 text-info"})}),a.jsx("div",{className:"text-xl lg:text-2xl font-bold text-info",children:g.agendados}),a.jsx("p",{className:"text-xs lg:text-sm text-info/70 font-medium",children:"Agendados"})]})})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-success/10 to-success/5 dark:from-success/10 dark:to-success/5 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-success/20",children:a.jsx(Vr,{className:"h-5 w-5 text-success"})}),a.jsx("div",{className:"text-xl lg:text-2xl font-bold text-success",children:g.concluidos}),a.jsx("p",{className:"text-xs lg:text-sm text-success/70 font-medium",children:"Concludos"})]})})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-950/20 dark:to-purple-900/20 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30",children:a.jsx(dt,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{className:"text-lg lg:text-xl font-bold text-purple-700 dark:text-purple-300",children:["R$ ",g.valorTotal.toFixed(2)]}),a.jsx("p",{className:"text-xs lg:text-sm text-purple-600/70 dark:text-purple-400/70 font-medium",children:"Valor Total"})]})})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-950/20 dark:to-emerald-900/20 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-100 dark:bg-emerald-900/30",children:a.jsx(dt,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{className:"text-lg lg:text-xl font-bold text-emerald-700 dark:text-emerald-300",children:["R$ ",g.valorRecebido.toFixed(2)]}),a.jsx("p",{className:"text-xs lg:text-sm text-emerald-600/70 dark:text-emerald-400/70 font-medium",children:"Recebido"})]})})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-950/20 dark:to-orange-900/20 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900/30",children:a.jsx(st,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{className:"text-lg lg:text-xl font-bold text-orange-700 dark:text-orange-300",children:[Math.floor(g.tempoTotalAtendimento/60),"h",g.tempoTotalAtendimento%60,"m"]}),a.jsx("p",{className:"text-xs lg:text-sm text-orange-600/70 dark:text-orange-400/70 font-medium",children:"Tempo Total"})]})})})]}),a.jsxs("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar",role:"region","aria-label":"Timeline de agendamentos do dia",children:[y.length>0&&a.jsx(F,{className:"border-0 bg-gradient-to-br from-primary/5 to-accent/5",children:a.jsx(q,{className:"p-4",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(N=>a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-muted text-muted-foreground border border-border/50",children:N},N))})})}),u.length===0?a.jsxs("div",{className:"text-center py-12 rounded-xl bg-gradient-to-br from-muted/30 to-muted/10 border border-dashed border-muted-foreground/20",children:[a.jsx("div",{className:"flex h-16 w-16 items-center justify-center mx-auto mb-4 rounded-full bg-muted/50",children:a.jsx(st,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Dia livre"}),a.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Nenhum agendamento para este dia"})]}):a.jsx("div",{className:"space-y-3",role:"list","aria-live":"polite","aria-busy":!1,children:u.map((N,_)=>a.jsxs(F,{className:te("group relative overflow-hidden border-0 bg-card/80 backdrop-blur-sm transition-all duration-300 hover:shadow-xl hover:scale-[1.02]",N.origem==="cronograma"&&"bg-gradient-to-r from-purple-50/80 to-purple-100/30 dark:from-purple-950/30 dark:to-purple-900/20",N.status==="concluido"&&"bg-gradient-to-r from-green-50/80 to-green-100/30 dark:from-green-950/30 dark:to-green-900/20",N.status==="cancelado"&&"bg-gradient-to-r from-red-50/80 to-red-100/30 dark:from-red-950/30 dark:to-red-900/20"),role:"listitem",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent dark:from-white/5"}),a.jsxs(q,{className:"relative p-5",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 dark:bg-primary/20",children:[a.jsx(st,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-mono text-sm font-semibold text-primary",children:N.hora})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-semibold text-foreground",children:N.clienteNome})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zd,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:N.servicoNome})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[(()=>{const S=Uwe(N.origem);return S?a.jsxs(pe,{variant:"secondary",className:S.className,children:[S.emoji," ",S.label]}):null})(),a.jsx(pe,{variant:"outline",className:te("border-0 font-medium",qwe(N.status)),children:N.status}),!c(Or(N.data),N.hora,N.duracao)&&a.jsx(pe,{variant:"destructive",className:"bg-amber-100 text-amber-800 border-0",children:"Fora do horrio"}),a.jsx("div",{className:"flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 dark:bg-green-900/30",children:a.jsxs("span",{className:"text-sm font-bold text-green-700 dark:text-green-300",children:["R$ ",Number(N.valor??0).toFixed(2)]})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[N.clienteTelefone&&a.jsxs("span",{className:"flex items-center gap-1",children:[" ",N.clienteTelefone]}),N.clienteEmail&&a.jsxs("span",{className:"flex items-center gap-1",children:[" ",N.clienteEmail]}),a.jsxs("span",{className:"flex items-center gap-1",children:[" Durao: ",N.duracao,"min"]}),N.valorPago>0&&a.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[" Pago: R$ ",N.valorPago.toFixed(2)]})]})]}),String(N.id).startsWith("online_")&&a.jsx("div",{className:"mt-3",children:a.jsx(B,{variant:"outline",size:"sm",onClick:async()=>{await o?.(String(N.id).replace("online_",""))?V.success("Agendamento online convertido com sucesso"):V.error("Falha ao converter agendamento online")},children:"Converter para regular"})}),N.observacoes&&a.jsx("div",{className:"mt-4 pt-3 border-t border-border/50",children:a.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',N.observacoes,'"']})})]})]},N.id))})]})]})}function Hwe({buscaTexto:e=""}){const[t,r]=x.useState(new Date),{todosAgendamentos:n,loading:s,converterAgendamentoOnlineParaRegular:o}=la(),{getHorariosDisponiveis:i}=aj(),[c,l]=x.useState(!1),[d,u]=x.useState(null),[f,h]=x.useState(!1),[p,v]=x.useState(null),m=vn(t,{weekStartsOn:0}),g=Hc(t,{weekStartsOn:0}),y=x.useMemo(()=>O$({start:m,end:g}),[m,g]),b=e.trim().toLowerCase(),w=P=>n.filter(O=>Br(_L(O.data),P)).filter(O=>b?[O.clienteNome,O.servicoNome,O.status,O.origem,O.hora,O.observacoes||""].map(R=>String(R||"").toLowerCase()).some(R=>R.includes(b)):!0).sort((O,M)=>O.hora.localeCompare(M.hora)),j=()=>r(P=>tge(P)),N=()=>r(P=>Cd(P,1)),_=()=>r(new Date),S=x.useMemo(()=>y.reduce((P,O)=>[...P,...w(O)],[]),[y,n,b]),C=x.useMemo(()=>S.filter(P=>P.status==="agendado"),[S]),k=x.useMemo(()=>S.filter(P=>P.status==="concluido"),[S]),$=x.useMemo(()=>C.reduce((P,O)=>P+Number(O.valor??0),0),[C]),A=P=>{const O=P.getDay(),M=i?.(O,60)||[],R=w(P);return M.filter(T=>{const D=pi(T),I=D+60;return!R.some(oe=>{const J=pi(oe.hora),ie=J+(oe.duracao||60);return TP(D,I,J,ie)})})};return s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"}),a.jsx("div",{className:"h-96 bg-muted animate-pulse rounded-lg"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 rounded-xl bg-gradient-to-r from-accent/10 to-primary/10 border border-border/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(B,{variant:"outline",size:"sm",onClick:j,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(vc,{className:"h-4 w-4"})}),a.jsx("div",{className:"text-center min-w-[280px] lg:min-w-[350px]",children:a.jsxs("h2",{className:"text-lg lg:text-xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:[Me(m,"dd 'de' MMM",{locale:Ve})," - ",Me(g,"dd 'de' MMM 'de' yyyy",{locale:Ve})]})}),a.jsx(B,{variant:"outline",size:"sm",onClick:N,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(Bo,{className:"h-4 w-4"})})]}),a.jsx(B,{variant:"default",size:"sm",onClick:_,className:"w-full sm:w-auto transition-all hover:scale-105 shadow-md",children:"Semana Atual"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(F,{className:"border-0 bg-gradient-to-br from-info/10 to-info/5 dark:from-info/10 dark:to-info/5 shadow-lg",children:a.jsx(q,{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-info/20",children:a.jsx(Ee,{className:"h-6 w-6 text-info"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-info",children:C.length}),a.jsx("p",{className:"text-sm text-info/70 font-medium",children:"Agendados"})]})]})})}),a.jsx(F,{className:"border-0 bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-950/20 dark:to-purple-900/20 shadow-lg",children:a.jsx(q,{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30",children:a.jsx(dt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:["R$ ",$.toFixed(2)]}),a.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70 font-medium",children:"A Receber"})]})]})})}),a.jsx(F,{className:"border-0 bg-gradient-to-br from-green-50 to-green-100/50 dark:from-green-950/20 dark:to-green-900/20 shadow-lg",children:a.jsx(q,{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30",children:a.jsx(st,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:k.length}),a.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70 font-medium",children:"Concludos"})]})]})})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",role:"list","aria-label":"Dias da semana",children:y.map(P=>{const O=w(P),M=A(P);return a.jsx(F,{className:"border-0 bg-card/60",role:"listitem",children:a.jsxs(q,{className:"p-4 space-y-3",children:[a.jsxs("button",{type:"button",className:"flex items-center justify-between w-full text-left",onClick:()=>{v(P),h(!0)},"aria-label":`Ver todos os horrios de ${Me(P,"EEEE, dd 'de' MMM",{locale:Ve})}`,children:[a.jsx("div",{className:"font-semibold",children:Me(P,"EEEE, dd 'de' MMM",{locale:Ve})}),a.jsxs(pe,{variant:"outline",className:"border-0 bg-info/20 text-info",children:[O.length," agend."]})]}),O.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",role:"list","aria-label":"Horrios do dia",children:[O.slice(0,6).map(R=>a.jsx("button",{type:"button",onClick:()=>{u(R),l(!0)},className:"px-2 py-1 rounded-md bg-muted hover:bg-muted/80 transition-colors","aria-label":`Ver detalhes de ${R.clienteNome} s ${R.hora}`,role:"listitem",children:R.hora},R.id)),O.length>6&&a.jsxs("span",{className:"px-2 py-1 rounded-md bg-muted",children:["+",O.length-6]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium mb-2 text-muted-foreground",children:"Horrios disponveis"}),M.length===0?a.jsx("div",{className:"text-xs text-muted-foreground",children:"Sem horrios disponveis"}):a.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.slice(0,10).map(R=>a.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border border-emerald-200/60",children:R},R)),M.length>10&&a.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-muted",children:["+",M.length-10]})]})]})]})},P.toISOString())})}),a.jsx(Sr,{open:c,onOpenChange:l,children:a.jsx(gr,{className:"max-w-lg",children:d&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center justify-between",children:[a.jsx("span",{children:d.clienteNome}),a.jsx(pe,{className:"bg-info/20 text-info border-0 capitalize",children:d.status})]}),a.jsx(kn,{children:Me(new Date(String(d.data)),"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Ve})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-muted-foreground",children:"Horrio"}),a.jsxs("div",{className:"font-medium",children:[d.hora," (",d.duracao,"min)"]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-muted-foreground",children:"Servio"}),a.jsx("div",{className:"font-medium",children:d.servicoNome})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-muted-foreground",children:"Valor"}),a.jsxs("div",{className:"font-medium",children:["R$ ",Number(d.valor??0).toFixed(2)]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-muted-foreground",children:"Origem"}),a.jsx("div",{className:"font-medium capitalize",children:d.origem||"manual"})]})]}),a.jsxs("div",{className:"text-sm space-y-1",children:[d.clienteTelefone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:d.clienteTelefone})]}),d.clienteEmail&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:d.clienteEmail})]}),d.observacoes&&a.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/60",children:[a.jsx("div",{className:"text-muted-foreground mb-1",children:"Observaes"}),a.jsxs("div",{className:"italic",children:['"',d.observacoes,'"']})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[d&&String(d.id).startsWith("online_")&&a.jsx(B,{variant:"outline",onClick:async()=>{await o?.(String(d.id).replace("online_",""))?V.success("Agendamento online convertido com sucesso"):V.error("Falha ao converter agendamento online")},children:"Converter para regular"}),a.jsx(B,{variant:"outline",onClick:()=>l(!1),autoFocus:!0,children:"Fechar"})]})]})})}),a.jsx(Sr,{open:f,onOpenChange:h,children:a.jsx(gr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:p&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Cr,{children:[a.jsx(Pr,{children:Me(p,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Ve})}),a.jsx(kn,{children:"Todos os horrios agendados e disponveis para o dia."})]}),(()=>{const P=w(p),O=A(p);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(F,{className:"border-0 bg-card/60",children:a.jsxs(q,{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"text-sm font-medium",children:["Agendados (",P.length,")"]}),P.length===0?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Nenhum agendamento"}):a.jsx("div",{className:"flex flex-wrap gap-2 max-h-64 overflow-y-auto pr-1",role:"list","aria-label":"Agendados do dia",children:P.map(M=>a.jsx("button",{type:"button",onClick:()=>{u(M),l(!0)},className:"px-2 py-1 rounded-md bg-muted hover:bg-muted/80 text-xs transition-colors",role:"listitem",children:M.hora},M.id))})]})}),a.jsx(F,{className:"border-0 bg-card/60",children:a.jsxs(q,{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"text-sm font-medium",children:["Horrios disponveis (",O.length,")"]}),O.length===0?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Sem horrios disponveis"}):a.jsx("div",{className:"flex flex-wrap gap-2 max-h-64 overflow-y-auto pr-1",role:"list","aria-label":"Horrios disponveis do dia",children:O.map(M=>a.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300 border border-emerald-200/60",role:"listitem",children:M},M))})]})})]})})(),a.jsx("div",{className:"flex justify-end",children:a.jsx(B,{variant:"outline",onClick:()=>h(!1),autoFocus:!0,children:"Fechar"})})]})})})]})}function vD({open:e,onOpenChange:t,agendamento:r,onReagendar:n,verificarConflito:s}){const[o,i]=x.useState(""),[c,l]=x.useState(""),[d,u]=x.useState(!1);if(!r)return null;const f=m=>Me(new Date(m+"T12:00:00"),"dd 'de' MMMM",{locale:Ve}),h=m=>m.slice(0,5),p=async m=>{if(m.preventDefault(),!o||!c){V.error("Preencha a nova data e horrio");return}if(o===r.data&&c===r.hora){V.error("A nova data e horrio devem ser diferentes do atual");return}const g={data:o,hora:c,duracao:r.duracao};if(s(g,r.id)){V.error("J existe um agendamento neste horrio");return}u(!0);try{await n(r.id,o,c)?(V.success("Agendamento reagendado com sucesso!"),t(!1),i(""),l("")):V.error("Erro ao reagendar agendamento")}catch{V.error("Erro ao reagendar agendamento")}finally{u(!1)}},v=()=>{i(""),l(""),t(!1)};return a.jsx(Sr,{open:e,onOpenChange:t,children:a.jsxs(gr,{className:"sm:max-w-[500px]",children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center gap-2",children:[a.jsx(Kr,{className:"h-5 w-5 text-primary"}),"Reagendar Agendamento"]}),a.jsx(kn,{children:"Altere a data e horrio do agendamento selecionado"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsx(F,{className:"bg-muted/50",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-foreground",children:r.clienteNome}),a.jsxs(pe,{className:"bg-info text-info-foreground",children:[a.jsx(Ee,{className:"h-3 w-3 mr-1"}),"Agendado"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:f(r.data)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{children:h(r.hora)})]})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Servio:"})," ",r.servicoNome]})]})})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nova-data",className:"text-sm font-medium",children:"Nova Data"}),a.jsx(ue,{id:"nova-data",type:"date",value:o,onChange:m=>i(m.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nova-hora",className:"text-sm font-medium",children:"Nova Hora"}),a.jsx(ue,{id:"nova-hora",type:"time",value:c,onChange:m=>l(m.target.value),step:"300",required:!0})]})]}),o&&c&&a.jsx(F,{className:"bg-success/10 border-success/20",children:a.jsxs(q,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-success",children:[a.jsx(Kr,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Novo agendamento:"})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4 text-sm text-success",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:f(o)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsx("span",{children:h(c)})]})]})]})}),a.jsxs(Cp,{children:[a.jsx(B,{type:"button",variant:"outline",onClick:v,disabled:d,children:"Cancelar"}),a.jsx(B,{type:"submit",disabled:d||!o||!c,className:"bg-gradient-to-r from-primary to-lilac-primary",children:d?a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4 animate-spin"}),"Reagendando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Reagendar"]})})]})]})]})})}function Gwe({buscaTexto:e=""}){const[t,r]=x.useState(new Date),{todosAgendamentos:n,loading:s,verificarConflito:o,atualizarAgendamento:i,cancelarAgendamento:c,converterAgendamentoOnlineParaRegular:l}=la(),{user:d}=Rt(),[u,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState(!1),[g,y]=x.useState(null),[b,w]=x.useState(!1);Qt(t),Za(t);const j=()=>r(D=>z$(D,1)),N=()=>r(D=>gn(D,1)),_=()=>r(new Date),S=e.trim().toLowerCase(),C=x.useMemo(()=>{const D=Or(t).slice(0,7);return n.filter(I=>Or(I.data).slice(0,7)===D).filter(I=>S?[I.clienteNome,I.servicoNome,I.status,I.origem,I.hora,I.observacoes||""].map(oe=>String(oe||"").toLowerCase()).some(oe=>oe.includes(S)):!0)},[n,t,S]),k=x.useMemo(()=>C.filter(D=>D.status==="agendado"),[C]),$=x.useMemo(()=>C.filter(D=>D.status==="concluido"),[C]),A=x.useMemo(()=>k.reduce((D,I)=>D+Number(I.valor??0),0),[k]),P=x.useMemo(()=>{const D=vn(Qt(t),{weekStartsOn:0}),I=Hc(Za(t),{weekStartsOn:0});return O$({start:D,end:I})},[t]),[O,M]=x.useState(new Map);x.useEffect(()=>{let D=!1;return(async()=>{try{if(!d)return;const{data:U,error:oe}=await W.rpc("contagem_agendamentos_por_dia",{p_user_id:d.id,p_mes:Or(t)});if(oe||!Array.isArray(U)){const ie=new Map;for(const me of C){const de=Or(me.data);ie.set(de,(ie.get(de)||0)+1)}D||M(ie);return}const J=new Map;for(const ie of U){const me=Or(ie.dia);J.set(me,Number(ie.total||0))}D||M(J)}catch{const U=new Map;for(const oe of C){const J=Or(oe.data);U.set(J,(U.get(J)||0)+1)}D||M(U)}})(),()=>{D=!0}},[d,t,C]);const R=x.useCallback(D=>{const I=Or(D);return C.filter(U=>Or(U.data)===I).sort((U,oe)=>U.hora.localeCompare(oe.hora))},[C]),T=D=>{const I=Or(D),[U,oe,J]=I.split("-").map(Number);return new Date(U,(oe||1)-1,J||1)};return s?a.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"}),a.jsx("div",{className:"h-96 bg-muted animate-pulse rounded-lg"})]}):a.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 rounded-xl bg-gradient-to-r from-accent/10 to-primary/10 border border-border/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(B,{variant:"outline",size:"sm",onClick:j,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(vc,{className:"h-4 w-4"})}),a.jsx("div",{className:"text-center min-w-[220px] lg:min-w-[280px]",children:a.jsx("h2",{className:"text-lg lg:text-xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:Me(t,"MMMM 'de' yyyy",{locale:Ve})})}),a.jsx(B,{variant:"outline",size:"sm",onClick:N,className:"h-9 w-9 p-0 rounded-full transition-all hover:scale-110 hover:shadow-md",children:a.jsx(Bo,{className:"h-4 w-4"})})]}),a.jsx(B,{variant:"default",size:"sm",onClick:_,className:"w-full sm:w-auto transition-all hover:scale-105 shadow-md",children:"Ms Atual"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(F,{className:"group border-0 bg-gradient-to-br from-info/10 to-info/5 dark:from-info/10 dark:to-info/5 transition-all hover:shadow-lg hover:scale-105",children:a.jsxs(q,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-info",children:k.length}),a.jsx("p",{className:"text-sm text-info/70 font-medium",children:"Agendados"})]})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-950/20 dark:to-purple-900/20 transition-all hover:shadow-lg hover:scale-105",children:a.jsx(q,{className:"p-6 text-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30",children:a.jsx(dt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-purple-600 dark:text-purple-400",children:["R$ ",A.toFixed(2)]}),a.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70 font-medium",children:"A Receber"})]})})}),a.jsx(F,{className:"group border-0 bg-gradient-to-br from-green-50 to-green-100/50 dark:from-green-950/20 dark:to-green-900/20 transition-all hover:shadow-lg hover:scale-105",children:a.jsxs(q,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-600 dark:text-green-400",children:$.length}),a.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70 font-medium",children:"Concludos"})]})})]}),a.jsx(F,{className:"border-0 bg-card/60",children:a.jsxs(q,{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-7 gap-2 text-xs text-muted-foreground",children:[a.jsx("div",{className:"text-center font-medium",children:"Dom"}),a.jsx("div",{className:"text-center font-medium",children:"Seg"}),a.jsx("div",{className:"text-center font-medium",children:"Ter"}),a.jsx("div",{className:"text-center font-medium",children:"Qua"}),a.jsx("div",{className:"text-center font-medium",children:"Qui"}),a.jsx("div",{className:"text-center font-medium",children:"Sex"}),a.jsx("div",{className:"text-center font-medium",children:"Sb"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2",role:"grid","aria-label":"Calendrio mensal",children:P.map(D=>{const I=Tp(D,t),U=Or(D),oe=O.get(U)||0;return a.jsx("button",{type:"button",onClick:()=>{f(D),p(!0)},className:`relative p-2 rounded-lg text-left border transition-colors ${I?"bg-background hover:bg-muted border-border/60":"bg-muted/40 text-muted-foreground/70 border-transparent"}`,"aria-label":`${Me(D,"dd 'de' MMMM",{locale:Ve})} - ${oe} agendamentos`,role:"gridcell",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm font-medium ${I?"text-foreground":"text-muted-foreground/70"}`,children:Me(D,"d",{locale:Ve})}),oe>0&&a.jsx(pe,{className:"bg-info/20 text-info border-0","aria-label":`${oe} agendamentos`,children:oe})]})},U)})})]})}),a.jsx(Sr,{open:h,onOpenChange:p,children:a.jsx(gr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:u&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Cr,{children:[a.jsx(Pr,{children:Me(u,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Ve})}),a.jsx(kn,{children:"Agendamentos do dia"})]}),(()=>{const D=R(u);return a.jsx("div",{className:"space-y-2",children:D.length===0?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Nenhum agendamento"}):a.jsx("div",{className:"space-y-2",role:"list","aria-label":"Agendamentos do dia",children:D.map(I=>a.jsxs("div",{className:"p-3 rounded-md bg-muted",role:"listitem",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"px-2 py-0.5 rounded-md bg-primary/10 text-primary text-xs font-semibold",children:I.hora}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:I.clienteNome}),a.jsx("div",{className:"text-xs text-muted-foreground",children:I.servicoNome})]})]}),a.jsxs("div",{className:"text-sm font-semibold whitespace-nowrap",children:["R$ ",Number(I.valor??0).toFixed(2)]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx(B,{variant:"outline",size:"sm",onClick:()=>{y(I),w(!0)},children:"Detalhes"}),a.jsx(B,{variant:"outline",size:"sm",onClick:()=>{y(I),m(!0)},children:"Reagendar"}),I.status!=="concluido"&&a.jsx(B,{variant:"default",size:"sm",onClick:async()=>{await i?.(I.id,{status:"concluido"})},children:"Marcar concludo"}),I.status!=="cancelado"&&a.jsx(B,{variant:"destructive",size:"sm",onClick:async()=>{await c?.(I.id)},children:"Cancelar"}),String(I.id).startsWith("online_")&&a.jsx(B,{variant:"outline",size:"sm",onClick:async()=>{await l?.(String(I.id).replace("online_",""))?V.success("Agendamento online convertido com sucesso"):V.error("Falha ao converter agendamento online")},children:"Converter para regular"})]})]},I.id))})})})(),a.jsx("div",{className:"flex justify-end",children:a.jsx(B,{variant:"outline",onClick:()=>p(!1),autoFocus:!0,children:"Fechar"})})]})})}),a.jsx(vD,{open:v,onOpenChange:m,agendamento:g,onReagendar:async(D,I,U)=>!!await i?.(D,{data:I,hora:U}),verificarConflito:o}),a.jsx(Sr,{open:b,onOpenChange:w,children:a.jsx(gr,{className:"max-w-lg",children:g&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center justify-between",children:[a.jsx("span",{children:g.clienteNome}),a.jsx(pe,{className:"border-0 capitalize bg-info/20 text-info",children:g.status})]}),a.jsx(kn,{children:Me(T(g.data),"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Ve})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Horrio"}),a.jsxs("div",{className:"font-medium",children:[g.hora," (",g.duracao,"min)"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Servio"}),a.jsx("div",{className:"font-medium",children:g.servicoNome})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Valor"}),a.jsxs("div",{className:"font-medium",children:["R$ ",Number(g.valor??0).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground",children:"Origem"}),a.jsx("div",{className:"font-medium capitalize",children:g.origem||"manual"})]})]}),g.observacoes&&a.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/60 text-sm",children:[a.jsx("div",{className:"text-muted-foreground mb-1",children:"Observaes"}),a.jsxs("div",{className:"italic",children:['"',g.observacoes,'"']})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(B,{variant:"outline",onClick:()=>w(!1),autoFocus:!0,children:"Fechar"})})]})})})]})}const OC=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();function Kwe({cliente:e,agendamentos:t,onClose:r}){const n=x.useMemo(()=>{const d=t.filter(g=>g.clienteId===e.id),u=d.filter(g=>g.status==="concluido"),f=d.filter(g=>g.status==="cancelado"),h=d.filter(g=>g.status==="agendado"),p=u.reduce((g,y)=>g+(y.valorPago||0),0),v=u.length,m=[...d].sort((g,y)=>{const b=new Date(`${g.data}T${g.hora}`);return new Date(`${y.data}T${y.hora}`).getTime()-b.getTime()});return{total:d.length,concluidos:u.length,cancelados:f.length,agendados:h.length,totalGasto:p,totalServicos:v,historico:m}},[t,e.id]),s=d=>d.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),o=d=>{const u=d.replace(/\D/g,"");return u.length===11?`(${u.slice(0,2)}) ${u.slice(2,7)}-${u.slice(7)}`:d},i=()=>{const d=e.telefone.replace(/\D/g,""),u=`Ol ${e.nome||e.nomeCompleto}! Tudo bem?`;window.open(`https://wa.me/55${d}?text=${encodeURIComponent(u)}`,"_blank")},c=()=>{window.open(`tel:${e.telefone}`,"_self")},l=d=>{switch(d){case"concluido":return a.jsxs(pe,{className:"bg-green-500/20 text-green-700 border-green-500/30",children:[a.jsx(jt,{className:"h-3 w-3 mr-1"}),"Concludo"]});case"cancelado":return a.jsxs(pe,{className:"bg-red-500/20 text-red-700 border-red-500/30",children:[a.jsx(qt,{className:"h-3 w-3 mr-1"}),"Cancelado"]});case"agendado":return a.jsxs(pe,{className:"bg-blue-500/20 text-blue-700 border-blue-500/30",children:[a.jsx(Ee,{className:"h-3 w-3 mr-1"}),"Agendado"]});default:return a.jsx(pe,{variant:"outline",children:d})}};return a.jsxs(F,{className:"border-primary/20 bg-card/95 backdrop-blur-sm shadow-xl animate-fade-in",children:[a.jsxs(ae,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(Vr,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx(se,{className:"text-lg",children:e.nome||e.nomeCompleto}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.telefone)})]})]}),a.jsx(B,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:a.jsx(qt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs(B,{size:"sm",variant:"outline",onClick:c,className:"flex-1 h-9",children:[a.jsx(rs,{className:"h-4 w-4 mr-2"}),"Ligar"]}),a.jsxs(B,{size:"sm",variant:"outline",onClick:i,className:"flex-1 h-9 bg-green-50 hover:bg-green-100 border-green-200",children:[a.jsx(Es,{className:"h-4 w-4 mr-2 text-green-600"}),"WhatsApp"]})]})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 text-center",children:[a.jsx(dt,{className:"h-5 w-5 mx-auto text-primary mb-1"}),a.jsx("p",{className:"text-lg font-bold text-primary",children:s(n.totalGasto)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Gasto"})]}),a.jsxs("div",{className:"bg-green-500/10 rounded-lg p-3 text-center",children:[a.jsx(jt,{className:"h-5 w-5 mx-auto text-green-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-green-600",children:n.concluidos}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Concludos"})]}),a.jsxs("div",{className:"bg-blue-500/10 rounded-lg p-3 text-center",children:[a.jsx(Ee,{className:"h-5 w-5 mx-auto text-blue-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-blue-600",children:n.agendados}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Agendados"})]}),a.jsxs("div",{className:"bg-red-500/10 rounded-lg p-3 text-center",children:[a.jsx(qt,{className:"h-5 w-5 mx-auto text-red-600 mb-1"}),a.jsx("p",{className:"text-lg font-bold text-red-600",children:n.cancelados}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancelados"})]})]}),a.jsx(Ha,{}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(UL,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("h3",{className:"font-semibold text-sm",children:["Histrico Completo (",n.total,")"]})]}),a.jsx(Op,{className:"h-[300px] pr-4",children:n.historico.length>0?a.jsx("div",{className:"space-y-3",children:n.historico.map(d=>a.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 border border-border/50 hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:d.servicoNome}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[a.jsx(Ee,{className:"h-3 w-3"}),a.jsx("span",{children:Me(new Date(d.data+"T12:00:00"),"dd/MM/yyyy",{locale:Ve})}),a.jsx(st,{className:"h-3 w-3 ml-1"}),a.jsx("span",{children:d.hora?.slice(0,5)})]})]}),a.jsxs("div",{className:"text-right flex-shrink-0",children:[l(d.status),a.jsx("p",{className:"text-sm font-semibold mt-1",children:s(d.valor)}),d.valorPago>0&&d.valorPago<d.valor&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pago: ",s(d.valorPago)]})]})]}),d.observacoes&&a.jsx("p",{className:"text-xs text-muted-foreground mt-2 italic bg-muted/50 p-2 rounded",children:d.observacoes}),d.origem&&d.origem!=="manual"&&a.jsx(pe,{variant:"outline",className:"mt-2 text-xs",children:d.origem==="cronograma"?" Cronograma":d.origem==="online"?" Online":d.origem})]},d.id))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Ee,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"Nenhum agendamento encontrado"})]})})]})]})]})}function Ywe({buscaTexto:e,clientes:t,agendamentos:r,onClienteSelect:n,clienteSelecionado:s}){const o=x.useMemo(()=>{if(!e||e.length<2)return[];const i=OC(e).split(/\s+/).filter(Boolean);return t.filter(c=>{const l=c.nome||c.nomeCompleto||"",d=c.telefone?.replace(/\D/g,"")||"",u=OC(`${l} ${d}`);return i.every(f=>u.includes(f))}).slice(0,5)},[e,t]);return s?a.jsx(Kwe,{cliente:s,agendamentos:r,onClose:()=>n(null)}):!e||e.length<2?null:o.length===0?a.jsx(F,{className:"border-border/50 bg-card/95 backdrop-blur-sm animate-fade-in",children:a.jsxs(q,{className:"p-4 text-center text-muted-foreground",children:[a.jsx(Vr,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),a.jsxs("p",{className:"text-sm",children:['Nenhum cliente encontrado para "',e,'"']})]})}):a.jsxs(F,{className:"border-border/50 bg-card/95 backdrop-blur-sm animate-fade-in",children:[a.jsx(ae,{className:"pb-2",children:a.jsxs(se,{className:"text-sm flex items-center gap-2",children:[a.jsx(Vr,{className:"h-4 w-4"}),"Clientes encontrados (",o.length,")"]})}),a.jsx(q,{className:"p-2",children:a.jsx("div",{className:"space-y-1",children:o.map(i=>{const c=r.filter(d=>d.clienteId===i.id),l=c.filter(d=>d.status==="concluido").reduce((d,u)=>d+(u.valorPago||0),0);return a.jsxs("button",{onClick:()=>n(i),className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-muted/80 transition-colors text-left",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx(Vr,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:i.nome||i.nomeCompleto}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.length," agendamento",c.length!==1?"s":"","  Total: ",l.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]}),a.jsx(Ut,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]},i.id)})})})]})}function Zwe(){const[e,t]=x.useState("dia"),[r,n]=x.useState(""),[s,o]=x.useState(null),{loading:i,todosAgendamentos:c,clientes:l}=la(),d=new Date;return c.filter(u=>new Date(u.data).toDateString()===d.toDateString()),c.length,c.filter(u=>u.status==="agendado").length,a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-background",children:a.jsxs("div",{className:"container mx-auto p-4 lg:p-8 space-y-6 lg:space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary/10 via-primary/5 to-accent/10 p-6 lg:p-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent dark:from-white/5"}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-primary/10 backdrop-blur-sm shadow-lg",children:a.jsx(Ee,{className:"h-7 w-7 text-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Agenda Profissional"}),a.jsx("p",{className:"text-muted-foreground font-medium",children:"Organize e gerencie seus agendamentos com eficincia"})]})]})}),a.jsxs("div",{className:"flex flex-col gap-4 w-full lg:w-auto",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar cliente para ver histrico...",value:r,onChange:u=>{n(u.target.value),u.target.value||o(null)},className:"pl-10 pr-10 w-full lg:w-72 bg-background/80 backdrop-blur-sm border-border/50"}),r&&a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>{n(""),o(null)},className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0 hover:bg-muted",children:a.jsx(qt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[a.jsxs(B,{variant:e==="dia"?"default":"outline",size:"sm",onClick:()=>t("dia"),className:"flex-1 lg:flex-none transition-all duration-200 hover:scale-105 shadow-md",children:[a.jsx(st,{className:"h-4 w-4 lg:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Dia"})]}),a.jsxs(B,{variant:e==="semana"?"default":"outline",size:"sm",onClick:()=>t("semana"),className:"flex-1 lg:flex-none transition-all duration-200 hover:scale-105 shadow-md",children:[a.jsx(ML,{className:"h-4 w-4 lg:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Semana"})]}),a.jsxs(B,{variant:e==="mes"?"default":"outline",size:"sm",onClick:()=>t("mes"),className:"flex-1 lg:flex-none transition-all duration-200 hover:scale-105 shadow-md",children:[a.jsx(DL,{className:"h-4 w-4 lg:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Ms"})]})]})]})]})})]}),r&&a.jsx(Ywe,{buscaTexto:r,clientes:l,agendamentos:c,onClienteSelect:o,clienteSelecionado:s}),a.jsx("div",{className:"relative",children:i?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted/50 animate-pulse rounded-2xl"}),a.jsx("div",{className:"h-96 bg-muted/50 animate-pulse rounded-2xl"})]}):a.jsxs("div",{className:"animate-fade-in",children:[e==="dia"&&a.jsx(Wwe,{}),e==="semana"&&a.jsx(Hwe,{}),e==="mes"&&a.jsx(Gwe,{})]})}),a.jsx(F,{className:"border-0 bg-card/50 backdrop-blur-sm",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-400"}),a.jsx("span",{children:"Cronograma"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400"}),a.jsx("span",{children:"Online"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),a.jsx("span",{children:"Concludo"})]})]}),a.jsxs("div",{className:"text-xs",children:["ltima atualizao: ",new Date().toLocaleTimeString("pt-BR")]})]})})})]})})}var Cy=["Enter"," "],Xwe=["ArrowDown","PageUp","Home"],xD=["ArrowUp","PageDown","End"],Jwe=[...Xwe,...xD],Qwe={ltr:[...Cy,"ArrowRight"],rtl:[...Cy,"ArrowLeft"]},eNe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pu="Menu",[Td,tNe,rNe]=bp(pu),[Zo,yD]=ia(pu,[rNe,Vs,Ap]),Up=Vs(),bD=Ap(),[nNe,Xo]=Zo(pu),[aNe,gu]=Zo(pu),jD=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=e,c=Up(t),[l,d]=x.useState(null),u=x.useRef(!1),f=ir(o),h=Vc(s);return x.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(wm,{...c,children:a.jsx(nNe,{scope:t,open:r,onOpenChange:f,content:l,onContentChange:d,children:a.jsx(aNe,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:h,modal:i,children:n})})})};jD.displayName=pu;var sNe="MenuAnchor",sj=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Up(r);return a.jsx(Hd,{...s,...n,ref:t})});sj.displayName=sNe;var oj="MenuPortal",[oNe,wD]=Zo(oj,{forceMount:void 0}),ND=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,o=Xo(oj,t);return a.jsx(oNe,{scope:t,forceMount:r,children:a.jsx(Ar,{present:r||o.open,children:a.jsx(Vd,{asChild:!0,container:s,children:n})})})};ND.displayName=oj;var Cn="MenuContent",[iNe,ij]=Zo(Cn),_D=x.forwardRef((e,t)=>{const r=wD(Cn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Xo(Cn,e.__scopeMenu),i=gu(Cn,e.__scopeMenu);return a.jsx(Td.Provider,{scope:e.__scopeMenu,children:a.jsx(Ar,{present:n||o.open,children:a.jsx(Td.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(cNe,{...s,ref:t}):a.jsx(lNe,{...s,ref:t})})})})}),cNe=x.forwardRef((e,t)=>{const r=Xo(Cn,e.__scopeMenu),n=x.useRef(null),s=He(t,n);return x.useEffect(()=>{const o=n.current;if(o)return pm(o)},[]),a.jsx(cj,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:je(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),lNe=x.forwardRef((e,t)=>{const r=Xo(Cn,e.__scopeMenu);return a.jsx(cj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),cj=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:v,...m}=e,g=Xo(Cn,r),y=gu(Cn,r),b=Up(r),w=bD(r),j=tNe(r),[N,_]=x.useState(null),S=x.useRef(null),C=He(t,S,g.onContentChange),k=x.useRef(0),$=x.useRef(""),A=x.useRef(0),P=x.useRef(null),O=x.useRef("right"),M=x.useRef(0),R=v?Ud:x.Fragment,T=v?{as:Ur,allowPinchZoom:!0}:void 0,D=U=>{const oe=$.current+U,J=j().filter(Y=>!Y.disabled),ie=document.activeElement,me=J.find(Y=>Y.ref.current===ie)?.textValue,de=J.map(Y=>Y.textValue),H=jNe(de,oe,me),L=J.find(Y=>Y.textValue===H)?.ref.current;(function Y(Q){$.current=Q,window.clearTimeout(k.current),Q!==""&&(k.current=window.setTimeout(()=>Y(""),1e3))})(oe),L&&setTimeout(()=>L.focus())};x.useEffect(()=>()=>window.clearTimeout(k.current),[]),hm();const I=x.useCallback(U=>O.current===P.current?.side&&NNe(U,P.current?.area),[]);return a.jsx(iNe,{scope:r,searchRef:$,onItemEnter:x.useCallback(U=>{I(U)&&U.preventDefault()},[I]),onItemLeave:x.useCallback(U=>{I(U)||(S.current?.focus(),_(null))},[I]),onTriggerLeave:x.useCallback(U=>{I(U)&&U.preventDefault()},[I]),pointerGraceTimerRef:A,onPointerGraceIntentChange:x.useCallback(U=>{P.current=U},[]),children:a.jsx(R,{...T,children:a.jsx(Bd,{asChild:!0,trapped:s,onMountAutoFocus:je(o,U=>{U.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(xc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:a.jsx(r$,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:je(l,U=>{y.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Nm,{role:"menu","aria-orientation":"vertical","data-state":zD(g.open),"data-radix-menu-content":"",dir:y.dir,...b,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:je(m.onKeyDown,U=>{const J=U.target.closest("[data-radix-menu-content]")===U.currentTarget,ie=U.ctrlKey||U.altKey||U.metaKey,me=U.key.length===1;J&&(U.key==="Tab"&&U.preventDefault(),!ie&&me&&D(U.key));const de=S.current;if(U.target!==de||!Jwe.includes(U.key))return;U.preventDefault();const L=j().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);xD.includes(U.key)&&L.reverse(),yNe(L)}),onBlur:je(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(k.current),$.current="")}),onPointerMove:je(e.onPointerMove,$d(U=>{const oe=U.target,J=M.current!==U.clientX;if(U.currentTarget.contains(oe)&&J){const ie=U.clientX>M.current?"right":"left";O.current=ie,M.current=U.clientX}}))})})})})})})});_D.displayName=Cn;var dNe="MenuGroup",lj=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx($e.div,{role:"group",...n,ref:t})});lj.displayName=dNe;var uNe="MenuLabel",SD=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx($e.div,{...n,ref:t})});SD.displayName=uNe;var Gh="MenuItem",TC="menu.itemSelect",qp=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,o=x.useRef(null),i=gu(Gh,e.__scopeMenu),c=ij(Gh,e.__scopeMenu),l=He(t,o),d=x.useRef(!1),u=()=>{const f=o.current;if(!r&&f){const h=new CustomEvent(TC,{bubbles:!0,cancelable:!0});f.addEventListener(TC,p=>n?.(p),{once:!0}),VP(f,h),h.defaultPrevented?d.current=!1:i.onClose()}};return a.jsx(CD,{...s,ref:l,disabled:r,onClick:je(e.onClick,u),onPointerDown:f=>{e.onPointerDown?.(f),d.current=!0},onPointerUp:je(e.onPointerUp,f=>{d.current||f.currentTarget?.click()}),onKeyDown:je(e.onKeyDown,f=>{const h=c.searchRef.current!=="";r||h&&f.key===" "||Cy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});qp.displayName=Gh;var CD=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=e,i=ij(Gh,r),c=bD(r),l=x.useRef(null),d=He(t,l),[u,f]=x.useState(!1),[h,p]=x.useState("");return x.useEffect(()=>{const v=l.current;v&&p((v.textContent??"").trim())},[o.children]),a.jsx(Td.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:a.jsx(n$,{asChild:!0,...c,focusable:!n,children:a.jsx($e.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:d,onPointerMove:je(e.onPointerMove,$d(v=>{n?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(e.onPointerLeave,$d(v=>i.onItemLeave(v))),onFocus:je(e.onFocus,()=>f(!0)),onBlur:je(e.onBlur,()=>f(!1))})})})}),fNe="MenuCheckboxItem",PD=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(TD,{scope:e.__scopeMenu,checked:r,children:a.jsx(qp,{role:"menuitemcheckbox","aria-checked":Kh(r)?"mixed":r,...s,ref:t,"data-state":uj(r),onSelect:je(s.onSelect,()=>n?.(Kh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});PD.displayName=fNe;var AD="MenuRadioGroup",[hNe,mNe]=Zo(AD,{value:void 0,onValueChange:()=>{}}),kD=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,o=ir(n);return a.jsx(hNe,{scope:e.__scopeMenu,value:r,onValueChange:o,children:a.jsx(lj,{...s,ref:t})})});kD.displayName=AD;var ED="MenuRadioItem",OD=x.forwardRef((e,t)=>{const{value:r,...n}=e,s=mNe(ED,e.__scopeMenu),o=r===s.value;return a.jsx(TD,{scope:e.__scopeMenu,checked:o,children:a.jsx(qp,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":uj(o),onSelect:je(n.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});OD.displayName=ED;var dj="MenuItemIndicator",[TD,pNe]=Zo(dj,{checked:!1}),$D=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,o=pNe(dj,r);return a.jsx(Ar,{present:n||Kh(o.checked)||o.checked===!0,children:a.jsx($e.span,{...s,ref:t,"data-state":uj(o.checked)})})});$D.displayName=dj;var gNe="MenuSeparator",MD=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx($e.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});MD.displayName=gNe;var vNe="MenuArrow",DD=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Up(r);return a.jsx(_m,{...s,...n,ref:t})});DD.displayName=vNe;var xNe="MenuSub",[z1e,ID]=Zo(xNe),xl="MenuSubTrigger",RD=x.forwardRef((e,t)=>{const r=Xo(xl,e.__scopeMenu),n=gu(xl,e.__scopeMenu),s=ID(xl,e.__scopeMenu),o=ij(xl,e.__scopeMenu),i=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=o,d={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const f=c.current;return()=>{window.clearTimeout(f),l(null)}},[c,l]),a.jsx(sj,{asChild:!0,...d,children:a.jsx(CD,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":zD(r.open),...e,ref:im(t,s.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:je(e.onPointerMove,$d(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:je(e.onPointerLeave,$d(f=>{u();const h=r.content?.getBoundingClientRect();if(h){const p=r.content?.dataset.side,v=p==="right",m=v?-5:5,g=h[v?"left":"right"],y=h[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+m,y:f.clientY},{x:g,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:g,y:h.bottom}],side:p}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:je(e.onKeyDown,f=>{const h=o.searchRef.current!=="";e.disabled||h&&f.key===" "||Qwe[n.dir].includes(f.key)&&(r.onOpenChange(!0),r.content?.focus(),f.preventDefault())})})})});RD.displayName=xl;var LD="MenuSubContent",FD=x.forwardRef((e,t)=>{const r=wD(Cn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Xo(Cn,e.__scopeMenu),i=gu(Cn,e.__scopeMenu),c=ID(LD,e.__scopeMenu),l=x.useRef(null),d=He(t,l);return a.jsx(Td.Provider,{scope:e.__scopeMenu,children:a.jsx(Ar,{present:n||o.open,children:a.jsx(Td.Slot,{scope:e.__scopeMenu,children:a.jsx(cj,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{i.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:je(e.onFocusOutside,u=>{u.target!==c.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:je(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:je(e.onKeyDown,u=>{const f=u.currentTarget.contains(u.target),h=eNe[i.dir].includes(u.key);f&&h&&(o.onOpenChange(!1),c.trigger?.focus(),u.preventDefault())})})})})})});FD.displayName=LD;function zD(e){return e?"open":"closed"}function Kh(e){return e==="indeterminate"}function uj(e){return Kh(e)?"indeterminate":e?"checked":"unchecked"}function yNe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function bNe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function jNe(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=bNe(e,Math.max(o,0));s.length===1&&(i=i.filter(d=>d!==r));const l=i.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function wNe(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const c=t[o].x,l=t[o].y,d=t[i].x,u=t[i].y;l>n!=u>n&&r<(d-c)*(n-l)/(u-l)+c&&(s=!s)}return s}function NNe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return wNe(r,t)}function $d(e){return t=>t.pointerType==="mouse"?e(t):void 0}var _Ne=jD,SNe=sj,CNe=ND,PNe=_D,ANe=lj,kNe=SD,ENe=qp,ONe=PD,TNe=kD,$Ne=OD,MNe=$D,DNe=MD,INe=DD,RNe=RD,LNe=FD,fj="DropdownMenu",[FNe]=ia(fj,[yD]),qr=yD(),[zNe,BD]=FNe(fj),VD=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,l=qr(t),d=x.useRef(null),[u=!1,f]=ka({prop:s,defaultProp:o,onChange:i});return a.jsx(zNe,{scope:t,triggerId:Sn(),triggerRef:d,contentId:Sn(),open:u,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:c,children:a.jsx(_Ne,{...l,open:u,onOpenChange:f,dir:n,modal:c,children:r})})};VD.displayName=fj;var UD="DropdownMenuTrigger",qD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,o=BD(UD,r),i=qr(r);return a.jsx(SNe,{asChild:!0,...i,children:a.jsx($e.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:im(t,o.triggerRef),onPointerDown:je(e.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(o.onOpenToggle(),o.open||c.preventDefault())}),onKeyDown:je(e.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&o.onOpenToggle(),c.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});qD.displayName=UD;var BNe="DropdownMenuPortal",WD=e=>{const{__scopeDropdownMenu:t,...r}=e,n=qr(t);return a.jsx(CNe,{...n,...r})};WD.displayName=BNe;var HD="DropdownMenuContent",GD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=BD(HD,r),o=qr(r),i=x.useRef(!1);return a.jsx(PNe,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:t,onCloseAutoFocus:je(e.onCloseAutoFocus,c=>{i.current||s.triggerRef.current?.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:je(e.onInteractOutside,c=>{const l=c.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;(!s.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GD.displayName=HD;var VNe="DropdownMenuGroup",UNe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(ANe,{...s,...n,ref:t})});UNe.displayName=VNe;var qNe="DropdownMenuLabel",KD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(kNe,{...s,...n,ref:t})});KD.displayName=qNe;var WNe="DropdownMenuItem",YD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(ENe,{...s,...n,ref:t})});YD.displayName=WNe;var HNe="DropdownMenuCheckboxItem",ZD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(ONe,{...s,...n,ref:t})});ZD.displayName=HNe;var GNe="DropdownMenuRadioGroup",KNe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(TNe,{...s,...n,ref:t})});KNe.displayName=GNe;var YNe="DropdownMenuRadioItem",XD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx($Ne,{...s,...n,ref:t})});XD.displayName=YNe;var ZNe="DropdownMenuItemIndicator",JD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(MNe,{...s,...n,ref:t})});JD.displayName=ZNe;var XNe="DropdownMenuSeparator",QD=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(DNe,{...s,...n,ref:t})});QD.displayName=XNe;var JNe="DropdownMenuArrow",QNe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(INe,{...s,...n,ref:t})});QNe.displayName=JNe;var e_e="DropdownMenuSubTrigger",eI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(RNe,{...s,...n,ref:t})});eI.displayName=e_e;var t_e="DropdownMenuSubContent",tI=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=qr(r);return a.jsx(LNe,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tI.displayName=t_e;var r_e=VD,n_e=qD,a_e=WD,rI=GD,nI=KD,aI=YD,sI=ZD,oI=XD,iI=JD,cI=QD,lI=eI,dI=tI;const uI=r_e,fI=n_e,s_e=x.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(lI,{ref:s,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(Bo,{className:"ml-auto h-4 w-4"})]}));s_e.displayName=lI.displayName;const o_e=x.forwardRef(({className:e,...t},r)=>a.jsx(dI,{ref:r,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));o_e.displayName=dI.displayName;const hj=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(a_e,{children:a.jsx(rI,{ref:n,sideOffset:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));hj.displayName=rI.displayName;const lo=x.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(aI,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));lo.displayName=aI.displayName;const hI=x.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(sI,{ref:s,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(iI,{children:a.jsx(jt,{className:"h-4 w-4"})})}),t]}));hI.displayName=sI.displayName;const i_e=x.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(oI,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(iI,{children:a.jsx(RL,{className:"h-2 w-2 fill-current"})})}),t]}));i_e.displayName=oI.displayName;const c_e=x.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(nI,{ref:n,className:te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));c_e.displayName=nI.displayName;const l_e=x.forwardRef(({className:e,...t},r)=>a.jsx(cI,{ref:r,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));l_e.displayName=cI.displayName;const mI=({className:e,...t})=>a.jsx("nav",{role:"navigation","aria-label":"pagination",className:te("mx-auto flex w-full justify-center",e),...t});mI.displayName="Pagination";const pI=x.forwardRef(({className:e,...t},r)=>a.jsx("ul",{ref:r,className:te("flex flex-row items-center gap-1",e),...t}));pI.displayName="PaginationContent";const vf=x.forwardRef(({className:e,...t},r)=>a.jsx("li",{ref:r,className:te("",e),...t}));vf.displayName="PaginationItem";const Wp=({className:e,isActive:t,size:r="icon",...n})=>a.jsx("a",{"aria-current":t?"page":void 0,className:te(Ei({variant:t?"outline":"ghost",size:r}),e),...n});Wp.displayName="PaginationLink";const gI=({className:e,...t})=>a.jsxs(Wp,{"aria-label":"Go to previous page",size:"default",className:te("gap-1 pl-2.5",e),...t,children:[a.jsx(vc,{className:"h-4 w-4"}),a.jsx("span",{children:"Previous"})]});gI.displayName="PaginationPrevious";const vI=({className:e,...t})=>a.jsxs(Wp,{"aria-label":"Go to next page",size:"default",className:te("gap-1 pr-2.5",e),...t,children:[a.jsx("span",{children:"Next"}),a.jsx(Bo,{className:"h-4 w-4"})]});vI.displayName="PaginationNext";const Ju={agendado:{label:"Agendado",color:"bg-info",icon:Ee},concluido:{label:"Concludo",color:"bg-success",icon:jt},cancelado:{label:"Cancelado",color:"bg-destructive",icon:qt}};function d_e({agendamentos:e,filtros:t,onFiltrosChange:r,onEdit:n,onDelete:s,onCancel:o,onViewDetails:i,onReagendar:c,onTrocarHorario:l,onMarcarPagamento:d,clientes:u,paginaAtual:f,totalPaginas:h,onPaginaChange:p}){const[v,m]=x.useState(null),g=j=>Me(new Date(j+"T12:00:00"),"dd 'de' MMMM",{locale:Ve}),y=j=>j.slice(0,5),b=j=>{const N=Math.floor(j/60),_=j%60;return N>0&&_>0?`${N}h ${_}min`:N>0?`${N}h`:`${_}min`},w=j=>`R$ ${j.toFixed(2).replace(".",",")}`;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Bs,{className:"h-5 w-5 text-primary"}),"Filtros"]})}),a.jsxs(q,{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar cliente ou servio...",value:t.busca||"",onChange:j=>r({...t,busca:j.target.value}),className:"pl-10 pr-10 h-10 sm:h-11 text-sm"}),t.busca&&a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>r({...t,busca:""}),className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0 hover:bg-muted",children:a.jsx(qt,{className:"h-4 w-4"})})]}),t.busca&&a.jsx("div",{className:"text-sm text-muted-foreground",children:e.length===0?a.jsxs("span",{children:['Nenhum agendamento encontrado para "',a.jsx("strong",{children:t.busca}),'"']}):a.jsxs("span",{children:[e.length," agendamento",e.length!==1?"s":""," encontrado",e.length!==1?"s":""]})}),a.jsxs("div",{className:"grid gap-3 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4",children:[a.jsx(ue,{type:"date",value:t.data||"",onChange:j=>r({...t,data:j.target.value}),placeholder:"Data",className:"h-10 sm:h-11 text-sm"}),a.jsxs(Ue,{value:t.periodo||"mes_atual",onValueChange:j=>r({...t,periodo:j}),children:[a.jsx(Fe,{className:"h-10 sm:h-11 text-sm",children:a.jsx(qe,{placeholder:"Perodo"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"mes_atual",children:"Ms atual"}),a.jsx(ne,{value:"mes_anterior",children:"Ms anterior"}),a.jsx(ne,{value:"proximo_mes",children:"Prximo ms"}),a.jsx(ne,{value:"todos",children:"Todos os perodos"})]})]}),a.jsxs(Ue,{value:t.status||"all",onValueChange:j=>r({...t,status:j==="all"?void 0:j}),children:[a.jsx(Fe,{className:"h-10 sm:h-11 text-sm",children:a.jsx(qe,{placeholder:"Status"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"all",children:"Todos"}),a.jsx(ne,{value:"agendado",children:"Agendado"}),a.jsx(ne,{value:"concluido",children:"Concludo"}),a.jsx(ne,{value:"cancelado",children:"Cancelado"})]})]}),a.jsxs(Ue,{value:t.clienteId||"all",onValueChange:j=>r({...t,clienteId:j==="all"?void 0:j}),children:[a.jsx(Fe,{className:"h-10 sm:h-11 text-sm",children:a.jsx(qe,{placeholder:"Cliente"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"all",children:"Todos"}),u.map(j=>a.jsx(ne,{value:j.id,children:j.nome},j.id))]})]}),a.jsxs(Ue,{value:t.statusPagamento||"all",onValueChange:j=>r({...t,statusPagamento:j==="all"?void 0:j}),children:[a.jsx(Fe,{className:"h-10 sm:h-11 text-sm",children:a.jsx(qe,{placeholder:"Pagamento"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"all",children:"Todos"}),a.jsx(ne,{value:"pago",children:" Pago"}),a.jsx(ne,{value:"parcial",children:" Parcial"}),a.jsx(ne,{value:"em_aberto",children:" Em aberto"})]})]})]})]}),(t.busca||t.data||t.status||t.clienteId||t.statusPagamento)&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border/20",children:a.jsx(B,{variant:"outline",size:"sm",onClick:()=>r({}),className:"h-9 text-xs",children:"Limpar filtros"})})]})]}),a.jsx("div",{className:"space-y-3 animate-fade-in",children:e.length===0?a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-12 text-center p-4 sm:p-6",children:[a.jsx(Ee,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Nenhum agendamento encontrado"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:Object.keys(t).length>0?"Tente ajustar os filtros ou criar um novo agendamento.":"Comece criando seu primeiro agendamento."})]})}):e.map((j,N)=>{const _=Ju[j.status].icon;return a.jsx(F,{className:"agendamento-card animate-fade-in touch-feedback",style:{animationDelay:`${N*50}ms`},onClick:()=>i(j),children:a.jsx(q,{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10 flex-shrink-0",children:a.jsx(Vr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base text-foreground truncate",children:j.clienteNome}),a.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[a.jsx(dn,{className:"h-3 w-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:j.servicoNome})]})]}),a.jsxs(uI,{children:[a.jsx(fI,{asChild:!0,onClick:S=>S.stopPropagation(),children:a.jsx(B,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 sm:h-9 sm:w-9",children:a.jsx(LL,{className:"h-4 w-4"})})}),a.jsxs(hj,{align:"end",className:"w-48",children:[a.jsxs(lo,{onClick:S=>{S.stopPropagation(),n(j)},children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Editar"]}),j.status==="agendado"&&c&&a.jsxs(lo,{onClick:S=>{S.stopPropagation(),c(j)},children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Reagendar"]}),j.status==="agendado"&&l&&a.jsxs(lo,{onClick:S=>{S.stopPropagation(),l(j)},children:[a.jsx(pl,{className:"h-4 w-4 mr-2"}),"Trocar Horrio"]}),j.status==="agendado"&&j.statusPagamento!=="pago"&&d&&a.jsxs(lo,{onClick:S=>{S.stopPropagation(),d(j)},children:[a.jsx(dt,{className:"h-4 w-4 mr-2"}),"Marcar Pagamento"]}),j.status==="agendado"&&a.jsxs(lo,{onClick:S=>{S.stopPropagation(),o(j.id)},children:[a.jsx(qt,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),a.jsxs(lo,{onClick:S=>{S.stopPropagation(),m(j.id)},className:"text-destructive",children:[a.jsx(pr,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(pe,{className:`${Ju[j.status].color} text-white text-xs h-6`,children:[a.jsx(_,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:Ju[j.status].label}),a.jsx("span",{className:"sm:hidden",children:Ju[j.status].label.charAt(0)})]}),j.origem==="online"&&a.jsxs(pe,{className:"bg-purple-500 text-white text-xs h-6",children:[a.jsx("span",{className:"text-xs",children:""}),a.jsx("span",{className:"ml-1 hidden sm:inline",children:"Online"})]}),a.jsxs(pe,{className:`${j.statusPagamento==="pago"?"bg-green-500":j.statusPagamento==="parcial"?"bg-yellow-500":"bg-red-500"} text-white text-xs h-6`,children:[j.statusPagamento==="pago"?"":j.statusPagamento==="parcial"?"":"",a.jsx("span",{className:"ml-1 hidden sm:inline",children:j.statusPagamento==="pago"?"Pago":j.statusPagamento==="parcial"?"Parcial":"Em aberto"})]})]})]}),a.jsxs("div",{className:"grid gap-3 text-xs sm:text-sm",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Ee,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:g(j.data)})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(st,{className:"h-4 w-4 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:[y(j.hora)," (",b(j.duracao),")"]})]})]}),a.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/30 rounded-lg",children:[a.jsx(dt,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"}),a.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[a.jsxs("div",{className:"font-medium text-foreground text-sm",children:["Total: ",w(j.valor)]}),j.valorPago>0&&a.jsxs("div",{className:"text-green-600 text-xs",children:["Pago: ",w(j.valorPago)]}),j.valorDevido>0&&a.jsxs("div",{className:"text-red-500 text-xs font-medium",children:["Pendente: ",w(j.valorDevido)]}),j.dataPrevistaPagamento&&(j.formaPagamento==="fiado"||j.statusPagamento==="parcial"||j.statusPagamento==="em_aberto")&&a.jsxs("div",{className:"text-blue-600 text-xs",children:["Previsto: ",g(j.dataPrevistaPagamento)]})]})]})]})]})})},j.id)})}),h>1&&a.jsx("div",{className:"flex justify-center",children:a.jsx(mI,{children:a.jsxs(pI,{children:[a.jsx(vf,{children:a.jsx(gI,{onClick:()=>f>1&&p(f-1),className:f<=1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:h},(j,N)=>N+1).map(j=>a.jsx(vf,{children:a.jsx(Wp,{onClick:()=>p(j),isActive:j===f,className:"cursor-pointer",children:j})},j)),a.jsx(vf,{children:a.jsx(vI,{onClick:()=>f<h&&p(f+1),className:f>=h?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),a.jsx(sa,{open:!!v,onOpenChange:()=>m(null),children:a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsx(Mn,{children:"Tem certeza que deseja excluir este agendamento? Esta ao no pode ser desfeita."})]}),a.jsxs(Tn,{children:[a.jsx(oa,{children:"Cancelar"}),a.jsx(Dn,{onClick:()=>{v&&(s(v),m(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const u_e=()=>{const[e,t]=x.useState(Date.now());return x.useEffect(()=>{const r=W.channel("configuracoes_real_time").on("postgres_changes",{event:"*",schema:"public",table:"configuracoes_horarios"},n=>{console.log("Configurao de horrio atualizada:",n),t(Date.now())}).on("postgres_changes",{event:"*",schema:"public",table:"intervalos_trabalho"},n=>{console.log("Intervalo de trabalho atualizado:",n),t(Date.now())}).subscribe();return()=>{W.removeChannel(r)}},[]),{lastUpdate:e}},f_e=Zs({clienteId:ut().min(1,"Cliente  obrigatrio"),servicoId:ut().min(1,"Servio  obrigatrio"),data:ut().min(1,"Data  obrigatria"),hora:ut().min(1,"Hora  obrigatria"),duracao:Ps().min(1,"Durao deve ser maior que 0"),valor:Ps().min(0,"Valor deve ser positivo"),valorPago:Ps().min(0,"Valor pago deve ser positivo"),valorDevido:Ps().min(0,"Valor devido deve ser positivo"),formaPagamento:No(["dinheiro","cartao","pix","fiado"]),statusPagamento:No(["pago","parcial","em_aberto"]),status:No(["agendado","concluido","cancelado"]),observacoes:ut().optional(),dataPrevistaPagamento:ut().optional()});function h_e({agendamento:e,clientes:t,servicos:r,onSubmit:n,onCancel:s,verificarConflito:o}){const{configuracoes:i,getHorariosDisponiveis:c,isDiaAtivo:l,isAgendamentoValido:d}=aj(),{lastUpdate:u}=u_e(),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,g]=x.useState(!1),[y,b]=x.useState([]),w=Ds({resolver:Is(f_e),defaultValues:{clienteId:e?.clienteId||"",servicoId:e?.servicoId||"",data:e?.data||"",hora:e?.hora||"",duracao:e?.duracao||0,valor:e?.valor||0,valorPago:e?.valorPago||0,valorDevido:e?.valorDevido||0,formaPagamento:e?.formaPagamento||"dinheiro",statusPagamento:e?.statusPagamento||"em_aberto",status:e?.status||"agendado",observacoes:e?.observacoes||"",dataPrevistaPagamento:e?.dataPrevistaPagamento||""}}),j=w.watch(["data","hora","duracao"]);x.useEffect(()=>{const[S,C,k]=j;if(S&&C&&k){const $=o({data:S,hora:C,duracao:k},e?.id);g($)}},[j,o,e?.id]),x.useEffect(()=>{const S=w.watch("servicoId");if(S){const C=r.find(k=>k.id===S);h(C||null),C&&(w.setValue("duracao",C.duracao),w.setValue("valor",C.valor))}},[w.watch("servicoId"),r,w]),x.useEffect(()=>{const S=w.watch("clienteId");if(S){const C=t.find(k=>k.id===S);v(C||null)}},[w.watch("clienteId"),t]),x.useEffect(()=>{const S=w.watch("data");if(S&&i&&i.length>0){const k=new Date(S+"T12:00:00").getDay();if(!l(k)){b([]),w.setValue("hora","");return}const $=f?.duracao||60,A=c(k,$);b(A);const P=w.watch("hora");P&&A.length>0&&!A.includes(P)&&w.setValue("hora","")}else S&&(!i||i.length===0)?b([]):b([])},[w.watch("data"),i,f,c,l,w,u]);const N=S=>{if(console.log("Dados do agendamento:",S),m){console.log("Conflito detectado, cancelando submisso");return}const C=d(S.data,S.hora,S.duracao);if(console.log("Agendamento vlido?",C,{data:S.data,hora:S.hora,duracao:S.duracao,configuracoes:i}),!C){console.log("Agendamento no vlido segundo validao"),V.error("Este horrio no est disponvel para agendamento!");return}const k=t.find(A=>A.id===S.clienteId)?.nomeCompleto||"",$=r.find(A=>A.id===S.servicoId)?.nome||"";n({...S,clienteNome:k,servicoNome:$})},_=S=>{const C=Math.floor(S/60),k=S%60;return C>0&&k>0?`${C}h ${k}min`:C>0?`${C}h`:`${k}min`};return a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsx(ae,{className:"p-4 sm:p-6",children:a.jsxs(se,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[a.jsx(Ee,{className:"h-5 w-5 text-primary flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e?"Editar Agendamento":"Novo Agendamento"})]})}),a.jsx(q,{className:"p-4 sm:p-6 pt-0",children:a.jsx(lc,{...w,children:a.jsxs("form",{onSubmit:w.handleSubmit(N),className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 sm:gap-6 sm:grid-cols-2",children:[a.jsx(at,{control:w.control,name:"clienteId",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Vr,{className:"h-4 w-4"}),"Cliente"]}),a.jsxs(Ue,{onValueChange:S.onChange,value:S.value,children:[a.jsx(tt,{children:a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um cliente"})})}),a.jsx(ze,{children:t.map(C=>a.jsx(ne,{value:C.id,children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:C.nomeCompleto}),a.jsx("div",{className:"text-sm text-muted-foreground",children:C.telefone})]})},C.id))})]}),a.jsx(it,{})]})}),a.jsx(at,{control:w.control,name:"servicoId",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(dn,{className:"h-4 w-4"}),"Servio"]}),a.jsxs(Ue,{onValueChange:S.onChange,value:S.value,children:[a.jsx(tt,{children:a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um servio"})})}),a.jsx(ze,{children:r.map(C=>a.jsx(ne,{value:C.id,children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:C.nome}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[_(C.duracao)," - R$ ",C.valor.toFixed(2)]})]})},C.id))})]}),a.jsx(it,{})]})}),a.jsx(at,{control:w.control,name:"data",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),"Data"]}),a.jsx(tt,{children:a.jsx(ue,{type:"date",...S})}),a.jsx(it,{})]})}),a.jsx(at,{control:w.control,name:"hora",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),"Hora"]}),a.jsxs(Ue,{onValueChange:S.onChange,value:S.value,children:[a.jsx(tt,{children:a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um horrio"})})}),a.jsx(ze,{children:y.length>0?y.map(C=>a.jsx(ne,{value:C,children:C},C)):a.jsx(ne,{value:"no-horarios-disponiveis",disabled:!0,children:w.watch("data")?i&&i.length>0?(()=>{const k=new Date(w.watch("data")+"T12:00:00").getDay();return l(k)?"Nenhum horrio disponvel":"Dia no disponvel para atendimento"})():"Configure os horrios de trabalho primeiro":"Selecione uma data primeiro"})})]}),a.jsx(it,{}),m&&a.jsx("p",{className:"text-sm text-destructive font-medium",children:" J existe um agendamento neste horrio"})]})}),a.jsx(at,{control:w.control,name:"duracao",render:({field:S})=>a.jsxs(Qe,{children:[a.jsx(et,{children:"Durao (minutos)"}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"1",...S,onChange:C=>S.onChange(parseInt(C.target.value)||0)})}),a.jsx(it,{}),f&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Durao padro: ",_(f.duracao)]})]})}),a.jsx(at,{control:w.control,name:"valor",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4"}),"Valor Total (R$)"]}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"0",step:"0.01",...S,onChange:C=>S.onChange(parseFloat(C.target.value)||0)})}),a.jsx(it,{}),f&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Valor padro: R$ ",f.valor.toFixed(2)]})]})}),a.jsx(at,{control:w.control,name:"formaPagamento",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(So,{className:"h-4 w-4"}),"Forma de Pagamento"]}),a.jsxs(Ue,{onValueChange:S.onChange,value:S.value,children:[a.jsx(tt,{children:a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione a forma de pagamento"})})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"dinheiro",children:" Dinheiro"}),a.jsx(ne,{value:"cartao",children:" Carto"}),a.jsx(ne,{value:"pix",children:" PIX"}),a.jsx(ne,{value:"fiado",children:" Fiado"})]})]}),a.jsx(it,{})]})}),a.jsx(at,{control:w.control,name:"valorPago",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4"}),"Valor Pago (R$)"]}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"0",step:"0.01",...S,onChange:C=>{const k=parseFloat(C.target.value)||0,$=w.getValues("valor");S.onChange(k),w.setValue("valorDevido",Math.max(0,$-k)),k===0?w.setValue("statusPagamento","em_aberto"):k>=$?w.setValue("statusPagamento","pago"):w.setValue("statusPagamento","parcial")}})}),a.jsx(it,{})]})}),a.jsx(at,{control:w.control,name:"valorDevido",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4"}),"Valor Devido (R$)"]}),a.jsx(tt,{children:a.jsx(ue,{type:"number",min:"0",step:"0.01",...S,onChange:C=>S.onChange(parseFloat(C.target.value)||0),readOnly:!0,className:"bg-muted"})}),a.jsx(it,{})]})})]}),a.jsx(at,{control:w.control,name:"status",render:({field:S})=>a.jsxs(Qe,{children:[a.jsx(et,{children:"Status"}),a.jsxs(Ue,{onValueChange:S.onChange,value:S.value,children:[a.jsx(tt,{children:a.jsx(Fe,{children:a.jsx(qe,{})})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"agendado",children:"Agendado"}),a.jsx(ne,{value:"concluido",children:"Concludo"}),a.jsx(ne,{value:"cancelado",children:"Cancelado"})]})]}),a.jsx(it,{})]})}),(w.watch("formaPagamento")==="fiado"||w.watch("statusPagamento")==="parcial"||w.watch("statusPagamento")==="em_aberto")&&a.jsx(at,{control:w.control,name:"dataPrevistaPagamento",render:({field:S})=>a.jsxs(Qe,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),"Data Prevista de Pagamento"]}),a.jsx(tt,{children:a.jsx(ue,{type:"date",...S,min:new Date().toISOString().split("T")[0]})}),a.jsx(it,{}),a.jsx("p",{className:"text-sm text-muted-foreground",children:w.watch("formaPagamento")==="fiado"?"Quando o cliente disse que vai pagar":"Data prevista para pagamento do valor restante"})]})}),a.jsx(at,{control:w.control,name:"observacoes",render:({field:S})=>a.jsxs(Qe,{children:[a.jsx(et,{children:"Observaes"}),a.jsx(tt,{children:a.jsx(fr,{placeholder:"Observaes sobre o agendamento...",...S})}),a.jsx(it,{})]})}),a.jsxs("div",{className:"action-buttons pt-4 border-t border-border/20",children:[a.jsxs(B,{type:"submit",disabled:m,className:"action-button bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300 touch-feedback",children:[a.jsx(Vo,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:[e?"Atualizar":"Criar"," Agendamento"]})]}),a.jsxs(B,{type:"button",variant:"outline",onClick:s,className:"action-button touch-feedback",children:[a.jsx(qt,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Cancelar"})]})]})]})})})]})})}const Qu={agendado:{label:"Agendado",color:"bg-info text-info-foreground",icon:Ee,description:"Agendamento confirmado"},concluido:{label:"Concludo",color:"bg-success text-success-foreground",icon:jt,description:"Servio realizado com sucesso"},cancelado:{label:"Cancelado",color:"bg-destructive text-destructive-foreground",icon:qt,description:"Agendamento cancelado"}};function m_e({agendamento:e,cliente:t,servico:r,onEdit:n,onBack:s,onCancel:o,onMarcarPagamento:i}){const c=v=>{const[m,g,y]=v.split("-").map(Number),b=new Date(m,g-1,y);return Me(b,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Ve})},l=v=>v.slice(0,5),d=v=>{const m=Math.floor(v/60),g=v%60;return m>0&&g>0?`${m}h ${g}min`:m>0?`${m}h`:`${g}min`},u=v=>`R$ ${v.toFixed(2).replace(".",",")}`,f=v=>Me(new Date(v),"dd/MM/yyyy 's' HH:mm",{locale:Ve}),h=()=>{const v=new Date(`${e.data}T${e.hora}`);return new Date(v.getTime()+e.duracao*6e4).toTimeString().slice(0,5)},p=Qu[e.status].icon;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(B,{variant:"ghost",onClick:s,className:"gap-2",children:[a.jsx(Rd,{className:"h-4 w-4"}),"Voltar para lista"]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.status==="agendado"&&e.statusPagamento!=="pago"&&i&&a.jsxs(B,{variant:"default",onClick:i,className:"bg-success hover:bg-success/90",children:[a.jsx(dt,{className:"h-4 w-4 mr-2"}),"Marcar Pagamento"]}),e.status==="agendado"&&a.jsxs(B,{variant:"outline",onClick:o,children:[a.jsx(qt,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),a.jsxs(B,{onClick:n,className:"bg-gradient-to-r from-primary to-lilac-primary",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]}),a.jsxs(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(se,{className:"text-2xl",children:"Detalhes do Agendamento"}),a.jsxs(pe,{className:Qu[e.status].color,children:[a.jsx(p,{className:"h-4 w-4 mr-2"}),Qu[e.status].label]})]}),a.jsx("p",{className:"text-muted-foreground",children:Qu[e.status].description})]}),a.jsxs(q,{className:"space-y-8",children:[a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Ee,{className:"h-5 w-5 text-primary"}),"Data e Hora"]}),a.jsxs("div",{className:"space-y-3 pl-7",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Data"}),a.jsx("p",{className:"text-lg capitalize",children:c(e.data)})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Horrio"}),a.jsxs("p",{className:"text-lg",children:[l(e.hora)," s ",h()]})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Durao"}),a.jsx("p",{className:"text-lg",children:d(e.duracao)})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(dt,{className:"h-5 w-5 text-primary"}),"Informaes de Pagamento"]}),a.jsxs("div",{className:"pl-7 space-y-4",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Valor Total"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:u(e.valor)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Valor Pago"}),a.jsx("p",{className:"text-lg font-semibold text-success",children:u(e.valorPago)})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Valor Devido"}),a.jsx("p",{className:`text-lg font-semibold ${e.valorDevido>0?"text-destructive":"text-success"}`,children:u(e.valorDevido)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Forma de Pagamento"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(So,{className:"h-4 w-4"}),a.jsx("span",{className:"capitalize",children:e.formaPagamento==="cartao"?"Carto":e.formaPagamento==="pix"?"PIX":e.formaPagamento==="dinheiro"?"Dinheiro":"Fiado"})]})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Status do Pagamento"}),a.jsx(pe,{className:`mt-1 ${e.statusPagamento==="pago"?"bg-success text-success-foreground":e.statusPagamento==="parcial"?"bg-warning text-warning-foreground":"bg-destructive text-destructive-foreground"}`,children:e.statusPagamento==="pago"?" Pago":e.statusPagamento==="parcial"?" Parcial":" Em aberto"})]})]})]})]})]}),a.jsx(Ha,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Vr,{className:"h-5 w-5 text-primary"}),"Cliente"]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 pl-7",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Nome"}),a.jsx("p",{className:"text-lg font-medium",children:t.nome})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Telefone"}),a.jsxs("p",{className:"text-lg flex items-center gap-2",children:[a.jsx(rs,{className:"h-4 w-4"}),t.telefone]})]}),t.email&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"E-mail"}),a.jsxs("p",{className:"text-lg flex items-center gap-2",children:[a.jsx(um,{className:"h-4 w-4"}),t.email]})]})]})]}),a.jsx(Ha,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(dn,{className:"h-5 w-5 text-primary"}),"Servio"]}),a.jsxs("div",{className:"pl-7 space-y-3",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Nome do servio"}),a.jsx("p",{className:"text-lg font-medium",children:r.nome})]}),r.descricao&&a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Descrio"}),a.jsx("p",{className:"text-base",children:r.descricao})]})]})]}),e.observacoes&&a.jsxs(a.Fragment,{children:[a.jsx(Ha,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(Aa,{className:"h-5 w-5 text-primary"}),"Observaes"]}),a.jsx("div",{className:"pl-7",children:a.jsx("p",{className:"text-base leading-relaxed bg-muted/50 p-4 rounded-lg",children:e.observacoes})})]})]}),a.jsx(Ha,{}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 text-sm text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx(K,{className:"font-medium",children:"Criado em"}),a.jsx("p",{children:f(e.createdAt)})]}),a.jsxs("div",{children:[a.jsx(K,{className:"font-medium",children:"ltima atualizao"}),a.jsx("p",{children:f(e.updatedAt)})]})]})]})]})]})}function p_e({open:e,onOpenChange:t,agendamento:r,agendamentosDisponiveis:n,onTrocarHorarios:s}){const[o,i]=x.useState(""),[c,l]=x.useState(!1);if(!r)return null;const d=g=>Me(new Date(g+"T12:00:00"),"dd 'de' MMMM",{locale:Ve}),u=g=>g.slice(0,5),f=g=>{const y=Math.floor(g/60),b=g%60;return y>0&&b>0?`${y}h ${b}min`:y>0?`${y}h`:`${b}min`},h=n.filter(g=>g.id!==r.id&&g.status==="agendado"),p=h.find(g=>g.id===o),v=async g=>{if(g.preventDefault(),!o){V.error("Selecione um agendamento para trocar");return}l(!0);try{await s(r.id,o)?(V.success("Horrios trocados com sucesso!"),t(!1),i("")):V.error("Erro ao trocar horrios")}catch{V.error("Erro ao trocar horrios")}finally{l(!1)}},m=()=>{i(""),t(!1)};return a.jsx(Sr,{open:e,onOpenChange:t,children:a.jsxs(gr,{className:"sm:max-w-[600px]",children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center gap-2",children:[a.jsx(pl,{className:"h-5 w-5 text-primary"}),"Trocar Horrios"]}),a.jsx(kn,{children:"Selecione outro agendamento para trocar os horrios"})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{className:"text-sm font-medium",children:"Agendamento atual:"}),a.jsx(F,{className:"bg-muted/50",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-primary/10 to-lilac-light/10",children:a.jsx(Vr,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:r.clienteNome}),a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(dn,{className:"h-3 w-3"}),a.jsx("span",{children:r.servicoNome})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:d(r.data)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsxs("span",{children:[u(r.hora)," - ",f(r.duracao)]})]})]})]})})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"agendamento-troca",className:"text-sm font-medium",children:"Trocar com:"}),a.jsxs(Ue,{value:o,onValueChange:i,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um agendamento"})}),a.jsx(ze,{children:h.length===0?a.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Nenhum agendamento disponvel para troca"}):h.map(g=>a.jsx(ne,{value:g.id,children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:g.clienteNome}),a.jsx("span",{className:"text-muted-foreground",children:"-"}),a.jsxs("span",{className:"text-sm",children:[d(g.data)," ",u(g.hora)]})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:f(g.duracao)})]})},g.id))})]})]}),p&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(pl,{className:"h-6 w-6 text-primary"})}),a.jsx(F,{className:"bg-green-50 border-green-200",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-green-700 text-center",children:"Preview da troca"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm font-medium text-green-600",children:[r.clienteNome," vai para:"]}),a.jsxs("div",{className:"text-sm text-green-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:d(p.data)})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsxs("span",{children:[u(p.hora)," - ",f(p.duracao)]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm font-medium text-green-600",children:[p.clienteNome," vai para:"]}),a.jsxs("div",{className:"text-sm text-green-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:d(r.data)})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsxs("span",{children:[u(r.hora)," - ",f(r.duracao)]})]})]})]})]})]})})})]}),a.jsxs(Cp,{children:[a.jsx(B,{type:"button",variant:"outline",onClick:m,disabled:c,children:"Cancelar"}),a.jsx(B,{type:"submit",disabled:c||!o,className:"bg-gradient-to-r from-primary to-lilac-primary",children:c?a.jsxs(a.Fragment,{children:[a.jsx(pl,{className:"mr-2 h-4 w-4 animate-spin"}),"Trocando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(pl,{className:"mr-2 h-4 w-4"}),"Trocar Horrios"]})})]})]})]})})}function g_e({open:e,onOpenChange:t,agendamento:r,onConfirmar:n}){const[s,o]=x.useState(""),[i,c]=x.useState("dinheiro"),[l,d]=x.useState(!1),u=r?.valorDevido||0,f=r?.valor||0,h=async v=>{if(!r)return;d(!0);const m=v?u:parseFloat(s.replace(",","."))||0;await n(r.id,m,i)&&(t(!1),o(""),c("dinheiro")),d(!1)},p=v=>`R$ ${v.toFixed(2).replace(".",",")}`;return a.jsx(Sr,{open:e,onOpenChange:t,children:a.jsxs(gr,{className:"sm:max-w-md",children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-5 w-5 text-primary"}),"Registrar Pagamento"]}),a.jsxs(kn,{children:["Registre o pagamento do agendamento de ",r?.clienteNome]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Valor Total:"}),a.jsx("span",{className:"font-semibold",children:p(f)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"J Pago:"}),a.jsx("span",{className:"font-semibold text-success",children:p(r?.valorPago||0)})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-border",children:[a.jsx("span",{className:"text-muted-foreground font-medium",children:"Valor Devido:"}),a.jsx("span",{className:"font-bold text-destructive",children:p(u)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"forma-pagamento",children:"Forma de Pagamento"}),a.jsxs(Ue,{value:i,onValueChange:c,children:[a.jsx(Fe,{id:"forma-pagamento",children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"dinheiro",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),"Dinheiro"]})}),a.jsx(ne,{value:"cartao",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(So,{className:"h-4 w-4"}),"Carto"]})}),a.jsx(ne,{value:"pix",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),"PIX"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"valor-pago",children:"Valor Pago (parcial)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"R$"}),a.jsx(ue,{id:"valor-pago",type:"text",placeholder:"0,00",value:s,onChange:v=>{const m=v.target.value.replace(/[^\d,]/g,"");o(m)},className:"pl-10"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Deixe em branco para pagar o valor completo"})]})]}),a.jsxs(Cp,{className:"flex-col sm:flex-row gap-2",children:[a.jsx(B,{variant:"outline",onClick:()=>t(!1),disabled:l,className:"w-full sm:w-auto",children:"Cancelar"}),a.jsx(B,{variant:"outline",onClick:()=>h(!1),disabled:l||!s,className:"w-full sm:w-auto",children:"Pagar Parcial"}),a.jsx(B,{onClick:()=>h(!0),disabled:l,className:"w-full sm:w-auto bg-gradient-to-r from-primary to-lilac-primary",children:l?"Processando...":"Pagar Completo"})]})]})})}function v_e(){const{agendamentos:e,agendamentosFiltrados:t,filtros:r,setFiltros:n,paginaAtual:s,setPaginaAtual:o,totalPaginas:i,clientes:c,servicos:l,criarAgendamento:d,atualizarAgendamento:u,excluirAgendamento:f,cancelarAgendamento:h,verificarConflito:p,todosAgendamentos:v}=la(),[m,g]=x.useState("lista"),[y,b]=x.useState(null),[w,j]=x.useState(!1),[N,_]=x.useState(null),[S,C]=x.useState(!1),[k,$]=x.useState(null),[A,P]=x.useState(!1),[O,M]=x.useState(null),R=new Date().toISOString().split("T")[0],T=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],D=new Date;D.setDate(D.getDate()-D.getDay());const I=new Date(D);I.setDate(I.getDate()+6);const U=t.filter(ve=>ve.data===R&&ve.status!=="cancelado").length,oe=t.filter(ve=>ve.data===T&&ve.status!=="cancelado").length,J=t.filter(ve=>{const Be=new Date(ve.data);return Be>=D&&Be<=I&&ve.status!=="cancelado"}).length,ie=()=>{b(null),g("formulario")},me=ve=>{b(ve),g("formulario")},de=ve=>{b(ve),g("detalhes")},H=ve=>{(y?u(y.id,ve):d(ve))&&(g("lista"),b(null))},L=()=>{g("lista"),b(null)},Y=()=>{y&&(h(y.id),g("lista"),b(null))},Q=ve=>{_(ve),j(!0)},Z=async(ve,Be,Oe)=>{const Ce=await u(ve,{data:Be,hora:Oe});return Ce&&(j(!1),_(null)),Ce},ce=ve=>{$(ve),C(!0)},fe=async(ve,Be)=>{try{const Oe=v.find(ee=>ee.id===ve),Ce=v.find(ee=>ee.id===Be);if(!Oe||!Ce)return!1;if(p({data:Ce.data,hora:Ce.hora,duracao:Oe.duracao},Be))return Jt({title:"Conflito de horrio",description:`O agendamento de ${Oe.clienteNome} (${Oe.duracao}min) no cabe no horrio de ${Ce.clienteNome}. H conflito com outros agendamentos.`,variant:"destructive"}),!1;if(p({data:Oe.data,hora:Oe.hora,duracao:Ce.duracao},ve))return Jt({title:"Conflito de horrio",description:`O agendamento de ${Ce.clienteNome} (${Ce.duracao}min) no cabe no horrio de ${Oe.clienteNome}. H conflito com outros agendamentos.`,variant:"destructive"}),!1;const z=await u(ve,{data:Ce.data,hora:Ce.hora}),G=await u(Be,{data:Oe.data,hora:Oe.hora});return z&&G&&Jt({title:"Horrios trocados",description:"Os horrios foram trocados com sucesso!"}),z&&G}catch(Oe){return console.error("Erro ao trocar horrios:",Oe),Jt({title:"Erro ao trocar horrios",description:"Ocorreu um erro ao realizar a troca. Tente novamente.",variant:"destructive"}),!1}},X=ve=>{M(ve),P(!0)},De=async(ve,Be,Oe)=>{const Ce=v.find(Ne=>Ne.id===ve);if(!Ce)return!1;const bt=Ce.valorPago+Be,Dt=Ce.valor-bt;let z,G=Ce.status;Dt<=0?(z="pago",G="concluido"):bt>0?z="parcial":z="em_aberto";const ee=await u(ve,{valorPago:bt,valorDevido:Math.max(0,Dt),statusPagamento:z,status:G,formaPagamento:Oe});return ee&&(Jt({title:"Pagamento registrado",description:z==="pago"?"Pagamento completo registrado com sucesso!":`Pagamento parcial de R$ ${Be.toFixed(2)} registrado.`}),P(!1),M(null),m==="detalhes"&&g("lista")),ee};if(m==="formulario")return a.jsx("div",{className:"space-y-8",children:a.jsx(h_e,{agendamento:y||void 0,clientes:c,servicos:l,onSubmit:H,onCancel:L,verificarConflito:p})});if(m==="detalhes"&&y){const ve=c.find(Oe=>Oe.id===y.clienteId),Be=l.find(Oe=>Oe.id===y.servicoId);return a.jsx("div",{className:"space-y-8",children:a.jsx(m_e,{agendamento:y,cliente:ve?{nome:ve.nomeCompleto,telefone:ve.telefone,email:""}:{nome:y.clienteNome,telefone:"",email:""},servico:Be||{nome:y.servicoNome},onEdit:()=>g("formulario"),onBack:L,onCancel:Y,onMarcarPagamento:()=>y&&X(y)})})}return a.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Agendamentos"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie todos os agendamentos do seu salo"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 lg:gap-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>n({statusPagamento:"em_aberto"}),className:"bg-red-50 border-red-200 text-red-700 hover:bg-red-100 text-xs sm:text-sm h-9 sm:h-10 justify-start sm:justify-center",children:[a.jsx(dt,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Contas a Receber"})]}),a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>n({origem:"cronograma"}),className:"bg-purple-50 border-purple-200 text-purple-700 hover:bg-purple-100 text-xs sm:text-sm h-9 sm:h-10 justify-start sm:justify-center",children:[a.jsx("span",{className:"mr-2 text-xs sm:text-sm",children:""}),a.jsx("span",{className:"truncate",children:"Cronogramas"})]})]}),a.jsxs(B,{onClick:ie,className:"bg-gradient-to-r from-primary to-lilac-primary shadow-lg hover:shadow-xl transition-all duration-300 text-sm h-10 sm:h-11",children:[a.jsx(wr,{className:"mr-2 h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"hidden sm:inline",children:"Novo Agendamento"}),a.jsx("span",{className:"sm:hidden",children:"Novo"})]})]})]}),a.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:bg-card/60 transition-colors",children:a.jsxs(q,{className:"flex items-center gap-3 sm:gap-4 p-4 sm:p-6",children:[a.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-lilac-light flex-shrink-0",children:a.jsx(Ee,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:U}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Hoje"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:bg-card/60 transition-colors",children:a.jsxs(q,{className:"flex items-center gap-3 sm:gap-4 p-4 sm:p-6",children:[a.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-gradient-to-br from-lilac-primary to-pink-accent flex-shrink-0",children:a.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:oe}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Amanh"})]})]})}),a.jsx(F,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:bg-card/60 transition-colors sm:col-span-2 lg:col-span-1",children:a.jsxs(q,{className:"flex items-center gap-3 sm:gap-4 p-4 sm:p-6",children:[a.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-gradient-to-br from-pink-accent to-lavender flex-shrink-0",children:a.jsx(Ee,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:J}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Esta Semana"})]})]})})]}),a.jsx(d_e,{agendamentos:e,filtros:r,onFiltrosChange:n,onEdit:me,onDelete:f,onCancel:h,onViewDetails:de,onReagendar:Q,onTrocarHorario:ce,onMarcarPagamento:X,clientes:c.map(ve=>({id:ve.id,nome:ve.nomeCompleto})),paginaAtual:s,totalPaginas:i,onPaginaChange:o}),a.jsx(vD,{open:w,onOpenChange:j,agendamento:N,onReagendar:Z,verificarConflito:p}),a.jsx(p_e,{open:S,onOpenChange:C,agendamento:k,agendamentosDisponiveis:v,onTrocarHorarios:fe}),a.jsx(g_e,{open:A,onOpenChange:P,agendamento:O,onConfirmar:De})]})}function x_e(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-background",children:a.jsx("div",{className:"container mx-auto p-4 lg:p-8 space-y-6 lg:space-y-8",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary/10 via-primary/5 to-accent/10 p-6 lg:p-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent dark:from-white/5"}),a.jsxs("div",{className:"relative flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-primary/10 backdrop-blur-sm shadow-lg",children:a.jsx(Ee,{className:"h-7 w-7 text-primary"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl lg:text-4xl font-bold tracking-tight bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Minha Agenda"}),a.jsx("p",{className:"text-muted-foreground font-medium",children:"Visualize e gerencie todos os seus horrios em um s lugar"})]})]})}),a.jsxs(Ia,{defaultValue:"calendario",className:"w-full",children:[a.jsxs(ua,{children:[a.jsxs(rt,{value:"calendario",className:"gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsx("span",{children:"Viso de Calendrio"})]}),a.jsxs(rt,{value:"lista",className:"gap-2",children:[a.jsx(KL,{className:"h-4 w-4"}),a.jsx("span",{children:"Lista & Gesto"})]})]}),a.jsx(nt,{value:"calendario",children:a.jsx(Zwe,{})}),a.jsx(nt,{value:"lista",children:a.jsx(v_e,{})})]})]})]})})})}const fl=[{id:0,nome:"Domingo",abrev:"DOM"},{id:1,nome:"Segunda-feira",abrev:"SEG"},{id:2,nome:"Tera-feira",abrev:"TER"},{id:3,nome:"Quarta-feira",abrev:"QUA"},{id:4,nome:"Quinta-feira",abrev:"QUI"},{id:5,nome:"Sexta-feira",abrev:"SEX"},{id:6,nome:"Sbado",abrev:"SAB"}];function y_e(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,o]=x.useState(!1);x.useEffect(()=>{const u=fl.map(f=>({dia_semana:f.id,ativo:f.id>=1&&f.id<=5,horario_abertura:"08:00",horario_fechamento:"18:00",intervalo_inicio:"12:00",intervalo_fim:"13:00"}));t(u),i()},[]);const i=async()=>{try{const{data:{user:u}}=await W.auth.getUser();if(!u)return;const{data:f,error:h}=await W.from("configuracoes_horarios").select("*").eq("user_id",u.id);if(h)throw h;if(f&&f.length>0){const p=fl.map(v=>{const m=f.find(g=>g.dia_semana===v.id);return m?{id:m.id,dia_semana:v.id,ativo:m.ativo,horario_abertura:m.horario_abertura,horario_fechamento:m.horario_fechamento,intervalo_inicio:m.intervalo_inicio||"12:00",intervalo_fim:m.intervalo_fim||"13:00"}:{dia_semana:v.id,ativo:v.id>=1&&v.id<=5,horario_abertura:"08:00",horario_fechamento:"18:00",intervalo_inicio:"12:00",intervalo_fim:"13:00"}});t(p)}}catch(u){console.error("Erro ao carregar configuraes:",u),V.error("Erro ao carregar configuraes de horrio")}finally{n(!1)}},c=async u=>{const f=e.find(h=>h.dia_semana===u);if(f){o(!0);try{const{data:{user:h}}=await W.auth.getUser();if(!h)throw new Error("Usurio no autenticado");const p={user_id:h.id,dia_semana:f.dia_semana,ativo:f.ativo,horario_abertura:f.horario_abertura,horario_fechamento:f.horario_fechamento,intervalo_inicio:f.intervalo_inicio,intervalo_fim:f.intervalo_fim};if(f.id){const{error:v}=await W.from("configuracoes_horarios").update(p).eq("id",f.id);if(v)throw v}else{const{data:v,error:m}=await W.from("configuracoes_horarios").insert(p).select().single();if(m)throw m;t(g=>g.map(y=>y.dia_semana===u?{...y,id:v.id}:y))}V.success(`Horrio de ${fl[u].nome} salvo com sucesso!`)}catch(h){console.error("Erro ao salvar configurao:",h),V.error("Erro ao salvar configurao")}finally{o(!1)}}},l=(u,f,h)=>{t(p=>p.map(v=>v.dia_semana===u?{...v,[f]:h}:v))},d=e.filter(u=>u.ativo);return r?a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando configuraes..."})})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(F,{children:a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-5 w-5"}),"Configurao de Horrios de Trabalho"]}),a.jsx(ke,{children:"Configure os dias e horrios em que voc atende clientes"})]})}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-5 w-5"}),"Resumo dos Dias de Atendimento"]}),a.jsx(ke,{children:"Viso geral dos dias em que voc atender clientes"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:fl.map(u=>{const f=e.find(h=>h.dia_semana===u.id);return a.jsxs(pe,{variant:f?.ativo?"default":"secondary",children:[u.abrev," ",f?.ativo?`(${f.horario_abertura}-${f.horario_fechamento})`:"(Fechado)"]},u.id)})}),d.length===0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg mb-4",children:[a.jsx(Ld,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Nenhum dia de atendimento configurado. Configure pelo menos um dia para receber agendamentos."})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d.length>0?`${d.length} ${d.length===1?"dia configurado":"dias configurados"} para atendimento`:"Configure os dias e horrios de atendimento abaixo"})]})]}),fl.map(u=>{const f=e.find(h=>h.dia_semana===u.id);return f?a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-5 w-5"}),u.nome]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{checked:f.ativo,onCheckedChange:h=>l(u.id,"ativo",h)}),a.jsx(pe,{variant:f.ativo?"default":"secondary",children:f.ativo?"Ativo":"Inativo"})]})]}),a.jsxs(ke,{children:["Configure os horrios de funcionamento para ",u.nome.toLowerCase()]})]}),a.jsxs(q,{className:"space-y-4",children:[f.ativo&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium mb-2 block",children:"Horrio de Funcionamento"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{htmlFor:`abertura-${u.id}`,className:"text-xs",children:"Abertura"}),a.jsx(ue,{id:`abertura-${u.id}`,type:"time",value:f.horario_abertura,onChange:h=>l(u.id,"horario_abertura",h.target.value)})]}),a.jsxs("div",{children:[a.jsx(K,{htmlFor:`fechamento-${u.id}`,className:"text-xs",children:"Fechamento"}),a.jsx(ue,{id:`fechamento-${u.id}`,type:"time",value:f.horario_fechamento,onChange:h=>l(u.id,"horario_fechamento",h.target.value)})]})]})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium mb-2 block",children:"Intervalo de Almoo (Opcional)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{htmlFor:`intervalo-inicio-${u.id}`,className:"text-xs",children:"Incio do Almoo"}),a.jsx(ue,{id:`intervalo-inicio-${u.id}`,type:"time",value:f.intervalo_inicio||"",onChange:h=>l(u.id,"intervalo_inicio",h.target.value)})]}),a.jsxs("div",{children:[a.jsx(K,{htmlFor:`intervalo-fim-${u.id}`,className:"text-xs",children:"Fim do Almoo"}),a.jsx(ue,{id:`intervalo-fim-${u.id}`,type:"time",value:f.intervalo_fim||"",onChange:h=>l(u.id,"intervalo_fim",h.target.value)})]})]})]}),a.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Funcionamento:"})," ",f.horario_abertura," s ",f.horario_fechamento,f.intervalo_inicio&&f.intervalo_fim&&a.jsxs("span",{children:[" (Almoo: ",f.intervalo_inicio," s ",f.intervalo_fim,")"]})]})})]}),!f.ativo&&a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(st,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Este dia est desativado para atendimento"})]}),a.jsxs(B,{className:"w-full",variant:"outline",onClick:()=>c(u.id),disabled:s,children:[a.jsx(Vo,{className:"h-4 w-4 mr-2"}),s?"Salvando...":`Salvar ${u.nome}`]})]})]},u.id):null}),a.jsx(F,{className:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/20",children:a.jsxs(q,{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-green-900 dark:text-green-100 mb-2",children:" Configurao Funcional"}),a.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[a.jsx("li",{children:" Configure os dias e horrios de atendimento"}),a.jsx("li",{children:" Os horrios so salvos automaticamente no banco de dados"}),a.jsx("li",{children:" Os agendamentos respeitaro essas configuraes"}),a.jsx("li",{children:" Use o switch para ativar/desativar dias especficos"})]})]})})]})}const b_e=[{value:"json",label:"JSON",icon:BL,description:"Formato legvel e universal"},{value:"csv",label:"CSV",icon:Aa,description:"Para Excel e planilhas"},{value:"sql",label:"SQL",icon:Nf,description:"Script de restaurao"}];function j_e(){const{configuracaoBackup:e,loading:t,salvarBackup:r}=Sc(),{user:n}=Rt(),[s,o]=x.useState(!1),[i,c]=x.useState(!1),[l,d]=x.useState("json"),[u,f]=x.useState({incluir_clientes:!0,incluir_agendamentos:!0,incluir_servicos:!0,incluir_financeiro:!0,incluir_cronogramas:!0,backup_automatico:!1,frequencia_backup:"semanal",dia_backup:1,hora_backup:"02:00",email_backup:""});x.useEffect(()=>{e&&f({incluir_clientes:e.incluir_clientes,incluir_agendamentos:e.incluir_agendamentos,incluir_servicos:e.incluir_servicos,incluir_financeiro:e.incluir_financeiro,incluir_cronogramas:e.incluir_cronogramas,backup_automatico:e.backup_automatico,frequencia_backup:e.frequencia_backup,dia_backup:e.dia_backup||1,hora_backup:e.hora_backup,email_backup:e.email_backup||""})},[e]);const h=async()=>{if(!n?.id)throw new Error("Usurio no autenticado");const y={exportadoEm:new Date().toISOString(),usuario:n.email,userId:n.id,versao:"1.0",dados:{},estatisticas:{}};if(u.incluir_clientes){const{data:w}=await W.from("clientes").select("*").eq("user_id",n.id);y.dados.clientes=w||[],y.estatisticas.totalClientes=w?.length||0}if(u.incluir_servicos){const{data:w}=await W.from("servicos").select("*").eq("user_id",n.id);y.dados.servicos=w||[],y.estatisticas.totalServicos=w?.length||0}if(u.incluir_agendamentos){const{data:w}=await W.from("agendamentos").select("*").eq("user_id",n.id);y.dados.agendamentos=w||[],y.estatisticas.totalAgendamentos=w?.length||0}if(u.incluir_cronogramas){const{data:w}=await W.from("cronogramas_novos").select("*").eq("user_id",n.id);y.dados.cronogramas=w||[];const{data:j}=await W.from("retornos_novos").select("*").eq("user_id",n.id);y.dados.retornos=j||[]}if(u.incluir_financeiro){const{data:w}=await W.from("lancamentos").select("*").eq("user_id",n.id);y.dados.lancamentos=w||[];const{data:j}=await W.from("contas_fixas").select("*").eq("user_id",n.id);y.dados.contas_fixas=j||[]}const{data:b}=await W.from("configuracoes_horarios").select("*").eq("user_id",n.id);return y.dados.configuracoes_horarios=b||[],y},p=y=>{let b="";return Object.entries(y.dados).forEach(([w,j])=>{if(!Array.isArray(j)||j.length===0)return;b+=`

=== ${w.toUpperCase()} ===
`;const N=Object.keys(j[0]);b+=N.join(",")+`
`,j.forEach(_=>{const S=N.map(C=>{const k=_[C];return k==null?"":typeof k=="string"&&k.includes(",")?`"${k.replace(/"/g,'""')}"`:typeof k=="object"?JSON.stringify(k):k});b+=S.join(",")+`
`})}),b},v=y=>{let b=`-- Backup exportado em: ${new Date().toISOString()}
`;return b+=`-- Usurio: ${y.usuario}

`,b+=`-- IMPORTANTE: Este backup foi criado para restaurao de dados
`,b+=`-- Execute este script em um banco de dados limpo ou revise antes de executar

`,[{nome:"clientes",campos:["id","user_id","nome","telefone","email","endereco","data_nascimento","observacoes","historico_servicos"]},{nome:"servicos",campos:["id","user_id","nome","descricao","valor","duracao","observacoes"]},{nome:"agendamentos",campos:["id","user_id","cliente_id","servico_id","data","hora","duracao","valor","status","observacoes"]},{nome:"lancamentos",campos:["id","user_id","tipo","descricao","valor","data","categoria"]},{nome:"contas_fixas",campos:["id","user_id","nome","valor","categoria","frequencia","data_vencimento"]},{nome:"cronogramas_novos",campos:["id_cronograma","user_id","cliente_id","servico_id","tipo_servico","recorrencia","data_inicio"]}].forEach(({nome:j,campos:N})=>{const _=y.dados[j];!_||!Array.isArray(_)||_.length===0||(b+=`
-- Tabela: ${j}
`,b+=`-- Total de registros: ${_.length}

`,_.forEach(S=>{const C=N.map(k=>{const $=S[k];return $==null?"NULL":typeof $=="string"?`'${$.replace(/'/g,"''")}'`:typeof $=="boolean"?$?"TRUE":"FALSE":typeof $=="object"?`'${JSON.stringify($).replace(/'/g,"''")}'`:$});b+=`INSERT INTO ${j} (${N.join(", ")}) VALUES (${C.join(", ")});
`}))}),b},m=async()=>{if(!n?.id){V.error("Usurio no autenticado");return}o(!0);try{console.log(" Iniciando backup dos dados...");const y=await h();console.log(" Dados coletados:",y.estatisticas);let b,w,j;switch(l){case"csv":b=p(y),w=`backup_${new Date().toISOString().split("T")[0]}.csv`,j="text/csv";break;case"sql":b=v(y),w=`backup_${new Date().toISOString().split("T")[0]}.sql`,j="text/plain";break;case"json":default:b=JSON.stringify(y,null,2),w=`backup_${new Date().toISOString().split("T")[0]}.json`,j="application/json"}const N=new Blob([b],{type:j}),_=URL.createObjectURL(N),S=document.createElement("a");S.href=_,S.download=w,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(_),await r({...u,backup_automatico:e?.backup_automatico||!1,frequencia_backup:e?.frequencia_backup||"semanal",dia_backup:e?.dia_backup||1,hora_backup:e?.hora_backup||"02:00",email_backup:e?.email_backup||"",ultimo_backup:new Date().toISOString()});const C=Object.values(y.estatisticas).reduce((k,$)=>k+(typeof $=="number"?$:0),0);V.success(`Backup ${l.toUpperCase()} criado com sucesso! ${C} registros exportados.`)}catch(y){console.error(" Erro ao exportar dados:",y),V.error("Erro ao criar backup. Verifique o console.")}finally{o(!1)}},g=async y=>{const b=y.target.files?.[0];if(!(!b||!n?.id)){c(!0);try{console.log(" Iniciando importao de:",b.name);const w=await b.text();let j;if(b.name.endsWith(".json"))j=JSON.parse(w);else if(b.name.endsWith(".csv")){V.error("Importao de CSV em desenvolvimento"),c(!1);return}else if(b.name.endsWith(".sql")){V.error("Importao de SQL em desenvolvimento"),c(!1);return}else{V.error("Formato de arquivo no suportado"),c(!1);return}if(!j.dados||!j.userId){V.error("Arquivo de backup invlido"),c(!1);return}const N=Object.values(j.dados).reduce((C,k)=>C+(Array.isArray(k)?k.length:0),0);if(!confirm(`Deseja importar ${N} registros? Isso ir adicionar dados ao sistema.`)){c(!1);return}let _=0,S=0;if(j.dados.clientes?.length>0)for(const C of j.dados.clientes)try{const{error:k}=await W.from("clientes").upsert({...C,user_id:n.id},{onConflict:"id"});if(k)throw k;_++}catch(k){console.error("Erro ao importar cliente:",k),S++}if(j.dados.servicos?.length>0)for(const C of j.dados.servicos)try{const{error:k}=await W.from("servicos").upsert({...C,user_id:n.id},{onConflict:"id"});if(k)throw k;_++}catch(k){console.error("Erro ao importar servio:",k),S++}if(j.dados.agendamentos?.length>0)for(const C of j.dados.agendamentos)try{const{error:k}=await W.from("agendamentos").upsert({...C,user_id:n.id},{onConflict:"id"});if(k)throw k;_++}catch(k){console.error("Erro ao importar agendamento:",k),S++}V.success(`Importao concluda! ${_} registros importados${S>0?`, ${S} erros`:""}.`)}catch(w){console.error(" Erro na importao:",w),V.error("Erro ao importar dados. Verifique o arquivo.")}finally{c(!1),y.target.value=""}}};return t?a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsx("div",{className:"text-center",children:"Carregando configuraes..."})})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs(F,{children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(_n,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),"Exportar Dados"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Faa backup de todos os seus dados em diferentes formatos"})]}),a.jsxs(q,{className:"space-y-4 p-responsive",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-base font-medium",children:"Formato de Exportao:"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:b_e.map(y=>{const b=y.icon;return a.jsxs("button",{onClick:()=>d(y.value),className:`p-3 sm:p-4 border-2 rounded-lg text-left transition-all touch-manipulation ${l===y.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[a.jsx(b,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),a.jsx("span",{className:"font-semibold text-responsive-sm",children:y.label})]}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:y.description})]},y.value)})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-base font-medium",children:"Dados para incluir:"}),a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:[{key:"incluir_clientes",label:"Clientes",icon:""},{key:"incluir_servicos",label:"Servios",icon:""},{key:"incluir_agendamentos",label:"Agendamentos",icon:""},{key:"incluir_cronogramas",label:"Cronogramas",icon:""},{key:"incluir_financeiro",label:"Financeiro",icon:""}].map(y=>a.jsxs("div",{className:"flex items-center space-x-2 p-2 sm:p-3 border rounded-lg touch-manipulation",children:[a.jsx(Mt,{id:y.key,checked:u[y.key],onCheckedChange:b=>f(w=>({...w,[y.key]:b}))}),a.jsxs(K,{htmlFor:y.key,className:"text-responsive-xs cursor-pointer flex-1 select-none",children:[y.icon," ",y.label]})]},y.key))})]}),a.jsxs(B,{onClick:()=>r(u),variant:"outline",className:"w-full btn-touch",children:[a.jsx(Vo,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"text-responsive-sm",children:"Salvar Preferncias de Backup"})]}),a.jsx(B,{onClick:m,disabled:s,className:"w-full btn-touch",size:"lg",children:s?a.jsxs(a.Fragment,{children:[a.jsx(_n,{className:"h-4 w-4 mr-2 animate-pulse"}),a.jsx("span",{className:"text-responsive-sm",children:"Preparando backup..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{className:"text-responsive-sm",children:["Exportar em ",l.toUpperCase()]})]})})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(wv,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),"Importar Dados"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Restaure seus dados a partir de um arquivo de backup"})]}),a.jsxs(q,{className:"space-y-4 p-responsive",children:[a.jsxs(Zr,{children:[a.jsx(Nr,{className:"h-4 w-4 flex-shrink-0"}),a.jsx(Xr,{className:"text-responsive-xs",children:"A importao ir adicionar os dados do backup ao sistema. Dados duplicados sero atualizados. Atualmente suportamos apenas importao de arquivos JSON."})]}),a.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 sm:p-8 text-center touch-manipulation",children:[a.jsx("input",{type:"file",id:"file-upload",accept:".json,.csv,.sql",onChange:g,disabled:i,className:"hidden"}),a.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-3",children:i?a.jsxs(a.Fragment,{children:[a.jsx(wv,{className:"h-10 w-10 sm:h-12 sm:w-12 text-primary animate-pulse"}),a.jsx("p",{className:"font-medium text-responsive-base",children:"Importando dados..."}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Aguarde, isso pode levar alguns instantes"})]}):a.jsxs(a.Fragment,{children:[a.jsx(VL,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground"}),a.jsx("p",{className:"font-medium text-responsive-base",children:"Clique para selecionar arquivo"}),a.jsx("p",{className:"text-responsive-sm text-muted-foreground",children:"Suporta: JSON, CSV, SQL (mx. 10MB)"})]})})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"p-responsive",children:[a.jsxs(se,{className:"flex items-center gap-2 text-responsive-lg",children:[a.jsx(Nf,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),"Backup Automtico Programado"]}),a.jsx(ke,{className:"text-responsive-sm",children:"Configure backups automticos peridicos dos seus dados"})]}),a.jsxs(q,{className:"space-y-4 p-responsive",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-3 sm:p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(K,{className:"text-responsive-base font-medium",children:"Ativar Backup Automtico"}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground mt-1",children:"Quando ativado, voc ser notificado para fazer backup"})]}),a.jsx(Mt,{checked:u.backup_automatico||!1,onCheckedChange:y=>{const b={...u,backup_automatico:y};f(b),r(b)},className:"flex-shrink-0"})]}),u.backup_automatico&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-sm",children:"Frequncia do Backup:"}),a.jsxs(Ue,{value:e?.frequencia_backup||"semanal",onValueChange:y=>{const b={...u,frequencia_backup:y};f(b),r(b)},children:[a.jsx(Fe,{className:"select-responsive",children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"diario",children:"Diariamente"}),a.jsx(ne,{value:"semanal",children:"Semanalmente"}),a.jsx(ne,{value:"mensal",children:"Mensalmente"})]})]})]}),e?.frequencia_backup==="semanal"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-sm",children:"Dia da Semana:"}),a.jsxs(Ue,{value:e?.dia_backup?.toString()||"0",onValueChange:y=>{const b={...u,dia_backup:parseInt(y)};f(b),r(b)},children:[a.jsx(Fe,{className:"select-responsive",children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"0",children:"Domingo"}),a.jsx(ne,{value:"1",children:"Segunda-feira"}),a.jsx(ne,{value:"2",children:"Tera-feira"}),a.jsx(ne,{value:"3",children:"Quarta-feira"}),a.jsx(ne,{value:"4",children:"Quinta-feira"}),a.jsx(ne,{value:"5",children:"Sexta-feira"}),a.jsx(ne,{value:"6",children:"Sbado"})]})]})]}),e?.frequencia_backup==="mensal"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-sm",children:"Dia do Ms:"}),a.jsx(ue,{type:"number",min:"1",max:"28",value:e?.dia_backup||1,onChange:y=>{const b={...u,dia_backup:parseInt(y.target.value)};f(b)},onBlur:()=>r(u),className:"input-responsive"}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"Escolha entre 1 e 28 (evita problemas com meses diferentes)"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-sm",children:"Horrio do Backup:"}),a.jsx(ue,{type:"time",value:e?.hora_backup||"02:00",onChange:y=>{const b={...u,hora_backup:y.target.value};f(b)},onBlur:()=>r(u),className:"input-responsive"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-responsive-sm",children:"Email para Notificao (opcional):"}),a.jsx(ue,{type:"email",placeholder:"seu@email.com",value:u.email_backup||"",onChange:y=>{const b={...u,email_backup:y.target.value};f(b),r(b)},className:"input-responsive"}),a.jsx("p",{className:"text-responsive-xs text-muted-foreground",children:"Receba lembretes por email quando for hora de fazer backup"})]}),e?.ultimo_backup&&a.jsxs(Zr,{children:[a.jsx(yv,{className:"h-4 w-4 flex-shrink-0"}),a.jsxs(Xr,{className:"text-responsive-xs",children:["ltimo backup realizado em: ",new Date(e.ultimo_backup).toLocaleString("pt-BR")]})]})]})]})]}),a.jsxs(F,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/20",children:[a.jsx(ae,{className:"p-responsive",children:a.jsxs(se,{className:"flex items-center gap-2 text-blue-900 dark:text-blue-100 text-responsive-lg",children:[a.jsx(yv,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),"Informaes Importantes"]})}),a.jsxs(q,{className:"space-y-2 p-responsive",children:[a.jsxs("p",{className:"text-responsive-xs text-blue-700 dark:text-blue-300",children:[" ",a.jsx("strong",{children:"Segurana:"})," Os backups so gerados localmente no seu dispositivo"]}),a.jsxs("p",{className:"text-responsive-xs text-blue-700 dark:text-blue-300",children:[" ",a.jsx("strong",{children:"Privacidade:"})," Nenhum dado  enviado para servidores externos"]}),a.jsxs("p",{className:"text-responsive-xs text-blue-700 dark:text-blue-300",children:[" ",a.jsx("strong",{children:"Formatos:"})," JSON  recomendado para backup completo, CSV para anlise em planilhas"]}),a.jsxs("p",{className:"text-responsive-xs text-blue-700 dark:text-blue-300",children:[" ",a.jsx("strong",{children:"Frequncia:"})," Recomendamos fazer backups semanalmente"]}),a.jsxs("p",{className:"text-responsive-xs text-blue-700 dark:text-blue-300",children:[" ",a.jsx("strong",{children:"Ateno:"})," Guarde seus backups em local seguro"]})]})]})]})}const ef={ativo:!0,nome_salao:"Meu Salo",descricao:"Bem-vindo ao nosso salo! Agende seu horrio de forma rpida e fcil.",telefone:"",email:"",endereco:"",instagram:"",facebook:"",whatsapp:"",logo_url:"",taxa_sinal_percentual:30,tempo_minimo_antecedencia:60,tempo_maximo_antecedencia:4320,mensagem_boas_vindas:"Ol! Estamos felizes em atend-lo(a). Preencha os dados abaixo para agendar seu horrio.",termos_condicoes:"Ao agendar, voc concorda em chegar no horrio marcado. Em caso de atraso superior a 15 minutos, o agendamento poder ser cancelado.",mensagem_confirmacao:"Agendamento confirmado! Em breve voc receber uma confirmao no WhatsApp."};function w_e(){const[e,t]=x.useState(ef),[r,n]=x.useState(!0),[s,o]=x.useState(!1);x.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:{user:d}}=await W.auth.getUser();if(!d){n(!1);return}const{data:u,error:f}=await W.from("configuracoes_agendamento_online").select("*").eq("user_id",d.id).maybeSingle();f&&f.code!=="PGRST116"&&console.error("Erro ao carregar config:",f),u&&t(u)}catch(d){console.error("Erro ao carregar configurao:",d)}finally{n(!1)}};return{config:e,loading:r,saving:s,setConfig:t,salvarConfig:async d=>{try{o(!0);const{data:{user:u}}=await W.auth.getUser();if(!u)throw new Error("Usurio no autenticado");const f={...d,user_id:u.id,updated_at:new Date().toISOString()},{error:h}=await W.from("configuracoes_agendamento_online").upsert(f,{onConflict:"user_id"});if(h)throw h;return t(d),V.success("Configuraes salvas com sucesso!"),!0}catch(u){return console.error("Erro ao salvar configurao:",u),V.error("Erro ao salvar configuraes"),!1}finally{o(!1)}},carregarConfig:i,carregarConfigPublica:async()=>{try{const{data:d,error:u}=await W.from("configuracoes_agendamento_online").select("*").eq("ativo",!0).maybeSingle();return u?(console.error("Erro ao carregar config pblica:",u),ef):d||ef}catch(d){return console.error("Erro ao carregar configurao pblica:",d),ef}}}}function N_e(){const{config:e,loading:t,saving:r,setConfig:n,salvarConfig:s}=w_e(),[o,i]=x.useState(!1),[c,l]=x.useState(null),d=(p,v)=>{n(m=>({...m,[p]:v}))},u=async()=>{await s(e)},f=async p=>{try{const v=p.target.files?.[0];if(!v)return;if(!v.type.startsWith("image/")){V.error("Por favor, selecione apenas arquivos de imagem");return}if(v.size>2*1024*1024){V.error("A imagem deve ter no mximo 2MB");return}i(!0);const{data:{user:m}}=await W.auth.getUser();if(!m)throw new Error("Usurio no autenticado");if(e.logo_url&&e.logo_url.includes("salon-logos")){const N=e.logo_url.split("/salon-logos/")[1];N&&await W.storage.from("salon-logos").remove([N])}const g=v.name.split(".").pop(),y=`${m.id}/logo-${Date.now()}.${g}`,{error:b,data:w}=await W.storage.from("salon-logos").upload(y,v,{cacheControl:"3600",upsert:!0});if(b)throw b;const{data:{publicUrl:j}}=W.storage.from("salon-logos").getPublicUrl(y);d("logo_url",j),l(j),V.success("Logo atualizada com sucesso!")}catch(v){console.error("Erro ao fazer upload:",v),V.error("Erro ao fazer upload da imagem")}finally{i(!1)}},h=async()=>{try{if(e.logo_url&&e.logo_url.includes("salon-logos")){const p=e.logo_url.split("/salon-logos/")[1];p&&await W.storage.from("salon-logos").remove([p])}d("logo_url",""),l(null),V.success("Logo removida")}catch(p){console.error("Erro ao remover logo:",p),V.error("Erro ao remover logo")}};return t?a.jsx(F,{children:a.jsx(q,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(ow,{className:"h-5 w-5"}),"Status do Agendamento Online"]}),a.jsx(ke,{children:"Ative ou desative o formulrio de agendamento online pblico"})]}),a.jsx(q,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(K,{htmlFor:"ativo",children:"Agendamento Online Ativo"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Quando ativo, clientes podem agendar atravs do link pblico"})]}),a.jsx(Mt,{id:"ativo",checked:e.ativo,onCheckedChange:p=>d("ativo",p)})]})})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(ow,{className:"h-5 w-5"}),"Informaes do Salo"]}),a.jsx(ke,{children:"Dados que aparecero no formulrio de agendamento online"})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome_salao",children:"Nome do Salo *"}),a.jsx(ue,{id:"nome_salao",value:e.nome_salao,onChange:p=>d("nome_salao",p.target.value),placeholder:"Ex: Salo Beleza Pura"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"descricao",children:"Descrio"}),a.jsx(fr,{id:"descricao",value:e.descricao,onChange:p=>d("descricao",p.target.value),placeholder:"Breve descrio sobre seu salo",rows:3})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(K,{className:"flex items-center gap-2",children:[a.jsx(qL,{className:"h-4 w-4"}),"Logo/Foto do Salo"]}),(e.logo_url||c)&&a.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border-2 border-border",children:[a.jsx("img",{src:c||e.logo_url,alt:"Logo do salo",className:"w-full h-full object-cover"}),a.jsx("button",{type:"button",onClick:h,className:"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90 transition-colors",children:a.jsx(qt,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{type:"button",variant:"outline",disabled:o,onClick:()=>document.getElementById("logo-upload")?.click(),className:"flex items-center gap-2",children:[a.jsx(wv,{className:"h-4 w-4"}),o?"Enviando...":"Fazer Upload"]}),a.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:f,className:"hidden"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos aceitos: JPG, PNG, WEBP (mx. 2MB)"}),a.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[a.jsx(K,{htmlFor:"logo_url",className:"text-xs text-muted-foreground",children:"Ou cole uma URL externa:"}),a.jsx(ue,{id:"logo_url",value:e.logo_url,onChange:p=>d("logo_url",p.target.value),placeholder:"https://exemplo.com/logo.png",className:"text-sm"})]})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(rs,{className:"h-5 w-5"}),"Informaes de Contato"]}),a.jsx(ke,{children:"Dados de contato exibidos no rodap do formulrio"})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"telefone",className:"flex items-center gap-2",children:[a.jsx(rs,{className:"h-4 w-4"}),"Telefone"]}),a.jsx(ue,{id:"telefone",value:e.telefone,onChange:p=>d("telefone",p.target.value),placeholder:"(00) 00000-0000"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"email",className:"flex items-center gap-2",children:[a.jsx(um,{className:"h-4 w-4"}),"E-mail"]}),a.jsx(ue,{id:"email",type:"email",value:e.email,onChange:p=>d("email",p.target.value),placeholder:"contato@seusalao.com"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"endereco",className:"flex items-center gap-2",children:[a.jsx(ZL,{className:"h-4 w-4"}),"Endereo"]}),a.jsx(ue,{id:"endereco",value:e.endereco,onChange:p=>d("endereco",p.target.value),placeholder:"Rua Exemplo, 123 - Centro"})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsx(se,{children:"Redes Sociais"}),a.jsx(ke,{children:"Links para suas redes sociais (aparecero no rodap)"})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"instagram",className:"flex items-center gap-2",children:[a.jsx(HL,{className:"h-4 w-4"}),"Instagram"]}),a.jsx(ue,{id:"instagram",value:e.instagram,onChange:p=>d("instagram",p.target.value),placeholder:"@seusalao"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"facebook",className:"flex items-center gap-2",children:[a.jsx(zL,{className:"h-4 w-4"}),"Facebook"]}),a.jsx(ue,{id:"facebook",value:e.facebook,onChange:p=>d("facebook",p.target.value),placeholder:"facebook.com/seusalao"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[a.jsx(Es,{className:"h-4 w-4"}),"WhatsApp"]}),a.jsx(ue,{id:"whatsapp",value:e.whatsapp,onChange:p=>d("whatsapp",p.target.value),placeholder:"5500000000000"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Apenas nmeros (com cdigo do pas e DDD)"})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-5 w-5"}),"Regras de Agendamento"]}),a.jsx(ke,{children:"Configure as regras para agendamentos online"})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{htmlFor:"taxa_sinal",className:"flex items-center gap-2",children:[a.jsx(dt,{className:"h-4 w-4"}),"Taxa de Sinal (%)"]}),a.jsx(ue,{id:"taxa_sinal",type:"number",min:"0",max:"100",value:e.taxa_sinal_percentual,onChange:p=>d("taxa_sinal_percentual",Number(p.target.value))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentual cobrado como adiantamento (0 para no cobrar)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"tempo_min",children:"Antecedncia Mnima (minutos)"}),a.jsx(ue,{id:"tempo_min",type:"number",min:"0",value:e.tempo_minimo_antecedencia,onChange:p=>d("tempo_minimo_antecedencia",Number(p.target.value))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tempo mnimo para agendar antes do horrio (ex: 60 minutos)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"tempo_max",children:"Antecedncia Mxima (dias)"}),a.jsx(ue,{id:"tempo_max",type:"number",min:"1",value:Math.floor(e.tempo_maximo_antecedencia/1440),onChange:p=>d("tempo_maximo_antecedencia",Number(p.target.value)*1440)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantos dias no futuro o cliente pode agendar (ex: 30 dias)"})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"h-5 w-5"}),"Mensagens Personalizadas"]}),a.jsx(ke,{children:"Personalize as mensagens exibidas no formulrio"})]}),a.jsxs(q,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"msg_boas_vindas",children:"Mensagem de Boas-Vindas"}),a.jsx(fr,{id:"msg_boas_vindas",value:e.mensagem_boas_vindas,onChange:p=>d("mensagem_boas_vindas",p.target.value),rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"termos",children:"Termos e Condies"}),a.jsx(fr,{id:"termos",value:e.termos_condicoes,onChange:p=>d("termos_condicoes",p.target.value),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"msg_confirmacao",children:"Mensagem de Confirmao"}),a.jsx(fr,{id:"msg_confirmacao",value:e.mensagem_confirmacao,onChange:p=>d("mensagem_confirmacao",p.target.value),rows:2})]})]})]}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx(B,{onClick:u,disabled:r,size:"lg",children:r?"Salvando...":"Salvar Configuraes"})}),e.ativo&&a.jsx(F,{className:"border-primary/50 bg-primary/5",children:a.jsxs(q,{className:"p-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Link de Agendamento Online"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Compartilhe este link com seus clientes para que eles possam agendar online:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ue,{readOnly:!0,value:`${window.location.origin}/agendamento-online`,className:"bg-background"}),a.jsx(B,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/agendamento-online`),V.success("Link copiado!")},children:"Copiar"})]})]})})]})}function __e(){const[e,t]=x.useState("horarios");return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(Co,{className:"h-8 w-8"}),a.jsx("span",{children:"Configuraes"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure os horrios de atendimento, agendamento online, notificaes e backup do sistema"})]}),a.jsxs(Ia,{value:e,onValueChange:t,className:"w-full",children:[a.jsxs(ua,{className:"grid w-full grid-cols-4",children:[a.jsxs(rt,{value:"horarios",className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),"Horrios"]}),a.jsxs(rt,{value:"agendamento-online",className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4"}),"Agend. Online"]}),a.jsxs(rt,{value:"notificacoes",className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4"}),"Notificaes"]}),a.jsxs(rt,{value:"backup",className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4"}),"Backup"]})]}),a.jsxs(nt,{value:"horarios",className:"space-y-6",children:[a.jsx(F,{children:a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"h-5 w-5"}),a.jsx("span",{children:"Horrios e Dias de Trabalho"})]}),a.jsx(ke,{children:"Configure os dias da semana e horrios em que voc atender clientes. Estas configuraes sero respeitadas nos formulrios de agendamento."})]})}),a.jsx(y_e,{}),a.jsx(F,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/20",children:a.jsxs(q,{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:" Integrao com Agendamentos"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Os horrios configurados aqui sero automaticamente aplicados aos formulrios de agendamento interno e externo, bloqueando horrios indisponveis."})]})})]}),a.jsxs(nt,{value:"agendamento-online",className:"space-y-6",children:[a.jsx(F,{children:a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-5 w-5"}),a.jsx("span",{children:"Configuraes do Agendamento Online"})]}),a.jsx(ke,{children:"Configure o formulrio pblico de agendamento, informaes do salo, redes sociais e regras de agendamento."})]})}),a.jsx(N_e,{})]}),a.jsx(nt,{value:"notificacoes",className:"space-y-6",children:a.jsx(KT,{})}),a.jsx(nt,{value:"backup",className:"space-y-6",children:a.jsx(j_e,{})})]})]})}const S_e=E.lazy(()=>fc(()=>import("./AgendamentoOnlineForm-iAKl7_9-.js"),__vite__mapDeps([0,1])).then(e=>({default:e.AgendamentoOnlineForm})));function Qg(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsx(x.Suspense,{fallback:a.jsxs(F,{children:[a.jsxs(ae,{className:"text-center",children:[a.jsx(se,{className:"text-3xl mb-2",children:"Carregando..."}),a.jsx(ke,{children:"Preparando o formulrio de agendamento"})]}),a.jsx(q,{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}),children:a.jsx(S_e,{})})})})}function C_e(){const{agendamentosFiltrados:e,clientes:t}=la(),{todosServicos:r}=Cc(),{lancamentos:n}=Pc(),{cronogramas:s}=$p(),{retornos:o}=ou(),{user:i}=Rt(),[c,l]=x.useState(!1),[d,u]=x.useState([]),[f,h]=x.useState(null),[p,v]=x.useState(!1),[m]=x.useState(!0);x.useEffect(()=>{(async()=>{if(!(!i||!m))try{v(!0),console.log("Calling backend audit function...");const{data:{session:N}}=await W.auth.getSession();if(!N){console.error("No active session found"),V.error("Sesso expirada. Faa login novamente.");return}console.log("Session valid, calling audit function");const{data:_,error:S}=await W.functions.invoke("auditoria-sistema",{method:"POST"});if(S){console.error("Backend audit error:",S),V.error("Erro ao executar auditoria no servidor");return}console.log("Backend audit completed:",_),h(_)}catch(N){console.error("Error invoking backend audit:",N),V.error("Erro ao conectar com servidor de auditoria")}finally{v(!1)}})()},[i,m]);const g=x.useMemo(()=>{const j=[];let N=1;const _=L=>{j.push({...L,id:(N++).toString()})};t.forEach(L=>{(!L.nomeCompleto||L.nomeCompleto.trim()==="")&&_({categoria:"critico",tipo:"dados_incompletos",descricao:"Cliente sem nome",entidade:"cliente",entidadeId:L.id,campo:"nome",valorAtual:L.nomeCompleto,valorEsperado:"Nome vlido",sugestao:"Adicionar nome ao cliente"}),(!L.telefone||L.telefone.trim()==="")&&_({categoria:"critico",tipo:"dados_incompletos",descricao:"Cliente sem telefone",entidade:"cliente",entidadeId:L.id,campo:"telefone",valorAtual:L.telefone,valorEsperado:"Telefone vlido",sugestao:"Adicionar telefone ao cliente"})}),r.forEach(L=>{(!L.nome||L.nome.trim()==="")&&_({categoria:"critico",tipo:"dados_incompletos",descricao:"Servio sem nome",entidade:"servico",entidadeId:L.id,campo:"nome",valorAtual:L.nome,valorEsperado:"Nome vlido",sugestao:"Adicionar nome ao servio"}),L.valor<=0&&_({categoria:"critico",tipo:"dados_inconsistentes",descricao:"Servio com valor invlido",entidade:"servico",entidadeId:L.id,campo:"valor",valorAtual:L.valor,valorEsperado:"Valor > 0",sugestao:"Definir valor vlido para o servio"}),L.duracao<=0&&_({categoria:"critico",tipo:"dados_inconsistentes",descricao:"Servio com durao invlida",entidade:"servico",entidadeId:L.id,campo:"duracao",valorAtual:L.duracao,valorEsperado:"Durao > 0",sugestao:"Definir durao vlida para o servio"})}),e.forEach(L=>{L.clienteId||_({categoria:"critico",tipo:"dados_incompletos",descricao:"Agendamento sem cliente",entidade:"agendamento",entidadeId:L.id,campo:"clienteId",valorAtual:L.clienteId,valorEsperado:"ID de cliente vlido",sugestao:"Associar cliente ao agendamento"}),L.servicoId||_({categoria:"critico",tipo:"dados_incompletos",descricao:"Agendamento sem servio",entidade:"agendamento",entidadeId:L.id,campo:"servicoId",valorAtual:L.servicoId,valorEsperado:"ID de servio vlido",sugestao:"Associar servio ao agendamento"}),L.data||_({categoria:"critico",tipo:"dados_incompletos",descricao:"Agendamento sem data",entidade:"agendamento",entidadeId:L.id,campo:"data",valorAtual:L.data,valorEsperado:"Data vlida",sugestao:"Definir data para o agendamento"}),L.hora||_({categoria:"critico",tipo:"dados_incompletos",descricao:"Agendamento sem horrio",entidade:"agendamento",entidadeId:L.id,campo:"hora",valorAtual:L.hora,valorEsperado:"Horrio vlido",sugestao:"Definir horrio para o agendamento"});const Y=t.find(Z=>Z.id===L.clienteId);L.clienteId&&!Y&&_({categoria:"alto",tipo:"referencia_invalida",descricao:"Agendamento com cliente inexistente",entidade:"agendamento",entidadeId:L.id,campo:"clienteId",valorAtual:L.clienteId,valorEsperado:"Cliente existente",sugestao:"Verificar se cliente foi deletado ou corrigir referncia"});const Q=r.find(Z=>Z.id===L.servicoId);L.servicoId&&!Q&&_({categoria:"alto",tipo:"referencia_invalida",descricao:"Agendamento com servio inexistente",entidade:"agendamento",entidadeId:L.id,campo:"servicoId",valorAtual:L.servicoId,valorEsperado:"Servio existente",sugestao:"Verificar se servio foi deletado ou corrigir referncia"}),L.valorPago>L.valor&&_({categoria:"alto",tipo:"dados_inconsistentes",descricao:"Valor pago maior que valor total",entidade:"agendamento",entidadeId:L.id,campo:"valorPago",valorAtual:L.valorPago,valorEsperado:`<= ${L.valor}`,sugestao:"Corrigir valores de pagamento"}),L.valorDevido!==L.valor-L.valorPago&&_({categoria:"medio",tipo:"dados_inconsistentes",descricao:"Valor devido no confere com clculo",entidade:"agendamento",entidadeId:L.id,campo:"valorDevido",valorAtual:L.valorDevido,valorEsperado:L.valor-L.valorPago,sugestao:"Recalcular valor devido"}),L.valorPago===0&&L.statusPagamento!=="em_aberto"&&_({categoria:"medio",tipo:"dados_inconsistentes",descricao:"Status de pagamento inconsistente (valor zerado)",entidade:"agendamento",entidadeId:L.id,campo:"statusPagamento",valorAtual:L.statusPagamento,valorEsperado:"em_aberto",sugestao:"Corrigir status de pagamento"}),L.valorPago===L.valor&&L.statusPagamento!=="pago"&&_({categoria:"medio",tipo:"dados_inconsistentes",descricao:"Status de pagamento inconsistente (valor total pago)",entidade:"agendamento",entidadeId:L.id,campo:"statusPagamento",valorAtual:L.statusPagamento,valorEsperado:"pago",sugestao:"Corrigir status de pagamento"}),L.valorPago>0&&L.valorPago<L.valor&&L.statusPagamento!=="parcial"&&_({categoria:"medio",tipo:"dados_inconsistentes",descricao:"Status de pagamento inconsistente (pagamento parcial)",entidade:"agendamento",entidadeId:L.id,campo:"statusPagamento",valorAtual:L.statusPagamento,valorEsperado:"parcial",sugestao:"Corrigir status de pagamento"})});const S=e.filter(L=>L.status!=="cancelado");for(let L=0;L<S.length;L++)for(let Y=L+1;Y<S.length;Y++){const Q=S[L],Z=S[Y];if(Q.data===Z.data){const ce=new Date(`${Q.data}T${Q.hora}`),fe=new Date(ce.getTime()+Q.duracao*6e4),X=new Date(`${Z.data}T${Z.hora}`),De=new Date(X.getTime()+Z.duracao*6e4);ce<De&&fe>X&&_({categoria:"critico",tipo:"conflito_agendamento",descricao:"Conflito de horrio entre agendamentos",entidade:"agendamento",entidadeId:Q.id,campo:"horario",valorAtual:`${Q.data} ${Q.hora}`,valorEsperado:"Horrio livre",sugestao:`Conflito com agendamento ${Z.id} (${Z.clienteNome} - ${Z.data} ${Z.hora})`})}}n.forEach(L=>{(!L.descricao||L.descricao.trim()==="")&&_({categoria:"medio",tipo:"dados_incompletos",descricao:"Lanamento sem descrio",entidade:"lancamento",entidadeId:L.id,campo:"descricao",valorAtual:L.descricao,valorEsperado:"Descrio vlida",sugestao:"Adicionar descrio ao lanamento"}),(!L.categoria||L.categoria.trim()==="")&&_({categoria:"baixo",tipo:"dados_incompletos",descricao:"Lanamento sem categoria",entidade:"lancamento",entidadeId:L.id,campo:"categoria",valorAtual:L.categoria,valorEsperado:"Categoria vlida",sugestao:"Adicionar categoria ao lanamento"}),L.valor<=0&&_({categoria:"alto",tipo:"dados_inconsistentes",descricao:"Lanamento com valor invlido",entidade:"lancamento",entidadeId:L.id,campo:"valor",valorAtual:L.valor,valorEsperado:"Valor > 0",sugestao:"Corrigir valor do lanamento"})}),e.filter(L=>L.status==="concluido").forEach(L=>{!n.find(Q=>Q.tipo==="entrada"&&Q.valor===L.valorPago&&Q.descricao.includes(L.clienteNome))&&L.valorPago>0&&_({categoria:"alto",tipo:"regra_negocio",descricao:"Agendamento concludo sem lanamento financeiro",entidade:"agendamento",entidadeId:L.id,campo:"status",valorAtual:"concluido",valorEsperado:"Lanamento financeiro correspondente",sugestao:"Criar lanamento financeiro para este agendamento"})});const k=o.filter(L=>L.status==="Pendente"),$=new Date;k.forEach(L=>{const Y=new Date(L.data_retorno),Q=Math.floor(($.getTime()-Y.getTime())/(1e3*60*60*24));Q>7&&_({categoria:"medio",tipo:"retorno_atrasado",descricao:`Retorno pendente h ${Q} dias`,entidade:"retorno",entidadeId:L.id_retorno,campo:"data_retorno",valorAtual:L.data_retorno,valorEsperado:"Data atual ou futura",sugestao:"Remarcar retorno ou marcar como realizado/cancelado"})});const A=e.filter(L=>L.status==="agendado"),P=e.filter(L=>L.status==="concluido"),O=e.filter(L=>L.status==="cancelado"),M=n.filter(L=>L.tipo==="entrada").reduce((L,Y)=>L+Y.valor,0),R=n.filter(L=>L.tipo==="saida").reduce((L,Y)=>L+Y.valor,0),T=new Set(e.map(L=>L.servicoId)),D=r.filter(L=>!T.has(L.id)),I=new Set,U=new Date;U.setDate(U.getDate()-30),e.forEach(L=>{new Date(L.data)>=U&&I.add(L.clienteId)});const oe=t.length-I.size,J=[];D.length>0&&J.push(`${D.length} servios nunca foram agendados. Considere promov-los ou remov-los.`),oe>0&&J.push(`${oe} clientes no tm agendamentos recentes. Considere uma campanha de reativao.`);const ie=e.filter(L=>L.statusPagamento==="em_aberto").length;ie>0&&J.push(`${ie} agendamentos com pagamento em aberto. Revisar poltica de cobrana.`);const me=k.filter(L=>new Date(L.data_retorno)<$).length;me>0&&J.push(`${me} retornos em atraso. Entrar em contato com clientes.`);const de=r.map(L=>{const Y=e.filter(Q=>Q.servicoId===L.id);if(Y.length>0){const Q=Y.reduce((ce,fe)=>ce+fe.duracao,0)/Y.length,Z=Math.abs(Q-L.duracao);if(Z>15)return{servico:L.nome,duracaoPrograma:L.duracao,duracaoMedia:Q,diferenca:Z}}return null}).filter(Boolean);de.length>0&&J.push(`${de.length} servios tm durao programada muito diferente da durao real. Revisar tempos.`);const H={totalClientes:t.length,totalServicos:r.length,totalAgendamentos:e.length,totalLancamentos:n.length,totalCronogramas:s.length,totalRetornos:o.length,agendamentosAtivos:A.length,agendamentosConcluidos:P.length,agendamentosCancelados:O.length,valorTotalReceitas:M,valorTotalDespesas:R,servicosNuncaUsados:D.length,clientesInativos:oe};return{dataExecucao:new Date().toISOString(),totalProblemas:j.length,problemasCriticos:j.filter(L=>L.categoria==="critico").length,problemasAltos:j.filter(L=>L.categoria==="alto").length,problemasMedios:j.filter(L=>L.categoria==="medio").length,problemasBaixos:j.filter(L=>L.categoria==="baixo").length,problemas:j,estatisticas:H,sugestoesMelhorias:J}},[e,t,r,n,s,o]),y=j=>{if(j==="json"){const N=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),_=URL.createObjectURL(N),S=document.createElement("a");S.href=_,S.download=`auditoria-${new Date().toISOString().split("T")[0]}.json`,S.click(),URL.revokeObjectURL(_)}else if(j==="csv"){const N=["ID","Categoria","Tipo","Descrio","Entidade","ID Entidade","Campo","Valor Atual","Valor Esperado","Sugesto"],_=g.problemas.map(A=>[A.id,A.categoria,A.tipo,A.descricao,A.entidade,A.entidadeId,A.campo||"",A.valorAtual||"",A.valorEsperado||"",A.sugestao||""]),S=[N,..._].map(A=>A.map(P=>`"${P}"`).join(",")).join(`
`),C=new Blob([S],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(C),$=document.createElement("a");$.href=k,$.download=`auditoria-${new Date().toISOString().split("T")[0]}.csv`,$.click(),URL.revokeObjectURL(k)}},b=x.useCallback(async()=>{if(!i||c)return null;l(!0);try{const{data:j,error:N}=await W.from("relatorios_auditoria").insert({user_id:i.id,data_execucao:new Date().toISOString(),total_problemas:g.totalProblemas,problemas_criticos:g.problemasCriticos,problemas_altos:g.problemasAltos,problemas_medios:g.problemasMedios,problemas_baixos:g.problemasBaixos,estatisticas:g.estatisticas,sugestoes_melhorias:g.sugestoesMelhorias}).select().single();if(N)throw N;if(g.problemas.length>0){const _=g.problemas.map(C=>({relatorio_id:j.id,user_id:i.id,categoria:C.categoria,tipo:C.tipo,descricao:C.descricao,entidade:C.entidade,entidade_id:C.entidadeId,campo:C.campo||null,valor_atual:C.valorAtual||null,valor_esperado:C.valorEsperado||null,sugestao:C.sugestao||null})),{error:S}=await W.from("problemas_auditoria").insert(_);if(S)throw S}return V.success("Relatrio de auditoria salvo com sucesso!"),await w(),j}catch(j){return console.error("Erro ao salvar relatrio:",j),V.error("Erro ao salvar relatrio de auditoria"),null}finally{l(!1)}},[i,g,c]),w=x.useCallback(async()=>{if(i)try{const{data:j,error:N}=await W.from("relatorios_auditoria").select("*").eq("user_id",i.id).order("data_execucao",{ascending:!1}).limit(10);if(N)throw N;u(j||[])}catch(j){console.error("Erro ao carregar histrico:",j)}},[i]);return{relatorioAuditoria:f||g,exportarRelatorio:y,salvarRelatorio:b,salvando:c,carregarHistorico:w,relatoriosHistorico:d,carregandoBackend:p,useBackendAudit:m}}function P_e(e,t=[]){let r=[];function n(o,i){const c=x.createContext(i),l=r.length;r=[...r,i];function d(f){const{scope:h,children:p,...v}=f,m=h?.[e][l]||c,g=x.useMemo(()=>v,Object.values(v));return a.jsx(m.Provider,{value:g,children:p})}function u(f,h){const p=h?.[e][l]||c,v=x.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const s=()=>{const o=r.map(i=>x.createContext(i));return function(c){const l=c?.[e]||o;return x.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return s.scopeName=e,[n,A_e(s,...t)]}function A_e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:l,scopeName:d})=>{const f=l(o)[`__scope${d}`];return{...c,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var mj="Progress",pj=100,[k_e]=P_e(mj),[E_e,O_e]=k_e(mj),xI=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:o=T_e,...i}=e;(s||s===0)&&!$C(s)&&console.error($_e(`${s}`,"Progress"));const c=$C(s)?s:pj;n!==null&&!MC(n,c)&&console.error(M_e(`${n}`,"Progress"));const l=MC(n,c)?n:null,d=Yh(l)?o(l,c):void 0;return a.jsx(E_e,{scope:r,value:l,max:c,children:a.jsx($e.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Yh(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":jI(l,c),"data-value":l??void 0,"data-max":c,...i,ref:t})})});xI.displayName=mj;var yI="ProgressIndicator",bI=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=O_e(yI,r);return a.jsx($e.div,{"data-state":jI(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});bI.displayName=yI;function T_e(e,t){return`${Math.round(e/t*100)}%`}function jI(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Yh(e){return typeof e=="number"}function $C(e){return Yh(e)&&!isNaN(e)&&e>0}function MC(e,t){return Yh(e)&&!isNaN(e)&&e<=t&&e>=0}function $_e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${pj}\`.`}function M_e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${pj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var wI=xI,D_e=bI;const Ns=x.forwardRef(({className:e,value:t,...r},n)=>a.jsx(wI,{ref:n,className:te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:a.jsx(D_e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ns.displayName=wI.displayName;function I_e({porcentagemSaude:e,totalProblemas:t,problemasCriticos:r,problemasAltos:n,valorTotalReceitas:s,valorTotalDespesas:o,totalAgendamentos:i,agendamentosAtivos:c,agendamentosConcluidos:l}){const d=s-o;return s>0&&(d/s*100).toFixed(1),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(F,{className:te("border-l-4",e>80?"border-l-green-500":e>60?"border-l-yellow-500":"border-l-red-500"),children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Sade do Sistema"}),e>80?a.jsx(Pn,{className:"h-4 w-4 text-green-500"}):e>60?a.jsx(Nr,{className:"h-4 w-4 text-yellow-500"}):a.jsx(_o,{className:"h-4 w-4 text-red-500"})]}),a.jsxs(q,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[e.toFixed(0),"%"]}),a.jsx(Ns,{value:e,className:te("mt-2 h-2",e>80?"[&>div]:bg-green-500":e>60?"[&>div]:bg-yellow-500":"[&>div]:bg-red-500")}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e>80?"Sistema saudvel":e>60?"Ateno necessria":"Ao imediata requerida"})]})]}),a.jsxs(F,{className:te("border-l-4",t===0?"border-l-green-500":r>0?"border-l-red-500":"border-l-yellow-500"),children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Problemas Detectados"}),a.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-2xl font-bold",children:t}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[r>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:[r," crticos"]}),n>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:[n," altos"]})]}),t===0&&a.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:" Nenhum problema encontrado"})]})]}),a.jsxs(F,{className:te("border-l-4",d>=0?"border-l-green-500":"border-l-red-500"),children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Resultado Financeiro"}),d>=0?a.jsx(Ut,{className:"h-4 w-4 text-green-500"}):a.jsx(Uo,{className:"h-4 w-4 text-red-500"})]}),a.jsxs(q,{children:[a.jsxs("div",{className:te("text-2xl font-bold",d>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Receitas:"}),a.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["R$ ",s.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Despesas:"}),a.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["R$ ",o.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),a.jsxs(F,{className:"border-l-4 border-l-primary",children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Agendamentos"}),a.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-2xl font-bold",children:i}),a.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Ativos:"}),a.jsx("span",{className:"text-primary font-medium",children:c})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Concludos:"}),a.jsx("span",{className:"text-green-600 dark:text-green-400",children:l})]})]})]})]})]})}function R_e({retornosAtrasados:e,clientesInativos:t,agendamentosEmAberto:r,problemasCriticos:n}){const s=Jr(),o=[...e>0?[{id:"retornos",titulo:"Resolver Retornos",descricao:`${e} retorno(s) pendente(s) aguardando ao`,icone:a.jsx(st,{className:"h-5 w-5 text-orange-500"}),prioridade:"alta",acao:()=>s("/cronogramas"),badge:`${e} pendentes`}]:[],...n>0?[{id:"criticos",titulo:"Problemas Crticos",descricao:`${n} problema(s) crtico(s) requerem ateno imediata`,icone:a.jsx(Nr,{className:"h-5 w-5 text-red-500"}),prioridade:"alta",acao:()=>document.getElementById("tab-problemas")?.click(),badge:`${n} crticos`}]:[],...r>0?[{id:"pagamentos",titulo:"Cobrar Pagamentos",descricao:`${r} agendamento(s) com pagamento pendente`,icone:a.jsx(dt,{className:"h-5 w-5 text-yellow-500"}),prioridade:"media",acao:()=>s("/financeiro"),badge:"R$ pendente"}]:[],...t>0?[{id:"clientes",titulo:"Reativar Clientes",descricao:`${t} cliente(s) sem agendamento h mais de 30 dias`,icone:a.jsx(mn,{className:"h-5 w-5 text-blue-500"}),prioridade:"baixa",acao:()=>s("/clientes"),badge:`${t} inativos`}]:[]];return o.length===0?a.jsx(F,{className:"border-green-200 bg-green-50/50 dark:bg-green-950/20 dark:border-green-900",children:a.jsxs(q,{className:"flex items-center gap-4 py-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center",children:a.jsx(Pn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100",children:"Nenhuma ao pendente!"}),a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Todos os dados esto em dia. Continue acompanhando regularmente."})]})]})}):a.jsxs(F,{children:[a.jsxs(ae,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lF,{className:"h-5 w-5 text-primary"}),a.jsx(se,{className:"text-lg",children:"Aes Rpidas"})]}),a.jsx(ke,{children:"Tarefas prioritrias que requerem sua ateno"})]}),a.jsx(q,{children:a.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:o.map(i=>a.jsxs("button",{onClick:i.acao,className:"flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-accent transition-colors text-left group",children:[a.jsx("div",{className:"flex-shrink-0",children:i.icone}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:i.titulo}),i.badge&&a.jsx(pe,{variant:i.prioridade==="alta"?"destructive":i.prioridade==="media"?"secondary":"outline",className:"text-xs",children:i.badge})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:i.descricao})]}),a.jsx(gi,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]},i.id))})})]})}const L_e={critico:"destructive",alto:"secondary",medio:"outline",baixo:"default"},F_e={critico:_o,alto:Nr,medio:Nr,baixo:Pn},z_e={cliente:"/clientes",servico:"/servicos",agendamento:"/agendamentos",lancamento:"/financeiro",retorno:"/cronogramas",cronograma:"/cronogramas"};function B_e({problemas:e}){const t=Jr(),[r,n]=x.useState(""),[s,o]=x.useState([]),[i,c]=x.useState([]);x.useMemo(()=>[...new Set(e.map(v=>v.categoria))],[e]);const l=x.useMemo(()=>[...new Set(e.map(v=>v.entidade))],[e]),d=x.useMemo(()=>e.filter(v=>{const m=r.toLowerCase(),g=r===""||v.descricao.toLowerCase().includes(m)||v.tipo.toLowerCase().includes(m)||v.entidade.toLowerCase().includes(m)||v.sugestao?.toLowerCase().includes(m),y=s.length===0||s.includes(v.categoria),b=i.length===0||i.includes(v.entidade);return g&&y&&b}),[e,r,s,i]),u=x.useMemo(()=>({critico:e.filter(v=>v.categoria==="critico").length,alto:e.filter(v=>v.categoria==="alto").length,medio:e.filter(v=>v.categoria==="medio").length,baixo:e.filter(v=>v.categoria==="baixo").length}),[e]),f=v=>{o(m=>m.includes(v)?m.filter(g=>g!==v):[...m,v])},h=v=>{c(m=>m.includes(v)?m.filter(g=>g!==v):[...m,v])},p=v=>{const m=z_e[v];m&&t(m)};return e.length===0?a.jsx(F,{children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(Pn,{className:"h-16 w-16 text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-green-900 dark:text-green-100",children:"Sistema 100% Saudvel!"}),a.jsx("p",{className:"text-muted-foreground text-center mt-2 max-w-md",children:"Nenhum problema ou inconsistncia foi detectado. Todos os dados esto corretos e consistentes."})]})}):a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Problemas Detectados"}),a.jsxs(ke,{children:[d.length," de ",e.length," problemas"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.critico>0&&a.jsxs(B,{variant:s.includes("critico")?"default":"outline",size:"sm",onClick:()=>f("critico"),className:"gap-1",children:[a.jsx(_o,{className:"h-3 w-3"}),"Crticos (",u.critico,")"]}),u.alto>0&&a.jsxs(B,{variant:s.includes("alto")?"secondary":"outline",size:"sm",onClick:()=>f("alto"),className:"gap-1",children:[a.jsx(Nr,{className:"h-3 w-3"}),"Altos (",u.alto,")"]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ue,{placeholder:"Buscar problemas...",value:r,onChange:v=>n(v.target.value),className:"pl-9"})]}),a.jsxs(uI,{children:[a.jsx(fI,{asChild:!0,children:a.jsx(B,{variant:"outline",size:"icon",children:a.jsx(Bs,{className:"h-4 w-4"})})}),a.jsxs(hj,{align:"end",className:"w-48",children:[a.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Entidades"}),l.map(v=>a.jsx(hI,{checked:i.includes(v),onCheckedChange:()=>h(v),className:"capitalize",children:v},v))]})]})]})]}),a.jsxs(q,{children:[a.jsx("div",{className:"rounded-md border overflow-hidden",children:a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{className:"bg-muted/50",children:[a.jsx(be,{className:"w-[100px]",children:"Prioridade"}),a.jsx(be,{children:"Tipo"}),a.jsx(be,{className:"hidden md:table-cell",children:"Descrio"}),a.jsx(be,{children:"Entidade"}),a.jsx(be,{className:"hidden lg:table-cell",children:"Sugesto"}),a.jsx(be,{className:"w-[50px]"})]})}),a.jsx(Rr,{children:d.map(v=>{const m=F_e[v.categoria];return a.jsxs(ht,{className:"group hover:bg-muted/50",children:[a.jsx(xe,{children:a.jsxs(pe,{variant:L_e[v.categoria],className:"flex items-center gap-1 w-fit whitespace-nowrap",children:[a.jsx(m,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden sm:inline",children:v.categoria.toUpperCase()})]})}),a.jsx(xe,{className:"font-medium text-sm",children:v.tipo.replace(/_/g," ")}),a.jsx(xe,{className:"hidden md:table-cell text-sm text-muted-foreground max-w-xs truncate",children:v.descricao}),a.jsx(xe,{children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx("span",{className:"capitalize text-sm font-medium",children:v.entidade}),a.jsxs("span",{className:"text-xs text-muted-foreground font-mono",children:[v.entidadeId.slice(0,8),"..."]})]})}),a.jsx(xe,{className:"hidden lg:table-cell text-sm text-muted-foreground max-w-xs truncate",children:v.sugestao}),a.jsx(xe,{children:a.jsx(B,{variant:"ghost",size:"icon",onClick:()=>p(v.entidade),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(lm,{className:"h-4 w-4"})})})]},v.id)})})]})}),d.length===0&&e.length>0&&a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["Nenhum problema encontrado com os filtros atuais.",a.jsx(B,{variant:"link",onClick:()=>{n(""),o([]),c([])},children:"Limpar filtros"})]})]})]})}function V_e({estatisticas:e}){const t=e.totalAgendamentos>0?e.agendamentosCancelados/e.totalAgendamentos*100:0,r=e.totalAgendamentos>0?e.agendamentosConcluidos/e.totalAgendamentos*100:0,n=e.valorTotalReceitas-e.valorTotalDespesas,s=e.valorTotalReceitas>0?n/e.valorTotalReceitas*100:0,o=e.totalServicos>0?(e.totalServicos-e.servicosNuncaUsados)/e.totalServicos*100:0,i=e.totalClientes>0?(e.totalClientes-e.clientesInativos)/e.totalClientes*100:0;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(F,{children:[a.jsx(ae,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Taxa de Concluso"}),a.jsx(Pn,{className:"h-4 w-4 text-green-500"})]})}),a.jsxs(q,{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[r.toFixed(1),"%"]}),a.jsx(Ns,{value:r,className:"mt-2 h-2 [&>div]:bg-green-500"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.agendamentosConcluidos," de ",e.totalAgendamentos," agendamentos"]})]})]}),a.jsxs(F,{children:[a.jsx(ae,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Taxa de Cancelamento"}),a.jsx(_o,{className:"h-4 w-4 text-red-500"})]})}),a.jsxs(q,{children:[a.jsxs("div",{className:te("text-2xl font-bold",t>20?"text-red-600 dark:text-red-400":t>10?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"),children:[t.toFixed(1),"%"]}),a.jsx(Ns,{value:t,className:te("mt-2 h-2",t>20?"[&>div]:bg-red-500":t>10?"[&>div]:bg-yellow-500":"[&>div]:bg-green-500")}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.agendamentosCancelados," cancelamentos"]})]})]}),a.jsxs(F,{children:[a.jsx(ae,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Margem de Lucro"}),a.jsx(Ut,{className:"h-4 w-4 text-primary"})]})}),a.jsxs(q,{children:[a.jsxs("div",{className:te("text-2xl font-bold",s>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[s.toFixed(1),"%"]}),a.jsx(Ns,{value:Math.abs(s),className:te("mt-2 h-2",s>=0?"[&>div]:bg-green-500":"[&>div]:bg-red-500")}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Lucro: R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),a.jsxs(F,{children:[a.jsx(ae,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Clientes Ativos"}),a.jsx(mn,{className:"h-4 w-4 text-blue-500"})]})}),a.jsxs(q,{children:[a.jsxs("div",{className:te("text-2xl font-bold",i>=70?"text-green-600 dark:text-green-400":i>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:[i.toFixed(1),"%"]}),a.jsx(Ns,{value:i,className:te("mt-2 h-2",i>=70?"[&>div]:bg-green-500":i>=50?"[&>div]:bg-yellow-500":"[&>div]:bg-red-500")}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.totalClientes-e.clientesInativos," ativos de ",e.totalClientes]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Clientes"}),a.jsx(mn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-3xl font-bold",children:e.totalClientes}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Ativos (ltimos 30 dias)"}),a.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:e.totalClientes-e.clientesInativos})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Inativos"}),a.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:e.clientesInativos})]})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Servios"}),a.jsx(Xa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-3xl font-bold",children:e.totalServicos}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Utilizados"}),a.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:e.totalServicos-e.servicosNuncaUsados})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Nunca usados"}),a.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:e.servicosNuncaUsados})]})]}),a.jsx(Ns,{value:o,className:"mt-3 h-1.5"})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Agendamentos"}),a.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-3xl font-bold",children:e.totalAgendamentos}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Ativos"}),a.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:e.agendamentosAtivos})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Concludos"}),a.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:e.agendamentosConcluidos})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Cancelados"}),a.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:e.agendamentosCancelados})]})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Financeiro"}),a.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-3xl font-bold",children:e.totalLancamentos}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"lanamentos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Receitas"}),a.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["R$ ",e.valorTotalReceitas.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Despesas"}),a.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["R$ ",e.valorTotalDespesas.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Cronogramas"}),a.jsx(Kr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsx("div",{className:"text-3xl font-bold",children:e.totalCronogramas}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"cronogramas ativos"}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Retornos cadastrados"}),a.jsx("span",{className:"font-medium",children:e.totalRetornos})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:"Resumo"}),a.jsx(DP,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(q,{children:[a.jsxs("div",{className:te("text-3xl font-bold",n>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"resultado financeiro"}),a.jsx("div",{className:"flex items-center gap-2 text-sm",children:n>=0?a.jsxs(a.Fragment,{children:[a.jsx(Ut,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Lucro positivo"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Nr,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Prejuzo"})]})})]})]})]})]})}const U_e=e=>e.includes("cliente")?{icone:a.jsx(mn,{className:"h-5 w-5"}),categoria:"Clientes",cor:"text-blue-500",rota:"/clientes"}:e.includes("servio")||e.includes("servico")?{icone:a.jsx(Xa,{className:"h-5 w-5"}),categoria:"Servios",cor:"text-purple-500",rota:"/servicos"}:e.includes("pagamento")||e.includes("financeiro")||e.includes("cobrana")?{icone:a.jsx(dt,{className:"h-5 w-5"}),categoria:"Financeiro",cor:"text-green-500",rota:"/financeiro"}:e.includes("retorno")||e.includes("atraso")?{icone:a.jsx(Kr,{className:"h-5 w-5"}),categoria:"Retornos",cor:"text-orange-500",rota:"/cronogramas"}:e.includes("agendamento")||e.includes("durao")||e.includes("tempo")?{icone:a.jsx(Ee,{className:"h-5 w-5"}),categoria:"Agendamentos",cor:"text-pink-500",rota:"/agendamentos"}:{icone:a.jsx(dm,{className:"h-5 w-5"}),categoria:"Geral",cor:"text-yellow-500",rota:"/dashboard"};function q_e({sugestoes:e,estatisticas:t}){const r=Jr(),n=t.totalAgendamentos>0?t.agendamentosCancelados/t.totalAgendamentos*100:0;return e.length===0?a.jsx(F,{className:"border-green-200 bg-green-50/50 dark:bg-green-950/20 dark:border-green-900",children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center mb-4",children:a.jsx(Pn,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-green-900 dark:text-green-100",children:"Sistema Otimizado!"}),a.jsx("p",{className:"text-muted-foreground text-center mt-2 max-w-md",children:"No h sugestes de melhorias no momento. Continue monitorando regularmente para manter o alto desempenho."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.clientesInativos>5&&a.jsxs(F,{className:"border-blue-200 dark:border-blue-900",children:[a.jsx(ae,{className:"pb-2",children:a.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(mn,{className:"h-4 w-4 text-blue-500"}),"Oportunidade de Reativao"]})}),a.jsxs(q,{children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Voc tem ",a.jsxs("strong",{children:[t.clientesInativos," clientes inativos"]}),". Uma campanha de reativao pode recuperar at 30% deles."]}),a.jsxs(B,{variant:"link",className:"px-0 mt-2",onClick:()=>r("/clientes"),children:["Ver clientes inativos ",a.jsx(gi,{className:"h-3 w-3 ml-1"})]})]})]}),n>15&&a.jsxs(F,{className:"border-red-200 dark:border-red-900",children:[a.jsx(ae,{className:"pb-2",children:a.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Ee,{className:"h-4 w-4 text-red-500"}),"Alta Taxa de Cancelamento"]})}),a.jsxs(q,{children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Taxa de cancelamento de ",a.jsxs("strong",{children:[n.toFixed(1),"%"]}),". Considere implementar confirmao por WhatsApp."]}),a.jsxs(B,{variant:"link",className:"px-0 mt-2",onClick:()=>r("/configuracoes"),children:["Configurar lembretes ",a.jsx(gi,{className:"h-3 w-3 ml-1"})]})]})]}),t.servicosNuncaUsados>0&&a.jsxs(F,{className:"border-purple-200 dark:border-purple-900",children:[a.jsx(ae,{className:"pb-2",children:a.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Xa,{className:"h-4 w-4 text-purple-500"}),"Servios No Utilizados"]})}),a.jsxs(q,{children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsxs("strong",{children:[t.servicosNuncaUsados," servios"]})," nunca foram agendados. Considere promov-los ou remov-los."]}),a.jsxs(B,{variant:"link",className:"px-0 mt-2",onClick:()=>r("/servicos"),children:["Gerenciar servios ",a.jsx(gi,{className:"h-3 w-3 ml-1"})]})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dm,{className:"h-5 w-5 text-yellow-500"}),a.jsx(se,{children:"Sugestes de Melhorias"})]}),a.jsx(ke,{children:"Recomendaes baseadas na anlise dos seus dados"})]}),a.jsx(q,{children:a.jsx("div",{className:"space-y-3",children:e.map((s,o)=>{const{icone:i,categoria:c,cor:l,rota:d}=U_e(s);return a.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors group",children:[a.jsx("div",{className:te("flex-shrink-0 mt-0.5",l),children:i}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:a.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:c})}),a.jsx("p",{className:"text-sm",children:s})]}),a.jsxs(B,{variant:"ghost",size:"sm",onClick:()=>r(d),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:["Resolver",a.jsx(gi,{className:"h-3 w-3 ml-1"})]})]},o)})})})]}),a.jsxs(Zr,{className:"border-primary/20 bg-primary/5",children:[a.jsx(Ut,{className:"h-4 w-4 text-primary"}),a.jsxs(Xr,{className:"text-sm",children:[a.jsx("strong",{children:"Dica Pro:"})," Execute auditorias regularmente (semanalmente) para identificar problemas antes que se tornem crticos. Salve os relatrios para acompanhar a evoluo do sistema ao longo do tempo."]})]})]})}function W_e({relatorios:e,onCarregar:t}){const r=s=>Math.max(0,100-(s.problemas_criticos*10+s.problemas_altos*5)),n=s=>{if(s>=e.length-1)return null;const o=r(e[s]),i=r(e[s+1]);return o>i?"melhorou":o<i?"piorou":"estavel"};return e.length===0?a.jsx(F,{children:a.jsxs(q,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:a.jsx(Aa,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold",children:"Nenhum Relatrio Salvo"}),a.jsx("p",{className:"text-muted-foreground text-center mt-2 max-w-md",children:'Clique em "Salvar Relatrio" para comear a criar um histrico de auditorias. Isso permite acompanhar a evoluo da sade do sistema ao longo do tempo.'})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsx(se,{children:"Histrico de Auditorias"}),a.jsxs(ke,{children:["ltimos ",e.length," relatrios salvos  Acompanhe a evoluo do sistema"]})]}),a.jsx(q,{children:a.jsx("div",{className:"space-y-3",children:e.map((s,o)=>{const i=r(s),c=n(o),l=new Date(s.data_execucao);return a.jsxs("div",{className:te("flex items-center gap-4 p-4 rounded-lg border transition-colors",o===0?"bg-accent/50 border-primary/20":"hover:bg-accent/30"),children:[a.jsxs("div",{className:"flex-shrink-0 text-center min-w-[80px]",children:[a.jsx("div",{className:"text-2xl font-bold",children:l.getDate().toString().padStart(2,"0")}),a.jsx("div",{className:"text-xs text-muted-foreground uppercase",children:l.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:l.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:te("w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold",i>80?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":i>60?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:[i,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o===0&&a.jsx(pe,{variant:"secondary",className:"text-xs",children:"Mais recente"}),c&&a.jsxs("span",{className:te("flex items-center gap-1 text-xs",c==="melhorou"?"text-green-600 dark:text-green-400":c==="piorou"?"text-red-600 dark:text-red-400":"text-muted-foreground"),children:[c==="melhorou"&&a.jsx(Ut,{className:"h-3 w-3"}),c==="piorou"&&a.jsx(Uo,{className:"h-3 w-3"}),c==="melhorou"?"Melhorou":c==="piorou"?"Piorou":"Estvel"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("span",{className:"text-sm font-medium",children:[s.total_problemas," problemas"]}),a.jsx("span",{className:"text-sm text-muted-foreground",children:""}),s.problemas_criticos>0&&a.jsxs(pe,{variant:"destructive",className:"text-xs",children:[s.problemas_criticos," crticos"]}),s.problemas_altos>0&&a.jsxs(pe,{variant:"secondary",className:"text-xs",children:[s.problemas_altos," altos"]}),s.problemas_medios>0&&a.jsxs(pe,{variant:"outline",className:"text-xs",children:[s.problemas_medios," mdios"]}),s.problemas_baixos>0&&a.jsxs(pe,{variant:"default",className:"text-xs bg-muted text-muted-foreground",children:[s.problemas_baixos," baixos"]})]})]})]},s.id)})})})]}),e.length>=3&&a.jsxs(F,{className:"border-primary/20 bg-primary/5",children:[a.jsx(ae,{className:"pb-2",children:a.jsxs(se,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"h-4 w-4 text-primary"}),"Anlise de Tendncia"]})}),a.jsx(q,{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{const s=r(e[e.length-1]),i=r(e[0])-s;return i>10?`A sade do sistema melhorou ${i.toFixed(0)}% desde a primeira auditoria. Continue com o bom trabalho!`:i<-10?`A sade do sistema caiu ${Math.abs(i).toFixed(0)}% desde a primeira auditoria. Revise os problemas crticos.`:"A sade do sistema permanece estvel. Continue monitorando regularmente."})()})})]})]})}function H_e(){const{retornos:e,marcarRetornoRealizado:t,cancelarRetorno:r}=ou(),{clientes:n}=la(),{toast:s}=Vp(),o=e.filter(u=>u.status!=="Pendente"?!1:new Date(u.data_retorno)<new Date),i=u=>{const f=new Date(u);return Math.floor((new Date().getTime()-f.getTime())/(1e3*60*60*24))},c=async u=>{try{await t(u),s({title:"Retorno marcado como realizado",description:"O retorno foi atualizado com sucesso."})}catch{s({title:"Erro ao marcar retorno",description:"No foi possvel atualizar o retorno.",variant:"destructive"})}},l=async u=>{try{await r(u),s({title:"Retorno cancelado",description:"O retorno foi cancelado com sucesso."})}catch{s({title:"Erro ao cancelar retorno",description:"No foi possvel cancelar o retorno.",variant:"destructive"})}},d=u=>n.find(h=>h.id===u)?.nomeCompleto||"Cliente no encontrado";return o.length===0?a.jsx(F,{children:a.jsxs(ae,{children:[a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Pn,{className:"h-5 w-5 text-green-500"}),"Retornos em Dia"]}),a.jsx(ke,{children:"No h retornos atrasados no sistema."})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-5 w-5 text-orange-500"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Resolver Retornos Atrasados"}),a.jsxs(pe,{variant:"secondary",children:[o.length," pendentes"]})]}),o.map(u=>a.jsx(F,{children:a.jsx(ae,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-lg",children:d(u.id_cliente)}),a.jsxs(ke,{children:["Data prevista: ",new Date(u.data_retorno).toLocaleDateString("pt-BR"),a.jsxs(pe,{variant:"destructive",className:"ml-2",children:[i(u.data_retorno)," dias de atraso"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>c(u.id_retorno),className:"flex items-center gap-1",children:[a.jsx(Pn,{className:"h-4 w-4"}),"Marcar como Realizado"]}),a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>l(u.id_retorno),className:"flex items-center gap-1",children:[a.jsx(_o,{className:"h-4 w-4"}),"Cancelar"]})]})]})})},u.id_retorno))]})}function G_e(){const{relatorioAuditoria:e,exportarRelatorio:t,salvarRelatorio:r,salvando:n,carregarHistorico:s,relatoriosHistorico:o,carregandoBackend:i}=C_e(),{retornos:c}=ou(),[l,d]=x.useState("visao-geral"),u=x.useMemo(()=>{const p=new Date;return c.filter(v=>v.status!=="Pendente"?!1:new Date(v.data_retorno)<p).length},[c]),f=x.useMemo(()=>e.problemas.filter(p=>p.tipo==="dados_inconsistentes"&&p.campo==="statusPagamento").length,[e.problemas]),h=Math.max(0,100-(e.problemasCriticos*10+e.problemasAltos*5));return x.useEffect(()=>{s()},[s]),a.jsxs("div",{className:"space-y-6",children:[i&&a.jsx(F,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/30",children:a.jsx(q,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kr,{className:"h-5 w-5 text-blue-600 animate-spin"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Executando Auditoria"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Analisando dados e verificando inconsistncias..."})]})]})})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Auditoria do Sistema"}),a.jsxs("p",{className:"text-muted-foreground",children:["ltima anlise: ",new Date(e.dataExecucao).toLocaleString("pt-BR")]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(B,{variant:"default",onClick:r,disabled:n,className:"gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"h-4 w-4 animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_n,{className:"h-4 w-4"}),"Salvar Relatrio"]})}),a.jsx(B,{variant:"outline",size:"icon",onClick:()=>t("csv"),title:"Exportar CSV",children:a.jsx(Aa,{className:"h-4 w-4"})}),a.jsx(B,{variant:"outline",size:"icon",onClick:()=>t("json"),title:"Exportar JSON",children:a.jsx(_n,{className:"h-4 w-4"})})]})]}),e.problemasCriticos>0&&a.jsxs(Zr,{variant:"destructive",children:[a.jsx(Nr,{className:"h-4 w-4"}),a.jsx(GA,{children:"Ateno: Problemas Crticos Detectados!"}),a.jsxs(Xr,{children:["Foram encontrados ",e.problemasCriticos,' problemas crticos que precisam de ateno imediata. Verifique a aba "Problemas" para mais detalhes e tome as aes necessrias.']})]}),a.jsx(I_e,{porcentagemSaude:h,totalProblemas:e.totalProblemas,problemasCriticos:e.problemasCriticos,problemasAltos:e.problemasAltos,valorTotalReceitas:e.estatisticas.valorTotalReceitas,valorTotalDespesas:e.estatisticas.valorTotalDespesas,totalAgendamentos:e.estatisticas.totalAgendamentos,agendamentosAtivos:e.estatisticas.agendamentosAtivos,agendamentosConcluidos:e.estatisticas.agendamentosConcluidos}),a.jsx(R_e,{retornosAtrasados:u,clientesInativos:e.estatisticas.clientesInativos,agendamentosEmAberto:f,problemasCriticos:e.problemasCriticos}),a.jsxs(Ia,{value:l,onValueChange:d,className:"w-full",children:[a.jsxs(ua,{className:"grid w-full grid-cols-5 lg:w-auto lg:inline-flex",children:[a.jsxs(rt,{value:"visao-geral",className:"gap-2",children:[a.jsx(DP,{className:"h-4 w-4 hidden sm:inline"}),"Viso Geral"]}),a.jsxs(rt,{value:"problemas",id:"tab-problemas",className:"gap-2",children:[a.jsx(Nr,{className:"h-4 w-4 hidden sm:inline"}),"Problemas",e.totalProblemas>0&&a.jsx("span",{className:"ml-1 text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded-full",children:e.totalProblemas})]}),a.jsxs(rt,{value:"resolver",className:"gap-2",children:[a.jsx(Co,{className:"h-4 w-4 hidden sm:inline"}),"Resolver"]}),a.jsxs(rt,{value:"sugestoes",className:"gap-2",children:[a.jsx(dm,{className:"h-4 w-4 hidden sm:inline"}),"Sugestes"]}),a.jsxs(rt,{value:"historico",className:"gap-2",children:[a.jsx(st,{className:"h-4 w-4 hidden sm:inline"}),"Histrico"]})]}),a.jsx(nt,{value:"visao-geral",className:"space-y-4 mt-6",children:a.jsx(V_e,{estatisticas:e.estatisticas})}),a.jsx(nt,{value:"problemas",className:"space-y-4 mt-6",children:a.jsx(B_e,{problemas:e.problemas})}),a.jsx(nt,{value:"resolver",className:"space-y-4 mt-6",children:a.jsxs(F,{children:[a.jsx(ae,{children:a.jsxs(se,{className:"flex items-center gap-2",children:[a.jsx(Co,{className:"h-5 w-5"}),"Ferramentas de Resoluo"]})}),a.jsx(q,{children:a.jsx(H_e,{})})]})}),a.jsx(nt,{value:"sugestoes",className:"space-y-4 mt-6",children:a.jsx(q_e,{sugestoes:e.sugestoesMelhorias,estatisticas:{clientesInativos:e.estatisticas.clientesInativos,servicosNuncaUsados:e.estatisticas.servicosNuncaUsados,totalAgendamentos:e.estatisticas.totalAgendamentos,agendamentosCancelados:e.estatisticas.agendamentosCancelados}})}),a.jsx(nt,{value:"historico",className:"space-y-4 mt-6",children:a.jsx(W_e,{relatorios:o,onCarregar:s})})]}),a.jsx(F,{className:"bg-muted/30",children:a.jsx(q,{className:"py-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm text-muted-foreground",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Dados analisados:"})," ",e.estatisticas.totalClientes," clientes ",e.estatisticas.totalServicos," servios ",e.estatisticas.totalAgendamentos," agendamentos ",e.estatisticas.totalLancamentos," lanamentos"]}),a.jsx("p",{className:"text-xs",children:"Auditoria executada automaticamente ao acessar a pgina"})]})})})]})}const Kc=()=>{const{user:e}=Rt(),[t,r]=x.useState(!1),[n,s]=x.useState(null),[o,i]=x.useState([]),[c,l]=x.useState(null),[d,u]=x.useState([]),[f,h]=x.useState([]),p=async()=>{if(e)try{const{data:M,error:R}=await W.from("programas_fidelidade").select("*").eq("user_id",e.id).single();if(R&&R.code!=="PGRST116")throw R;s(M)}catch(M){console.error("Erro ao carregar programa:",M)}},v=async()=>{if(e)try{const{data:M,error:R}=await W.from("recompensas").select("*").eq("user_id",e.id).order("pontos_necessarios",{ascending:!0});if(R)throw R;i(M||[])}catch(M){console.error("Erro ao carregar recompensas:",M)}},m=async()=>{if(e)try{const{data:M,error:R}=await W.from("estatisticas_fidelidade").select("*").eq("user_id",e.id).single();if(R&&R.code!=="PGRST116")throw R;l(M)}catch(M){console.error("Erro ao carregar estatsticas:",M)}},g=async(M=10)=>{if(e)try{const{data:R,error:T}=await W.from("ranking_fidelidade").select("*").eq("user_id",e.id).lte("ranking",M).order("ranking",{ascending:!0});if(T)throw T;u(R||[])}catch(R){console.error("Erro ao carregar ranking:",R)}},y=async()=>{if(e)try{const{data:M,error:R}=await W.from("classes_fidelidade").select("*").eq("user_id",e.id).order("ordem",{ascending:!0});if(R)throw R;h(M||[])}catch(M){console.error("Erro ao carregar classes:",M)}},b=async M=>{if(!e)return null;try{if(r(!0),n){const{data:R,error:T}=await W.from("programas_fidelidade").update({...M,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(T)throw T;return s(R),V.success("Programa atualizado com sucesso!"),R}else{const{data:R,error:T}=await W.from("programas_fidelidade").insert({...M,user_id:e.id}).select().single();if(T)throw T;return s(R),V.success("Programa criado com sucesso!"),R}}catch(R){return console.error("Erro ao salvar programa:",R),V.error("Erro ao salvar programa de fidelidade"),null}finally{r(!1)}},w=async()=>{if(!(!n||!e))try{const{data:M,error:R}=await W.from("programas_fidelidade").update({ativo:!n.ativo}).eq("id",n.id).select().single();if(R)throw R;s(M),V.success(M.ativo?"Programa ativado!":"Programa desativado!")}catch(M){console.error("Erro ao alterar status do programa:",M),V.error("Erro ao alterar status do programa")}},j=async M=>{if(!e)return null;try{r(!0);const{data:R,error:T}=await W.from("recompensas").insert({...M,user_id:e.id}).select().single();if(T)throw T;return await v(),V.success("Recompensa criada com sucesso!"),R}catch(R){return console.error("Erro ao criar recompensa:",R),V.error("Erro ao criar recompensa"),null}finally{r(!1)}},N=async(M,R)=>{try{r(!0);const{data:T,error:D}=await W.from("recompensas").update({...R,updated_at:new Date().toISOString()}).eq("id",M).select().single();if(D)throw D;return await v(),V.success("Recompensa atualizada!"),T}catch(T){return console.error("Erro ao atualizar recompensa:",T),V.error("Erro ao atualizar recompensa"),null}finally{r(!1)}},_=async M=>{try{r(!0);const{error:R}=await W.from("recompensas").delete().eq("id",M);if(R)throw R;await v(),V.success("Recompensa excluda!")}catch(R){console.error("Erro ao excluir recompensa:",R),V.error("Erro ao excluir recompensa")}finally{r(!1)}},S=async M=>{if(!e)return null;try{r(!0);const{data:R,error:T}=await W.from("classes_fidelidade").insert({...M,user_id:e.id}).select().single();if(T)throw T;return await y(),V.success("Classe criada com sucesso!"),R}catch(R){return console.error("Erro ao criar classe:",R),V.error("Erro ao criar classe"),null}finally{r(!1)}},C=async(M,R)=>{try{r(!0);const{data:T,error:D}=await W.from("classes_fidelidade").update({...R,updated_at:new Date().toISOString()}).eq("id",M).select().single();if(D)throw D;return await y(),V.success("Classe atualizada!"),T}catch(T){return console.error("Erro ao atualizar classe:",T),V.error("Erro ao atualizar classe"),null}finally{r(!1)}},k=async M=>{try{r(!0);const{error:R}=await W.from("classes_fidelidade").delete().eq("id",M);if(R)throw R;await y(),V.success("Classe excluda!")}catch(R){console.error("Erro ao excluir classe:",R),V.error("Erro ao excluir classe")}finally{r(!1)}},$=async M=>{if(!e)return null;try{const{data:R,error:T}=await W.from("saldo_pontos").select("*").eq("user_id",e.id).eq("cliente_id",M).single();if(T&&T.code!=="PGRST116")throw T;return R}catch(R){return console.error("Erro ao buscar saldo:",R),null}},A=async M=>{if(!e)return null;try{const{data:R,error:T}=await W.from("niveis_fidelidade").select("*").eq("user_id",e.id).eq("cliente_id",M).single();if(T&&T.code!=="PGRST116")throw T;return R}catch(R){return console.error("Erro ao buscar nvel:",R),null}},P=async M=>{if(!e)return[];try{const{data:R,error:T}=await W.from("pontos_fidelidade").select("*").eq("user_id",e.id).eq("cliente_id",M).order("data_ganho",{ascending:!1}).limit(50);if(T)throw T;return R||[]}catch(R){return console.error("Erro ao buscar histrico:",R),[]}},O=async(M,R,T)=>{if(!e||!n)return null;try{r(!0);const D=n.expiracao_pontos_dias>0?new Date(Date.now()+n.expiracao_pontos_dias*24*60*60*1e3).toISOString().split("T")[0]:null,{data:I,error:U}=await W.from("pontos_fidelidade").insert({user_id:e.id,cliente_id:M,pontos:R,origem:"bonus",descricao:T,data_expiracao:D}).select().single();if(U)throw U;return V.success(`${R} pontos adicionados!`),I}catch(D){return console.error("Erro ao adicionar pontos:",D),V.error("Erro ao adicionar pontos"),null}finally{r(!1)}};return x.useEffect(()=>{if(!e)return;const M=W.channel("fidelidade-changes").on("postgres_changes",{event:"*",schema:"public",table:"programas_fidelidade",filter:`user_id=eq.${e.id}`},()=>{p()}).on("postgres_changes",{event:"*",schema:"public",table:"recompensas",filter:`user_id=eq.${e.id}`},()=>{v()}).on("postgres_changes",{event:"*",schema:"public",table:"classes_fidelidade",filter:`user_id=eq.${e.id}`},()=>{y()}).subscribe();return()=>{W.removeChannel(M)}},[e]),x.useEffect(()=>{e&&(p(),v(),m(),g(),y())},[e]),{loading:t,programa:n,recompensas:o,estatisticas:c,ranking:d,classes:f,salvarPrograma:b,togglePrograma:w,criarRecompensa:j,atualizarRecompensa:N,excluirRecompensa:_,criarClasse:S,atualizarClasse:C,excluirClasse:k,buscarSaldoCliente:$,buscarNivelCliente:A,buscarHistoricoPontos:P,adicionarPontosManual:O,carregarRanking:g,recarregar:()=>{p(),v(),m(),g(),y()}}},K_e=()=>{const{programa:e,loading:t,salvarPrograma:r,togglePrograma:n}=Kc(),[s,o]=x.useState(!1),[i,c]=x.useState({nome:e?.nome||"Programa de Fidelidade",pontos_por_real:e?.pontos_por_real||.1,expiracao_pontos_dias:e?.expiracao_pontos_dias||365,data_inicio:e?.data_inicio||new Date().toISOString().split("T")[0]}),l=async u=>{u.preventDefault(),await r(i)&&o(!1)},d=()=>{e&&c({nome:e.nome,pontos_por_real:e.pontos_por_real,expiracao_pontos_dias:e.expiracao_pontos_dias,data_inicio:e.data_inicio}),o(!0)};return a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Co,{className:"h-5 w-5 text-primary"}),a.jsx(se,{children:"Configuraes do Programa"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{htmlFor:"programa-ativo",children:"Ativo"}),a.jsx(Mt,{id:"programa-ativo",checked:e.ativo,onCheckedChange:n})]}),!s&&e&&a.jsx(B,{variant:"outline",size:"sm",onClick:d,children:"Editar"})]})]}),a.jsx(ke,{children:"Configure as regras do seu programa de fidelidade"})]}),a.jsx(q,{children:!e&&!s?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"Voc ainda no configurou seu programa de fidelidade"}),a.jsx(B,{onClick:d,children:"Criar Programa"})]}):s?a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome",children:"Nome do Programa"}),a.jsx(ue,{id:"nome",value:i.nome,onChange:u=>c({...i,nome:u.target.value}),placeholder:"Ex: Clube VIP, Fidelidade Premium",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"pontos_por_real",children:"Pontos por Real Gasto"}),a.jsx(ue,{id:"pontos_por_real",type:"number",step:"0.01",min:"0",value:i.pontos_por_real,onChange:u=>c({...i,pontos_por_real:parseFloat(u.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:i.pontos_por_real>0&&`Clientes ganharo ${(i.pontos_por_real*100).toFixed(0)} pontos a cada R$ 100,00 gastos`})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"expiracao",children:"Validade dos Pontos (dias)"}),a.jsx(ue,{id:"expiracao",type:"number",min:"0",value:i.expiracao_pontos_dias,onChange:u=>c({...i,expiracao_pontos_dias:parseInt(u.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:i.expiracao_pontos_dias===0?"Pontos no expiram":`Pontos expiram aps ${i.expiracao_pontos_dias} dias`})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"data_inicio",children:"Data de Incio"}),a.jsx(ue,{id:"data_inicio",type:"date",value:i.data_inicio,onChange:u=>c({...i,data_inicio:u.target.value}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Data em que o programa comea a valer"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(B,{type:"submit",disabled:t,children:[a.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Salvar"]}),e&&a.jsx(B,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"})]})]}):a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-muted-foreground",children:"Nome"}),a.jsx("p",{className:"text-lg font-medium",children:e?.nome})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-muted-foreground",children:"Pontos por Real"}),a.jsxs("p",{className:"text-lg font-medium",children:[(e.pontos_por_real*100).toFixed(0)," pontos / R$ 100"]})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-muted-foreground",children:"Validade"}),a.jsx("p",{className:"text-lg font-medium",children:e.expiracao_pontos_dias===0?"Pontos no expiram":`${e.expiracao_pontos_dias} dias`})]}),a.jsxs("div",{children:[a.jsx(K,{className:"text-muted-foreground",children:"Data de Incio"}),a.jsx("p",{className:"text-lg font-medium",children:new Date(e.data_inicio).toLocaleDateString("pt-BR")})]})]})})]})},Y_e=()=>{const{estatisticas:e}=Kc(),t=[{title:"Clientes no Programa",value:e?.total_clientes_programa||0,icon:mn,color:"text-info"},{title:"Pontos Distribudos",value:e?.total_pontos_distribuidos||0,icon:cm,color:"text-success"},{title:"Pontos Resgatados",value:e?.total_pontos_resgatados||0,icon:Fd,color:"text-primary"},{title:"Clientes Ativos (30d)",value:e?.clientes_ativos_30d||0,icon:Ut,color:"text-warning"}];return a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(r=>{const n=r.icon;return a.jsxs(F,{children:[a.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(se,{className:"text-sm font-medium",children:r.title}),a.jsx(n,{className:`h-4 w-4 ${r.color}`})]}),a.jsx(q,{children:a.jsx("div",{className:"text-2xl font-bold",children:r.value.toLocaleString()})})]},r.title)})})},Z_e=()=>{const{recompensas:e,classes:t,loading:r,criarRecompensa:n,atualizarRecompensa:s,excluirRecompensa:o}=Kc(),[i,c]=x.useState(!1),[l,d]=x.useState(null),[u,f]=x.useState({nome:"",descricao:"",pontos_necessarios:0,tipo:"desconto_percentual",valor_desconto:0,classe_id:void 0,validade_dias:30}),h=()=>{f({nome:"",descricao:"",pontos_necessarios:0,tipo:"desconto_percentual",valor_desconto:0,classe_id:void 0,validade_dias:30}),d(null)},p=async b=>{b.preventDefault(),l?await s(l,u):await n(u),c(!1),h()},v=b=>{f({nome:b.nome,descricao:b.descricao||"",pontos_necessarios:b.pontos_necessarios,tipo:b.tipo,valor_desconto:b.valor_desconto,classe_id:b.classe_id,validade_dias:b.validade_dias}),d(b.id),c(!0)},m=async b=>{confirm("Tem certeza que deseja excluir esta recompensa?")&&await o(b)},g=b=>({desconto_percentual:"Desconto %",desconto_valor:"Desconto R$",servico_gratis:"Servio Grtis"})[b]||b,y=b=>b&&t.find(j=>j.id===b)?.nome||"Todas";return a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fd,{className:"h-5 w-5 text-primary"}),a.jsx(se,{children:"Recompensas"})]}),a.jsxs(Sr,{open:i,onOpenChange:b=>{c(b),b||h()},children:[a.jsx(Wc,{asChild:!0,children:a.jsxs(B,{children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nova Recompensa"]})}),a.jsxs(gr,{className:"max-w-2xl",children:[a.jsxs(Cr,{children:[a.jsx(Pr,{children:l?"Editar Recompensa":"Nova Recompensa"}),a.jsx(kn,{children:"Configure uma recompensa para seus clientes fiis"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsx(K,{htmlFor:"nome",children:"Nome da Recompensa"}),a.jsx(ue,{id:"nome",value:u.nome,onChange:b=>f({...u,nome:b.target.value}),placeholder:"Ex: 10% de desconto",required:!0})]}),a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsx(K,{htmlFor:"descricao",children:"Descrio"}),a.jsx(fr,{id:"descricao",value:u.descricao,onChange:b=>f({...u,descricao:b.target.value}),placeholder:"Detalhes da recompensa...",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"pontos",children:"Pontos Necessrios"}),a.jsx(ue,{id:"pontos",type:"number",min:"0",value:u.pontos_necessarios,onChange:b=>f({...u,pontos_necessarios:parseInt(b.target.value)}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"tipo",children:"Tipo"}),a.jsxs(Ue,{value:u.tipo,onValueChange:b=>f({...u,tipo:b}),children:[a.jsx(Fe,{children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"desconto_percentual",children:"Desconto %"}),a.jsx(ne,{value:"desconto_valor",children:"Desconto R$"}),a.jsx(ne,{value:"servico_gratis",children:"Servio Grtis"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"valor",children:"Valor do Desconto"}),a.jsx(ue,{id:"valor",type:"number",min:"0",step:u.tipo==="desconto_percentual"?"1":"0.01",value:u.valor_desconto,onChange:b=>f({...u,valor_desconto:parseFloat(b.target.value)}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"classe",children:"Classe Exclusiva"}),a.jsxs(Ue,{value:u.classe_id||"todas",onValueChange:b=>f({...u,classe_id:b==="todas"?void 0:b}),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Todas as classes"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"todas",children:"Todas as classes"}),t.map(b=>a.jsx(ne,{value:b.id,children:b.nome},b.id))]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrinja esta recompensa a uma classe especfica"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"validade",children:"Validade (dias)"}),a.jsx(ue,{id:"validade",type:"number",min:"1",value:u.validade_dias,onChange:b=>f({...u,validade_dias:parseInt(b.target.value)}),required:!0})]})]}),a.jsxs(B,{type:"submit",disabled:r,className:"w-full",children:[l?"Atualizar":"Criar"," Recompensa"]})]})]})]})]}),a.jsx(ke,{children:"Configure recompensas que seus clientes podem resgatar com pontos"})]}),a.jsx(q,{children:e.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma recompensa cadastrada. Crie recompensas para incentivar seus clientes."})}):a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Nome"}),a.jsx(be,{children:"Tipo"}),a.jsx(be,{children:"Pontos"}),a.jsx(be,{children:"Valor"}),a.jsx(be,{children:"Classe"}),a.jsx(be,{children:"Status"}),a.jsx(be,{className:"text-right",children:"Aes"})]})}),a.jsx(Rr,{children:e.map(b=>a.jsxs(ht,{children:[a.jsx(xe,{className:"font-medium",children:b.nome}),a.jsx(xe,{children:g(b.tipo)}),a.jsxs(xe,{children:[b.pontos_necessarios," pts"]}),a.jsx(xe,{children:b.tipo==="desconto_percentual"?`${b.valor_desconto}%`:b.tipo==="desconto_valor"?`R$ ${b.valor_desconto.toFixed(2)}`:"-"}),a.jsx(xe,{children:a.jsx(pe,{variant:"outline",children:y(b.classe_id)})}),a.jsx(xe,{children:a.jsx(pe,{variant:b.ativo?"default":"secondary",children:b.ativo?"Ativo":"Inativo"})}),a.jsx(xe,{className:"text-right",children:a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>v(b),children:a.jsx(fm,{className:"h-4 w-4"})}),a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>m(b.id),children:a.jsx(pr,{className:"h-4 w-4"})})]})})]},b.id))})]})})]})},X_e=({cliente:e,open:t,onOpenChange:r,onResgate:n})=>{const{recompensas:s}=Kc(),[o,i]=x.useState(""),[c,l]=x.useState(!1),[d,u]=x.useState([]);x.useEffect(()=>{const h=s.filter(p=>!p.ativo||p.pontos_necessarios>e.pontos_disponiveis?!1:(p.classe_id&&e.classe_nome,!0));u(h)},[s,e]);const f=async()=>{if(!o){V.error("Selecione uma recompensa");return}const h=s.find(p=>p.id===o);if(h)try{l(!0);const p=new Date;p.setDate(p.getDate()+h.validade_dias);const{data:v,error:m}=await W.from("historico_resgates").insert({user_id:e.user_id,cliente_id:e.cliente_id,recompensa_id:h.id,pontos_gastos:h.pontos_necessarios,data_expiracao:p.toISOString().split("T")[0]}).select().single();if(m)throw m;const{error:g}=await W.from("pontos_fidelidade").insert({user_id:e.user_id,cliente_id:e.cliente_id,pontos:-h.pontos_necessarios,origem:"resgate",origem_id:v.id,descricao:`Resgate: ${h.nome}`});if(g)throw g;const y=` *Recompensa Resgatada!*

Ol ${e.cliente_nome}!

Voc resgatou: *${h.nome}*
Pontos gastos: ${h.pontos_necessarios}
Pontos restantes: ${e.pontos_disponiveis-h.pontos_necessarios}

${h.descricao||""}

Vlido at: ${new Date(p).toLocaleDateString("pt-BR")}

Apresente esta mensagem no seu prximo atendimento! `,w=`https://wa.me/55${e.telefone.replace(/\D/g,"")}?text=${encodeURIComponent(y)}`;window.open(w,"_blank"),V.success("Resgate realizado! WhatsApp aberto para enviar confirmao."),n(),r(!1)}catch(p){console.error("Erro ao resgatar recompensa:",p),V.error("Erro ao processar resgate")}finally{l(!1)}};return a.jsx(Sr,{open:t,onOpenChange:r,children:a.jsxs(gr,{children:[a.jsxs(Cr,{children:[a.jsxs(Pr,{className:"flex items-center gap-2",children:[a.jsx(Fd,{className:"h-5 w-5 text-primary"}),"Resgatar Recompensa"]}),a.jsxs(kn,{children:["Cliente: ",e.cliente_nome]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Zr,{children:[a.jsx(Ld,{className:"h-4 w-4"}),a.jsxs(Xr,{children:["Pontos disponveis: ",a.jsx("strong",{children:e.pontos_disponiveis})]})]}),d.length===0?a.jsx(Zr,{children:a.jsx(Xr,{children:"Este cliente no tem pontos suficientes para resgatar nenhuma recompensa no momento."})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{children:"Selecione a Recompensa"}),a.jsxs(Ue,{value:o,onValueChange:i,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Escolha uma recompensa"})}),a.jsx(ze,{children:d.map(h=>a.jsxs(ne,{value:h.id,children:[h.nome," - ",h.pontos_necessarios," pontos"]},h.id))})]})]}),o&&(()=>{const h=s.find(p=>p.id===o);return h?a.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50 space-y-2",children:[a.jsx("h4",{className:"font-medium",children:h.nome}),h.descricao&&a.jsx("p",{className:"text-sm text-muted-foreground",children:h.descricao}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{children:["Pontos necessrios: ",a.jsx("strong",{children:h.pontos_necessarios})]}),a.jsxs("p",{children:["Validade: ",a.jsxs("strong",{children:[h.validade_dias," dias"]})]})]})]}):null})(),a.jsx(B,{onClick:f,disabled:!o||c,className:"w-full",children:c?"Processando...":"Resgatar e Enviar WhatsApp"})]})]})]})})},J_e=()=>{const{ranking:e,carregarRanking:t}=Kc(),[r,n]=x.useState(null),[s,o]=x.useState(!1),i=u=>{n(u),o(!0)},c=()=>{t()},l=u=>u.classe_nome&&u.classe_cor?{color:"border",label:u.classe_nome,style:{backgroundColor:u.classe_cor,color:"#fff"}}:{color:"bg-muted text-muted-foreground",label:"Sem classe",style:void 0},d=u=>u===1?a.jsx(iw,{className:"h-5 w-5 text-accent"}):u===2?a.jsx(XL,{className:"h-5 w-5 text-muted-foreground"}):u===3?a.jsx(cm,{className:"h-5 w-5 text-warning"}):a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["#",u]});return a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(iw,{className:"h-5 w-5 text-primary"}),a.jsx(se,{children:"Top 10 Clientes"})]}),a.jsx(ke,{children:"Ranking dos clientes mais engajados no programa"})]}),a.jsx(q,{children:e.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum cliente no programa ainda"}):a.jsx("div",{className:"space-y-4",children:e.map(u=>{const f=l(u);return a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex items-center justify-center w-10",children:d(u.ranking)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:u.cliente_nome}),a.jsx("div",{className:"text-sm text-muted-foreground",children:u.telefone})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-lg font-bold text-primary",children:[u.pontos_totais," pts"]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.pontos_disponiveis," disponveis"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{className:f.color,style:f.style,children:f.label}),u.pontos_disponiveis>0&&a.jsxs(B,{size:"sm",variant:"outline",onClick:()=>i(u),children:[a.jsx(Fd,{className:"h-4 w-4 mr-1"}),"Resgatar"]})]})]})]},u.cliente_id)})})}),r&&a.jsx(X_e,{cliente:r,open:s,onOpenChange:o,onResgate:c})]})},Q_e=()=>{const{classes:e,loading:t,criarClasse:r,atualizarClasse:n,excluirClasse:s}=Kc(),[o,i]=x.useState(!1),[c,l]=x.useState(null),[d,u]=x.useState({nome:"",pontos_minimos:0,cor:"#94a3b8",beneficios:"",ordem:e.length}),f=()=>{u({nome:"",pontos_minimos:0,cor:"#94a3b8",beneficios:"",ordem:e.length}),l(null)},h=async m=>{m.preventDefault(),(c?await n(c,d):await r(d))&&(i(!1),f())},p=m=>{u({nome:m.nome,pontos_minimos:m.pontos_minimos,cor:m.cor,beneficios:m.beneficios||"",ordem:m.ordem}),l(m.id),i(!0)},v=async m=>{confirm("Deseja realmente excluir esta classe?")&&await s(m)};return a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cm,{className:"h-5 w-5 text-primary"}),a.jsx(se,{children:"Classes de Fidelidade"})]}),a.jsxs(Sr,{open:o,onOpenChange:m=>{i(m),m||f()},children:[a.jsx(Wc,{asChild:!0,children:a.jsxs(B,{children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nova Classe"]})}),a.jsxs(gr,{children:[a.jsx(Cr,{children:a.jsx(Pr,{children:c?"Editar Classe":"Nova Classe"})}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome",children:"Nome da Classe"}),a.jsx(ue,{id:"nome",value:d.nome,onChange:m=>u({...d,nome:m.target.value}),placeholder:"Ex: Bronze, Prata, Ouro, Platina",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"pontos_minimos",children:"Pontos Mnimos"}),a.jsx(ue,{id:"pontos_minimos",type:"number",min:"0",value:d.pontos_minimos,onChange:m=>u({...d,pontos_minimos:parseInt(m.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pontos necessrios para alcanar esta classe"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cor",children:"Cor"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ue,{id:"cor",type:"color",value:d.cor,onChange:m=>u({...d,cor:m.target.value}),className:"w-20"}),a.jsx(ue,{type:"text",value:d.cor,onChange:m=>u({...d,cor:m.target.value}),placeholder:"#94a3b8"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"beneficios",children:"Benefcios"}),a.jsx(fr,{id:"beneficios",value:d.beneficios,onChange:m=>u({...d,beneficios:m.target.value}),placeholder:"Descreva os benefcios desta classe...",rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"ordem",children:"Ordem de Exibio"}),a.jsx(ue,{id:"ordem",type:"number",min:"0",value:d.ordem,onChange:m=>u({...d,ordem:parseInt(m.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Menor nmero aparece primeiro"})]}),a.jsxs(B,{type:"submit",disabled:t,className:"w-full",children:[c?"Atualizar":"Criar"," Classe"]})]})]})]})]}),a.jsx(ke,{children:"Configure as classes/nveis do seu programa de fidelidade"})]}),a.jsx(q,{children:e.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma classe configurada. Crie classes para organizar seus clientes por nvel de fidelidade."})}):a.jsxs(Dr,{children:[a.jsx(Ir,{children:a.jsxs(ht,{children:[a.jsx(be,{children:"Ordem"}),a.jsx(be,{children:"Nome"}),a.jsx(be,{children:"Pontos Mnimos"}),a.jsx(be,{children:"Cor"}),a.jsx(be,{children:"Benefcios"}),a.jsx(be,{className:"text-right",children:"Aes"})]})}),a.jsx(Rr,{children:e.map(m=>a.jsxs(ht,{children:[a.jsx(xe,{children:m.ordem}),a.jsx(xe,{className:"font-medium",children:m.nome}),a.jsxs(xe,{children:[m.pontos_minimos," pts"]}),a.jsx(xe,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:m.cor}}),a.jsx("span",{className:"text-sm",children:m.cor})]})}),a.jsx(xe,{className:"max-w-xs truncate",children:m.beneficios||"-"}),a.jsx(xe,{className:"text-right",children:a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>p(m),children:a.jsx(fm,{className:"h-4 w-4"})}),a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>v(m.id),children:a.jsx(pr,{className:"h-4 w-4"})})]})})]},m.id))})]})})]})};function e1e(){return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(cm,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Programa de Fidelidade"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Recompense seus clientes mais fiis e aumente o engajamento"})]})]}),a.jsx(Y_e,{}),a.jsxs(Ia,{defaultValue:"configuracao",className:"space-y-6",children:[a.jsxs(ua,{className:"grid w-full grid-cols-3",children:[a.jsx(rt,{value:"configuracao",children:"Configurao"}),a.jsx(rt,{value:"recompensas",children:"Recompensas"}),a.jsx(rt,{value:"clientes",children:"Clientes"})]}),a.jsxs(nt,{value:"configuracao",className:"space-y-6",children:[a.jsx(K_e,{}),a.jsx(Q_e,{})]}),a.jsx(nt,{value:"recompensas",className:"space-y-6",children:a.jsx(Z_e,{})}),a.jsx(nt,{value:"clientes",className:"space-y-6",children:a.jsx(J_e,{})})]})]})}function vu(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),s=async()=>{try{const{data:{user:l}}=await W.auth.getUser();if(!l)return;const{data:d,error:u}=await W.from("produtos").select("*").eq("user_id",l.id).order("nome");if(u)throw u;t(d||[])}catch(l){V.error("Erro ao carregar produtos: "+l.message)}finally{n(!1)}},o=async l=>{try{const{data:{user:d}}=await W.auth.getUser();if(!d)throw new Error("Usurio no autenticado");const{error:u}=await W.from("produtos").insert([{...l,user_id:d.id,estoque_atual:0}]);if(u)throw u;V.success("Produto cadastrado com sucesso!"),await s()}catch(d){throw V.error("Erro ao cadastrar produto: "+d.message),d}},i=async(l,d)=>{try{const{error:u}=await W.from("produtos").update(d).eq("id",l);if(u)throw u;V.success("Produto atualizado com sucesso!"),await s()}catch(u){throw V.error("Erro ao atualizar produto: "+u.message),u}},c=async l=>{try{const{error:d}=await W.from("produtos").update({ativo:!1}).eq("id",l);if(d)throw d;V.success("Produto desativado com sucesso!"),await s()}catch(d){throw V.error("Erro ao desativar produto: "+d.message),d}};return x.useEffect(()=>{s()},[]),{produtos:e,loading:r,createProduto:o,updateProduto:i,deleteProduto:c,recarregar:s}}function Hp(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),s=async()=>{try{const{data:{user:l}}=await W.auth.getUser();if(!l)return;const{data:d,error:u}=await W.from("fornecedores").select("*").eq("user_id",l.id).order("nome");if(u)throw u;t(d||[])}catch(l){V.error("Erro ao carregar fornecedores: "+l.message)}finally{n(!1)}},o=async l=>{try{const{data:{user:d}}=await W.auth.getUser();if(!d)throw new Error("Usurio no autenticado");const{error:u}=await W.from("fornecedores").insert([{...l,user_id:d.id}]);if(u)throw u;V.success("Fornecedor cadastrado com sucesso!"),await s()}catch(d){throw V.error("Erro ao cadastrar fornecedor: "+d.message),d}},i=async(l,d)=>{try{const{error:u}=await W.from("fornecedores").update(d).eq("id",l);if(u)throw u;V.success("Fornecedor atualizado com sucesso!"),await s()}catch(u){throw V.error("Erro ao atualizar fornecedor: "+u.message),u}},c=async l=>{try{const{error:d}=await W.from("fornecedores").delete().eq("id",l);if(d)throw d;V.success("Fornecedor excludo com sucesso!"),await s()}catch(d){throw V.error("Erro ao excluir fornecedor: "+d.message),d}};return x.useEffect(()=>{s()},[]),{fornecedores:e,loading:r,createFornecedor:o,updateFornecedor:i,deleteFornecedor:c,recarregar:s}}function gj(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),s=async()=>{try{const{data:{user:l}}=await W.auth.getUser();if(!l)return;const{data:d,error:u}=await W.from("categorias_produtos").select("*").eq("user_id",l.id).order("tipo",{ascending:!0}).order("nome",{ascending:!0});if(u)throw u;t(d||[])}catch(l){V.error("Erro ao carregar categorias: "+l.message)}finally{n(!1)}},o=async l=>{try{const{data:{user:d}}=await W.auth.getUser();if(!d)throw new Error("Usurio no autenticado");const{error:u}=await W.from("categorias_produtos").insert([{...l,user_id:d.id}]);if(u)throw u;V.success("Categoria criada com sucesso!"),await s()}catch(d){throw V.error("Erro ao criar categoria: "+d.message),d}},i=async(l,d)=>{try{const{error:u}=await W.from("categorias_produtos").update(d).eq("id",l);if(u)throw u;V.success("Categoria atualizada com sucesso!"),await s()}catch(u){throw V.error("Erro ao atualizar categoria: "+u.message),u}},c=async l=>{try{const{error:d}=await W.from("categorias_produtos").delete().eq("id",l);if(d)throw d;V.success("Categoria excluda com sucesso!"),await s()}catch(d){throw V.error("Erro ao excluir categoria: "+d.message),d}};return x.useEffect(()=>{s()},[]),{categorias:e,loading:r,createCategoria:o,updateCategoria:i,deleteCategoria:c,recarregar:s}}function t1e({produto:e,onSuccess:t,onCancel:r}){const{createProduto:n,updateProduto:s}=vu(),{fornecedores:o}=Hp(),{categorias:i}=gj(),[c,l]=x.useState({nome:"",descricao:"",codigo_barras:"",categoria:"uso_profissional",fornecedor_id:"",estoque_minimo:0,unidade_medida:"un",preco_custo:0,preco_venda:0,ativo:!0});x.useEffect(()=>{e&&l({nome:e.nome,descricao:e.descricao||"",codigo_barras:e.codigo_barras||"",categoria:e.categoria,fornecedor_id:e.fornecedor_id||"",estoque_minimo:e.estoque_minimo,unidade_medida:e.unidade_medida,preco_custo:e.preco_custo,preco_venda:e.preco_venda,ativo:e.ativo})},[e]);const d=async u=>{u.preventDefault();try{e?await s(e.id,c):await n(c),t()}catch(f){console.error("Erro ao salvar produto:",f)}};return a.jsxs("form",{onSubmit:d,className:"space-y-5 sm:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome",className:"text-sm sm:text-base",children:"Nome *"}),a.jsx(ue,{id:"nome",required:!0,className:"h-12 sm:h-11 text-base sm:text-sm",value:c.nome,onChange:u=>l({...c,nome:u.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"categoria",children:"Tipo *"}),a.jsxs(Ue,{value:c.categoria,onValueChange:u=>l({...c,categoria:u}),children:[a.jsx(Fe,{children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"uso_profissional",children:"Uso Profissional"}),a.jsx(ne,{value:"revenda",children:"Revenda"}),a.jsx(ne,{value:"consumo",children:"Consumo"})]})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.categoria==="revenda"&&"Produtos para revender aos clientes",c.categoria==="uso_profissional"&&"Produtos usados em procedimentos",c.categoria==="consumo"&&"Produtos de uso prprio do salo"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"categoria_id",children:"Categoria Personalizada"}),a.jsxs(Ue,{value:c.categoria_id||"none",onValueChange:u=>l({...c,categoria_id:u==="none"?void 0:u}),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Nenhuma"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"none",children:"Nenhuma"}),i.filter(u=>u.tipo===c.categoria&&u.ativo).map(u=>a.jsx(ne,{value:u.id,children:u.nome},u.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"fornecedor_id",children:"Fornecedor"}),a.jsxs(Ue,{value:c.fornecedor_id,onValueChange:u=>l({...c,fornecedor_id:u}),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um fornecedor"})}),a.jsx(ze,{children:o.map(u=>a.jsx(ne,{value:u.id,children:u.nome},u.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"codigo_barras",children:"Cdigo de Barras"}),a.jsx(ue,{id:"codigo_barras",value:c.codigo_barras,onChange:u=>l({...c,codigo_barras:u.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"estoque_minimo",children:"Estoque Mnimo *"}),a.jsx(ue,{id:"estoque_minimo",type:"number",min:"0",step:"0.01",required:!0,value:c.estoque_minimo,onChange:u=>l({...c,estoque_minimo:parseFloat(u.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"unidade_medida",children:"Unidade de Medida *"}),a.jsx(ue,{id:"unidade_medida",required:!0,value:c.unidade_medida,onChange:u=>l({...c,unidade_medida:u.target.value}),placeholder:"Ex: un, kg, L"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"preco_custo",children:"Preo de Custo (R$) *"}),a.jsx(ue,{id:"preco_custo",type:"number",min:"0",step:"0.01",required:!0,value:c.preco_custo,onChange:u=>l({...c,preco_custo:parseFloat(u.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"preco_venda",children:"Preo de Venda (R$) *"}),a.jsx(ue,{id:"preco_venda",type:"number",min:"0",step:"0.01",required:!0,value:c.preco_venda,onChange:u=>l({...c,preco_venda:parseFloat(u.target.value)||0})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"descricao",children:"Descrio"}),a.jsx(fr,{id:"descricao",value:c.descricao,onChange:u=>l({...c,descricao:u.target.value}),rows:3})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{id:"ativo",checked:c.ativo,onCheckedChange:u=>l({...c,ativo:u})}),a.jsx(K,{htmlFor:"ativo",children:"Produto Ativo"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end pt-4",children:[a.jsx(B,{type:"button",variant:"outline",onClick:r,className:"h-11 btn-touch sm:flex-1",children:"Cancelar"}),a.jsx(B,{type:"submit",className:"h-11 btn-touch sm:flex-1",children:e?"Atualizar":"Cadastrar"})]})]})}function r1e(){const{produtos:e,loading:t,deleteProduto:r}=vu(),[n,s]=x.useState(null),[o,i]=x.useState(!1),c=async(d,u)=>{confirm(`Desativar o produto "${u}"? Ele ficar oculto mas o histrico ser preservado.`)&&await r(d)},l=d=>({uso_profissional:"Uso Profissional",revenda:"Revenda",consumo:"Consumo"})[d]||d;return t?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Produtos"}),a.jsxs(B,{onClick:()=>{s(null),i(!0)},children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Novo Produto"]})]}),o&&a.jsx(F,{className:"p-6",children:a.jsx(t1e,{produto:n,onSuccess:()=>{i(!1),s(null)},onCancel:()=>{i(!1),s(null)}})}),a.jsxs("div",{className:"grid gap-3 sm:gap-4",children:[e.map(d=>a.jsx(F,{className:"p-4 sm:p-5 border-border/50 bg-card/50 backdrop-blur-sm",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsxs("div",{className:"flex-1 w-full min-w-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:d.nome}),a.jsx(pe,{variant:d.ativo?"default":"secondary",className:"text-xs h-5",children:d.ativo?"Ativo":"Inativo"}),a.jsx(pe,{variant:"outline",className:"text-xs h-5",children:l(d.categoria)}),d.estoque_atual<=d.estoque_minimo&&a.jsxs(pe,{variant:"destructive",className:"flex items-center gap-1 text-xs h-5",children:[a.jsx(Nr,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden xs:inline",children:"Estoque Baixo"}),a.jsx("span",{className:"xs:hidden",children:"Baixo"})]})]}),d.descricao&&a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:d.descricao}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Estoque:"}),a.jsxs("span",{className:"font-medium",children:[d.estoque_atual," ",d.unidade_medida]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Mnimo:"}),a.jsxs("span",{className:"font-medium",children:[d.estoque_minimo," ",d.unidade_medida]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Custo:"}),a.jsxs("span",{className:"font-medium",children:["R$ ",Number(d.preco_custo).toFixed(2)]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Venda:"}),a.jsxs("span",{className:"font-medium",children:["R$ ",Number(d.preco_venda).toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>{s(d),i(!0)},className:"flex-1 sm:flex-none h-10 btn-touch",children:[a.jsx(fm,{className:"h-3 w-3 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Editar"})]}),a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>c(d.id,d.nome),className:"flex-1 sm:flex-none h-10 btn-touch hover:bg-destructive/10 hover:text-destructive",children:[a.jsx(pr,{className:"h-3 w-3 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Desativar"})]})]})]})},d.id)),e.length===0&&a.jsx(F,{className:"p-8 text-center text-muted-foreground",children:"Nenhum produto cadastrado ainda."})]})]})}function n1e({fornecedor:e,onSuccess:t,onCancel:r}){const{createFornecedor:n,updateFornecedor:s}=Hp(),[o,i]=x.useState({nome:"",cnpj:"",telefone:"",email:"",endereco:"",cidade:"",estado:"",cep:"",observacoes:"",ativo:!0});x.useEffect(()=>{e&&i({nome:e.nome,cnpj:e.cnpj||"",telefone:e.telefone||"",email:e.email||"",endereco:e.endereco||"",cidade:e.cidade||"",estado:e.estado||"",cep:e.cep||"",observacoes:e.observacoes||"",ativo:e.ativo})},[e]);const c=async l=>{l.preventDefault();try{e?await s(e.id,o):await n(o),t()}catch(d){console.error("Erro ao salvar fornecedor:",d)}};return a.jsxs("form",{onSubmit:c,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome",children:"Nome *"}),a.jsx(ue,{id:"nome",required:!0,value:o.nome,onChange:l=>i({...o,nome:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cnpj",children:"CNPJ"}),a.jsx(ue,{id:"cnpj",value:o.cnpj,onChange:l=>i({...o,cnpj:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"telefone",children:"Telefone"}),a.jsx(ue,{id:"telefone",value:o.telefone,onChange:l=>i({...o,telefone:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"email",children:"E-mail"}),a.jsx(ue,{id:"email",type:"email",value:o.email,onChange:l=>i({...o,email:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cidade",children:"Cidade"}),a.jsx(ue,{id:"cidade",value:o.cidade,onChange:l=>i({...o,cidade:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"estado",children:"Estado"}),a.jsx(ue,{id:"estado",maxLength:2,value:o.estado,onChange:l=>i({...o,estado:l.target.value.toUpperCase()})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"cep",children:"CEP"}),a.jsx(ue,{id:"cep",value:o.cep,onChange:l=>i({...o,cep:l.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"endereco",children:"Endereo"}),a.jsx(ue,{id:"endereco",value:o.endereco,onChange:l=>i({...o,endereco:l.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"observacoes",children:"Observaes"}),a.jsx(fr,{id:"observacoes",value:o.observacoes,onChange:l=>i({...o,observacoes:l.target.value}),rows:3})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{id:"ativo",checked:o.ativo,onCheckedChange:l=>i({...o,ativo:l})}),a.jsx(K,{htmlFor:"ativo",children:"Fornecedor Ativo"})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),a.jsx(B,{type:"submit",children:e?"Atualizar":"Cadastrar"})]})]})}function a1e(){const{fornecedores:e,loading:t,deleteFornecedor:r}=Hp(),[n,s]=x.useState(null),[o,i]=x.useState(!1),c=async l=>{confirm("Tem certeza que deseja excluir este fornecedor?")&&await r(l)};return t?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Fornecedores"}),a.jsxs(B,{onClick:()=>{s(null),i(!0)},children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Novo Fornecedor"]})]}),o&&a.jsx(F,{className:"p-6",children:a.jsx(n1e,{fornecedor:n,onSuccess:()=>{i(!1),s(null)},onCancel:()=>{i(!1),s(null)}})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.map(l=>a.jsx(F,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:l.nome}),a.jsx(pe,{variant:l.ativo?"default":"secondary",children:l.ativo?"Ativo":"Inativo"})]}),l.cnpj&&a.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["CNPJ: ",l.cnpj]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[l.telefone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rs,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{children:l.telefone})]}),l.email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(um,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{children:l.email})]}),l.cidade&&l.estado&&a.jsxs("p",{className:"text-muted-foreground",children:[l.cidade," - ",l.estado]})]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx(B,{variant:"ghost",size:"icon",onClick:()=>{s(l),i(!0)},children:a.jsx(fm,{className:"h-4 w-4"})}),a.jsx(B,{variant:"ghost",size:"icon",onClick:()=>c(l.id),children:a.jsx(pr,{className:"h-4 w-4"})})]})]})},l.id)),e.length===0&&a.jsx(F,{className:"p-8 text-center text-muted-foreground col-span-2",children:"Nenhum fornecedor cadastrado ainda."})]})]})}function s1e({onSuccess:e}){const{createCompra:t}=hu(),{fornecedores:r}=Hp(),{produtos:n}=vu(),[s,o]=x.useState(""),[i,c]=x.useState(""),[l,d]=x.useState(new Date().toISOString().split("T")[0]),[u,f]=x.useState(""),[h,p]=x.useState(""),[v,m]=x.useState(""),[g,y]=x.useState([{produto_id:"",quantidade:1,valor_unitario:0,valor_total:0}]),b=()=>{y([...g,{produto_id:"",quantidade:1,valor_unitario:0,valor_total:0}])},w=S=>{y(g.filter((C,k)=>k!==S))},j=(S,C,k)=>{const $=[...g];$[S]={...$[S],[C]:k},(C==="quantidade"||C==="valor_unitario")&&($[S].valor_total=$[S].quantidade*$[S].valor_unitario),y($)},N=()=>g.reduce((S,C)=>S+C.valor_total,0),_=async S=>{if(S.preventDefault(),g.some(C=>!C.produto_id)){alert("Selecione um produto para cada item");return}try{await t({fornecedor_id:s||void 0,numero_nota:i||void 0,data_compra:l,data_vencimento:u||void 0,valor_total:N(),forma_pagamento:h||void 0,observacoes:v||void 0,itens:g}),e()}catch(C){console.error("Erro ao registrar compra:",C)}};return a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs(F,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Informaes da Compra"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(K,{children:"Fornecedor"}),a.jsxs(Ue,{value:s,onValueChange:o,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um fornecedor (opcional)"})}),a.jsx(ze,{children:r.map(S=>a.jsx(ne,{value:S.id,children:S.nome},S.id))})]})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Nmero da Nota"}),a.jsx(ue,{value:i,onChange:S=>c(S.target.value),placeholder:"Ex: NF-12345"})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Data da Compra"}),a.jsx(ue,{type:"date",value:l,onChange:S=>d(S.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Data de Vencimento"}),a.jsx(ue,{type:"date",value:u,onChange:S=>f(S.target.value)})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Forma de Pagamento"}),a.jsxs(Ue,{value:h,onValueChange:p,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"dinheiro",children:"Dinheiro"}),a.jsx(ne,{value:"pix",children:"PIX"}),a.jsx(ne,{value:"cartao_credito",children:"Carto de Crdito"}),a.jsx(ne,{value:"cartao_debito",children:"Carto de Dbito"}),a.jsx(ne,{value:"boleto",children:"Boleto"}),a.jsx(ne,{value:"a_prazo",children:"A Prazo"})]})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Observaes"}),a.jsx(fr,{value:v,onChange:S=>m(S.target.value),placeholder:"Observaes sobre a compra"})]})]})]}),a.jsxs(F,{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"font-semibold",children:"Itens da Compra"}),a.jsxs(B,{type:"button",variant:"outline",size:"sm",onClick:b,children:[a.jsx(wr,{className:"h-4 w-4 mr-1"}),"Adicionar Item"]})]}),a.jsx("div",{className:"space-y-4",children:g.map((S,C)=>a.jsx(F,{className:"p-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-end",children:[a.jsxs("div",{className:"md:col-span-5",children:[a.jsx(K,{children:"Produto"}),a.jsxs(Ue,{value:S.produto_id,onValueChange:k=>j(C,"produto_id",k),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o produto"})}),a.jsx(ze,{children:n.map(k=>a.jsx(ne,{value:k.id,children:k.nome},k.id))})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Quantidade"}),a.jsx(ue,{type:"number",min:"0",step:"0.01",value:S.quantidade,onChange:k=>j(C,"quantidade",parseFloat(k.target.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Valor Unitrio"}),a.jsx(ue,{type:"number",min:"0",step:"0.01",value:S.valor_unitario,onChange:k=>j(C,"valor_unitario",parseFloat(k.target.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Total"}),a.jsx(ue,{type:"number",value:S.valor_total.toFixed(2),disabled:!0})]}),a.jsx("div",{className:"md:col-span-1",children:a.jsx(B,{type:"button",variant:"outline",size:"icon",onClick:()=>w(C),disabled:g.length===1,children:a.jsx(pr,{className:"h-4 w-4"})})})]})},C))}),a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[a.jsx("span",{children:"Valor Total:"}),a.jsxs("span",{children:["R$ ",N().toFixed(2)]})]})})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{type:"button",variant:"outline",onClick:e,children:"Cancelar"}),a.jsx(B,{type:"submit",children:"Registrar Compra"})]})]})}function o1e(){const{compras:e,loading:t}=hu(),[r,n]=x.useState(!1),s=o=>{const i={pendente:"secondary",pago_parcial:"default",pago:"default",vencido:"destructive"},c={pendente:"Pendente",pago_parcial:"Pago Parcial",pago:"Pago",vencido:"Vencido"};return a.jsx(pe,{variant:i[o],children:c[o]})};return t?a.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):r?a.jsxs(F,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Registrar Nova Compra"}),a.jsx(s1e,{onSuccess:()=>n(!1)})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Histrico de Compras"}),a.jsxs(B,{onClick:()=>n(!0),children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nova Compra"]})]}),a.jsxs("div",{className:"grid gap-4",children:[e.map(o=>a.jsxs(F,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold",children:o.numero_nota?`Nota: ${o.numero_nota}`:`Compra #${o.id.slice(0,8)}`}),s(o.status_pagamento)]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Me(new Date(o.data_compra),"dd 'de' MMMM 'de' yyyy",{locale:Ve})})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold",children:["R$ ",Number(o.valor_total).toFixed(2)]}),o.valor_devido>0&&a.jsxs("p",{className:"text-sm text-destructive",children:["Devido: R$ ",Number(o.valor_devido).toFixed(2)]})]})]}),o.itens_compra&&o.itens_compra.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Itens:"}),a.jsx("div",{className:"space-y-1",children:o.itens_compra.map(i=>a.jsxs("div",{className:"text-sm flex justify-between",children:[a.jsxs("span",{children:[i.quantidade,"x - Produto ID: ",i.produto_id.slice(0,8)]}),a.jsxs("span",{children:["R$ ",Number(i.valor_total).toFixed(2)]})]},i.id))})]})]},o.id)),e.length===0&&a.jsx(F,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma compra registrada ainda."})]})]})}function i1e({categoria:e,onSuccess:t,onCancel:r}){const{createCategoria:n,updateCategoria:s}=gj(),[o,i]=x.useState({nome:"",tipo:"revenda",cor:"#94a3b8",ativo:!0});x.useEffect(()=>{e&&i({nome:e.nome,tipo:e.tipo,cor:e.cor||"#94a3b8",icone:e.icone,ativo:e.ativo})},[e]);const c=async d=>{d.preventDefault();try{e?await s(e.id,o):await n(o),t()}catch(u){console.error("Erro ao salvar categoria:",u)}},l=d=>({revenda:"Revenda",uso_profissional:"Uso Profissional",consumo:"Consumo"})[d];return a.jsxs("form",{onSubmit:c,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(K,{htmlFor:"nome",children:"Nome da Categoria"}),a.jsx(ue,{id:"nome",value:o.nome,onChange:d=>i({...o,nome:d.target.value}),placeholder:"Ex: Esmaltes, Shampoos, Material de Limpeza",required:!0})]}),a.jsxs("div",{children:[a.jsx(K,{htmlFor:"tipo",children:"Tipo"}),a.jsxs(Ue,{value:o.tipo,onValueChange:d=>i({...o,tipo:d}),children:[a.jsx(Fe,{children:a.jsx(qe,{})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"revenda",children:l("revenda")}),a.jsx(ne,{value:"uso_profissional",children:l("uso_profissional")}),a.jsx(ne,{value:"consumo",children:l("consumo")})]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[o.tipo==="revenda"&&"Produtos que voc compra para revender no salo",o.tipo==="uso_profissional"&&"Produtos usados em procedimentos com clientes",o.tipo==="consumo"&&"Produtos para uso prprio do salo"]})]}),a.jsxs("div",{children:[a.jsx(K,{htmlFor:"cor",children:"Cor"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ue,{id:"cor",type:"color",value:o.cor,onChange:d=>i({...o,cor:d.target.value}),className:"w-20 h-10"}),a.jsx(ue,{value:o.cor,onChange:d=>i({...o,cor:d.target.value}),placeholder:"#94a3b8"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(K,{htmlFor:"ativo",children:"Categoria Ativa"}),a.jsx(Mt,{id:"ativo",checked:o.ativo,onCheckedChange:d=>i({...o,ativo:d})})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),a.jsx(B,{type:"submit",children:e?"Atualizar":"Cadastrar"})]})]})}function c1e(){const{categorias:e,loading:t,deleteCategoria:r}=gj(),[n,s]=x.useState(!1),[o,i]=x.useState(),[c,l]=x.useState(null),d=p=>{i(p),s(!0)},u=async()=>{c&&(await r(c),l(null))},f=p=>({revenda:"Revenda",uso_profissional:"Uso Profissional",consumo:"Consumo"})[p],h=p=>({revenda:"default",uso_profissional:"secondary",consumo:"outline"})[p];return t?a.jsx("div",{children:"Carregando categorias..."}):n?a.jsxs(F,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:o?"Editar Categoria":"Nova Categoria"}),a.jsx(i1e,{categoria:o,onSuccess:()=>{s(!1),i(void 0)},onCancel:()=>{s(!1),i(void 0)}})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Categorias de Produtos"}),a.jsxs(B,{onClick:()=>s(!0),children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nova Categoria"]})]}),e.length===0?a.jsxs(F,{className:"p-8 text-center",children:[a.jsx(zd,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma categoria cadastrada. Crie categorias para organizar seus produtos!"})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(p=>a.jsxs(F,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.cor}}),a.jsx("h3",{className:"font-semibold",children:p.nome})]}),!p.ativo&&a.jsx(pe,{variant:"outline",children:"Inativa"})]}),a.jsx(pe,{variant:h(p.tipo),className:"mb-3",children:f(p.tipo)}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>d(p),className:"flex-1",children:[a.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Editar"]}),a.jsxs(B,{variant:"outline",size:"sm",onClick:()=>l(p.id),className:"flex-1",children:[a.jsx(pr,{className:"h-4 w-4 mr-1"}),"Excluir"]})]})]},p.id))}),a.jsx(sa,{open:!!c,onOpenChange:()=>l(null),children:a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsx($n,{children:"Confirmar excluso"}),a.jsx(Mn,{children:"Tem certeza que deseja excluir esta categoria? Os produtos associados no sero excludos, mas perdero a referncia  categoria."})]}),a.jsxs(Tn,{children:[a.jsx(oa,{children:"Cancelar"}),a.jsx(Dn,{onClick:u,children:"Excluir"})]})]})})]})}function l1e({onSuccess:e}){const{createVenda:t}=mu(),{produtos:r}=vu(),{clientes:n}=Kd(),[s,o]=x.useState(""),[i,c]=x.useState(new Date().toISOString().split("T")[0]),[l,d]=x.useState(""),[u,f]=x.useState(""),[h,p]=x.useState([{produto_id:"",quantidade:1,valor_unitario:0,valor_total:0}]),v=r.filter(j=>j.categoria==="revenda"&&j.ativo),m=()=>{p([...h,{produto_id:"",quantidade:1,valor_unitario:0,valor_total:0}])},g=j=>{p(h.filter((N,_)=>_!==j))},y=(j,N,_)=>{const S=[...h];if(S[j]={...S[j],[N]:_},N==="produto_id"){const C=r.find(k=>k.id===_);C&&(S[j].valor_unitario=C.preco_venda)}(N==="quantidade"||N==="valor_unitario")&&(S[j].valor_total=S[j].quantidade*S[j].valor_unitario),p(S)},b=()=>h.reduce((j,N)=>j+N.valor_total,0),w=async j=>{if(j.preventDefault(),h.some(N=>!N.produto_id)){alert("Selecione um produto para cada item");return}try{await t({cliente_id:s||void 0,data_venda:i,forma_pagamento:l||void 0,observacoes:u||void 0,itens:h}),e()}catch(N){console.error("Erro ao registrar venda:",N)}};return a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs(F,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Informaes da Venda"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(K,{children:"Cliente (opcional)"}),a.jsxs(Ue,{value:s,onValueChange:o,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione um cliente"})}),a.jsx(ze,{children:n.map(j=>a.jsx(ne,{value:j.id,children:j.nome},j.id))})]})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Data da Venda"}),a.jsx(ue,{type:"date",value:i,onChange:j=>c(j.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx(K,{children:"Forma de Pagamento"}),a.jsxs(Ue,{value:l,onValueChange:d,children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione"})}),a.jsxs(ze,{children:[a.jsx(ne,{value:"dinheiro",children:"Dinheiro"}),a.jsx(ne,{value:"pix",children:"PIX"}),a.jsx(ne,{value:"cartao_credito",children:"Carto de Crdito"}),a.jsx(ne,{value:"cartao_debito",children:"Carto de Dbito"})]})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Observaes"}),a.jsx(fr,{value:u,onChange:j=>f(j.target.value),placeholder:"Observaes sobre a venda"})]})]})]}),a.jsxs(F,{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"font-semibold",children:"Itens da Venda"}),a.jsxs(B,{type:"button",variant:"outline",size:"sm",onClick:m,children:[a.jsx(wr,{className:"h-4 w-4 mr-1"}),"Adicionar Item"]})]}),v.length===0&&a.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:'Nenhum produto de revenda cadastrado. Cadastre produtos com a categoria "Revenda" para poder vend-los.'}),a.jsx("div",{className:"space-y-4",children:h.map((j,N)=>a.jsx(F,{className:"p-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-end",children:[a.jsxs("div",{className:"md:col-span-5",children:[a.jsx(K,{children:"Produto"}),a.jsxs(Ue,{value:j.produto_id,onValueChange:_=>y(N,"produto_id",_),children:[a.jsx(Fe,{children:a.jsx(qe,{placeholder:"Selecione o produto"})}),a.jsx(ze,{children:v.map(_=>a.jsxs(ne,{value:_.id,children:[_.nome," - R$ ",_.preco_venda.toFixed(2)]},_.id))})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Quantidade"}),a.jsx(ue,{type:"number",min:"0",step:"0.01",value:j.quantidade,onChange:_=>y(N,"quantidade",parseFloat(_.target.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Valor Unitrio"}),a.jsx(ue,{type:"number",min:"0",step:"0.01",value:j.valor_unitario,onChange:_=>y(N,"valor_unitario",parseFloat(_.target.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(K,{children:"Total"}),a.jsx(ue,{type:"number",value:j.valor_total.toFixed(2),disabled:!0})]}),a.jsx("div",{className:"md:col-span-1",children:a.jsx(B,{type:"button",variant:"outline",size:"icon",onClick:()=>g(N),disabled:h.length===1,children:a.jsx(pr,{className:"h-4 w-4"})})})]})},N))}),a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[a.jsx("span",{children:"Valor Total:"}),a.jsxs("span",{children:["R$ ",b().toFixed(2)]})]})})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(B,{type:"button",variant:"outline",onClick:e,children:"Cancelar"}),a.jsx(B,{type:"submit",children:"Registrar Venda"})]})]})}function d1e(){const{vendas:e,loading:t}=mu(),[r,n]=x.useState(!1);return t?a.jsx("div",{children:"Carregando vendas..."}):r?a.jsxs(F,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Registrar Nova Venda"}),a.jsx(l1e,{onSuccess:()=>n(!1)})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Vendas de Produtos"}),a.jsxs(B,{onClick:()=>n(!0),children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nova Venda"]})]}),e.length===0?a.jsxs(F,{className:"p-8 text-center",children:[a.jsx(FP,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhuma venda registrada ainda."})]}):a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsx(F,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("h3",{className:"font-semibold",children:["Venda #",s.id.slice(0,8)]}),a.jsx(pe,{variant:s.status_pagamento==="pago"?"default":"secondary",children:s.status_pagamento==="pago"?"Pago":"Pendente"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("p",{children:["Data: ",Me(new Date(s.data_venda),"dd/MM/yyyy",{locale:Ve})]}),s.forma_pagamento&&a.jsxs("p",{children:["Pagamento: ",s.forma_pagamento]}),s.observacoes&&a.jsx("p",{className:"mt-2",children:s.observacoes})]}),s.itens_venda&&s.itens_venda.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Itens:"}),a.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:s.itens_venda.map(o=>a.jsxs("li",{children:[o.quantidade,"x - R$ ",o.valor_unitario.toFixed(2)," = R$ ",o.valor_total.toFixed(2)]},o.id))})]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-2xl font-bold",children:["R$ ",s.valor_total.toFixed(2)]})})]})},s.id))})]})}function u1e(){const[e,t]=x.useState("produtos"),{produtos:r}=vu(),{compras:n}=hu(),{vendas:s}=mu(),o={totalProdutos:r.length,produtosAtivos:r.filter(i=>i.ativo).length,estoqueTotal:r.reduce((i,c)=>i+c.estoque_atual,0),comprasRealizadas:n.length,vendasRealizadas:s.length};return a.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Produtos e Estoque"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Gerencie seus produtos, fornecedores e movimentaes de estoque"})]})}),a.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-5",children:[a.jsx(F,{className:"p-3 sm:p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg flex-shrink-0",children:a.jsx(Xa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:"Total de Produtos"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:o.totalProdutos})]})]})}),a.jsx(F,{className:"p-3 sm:p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg flex-shrink-0",children:a.jsx(Xa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:"Produtos Ativos"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:o.produtosAtivos})]})]})}),a.jsx(F,{className:"p-3 sm:p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg flex-shrink-0",children:a.jsx(Ut,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:"Estoque Total"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:o.estoqueTotal})]})]})}),a.jsx(F,{className:"p-3 sm:p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg flex-shrink-0",children:a.jsx(_f,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:"Compras Realizadas"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:o.comprasRealizadas})]})]})}),a.jsx(F,{className:"p-3 sm:p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg flex-shrink-0",children:a.jsx(dt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:"Vendas Realizadas"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:o.vendasRealizadas})]})]})})]}),a.jsxs(Ia,{value:e,onValueChange:t,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(ua,{className:"w-full",children:[a.jsxs(rt,{value:"produtos",className:"gap-2",children:[a.jsx(Xa,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xs:inline",children:"Produtos"})]}),a.jsxs(rt,{value:"fornecedores",className:"gap-2",children:[a.jsx(mn,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xs:inline",children:"Fornecedores"})]}),a.jsxs(rt,{value:"compras",className:"gap-2",children:[a.jsx(_f,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xs:inline",children:"Compras"})]}),a.jsxs(rt,{value:"categorias",className:"gap-2",children:[a.jsx(zd,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xs:inline",children:"Categorias"})]}),a.jsxs(rt,{value:"vendas",className:"gap-2",children:[a.jsx(dt,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xs:inline",children:"Vendas"})]})]}),a.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-background to-transparent pointer-events-none sm:hidden"})]}),a.jsx(nt,{value:"produtos",className:"space-y-4",children:a.jsx(r1e,{})}),a.jsx(nt,{value:"fornecedores",className:"space-y-4",children:a.jsx(a1e,{})}),a.jsx(nt,{value:"compras",className:"space-y-4",children:a.jsx(o1e,{})}),a.jsx(nt,{value:"categorias",className:"space-y-4",children:a.jsx(c1e,{})}),a.jsx(nt,{value:"vendas",className:"space-y-4",children:a.jsx(d1e,{})})]})]})}function f1e(){const e=Jr(),{subscription:t,isSubscriptionLoading:r,checkSubscription:n,session:s,user:o,setSubscription:i}=Rt(),[c,l]=x.useState(!1);x.useEffect(()=>{t?.status==="active"&&(console.log("[ASSINATURA] User has active subscription, redirecting to dashboard"),e("/",{replace:!0}))},[t,e]);const d=async()=>{if(!s){V.error("Voc precisa estar logado para assinar");return}l(!0);try{console.log("[SUBSCRIBE] Iniciando checkout...");const{data:m,error:g}=await W.functions.invoke("create-checkout");if(g){V.error("Erro ao criar sesso de checkout"),console.error(g);return}if(m?.message==="Already subscribed"&&m?.redirect){V.success("Voc j tem uma assinatura ativa!"),await n(),setTimeout(()=>e("/"),1500);return}m?.url&&(window.open(m.url,"_blank"),V.info("Complete o pagamento na janela que abriu. Seu status ser atualizado automaticamente."),setTimeout(()=>n(),5e3),setTimeout(()=>n(),1e4),setTimeout(()=>n(),2e4))}catch(m){console.error("Erro ao iniciar checkout:",m),V.error("Erro ao processar pagamento")}finally{l(!1)}},u=async()=>{l(!0);try{V.info("Verificando status da assinatura..."),await n(),V.success("Status atualizado!")}catch(m){console.error("Erro ao verificar status:",m),V.error("Erro ao verificar status")}finally{l(!1)}},f=async()=>{if(!s){V.error("Voc precisa estar logado");return}l(!0);try{const{data:m,error:g}=await W.functions.invoke("customer-portal",{headers:{Authorization:`Bearer ${s.access_token}`}});if(g){V.error("Erro ao abrir portal de gerenciamento"),console.error(g);return}m?.url&&window.open(m.url,"_blank")}catch(m){console.error("Erro ao abrir portal:",m),V.error("Erro ao abrir portal de gerenciamento")}finally{l(!1)}};if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Wn,{className:"h-8 w-8 animate-spin"})});const h=t?.subscribed,p=t?.status==="trial",v=t?.status==="expired";return t?.status,t?.status,a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:a.jsxs("div",{className:"container mx-auto py-12 px-4 max-w-5xl",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Sua Assinatura"}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"Gerencie seu plano e aproveite todos os recursos"})]}),h||p?a.jsxs("div",{className:"space-y-6",children:[a.jsxs(F,{className:"border-primary/20 shadow-lg",children:[a.jsx(ae,{className:"pb-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:a.jsx(Cu,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx(se,{className:"text-2xl mb-1",children:p?"Perodo de Teste Grtis":"Plano Premium Ativo"}),a.jsx(ke,{className:"text-base",children:p?"Aproveite todos os recursos sem custo":"Acesso completo a todas as funcionalidades"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(pe,{className:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20",children:[a.jsx(jt,{className:"h-3 w-3 mr-1"}),"Ativo"]}),a.jsxs(pe,{variant:"outline",className:"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800 text-green-700 dark:text-green-400",children:[a.jsx(jt,{className:"h-3 w-3 mr-1"}),"Cancele quando quiser"]})]})]})}),a.jsxs(q,{className:"space-y-6",children:[p&&t.trial_end_date&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/20 p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(Mr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg text-blue-900 dark:text-blue-100 mb-1",children:" Teste Grtis Ativo"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-3",children:"Voc est aproveitando 7 dias de acesso gratuito a todos os recursos premium"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ee,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-medium",children:["Termina em: ",Me(new Date(t.trial_end_date),"dd 'de' MMMM 'de' yyyy",{locale:Ve})]})]})]})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm",children:[a.jsx("p",{className:"text-blue-900 dark:text-blue-100 font-medium mb-1",children:" Durante o Trial"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Nenhum carto de crdito necessrio. Voc pode cancelar a qualquer momento ou deixar expirar automaticamente sem cobranas."})]})]}),!p&&t.subscription_end&&a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a.jsx(Ee,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Prxima renovao"}),a.jsx("p",{className:"font-semibold text-lg",children:Me(new Date(t.subscription_end),"dd 'de' MMMM 'de' yyyy",{locale:Ve})})]}),a.jsx(pe,{variant:"outline",className:"text-sm",children:"R$ 20,00/ms"})]}),a.jsxs("div",{className:"pt-4 border-t space-y-3",children:[a.jsxs("div",{className:"text-sm text-muted-foreground text-center mb-2",children:[a.jsx("p",{className:"font-medium mb-1",children:"Gerenciar sua Assinatura"}),a.jsx("p",{className:"text-xs",children:"Acesse o portal para atualizar pagamento, ver faturas ou cancelar quando quiser"})]}),a.jsx(B,{onClick:f,disabled:c,className:"w-full",size:"lg",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Carregando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Abrir Portal de Gerenciamento"]})})]})]})]}),p&&a.jsx(F,{className:"border-blue-200 dark:border-blue-800",children:a.jsx(q,{className:"pt-6",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Acabou de assinar? Clique abaixo para atualizar seu status"}),a.jsx(B,{onClick:async()=>{l(!0),await n(),l(!1),V.success("Status atualizado!")},variant:"outline",disabled:c,className:"w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Atualizar Status da Assinatura"]})})]})})}),a.jsxs(F,{className:"border-muted",children:[a.jsx(ae,{children:a.jsx(se,{className:"text-lg",children:" Sobre o Cancelamento"})}),a.jsxs(q,{className:"space-y-3 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),a.jsx("p",{children:"Cancele a qualquer momento sem multas ou taxas"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),a.jsx("p",{children:"Acesso garantido at o fim do perodo j pago"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),a.jsx("p",{children:"Todos os seus dados ficam salvos se quiser retornar"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),a.jsx("p",{children:"Processo 100% online atravs do portal seguro do Stripe"})]})]})]}),a.jsxs(F,{children:[a.jsxs(ae,{children:[a.jsx(se,{children:"Recursos Includos"}),a.jsx(ke,{children:"Tudo que voc tem acesso com seu plano"})]}),a.jsx(q,{children:a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Agendamentos ilimitados"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Sem limites de quantidade"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Gerenciamento de clientes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastro completo"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Controle financeiro"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Relatrios e anlises"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Programa de fidelidade"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recompense seus clientes"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Agendamento online"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Link personalizado"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"p-1 bg-primary/10 rounded",children:a.jsx(jt,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Notificaes push"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nunca perca um compromisso"})]})]})]})})]})]}):v?a.jsxs(F,{className:"shadow-xl border-orange-200 dark:border-orange-900",children:[a.jsxs(ae,{className:"text-center pb-6",children:[a.jsx("div",{className:"mx-auto mb-4 p-3 bg-orange-100 dark:bg-orange-900/20 rounded-full w-fit",children:a.jsx(Cu,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})}),a.jsx(se,{className:"text-3xl mb-2",children:"Seu teste grtis terminou"}),a.jsx(ke,{className:"text-base",children:"Assine agora para continuar aproveitando todos os recursos"})]}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-5xl font-bold mb-2",children:["R$ 20,00",a.jsx("span",{className:"text-xl font-normal text-muted-foreground",children:"/ms"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cobrado mensalmente"})]}),a.jsxs("div",{className:"space-y-3 bg-muted/50 p-4 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-center",children:"O que voc vai manter:"}),a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm",children:"Agendamentos ilimitados"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm",children:"Gerenciamento de clientes"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm",children:"Controle financeiro"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm",children:"Agendamento online"})]})]})]}),a.jsx(B,{onClick:d,disabled:c,className:"w-full",size:"lg",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Cu,{className:"mr-2 h-4 w-4"}),"Assinar Plano Premium"]})}),a.jsx(B,{onClick:u,variant:"outline",disabled:c,className:"w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Verificar Status"]})}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Cancele quando quiser, sem multas ou taxas"})]})]}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Escolha seu Plano"}),a.jsx("p",{className:"text-muted-foreground",children:"Experimente grtis por 7 dias ou assine agora"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs(F,{className:"relative overflow-hidden border-2 border-primary shadow-xl",children:[a.jsx("div",{className:"absolute top-0 right-0 bg-primary text-primary-foreground px-4 py-1 text-sm font-bold rounded-bl-lg",children:"RECOMENDADO"}),a.jsxs(ae,{className:"pt-8",children:[a.jsx("div",{className:"mx-auto mb-4 p-3 bg-primary/10 rounded-full w-fit",children:a.jsx(Mr,{className:"h-8 w-8 text-primary"})}),a.jsx(se,{className:"text-2xl text-center",children:" 7 Dias Grtis"}),a.jsx(ke,{className:"text-center",children:"Experimente sem compromisso"})]}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-bold mb-2",children:"R$ 0,00"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"depois R$ 20,00/ms"})]}),a.jsx("div",{className:"space-y-3",children:["Acesso total por 7 dias","Sem carto de crdito","Cancele quando quiser","Todas as funcionalidades"].map(m=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-muted/50",children:[a.jsx(jt,{className:"h-5 w-5 text-primary flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:m})]},m))}),a.jsx(B,{onClick:async()=>{if(!s?.user){V.error("Voc precisa estar logado");return}l(!0);try{console.log("[TRIAL] Iniciando checkout com trial de 7 dias..."),await d()}catch(m){console.error(m),V.error("Erro ao iniciar trial")}finally{l(!1)}},disabled:c,className:"w-full h-12 text-lg font-semibold",size:"lg",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-5 w-5 animate-spin"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mr,{className:"mr-2 h-5 w-5"}),"Comear Teste Grtis"]})})]})]}),a.jsxs(F,{className:"shadow-xl",children:[a.jsxs(ae,{children:[a.jsx("div",{className:"mx-auto mb-4 p-3 bg-secondary/10 rounded-full w-fit",children:a.jsx(Cu,{className:"h-8 w-8 text-primary"})}),a.jsx(se,{className:"text-2xl text-center",children:" Assinar Agora"}),a.jsx(ke,{className:"text-center",children:"Acesso imediato e completo"})]}),a.jsxs(q,{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-bold mb-2",children:"R$ 20,00"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"por ms"})]}),a.jsx("div",{className:"space-y-3",children:["Agendamentos ilimitados","Gesto financeira completa","Programa de fidelidade","Suporte prioritrio"].map(m=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-muted/50",children:[a.jsx(jt,{className:"h-5 w-5 text-primary flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:m})]},m))}),a.jsx(B,{onClick:d,disabled:c,variant:"outline",className:"w-full h-12 text-lg font-semibold",size:"lg",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Wn,{className:"mr-2 h-5 w-5 animate-spin"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(So,{className:"mr-2 h-5 w-5"}),"Assinar Agora"]})}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Cobrana mensal automtica. Cancele quando quiser."})]})]})]})]})]})})}function h1e(){const e=Jr(),[t]=$y(),{checkSubscription:r,subscription:n}=Rt(),[s,o]=x.useState("checking"),[i,c]=x.useState(0),l=5;return x.useEffect(()=>{if(!t.get("session_id")){o("error");return}const u=async()=>{console.log("[CHECKOUT-SUCCESS] Verificando assinatura... tentativa",i+1);try{await r(),setTimeout(()=>{n?.subscribed?(console.log("[CHECKOUT-SUCCESS]  Assinatura confirmada!"),o("success"),setTimeout(()=>{e("/")},2e3)):i<l?c(f=>f+1):(console.log("[CHECKOUT-SUCCESS]  Max retries atingido"),o("error"))},1e3)}catch(f){console.error("[CHECKOUT-SUCCESS] Erro ao verificar:",f),i<l?c(h=>h+1):o("error")}};if(u(),i<l){const f=setInterval(u,2e3);return()=>clearInterval(f)}},[i,t,r,n,e]),s==="checking"?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-primary/10",children:a.jsxs(F,{className:"w-full max-w-md",children:[a.jsxs(ae,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:a.jsx(Wn,{className:"h-8 w-8 animate-spin text-primary"})}),a.jsx(se,{className:"text-2xl",children:"Processando pagamento..."}),a.jsx(ke,{children:"Aguarde enquanto confirmamos sua assinatura"})]}),a.jsx(q,{children:a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[a.jsxs("p",{children:["Tentativa ",i+1," de ",l]}),a.jsx("p",{className:"mt-2",children:"Isso pode levar alguns segundos"})]})})]})}):s==="success"?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-green-50 to-green-100",children:a.jsxs(F,{className:"w-full max-w-md border-green-200",children:[a.jsxs(ae,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:a.jsx(jt,{className:"h-8 w-8 text-green-600"})}),a.jsx(se,{className:"text-2xl text-green-900",children:"Pagamento confirmado!"}),a.jsx(ke,{className:"text-green-700",children:"Sua assinatura foi ativada com sucesso"})]}),a.jsxs(q,{className:"text-center space-y-4",children:[a.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:a.jsx("p",{className:"text-sm text-green-800",children:n?.status==="trial"?" Seu perodo de teste gratuito de 7 dias comeou!":" Sua assinatura premium est ativa!"})}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Redirecionando para o dashboard..."})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-orange-50 to-orange-100",children:a.jsxs(F,{className:"w-full max-w-md border-orange-200",children:[a.jsxs(ae,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-orange-100",children:a.jsx(Ld,{className:"h-8 w-8 text-orange-600"})}),a.jsx(se,{className:"text-2xl text-orange-900",children:"Verificao em andamento"}),a.jsx(ke,{className:"text-orange-700",children:"No conseguimos confirmar sua assinatura ainda"})]}),a.jsxs(q,{className:"text-center space-y-4",children:[a.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:a.jsx("p",{className:"text-sm text-orange-800",children:"Isso pode acontecer se o pagamento ainda est sendo processado pelo Stripe. Seu status ser atualizado automaticamente quando o pagamento for confirmado."})}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(B,{onClick:()=>e("/"),className:"w-full",children:"Ir para o Dashboard"}),a.jsx(B,{onClick:()=>e("/assinatura"),variant:"outline",className:"w-full",children:"Ver Status da Assinatura"})]})]})]})})}const hl=[{title:"Bem-vindo ao seu Sistema de Gesto!",description:"Vamos fazer um tour rpido pelas principais funcionalidades",icon:Mr,features:["Gerencie seus agendamentos de forma simples","Controle completo de clientes e servios","Acompanhe seu financeiro em tempo real","Fidelize seus clientes com recompensas"]},{title:"Agendamentos e Agenda",description:"Organize seus horrios de forma profissional",icon:Ee,features:["Visualizao diria, semanal e mensal","Notificaes automticas para voc e seus clientes","Agendamento online para seus clientes","Controle de confirmaes e reagendamentos"]},{title:"Clientes e Servios",description:"Mantenha tudo organizado",icon:mn,features:["Cadastro completo de clientes com histrico","Gesto de servios com preos e duraes","Cronogramas de retorno automticos","Histrico completo de atendimentos"]},{title:"Controle Financeiro",description:"Acompanhe seu faturamento",icon:dt,features:["Lanamentos de receitas e despesas","Relatrios e grficos detalhados","Controle de contas a pagar e receber","Visualizao de lucro por perodo"]},{title:"Programa de Fidelidade",description:"Fidelize e recompense seus clientes",icon:Fd,features:["Sistema de pontos por agendamento","Recompensas personalizveis","Nveis de fidelidade (Bronze, Prata, Ouro)","Aumente seu faturamento e reteno"]},{title:"Sua Assinatura",description:"Aproveite todos os benefcios",icon:Na,features:["7 dias grtis para testar todas as funcionalidades","Apenas R$ 20,00/ms aps o perodo de teste","Sem compromisso - cancele quando quiser","Suporte e atualizaes constantes"]}];function m1e(){const[e,t]=x.useState(0),r=Jr(),n=()=>{e<hl.length-1&&t(e+1)},s=()=>{e>0&&t(e-1)},o=()=>{localStorage.setItem("onboarding-completed","true"),r("/")},i=()=>{localStorage.setItem("onboarding-completed","true"),r("/")},c=(e+1)/hl.length*100,l=hl[e],d=l.icon;return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-4",children:a.jsxs(F,{className:"w-full max-w-2xl",children:[a.jsxs(ae,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(d,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx(se,{className:"text-2xl",children:l.title}),a.jsx(ke,{children:l.description})]})]}),a.jsx(B,{variant:"ghost",size:"sm",onClick:i,children:"Pular"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[a.jsxs("span",{children:["Passo ",e+1," de ",hl.length]}),a.jsxs("span",{children:[Math.round(c),"%"]})]}),a.jsx(Ns,{value:c,className:"h-2"})]})]}),a.jsxs(q,{className:"space-y-6",children:[a.jsx("ul",{className:"space-y-3",children:l.features.map((u,f)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"h-5 w-5 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx(jt,{className:"h-3 w-3 text-primary"})}),a.jsx("span",{className:"text-base",children:u})]},f))}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsxs(B,{variant:"outline",onClick:s,disabled:e===0,className:"flex-1",children:[a.jsx(Rd,{className:"mr-2 h-4 w-4"}),"Anterior"]}),e===hl.length-1?a.jsxs(B,{onClick:o,className:"flex-1",children:["Comear a usar",a.jsx(jt,{className:"ml-2 h-4 w-4"})]}):a.jsxs(B,{onClick:n,className:"flex-1",children:["Prximo",a.jsx(gi,{className:"ml-2 h-4 w-4"})]})]})]})]})})}const p1e=Zs({email:ut().email("E-mail invlido"),senha:ut().min(1,"Senha  obrigatria")}),g1e=()=>{const e=Jr(),[t]=$y(),r=t.get("redirect")||"/",{signIn:n}=Rt(),[s,o]=x.useState(""),[i,c]=x.useState(!1),{register:l,handleSubmit:d,formState:{errors:u}}=Ds({resolver:Is(p1e)}),f=async h=>{c(!0),o("");try{const{error:p}=await n(h.email,h.senha);p?o("E-mail ou senha incorretos"):e(r)}catch{o("Erro ao fazer login. Tente novamente.")}finally{c(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-responsive",children:a.jsxs(F,{className:"w-full max-w-md mx-auto",children:[a.jsxs(ae,{className:"space-responsive text-center p-responsive",children:[a.jsx(se,{className:"text-responsive-xl font-bold",children:"Fazer Login"}),a.jsx(ke,{className:"text-responsive-sm",children:"Entre com suas credenciais para acessar o sistema"})]}),a.jsx(q,{className:"p-responsive",children:a.jsxs("form",{onSubmit:d(f),className:"space-responsive",children:[s&&a.jsx(Zr,{variant:"destructive",children:a.jsx(Xr,{className:"text-responsive-sm",children:s})}),a.jsxs("div",{className:"space-responsive-sm",children:[a.jsx(K,{htmlFor:"email",className:"text-responsive-sm",children:"E-mail"}),a.jsx(ue,{id:"email",type:"email",placeholder:"seu@email.com",...l("email"),disabled:i,className:"btn-touch text-responsive-sm"}),u.email&&a.jsx("p",{className:"text-responsive-xs text-destructive",children:u.email.message})]}),a.jsxs("div",{className:"space-responsive-sm",children:[a.jsx(K,{htmlFor:"senha",className:"text-responsive-sm",children:"Senha"}),a.jsx(ue,{id:"senha",type:"password",placeholder:"Sua senha",...l("senha"),disabled:i,className:"btn-touch text-responsive-sm"}),u.senha&&a.jsx("p",{className:"text-responsive-xs text-destructive",children:u.senha.message})]}),a.jsx(B,{type:"submit",className:"w-full btn-touch text-responsive-sm",disabled:i,children:i?"Entrando...":"Entrar"}),a.jsxs("div",{className:"text-center space-responsive-sm",children:[a.jsx(zl,{to:"/esqueci-senha",className:"text-responsive-xs text-muted-foreground hover:text-primary underline",children:"Esqueci minha senha"}),a.jsxs("div",{className:"text-responsive-xs text-muted-foreground",children:["No tem uma conta?"," ",a.jsx(zl,{to:"/cadastro",className:"text-primary hover:underline font-medium",children:"Cadastre-se aqui"})]})]})]})})]})})},v1e=Zs({nome_personalizado_app:ut().min(1,"Nome da profissional/salo  obrigatrio"),nome_completo:ut().min(1,"Nome completo  obrigatrio"),email:ut().email("E-mail invlido"),telefone:ut().min(10,"Telefone deve ter pelo menos 10 dgitos"),tema_preferencia:No(["feminino","masculino"]),senha:ut().min(6,"Senha deve ter pelo menos 6 caracteres"),confirmar_senha:ut().min(1,"Confirmao de senha  obrigatria")}).refine(e=>e.senha===e.confirmar_senha,{message:"Senhas no coincidem",path:["confirmar_senha"]}),x1e=()=>{const e=Jr(),{signUp:t}=Rt(),[r,n]=x.useState(""),[s,o]=x.useState(!1),[i,c]=x.useState("trial"),{register:l,handleSubmit:d,formState:{errors:u},watch:f,setValue:h}=Ds({resolver:Is(v1e),defaultValues:{tema_preferencia:"feminino"}}),p=f("tema_preferencia");x.useEffect(()=>{p&&(console.log("Aplicando tema preview:",p),document.documentElement.setAttribute("data-theme",p),localStorage.setItem("app-theme",p))},[p]);const v=async m=>{o(!0),n("");try{const{error:g}=await t(m.email,m.senha,{nome_completo:m.nome_completo,nome_personalizado_app:m.nome_personalizado_app,telefone:m.telefone,tema_preferencia:m.tema_preferencia},i);g?n(g.message||"Erro ao criar conta"):i==="trial"?(await new Promise(y=>setTimeout(y,800)),e("/")):e("/login?redirect=/assinatura")}catch(g){n(g.message||"Erro ao criar conta. Tente novamente.")}finally{o(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:a.jsxs(F,{className:"w-full max-w-md",children:[a.jsxs(ae,{className:"space-y-1 text-center",children:[a.jsx(se,{className:"text-2xl font-bold",children:"Criar Conta"}),a.jsx(ke,{children:"Cadastre-se para comear a usar o sistema"})]}),a.jsx(q,{children:a.jsxs("form",{onSubmit:d(v),className:"space-y-4",children:[r&&a.jsx(Zr,{variant:"destructive",children:a.jsx(Xr,{children:r})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-base",children:"Escolha seu plano *"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx("div",{className:"flex flex-col cursor-pointer",onClick:()=>!s&&c("trial"),children:a.jsxs("div",{className:`relative w-full p-5 border-2 rounded-xl transition-all hover:shadow-md bg-card ${i==="trial"?"border-primary shadow-lg":"border-border"}`,children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("p",{className:"font-semibold text-lg mb-1",children:"7 Dias Grtis"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Sem necessidade de carto"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Acesso completo por 7 dias"})]}),a.jsx("div",{className:`absolute top-3 right-3 w-5 h-5 rounded-full border-2 transition-all ${i==="trial"?"bg-primary border-primary":"border-border"}`})]})}),a.jsx("div",{className:"flex flex-col cursor-pointer",onClick:()=>!s&&c("paid"),children:a.jsxs("div",{className:`relative w-full p-5 border-2 rounded-xl transition-all hover:shadow-md bg-card ${i==="paid"?"border-primary shadow-lg":"border-border"}`,children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("p",{className:"font-semibold text-lg mb-1",children:"Assinar Agora"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"R$ 20,00/ms"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Cobrana recorrente"})]}),a.jsx("div",{className:`absolute top-3 right-3 w-5 h-5 rounded-full border-2 transition-all ${i==="paid"?"bg-primary border-primary":"border-border"}`})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome_personalizado_app",children:"Nome da Profissional / Nome do Salo *"}),a.jsx(ue,{id:"nome_personalizado_app",placeholder:"Ex: Camila Hair Studio",...l("nome_personalizado_app"),disabled:s}),u.nome_personalizado_app&&a.jsx("p",{className:"text-sm text-destructive",children:u.nome_personalizado_app.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"nome_completo",children:"Nome Completo da Responsvel *"}),a.jsx(ue,{id:"nome_completo",placeholder:"Ex: Camila Lopes",...l("nome_completo"),disabled:s}),u.nome_completo&&a.jsx("p",{className:"text-sm text-destructive",children:u.nome_completo.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"email",children:"E-mail *"}),a.jsx(ue,{id:"email",type:"email",placeholder:"seu@email.com",...l("email"),disabled:s}),u.email&&a.jsx("p",{className:"text-sm text-destructive",children:u.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"telefone",children:"Telefone com DDD *"}),a.jsx(ue,{id:"telefone",placeholder:"(11) 99999-9999",...l("telefone"),disabled:s}),u.telefone&&a.jsx("p",{className:"text-sm text-destructive",children:u.telefone.message})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(K,{className:"text-base",children:"Escolha o Esquema de Cores do App *"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta escolha definir as cores de todo o aplicativo"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx("div",{className:"flex flex-col cursor-pointer group",onClick:()=>!s&&h("tema_preferencia","feminino"),children:a.jsxs("div",{className:`relative w-full p-5 border-2 rounded-xl transition-all hover:shadow-md bg-card ${p==="feminino"?"border-[hsl(267,83%,58%)] shadow-lg":"border-border"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full shadow-sm",style:{background:"linear-gradient(135deg, hsl(267 83% 58%), hsl(320 85% 75%))"}}),a.jsx("div",{className:"w-10 h-10 rounded-full shadow-sm",style:{background:"linear-gradient(135deg, hsl(320 85% 75%), hsl(267 83% 58%))"}})]}),a.jsx("p",{className:"text-center font-semibold text-lg mb-1",children:"Feminino"}),a.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Lils e Rosa"}),a.jsx("div",{className:`absolute top-3 right-3 w-5 h-5 rounded-full border-2 transition-all ${p==="feminino"?"bg-[hsl(267,83%,58%)] border-[hsl(267,83%,58%)]":"border-border"}`})]})}),a.jsx("div",{className:"flex flex-col cursor-pointer group",onClick:()=>!s&&h("tema_preferencia","masculino"),children:a.jsxs("div",{className:`relative w-full p-5 border-2 rounded-xl transition-all hover:shadow-md bg-card ${p==="masculino"?"border-[hsl(217,91%,60%)] shadow-lg":"border-border"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full shadow-sm",style:{background:"linear-gradient(135deg, hsl(217 91% 60%), hsl(220 60% 50%))"}}),a.jsx("div",{className:"w-10 h-10 rounded-full shadow-sm",style:{background:"linear-gradient(135deg, hsl(220 60% 50%), hsl(217 91% 60%))"}})]}),a.jsx("p",{className:"text-center font-semibold text-lg mb-1",children:"Masculino"}),a.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Azul e Cinza"}),a.jsx("div",{className:`absolute top-3 right-3 w-5 h-5 rounded-full border-2 transition-all ${p==="masculino"?"bg-[hsl(217,91%,60%)] border-[hsl(217,91%,60%)]":"border-border"}`})]})})]}),u.tema_preferencia&&a.jsx("p",{className:"text-sm text-destructive",children:u.tema_preferencia.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"senha",children:"Senha *"}),a.jsx(ue,{id:"senha",type:"password",placeholder:"Mnimo 6 caracteres",...l("senha"),disabled:s}),u.senha&&a.jsx("p",{className:"text-sm text-destructive",children:u.senha.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(K,{htmlFor:"confirmar_senha",children:"Confirmar Senha *"}),a.jsx(ue,{id:"confirmar_senha",type:"password",placeholder:"Digite a senha novamente",...l("confirmar_senha"),disabled:s}),u.confirmar_senha&&a.jsx("p",{className:"text-sm text-destructive",children:u.confirmar_senha.message})]}),a.jsx(B,{type:"submit",className:"w-full",disabled:s,children:s?"Criando conta...":i==="trial"?"Comear Teste Grtis":"Criar Conta e Assinar"}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:["J tem uma conta?"," ",a.jsx(zl,{to:"/login",className:"text-primary hover:underline font-medium",children:"Faa login aqui"})]})})]})})]})})},DC={soundEnabled:!0,visualEnabled:!0,autoHide:!0,hideDelay:1e4,soundType:"notification"},vj=()=>{const{usuario:e}=Rt(),[t,r]=x.useState(()=>{const g=localStorage.getItem("notification-settings");if(g){const y=JSON.parse(g);return{...DC,...y}}return DC}),[n,s]=x.useState([]),[o,i]=x.useState(new Date().toISOString()),c=x.useRef(null),l=x.useRef(new Set);x.useEffect(()=>{if(t.soundEnabled){const g=t.soundType||"notification",y=g==="notification"?"notification":g;c.current=new Audio(`/sounds/${y}.mp3`),c.current.volume=.5,c.current.preload="auto"}return()=>{c.current&&(c.current=null)}},[t.soundEnabled,t.soundType]),x.useEffect(()=>{localStorage.setItem("notification-settings",JSON.stringify(t))},[t]);const d=x.useCallback(async()=>{if(!(!t.soundEnabled||!c.current))try{c.current.currentTime=0,await c.current.play()}catch(g){console.log("No foi possvel reproduzir som de notificao:",g)}},[t.soundEnabled]),u=x.useCallback(g=>{if(!e||!t.visualEnabled||l.current.has(g.id))return;const y={...g,shown:!1};s(b=>[y,...b.slice(0,2)]),l.current.add(g.id),d(),V.success(`Novo Agendamento! ${g.clienteNome} - ${g.servicoNome}`),t.autoHide&&setTimeout(()=>{f(g.id)},t.hideDelay)},[e,t,d]),f=x.useCallback(g=>{s(y=>y.filter(b=>b.id!==g))},[]),h=x.useCallback(()=>{s([])},[]),p=x.useCallback(g=>{r(y=>({...y,...g}))},[]),v=x.useCallback(g=>{if(!e)return;const y=g.filter(b=>{if(b.userId!==e.id)return!1;const w=new Date(b.createdAt),j=new Date(o);return w>j&&!l.current.has(b.id)});y.length>0&&(y.forEach(b=>{const w=b.origem||"manual";u({id:b.id,clienteNome:b.clienteNome,servicoNome:b.servicoNome,data:b.data,horario:b.hora,origem:w,criadoEm:b.createdAt})}),i(new Date().toISOString()))},[e,o,u]),m=x.useCallback(async()=>"Notification"in window?await Notification.requestPermission()==="granted":!1,[]);return{notifications:n,settings:t,addNotification:u,removeNotification:f,clearAllNotifications:h,updateSettings:p,checkForNewAgendamentos:v,requestNotificationPermission:m,playNotificationSound:d}},NI=()=>{const{usuario:e}=Rt(),{isSubscribed:t}=Sp(),r=x.useCallback(async f=>{if(!(!e||!t))try{const h=new Date,p=f.programadaPara.getTime()-h.getTime();if(p<=0){await s(f);return}if(p<=24*60*60*1e3){setTimeout(async()=>{await s(f)},p);const v=n();v.push({...f,programadaPara:f.programadaPara.toISOString()}),localStorage.setItem(`scheduled-notifications-${e.id}`,JSON.stringify(v))}else{const v=n();v.push({...f,programadaPara:f.programadaPara.toISOString()}),localStorage.setItem(`scheduled-notifications-${e.id}`,JSON.stringify(v))}}catch(h){console.error("Erro ao agendar notificao:",h)}},[e,t]),n=x.useCallback(()=>{if(!e)return[];const f=localStorage.getItem(`scheduled-notifications-${e.id}`);return f?JSON.parse(f):[]},[e]),s=x.useCallback(async f=>{if(t)try{if("serviceWorker"in navigator){const h=await navigator.serviceWorker.ready,p={body:f.mensagem,icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",tag:`${f.tipo}-${f.id}`,data:{...f.dados,notificationId:f.id,tipo:f.tipo,timestamp:Date.now()}};await h.showNotification(f.titulo,p),o(f.id)}}catch(h){console.error("Erro ao enviar notificao:",h)}},[t]),o=x.useCallback(f=>{if(!e)return;const p=n().filter(v=>v.id!==f);localStorage.setItem(`scheduled-notifications-${e.id}`,JSON.stringify(p))},[e,n]),i=x.useCallback(async()=>{if(!e||!t)return;const f=n(),h=new Date;for(const p of f){const v=new Date(p.programadaPara);v<=h&&await s({...p,programadaPara:v})}},[e,t,n,s]),c=x.useCallback(async(f,h=60)=>{const p=new Date(`${f.data}T${f.hora}`),v=new Date(p.getTime()-h*60*1e3);await r({id:`reminder-${f.id}`,tipo:"lembrete_agendamento",titulo:"Lembrete de Agendamento",mensagem:`${f.clienteNome} tem agendamento em ${h} minutos - ${f.servicoNome}`,programadaPara:v,dados:{agendamentoId:f.id,clienteNome:f.clienteNome,servicoNome:f.servicoNome,data:f.data,horario:f.hora}})},[r]),l=x.useCallback(async(f,h=7)=>{const p=new Date(f.dataVencimento),v=new Date(p.getTime()-h*24*60*60*1e3);await r({id:`expense-${f.id}`,tipo:"despesa_fixa",titulo:"Lembrete de Despesa Fixa",mensagem:`${f.descricao} vence em ${h} dias - R$ ${f.valor.toFixed(2)}`,programadaPara:v,dados:{contaFixaId:f.id,descricao:f.descricao,valor:f.valor,dataVencimento:f.dataVencimento,diasRestantes:h}})},[r]),d=x.useCallback(async f=>{await s({id:`new-appointment-${f.id}`,tipo:"novo_agendamento",titulo:"Novo Agendamento!",mensagem:`${f.clienteNome} agendou ${f.servicoNome} para ${f.data} s ${f.hora}`,programadaPara:new Date,dados:{agendamentoId:f.id,clienteNome:f.clienteNome,servicoNome:f.servicoNome,data:f.data,horario:f.hora,origem:f.origem||"manual"}})},[s]),u=x.useCallback(async f=>{await s({id:`service-completed-${f.id}`,tipo:"servico_finalizado",titulo:"Servio Finalizado",mensagem:`Servio de ${f.servicoNome} para ${f.clienteNome} foi finalizado`,programadaPara:new Date,dados:{agendamentoId:f.id,clienteNome:f.clienteNome,servicoNome:f.servicoNome,valor:f.valor}})},[s]);return x.useEffect(()=>{const f=setInterval(i,3e5);return()=>clearInterval(f)},[i]),{scheduleNotification:r,scheduleAppointmentReminder:c,scheduleExpenseReminder:l,notifyNewAppointment:d,notifyServiceCompleted:u,checkPendingNotifications:i,getScheduledNotifications:n,removeScheduledNotification:o}},_I=()=>{const e=Sc();return x.useMemo(()=>{if(!e.configuracaoHorarios||!e.configuracaoNotificacoes||!e.configuracaoBackup)return{...e,configuracoes:null,updateConfiguracoes:async()=>null,isHorarioDisponivel:()=>!1,getHorariosDisponiveis:()=>[],exportarDados:async()=>{},enviarBackupPorEmail:async()=>!1};const r={id:"supabase-config",userId:e.configuracaoHorarios[0]?.user_id||"",horarios:{diasAtivos:{domingo:e.configuracaoHorarios.find(n=>n.dia_semana===0)?.ativo||!1,segunda:e.configuracaoHorarios.find(n=>n.dia_semana===1)?.ativo||!1,terca:e.configuracaoHorarios.find(n=>n.dia_semana===2)?.ativo||!1,quarta:e.configuracaoHorarios.find(n=>n.dia_semana===3)?.ativo||!1,quinta:e.configuracaoHorarios.find(n=>n.dia_semana===4)?.ativo||!1,sexta:e.configuracaoHorarios.find(n=>n.dia_semana===5)?.ativo||!1,sabado:e.configuracaoHorarios.find(n=>n.dia_semana===6)?.ativo||!1},horarioExpediente:{inicio:e.configuracaoHorarios.find(n=>n.ativo)?.horario_abertura||"08:00",termino:e.configuracaoHorarios.find(n=>n.ativo)?.horario_fechamento||"18:00"},intervaloAlmoco:{inicio:e.configuracaoHorarios.find(n=>n.intervalo_inicio)?.intervalo_inicio||"12:00",termino:e.configuracaoHorarios.find(n=>n.intervalo_fim)?.intervalo_fim||"13:00"},intervalosPersonalizados:[]},notificacoes:{push:{ativo:e.configuracaoNotificacoes.notificacoes_push},novosAgendamentos:{visual:!0,sonoro:e.configuracaoNotificacoes.notificacoes_som,push:e.configuracaoNotificacoes.notificacoes_push,som:"notification"},lembretesAgendamento:{ativo:!0,antecedencia:e.configuracaoNotificacoes.lembrete_agendamento_minutos,push:e.configuracaoNotificacoes.notificacoes_push,sonoro:e.configuracaoNotificacoes.notificacoes_som},retornoCronograma:{ativo:!0,push:e.configuracaoNotificacoes.notificacoes_push,sonoro:e.configuracaoNotificacoes.notificacoes_som},despesasFixas:{ativo:!0,antecedencia:e.configuracaoNotificacoes.lembrete_contas_fixas_dias,push:e.configuracaoNotificacoes.notificacoes_push,sonoro:e.configuracaoNotificacoes.notificacoes_som},servicoFinalizado:{ativo:!0,push:e.configuracaoNotificacoes.notificacoes_push,sonoro:e.configuracaoNotificacoes.notificacoes_som},tempoAntecedencia:e.configuracaoNotificacoes.lembrete_agendamento_minutos},backup:{backupAutomatico:e.configuracaoBackup.backup_automatico,emailBackup:e.configuracaoBackup.email_backup||"",diasSemanaBackup:[0],ultimoBackup:e.configuracaoBackup.ultimo_backup},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{...e,configuracoes:r,updateConfiguracoes:async n=>(n.notificacoes&&await e.salvarNotificacoes({notificacoes_push:n.notificacoes.push?.ativo||!1,notificacoes_som:n.notificacoes.novosAgendamentos?.sonoro||!1,lembrete_agendamento_minutos:n.notificacoes.lembretesAgendamento?.antecedencia||60}),n.backup&&await e.salvarBackup({backup_automatico:n.backup.backupAutomatico||!1,email_backup:n.backup.emailBackup||""}),r),isHorarioDisponivel:e.verificarDisponibilidade,getHorariosDisponiveis:(n,s=60)=>e.getHorariosDisponiveisDia(n,s),exportarDados:async()=>{console.log("Export de dados no implementado para Supabase ainda")},enviarBackupPorEmail:async n=>(console.log("Envio por email no implementado ainda"),!1)}},[e.configuracaoHorarios,e.configuracaoNotificacoes,e.configuracaoBackup,e.loading])},y1e=()=>{const{playNotificationSound:e}=vj(),{isSubscribed:t}=Sp(),{notifyNewAppointment:r,notifyServiceCompleted:n,scheduleAppointmentReminder:s}=NI(),{configuracoes:o}=_I(),i=x.useRef(null),c=x.useCallback(async f=>{if(f)try{const h=f==="notification"?"notification":f;(!i.current||i.current.src!==`/sounds/${h}.mp3`)&&(i.current=new Audio(`/sounds/${h}.mp3`),i.current.volume=.7,i.current.preload="auto"),i.current.currentTime=0,await i.current.play()}catch(h){console.log("Erro ao reproduzir som:",h)}},[]),l=x.useCallback(async f=>{if(!o?.notificacoes)return;const h=o.notificacoes.novosAgendamentos;if(h.visual&&Jt({title:"Novo Agendamento!",description:`${f.clienteNome} agendou ${f.servicoNome} para ${f.data} s ${f.hora}`,duration:5e3}),h.sonoro&&await c(h.som),h.push&&t&&await r(f),o.notificacoes.lembretesAgendamento.ativo){const p=o.notificacoes.lembretesAgendamento.antecedencia;await s(f,p)}},[o,e,t,r,s]),d=x.useCallback(async f=>{if(!o?.notificacoes?.servicoFinalizado?.ativo)return;const h=o.notificacoes.servicoFinalizado;Jt({title:"Servio Finalizado",description:`${f.servicoNome} para ${f.clienteNome} foi concludo`,duration:3e3}),h.sonoro&&await c("notification2"),h.push&&t&&await n(f)},[o,e,t,n]),u=x.useCallback(async f=>{if(!o?.notificacoes?.despesasFixas?.ativo)return;const h=o.notificacoes.despesasFixas,p=Math.ceil((new Date(f.dataVencimento).getTime()-Date.now())/(1e3*60*60*24));Jt({title:"Lembrete de Despesa",description:`${f.descricao} vence em ${p} dias - R$ ${f.valor.toFixed(2)}`,duration:8e3}),h.sonoro&&await c("notification3")},[o,e]);return{handleNewAppointment:l,handleServiceCompleted:d,handleExpenseReminder:u}};function b1e(){const{notifications:e,removeNotification:t,clearAllNotifications:r}=vj(),n=c=>{window.location.href=c},s=c=>{const l={online:{text:"Online",variant:"default",class:"bg-green-500/10 text-green-700 dark:text-green-400"},cronograma:{text:"Automtico",variant:"secondary",class:"bg-blue-500/10 text-blue-700 dark:text-blue-400"},manual:{text:"Manual",variant:"outline",class:"bg-gray-500/10 text-gray-700 dark:text-gray-400"}};return l[c]||l.manual},o=c=>new Date(c).toLocaleDateString("pt-BR"),i=()=>{n("/agendamentos"),r()};return e.length===0?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-fade-in",children:a.jsxs(Zr,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-primary/30 shadow-elegant backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-5 w-5 text-primary animate-pulse"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-foreground",children:e.length===1?"Novo Agendamento!":"Novos Agendamentos!"}),a.jsxs(Xr,{className:"text-muted-foreground",children:[e.length," novo(s) agendamento(s) recebido(s)"]})]})]}),a.jsx(B,{variant:"ghost",size:"sm",onClick:r,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:a.jsx(qt,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"mt-3 space-y-2 max-h-60 overflow-y-auto",children:e.map(c=>{const l=s(c.origem);return a.jsx(F,{className:"border-primary/20 hover:bg-primary/5 transition-colors",children:a.jsx(q,{className:"p-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vr,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:c.clienteNome}),a.jsx(pe,{variant:l.variant,className:`text-xs ${l.class}`,children:l.text})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dn,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:c.servicoNome})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:o(c.data)}),a.jsx(st,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:c.horario})]})]}),a.jsx(B,{variant:"ghost",size:"sm",onClick:()=>t(c.id),className:"h-6 w-6 p-0 ml-2",children:a.jsx(qt,{className:"h-3 w-3"})})]})})},c.id)})}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsxs(B,{variant:"outline",size:"sm",className:"flex-1 text-xs h-7",onClick:i,children:[a.jsx(lm,{className:"h-3 w-3 mr-1"}),"Ver Agendamentos"]}),a.jsx(B,{variant:"default",size:"sm",className:"flex-1 text-xs h-7 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",onClick:r,children:"Marcar como Visto"})]})]})})}const j1e=x.createContext(void 0),w1e=({children:e})=>{const{checkForNewAgendamentos:t}=vj();Sp();const{scheduleAppointmentReminder:r,notifyNewAppointment:n,notifyServiceCompleted:s,checkPendingNotifications:o}=NI(),{handleNewAppointment:i,handleServiceCompleted:c,handleExpenseReminder:l}=y1e(),{configuracoes:d}=_I();x.useEffect(()=>{const f=setInterval(()=>{o()},3e5);return()=>clearInterval(f)},[o]);const u={checkForNewAgendamentos:t,scheduleAppointmentReminder:r,notifyNewAppointment:n,notifyServiceCompleted:s,handleNewAppointment:i,handleServiceCompleted:c,handleExpenseReminder:l};return a.jsxs(j1e.Provider,{value:u,children:[e,a.jsx(b1e,{})]})};function N1e(){const{user:e}=Rt(),{configuracaoBackup:t}=Sc(),[r,n]=x.useState(!1),[s,o]=x.useState(0);x.useEffect(()=>{if(!e?.id||!t?.backup_automatico)return;(()=>{const d=new Date;let u=!1;if(!t.ultimo_backup)u=!0,o(0);else{const h=new Date(t.ultimo_backup),p=Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24));switch(o(p),t.frequencia_backup){case"diario":u=p>=1;break;case"semanal":u=p>=7;break;case"mensal":u=p>=30;break}}const f=sessionStorage.getItem("backup_prompt_shown");u&&!f&&(n(!0),sessionStorage.setItem("backup_prompt_shown","true"))})()},[e?.id,t]);const i=()=>{n(!1)},c=()=>{n(!1),window.location.href="/configuracoes?tab=backup"};return r?a.jsx(sa,{open:r,onOpenChange:n,children:a.jsxs(En,{children:[a.jsxs(On,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-amber-100 dark:bg-amber-900/20 flex items-center justify-center",children:a.jsx(Nr,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),a.jsx($n,{className:"text-xl",children:"Hora de Fazer Backup!"})]}),a.jsxs(Mn,{className:"space-y-3 text-base",children:[s===0?a.jsx("p",{children:"Voc ainda no realizou nenhum backup dos seus dados."}):a.jsxs("p",{children:["J se passaram ",a.jsxs("strong",{children:[s," dias"]})," desde o seu ltimo backup."]}),a.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Nf,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Proteo dos seus dados"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fazer backups regulares protege suas informaes de clientes, agendamentos e dados financeiros."})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recomendamos fazer o backup ",t?.frequencia_backup==="diario"?"diariamente":t?.frequencia_backup==="semanal"?"semanalmente":"mensalmente","."]})]})]}),a.jsxs(Tn,{className:"flex-col sm:flex-row gap-2",children:[a.jsx("button",{onClick:i,className:"inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 w-full sm:w-auto",children:"Lembrar Depois"}),a.jsxs(Dn,{onClick:c,className:"w-full sm:w-auto",children:[a.jsx(Nf,{className:"h-4 w-4 mr-2"}),"Fazer Backup Agora"]})]})]})}):null}const _1e=new YI,S1e=()=>a.jsx(XI,{client:_1e,children:a.jsx(YR,{children:a.jsx(B3,{children:a.jsx(w1e,{children:a.jsx(hF,{children:a.jsxs("div",{id:"app-container",children:[a.jsx(N1e,{}),a.jsx(z3,{position:"top-right"}),a.jsxs(BR,{children:[a.jsx(Ft,{path:"/login",element:a.jsx(g1e,{})}),a.jsx(Ft,{path:"/cadastro",element:a.jsx(x1e,{})}),a.jsx(Ft,{path:"/onboarding",element:a.jsx(Wr,{children:a.jsx(m1e,{})})}),a.jsx(Ft,{path:"/agendamento-online",element:a.jsx(Qg,{})}),a.jsx(Ft,{path:"/agendamento-publico",element:a.jsx(Qg,{})}),a.jsx(Ft,{path:"/agendar",element:a.jsx(Qg,{})}),a.jsx(Ft,{path:"/",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(pme,{})})})}),a.jsx(Ft,{path:"/assistente",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx($ge,{})})})}),a.jsx(Ft,{path:"/minha-agenda",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(x_e,{})})})}),a.jsx(Ft,{path:"/clientes",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(uwe,{})})})}),a.jsx(Ft,{path:"/servicos",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(pwe,{})})})}),a.jsx(Ft,{path:"/cronogramas",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(wwe,{})})})}),a.jsx(Ft,{path:"/financeiro",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(Bwe,{})})})}),a.jsx(Ft,{path:"/agendamentos",element:a.jsx(bf,{to:"/minha-agenda",replace:!0})}),a.jsx(Ft,{path:"/agenda",element:a.jsx(bf,{to:"/minha-agenda",replace:!0})}),a.jsx(Ft,{path:"/configuracoes",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(__e,{})})})}),a.jsx(Ft,{path:"/auditoria",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(G_e,{})})})}),a.jsx(Ft,{path:"/marketing",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(e1e,{})})})}),a.jsx(Ft,{path:"/produtos",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(u1e,{})})})}),a.jsx(Ft,{path:"/assinatura",element:a.jsx(Wr,{children:a.jsx(xn,{children:a.jsx(f1e,{})})})}),a.jsx(Ft,{path:"/checkout-success",element:a.jsx(Wr,{children:a.jsx(h1e,{})})}),a.jsx(Ft,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-secondary/5",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Pgina no encontrada"}),a.jsx("a",{href:"/",className:"text-primary hover:underline",children:"Voltar ao incio"})]})})})]})]})})})})})}),SI=document.getElementById("root");if(!SI)throw new Error("Failed to find the root element");LC(SI).render(a.jsx(S1e,{}));export{qe as A,B,jt as C,ze as D,ne as E,zL as F,Zr as G,Ld as H,HL as I,V as J,Xr as K,K as L,ZL as M,So as N,Rd as O,$e as P,gi as Q,Ue as S,fr as T,Vr as U,F1e as Z,ka as a,ia as b,he as c,je as d,Ar as e,j0 as f,lb as g,te as h,w_e as i,rs as j,um as k,st as l,ut as m,aj as n,Zs as o,u_e as p,F as q,ae as r,W as s,Ee as t,He as u,se as v,ke as w,q as x,ue as y,Fe as z};
