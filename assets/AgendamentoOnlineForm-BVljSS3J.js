import{a as g,j as t}from"./react-vendor-lX9dz28M.js";import{c as gt,u as Cr,a as wr,b as Dr,P as ir,d as Ut,e as jr,f as Rr,g as Or,h as Ge,C as lr,s as le,J as q,i as xt,M as kr,j as Lr,k as Ir,l as cr,I as Mr,F as Pr,o as Fr,m as ie,n as Ur,p as Hr,q as Ht,r as zt,t as $t,v as zr,w as $r,x as Gt,B as ve,U as Gr,L as Q,y as Ue,S as Bt,z as Wt,A as Vt,D as Yt,E as nt,G as Xt,H as Br,K as qt,T as Wr,N as Kt,O as Vr,Q as Yr,Z as Xr}from"./index-DSqmM3Jb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=gt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=gt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var vt="Checkbox",[Jr]=Dr(vt),[Qr,eo]=Jr(vt),mr=g.forwardRef((o,n)=>{const{__scopeCheckbox:s,name:c,checked:u,defaultChecked:d,required:h,disabled:j,value:p="on",onCheckedChange:x,form:S,...i}=o,[H,w]=g.useState(null),A=Cr(n,v=>w(v)),E=g.useRef(!1),P=H?S||!!H.closest("form"):!0,[z=!1,re]=wr({prop:u,defaultProp:d,onChange:x}),V=g.useRef(z);return g.useEffect(()=>{const v=H?.form;if(v){const F=()=>re(V.current);return v.addEventListener("reset",F),()=>v.removeEventListener("reset",F)}},[H,re]),t.jsxs(Qr,{scope:s,state:z,disabled:j,children:[t.jsx(ir.button,{type:"button",role:"checkbox","aria-checked":te(z)?"mixed":z,"aria-required":h,"data-state":fr(z),"data-disabled":j?"":void 0,disabled:j,value:p,...i,ref:A,onKeyDown:Ut(o.onKeyDown,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Ut(o.onClick,v=>{re(F=>te(F)?!0:!F),P&&(E.current=v.isPropagationStopped(),E.current||v.stopPropagation())})}),P&&t.jsx(to,{control:H,bubbles:!E.current,name:c,value:p,checked:z,required:h,disabled:j,form:S,style:{transform:"translateX(-100%)"},defaultChecked:te(d)?!1:d})]})});mr.displayName=vt;var dr="CheckboxIndicator",ur=g.forwardRef((o,n)=>{const{__scopeCheckbox:s,forceMount:c,...u}=o,d=eo(dr,s);return t.jsx(jr,{present:c||te(d.state)||d.state===!0,children:t.jsx(ir.span,{"data-state":fr(d.state),"data-disabled":d.disabled?"":void 0,...u,ref:n,style:{pointerEvents:"none",...o.style}})})});ur.displayName=dr;var to=o=>{const{control:n,checked:s,bubbles:c=!0,defaultChecked:u,...d}=o,h=g.useRef(null),j=Rr(s),p=Or(n);g.useEffect(()=>{const S=h.current,i=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(i,"checked").set;if(j!==s&&w){const A=new Event("click",{bubbles:c});S.indeterminate=te(s),w.call(S,te(s)?!1:s),S.dispatchEvent(A)}},[j,s,c]);const x=g.useRef(te(s)?!1:s);return t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:u??x.current,...d,tabIndex:-1,ref:h,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function te(o){return o==="indeterminate"}function fr(o){return te(o)?"indeterminate":o?"checked":"unchecked"}var pr=mr,ro=ur;const ut=g.forwardRef(({className:o,...n},s)=>t.jsx(pr,{ref:s,className:Ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...n,children:t.jsx(ro,{className:Ge("flex items-center justify-center text-current"),children:t.jsx(lr,{className:"h-4 w-4"})})}));ut.displayName=pr.displayName;const oo=()=>{const[o,n]=g.useState(!1),[s,c]=g.useState([]),u=g.useCallback(async()=>{try{const{data:p,error:x}=await le.from("servicos_public").select("*");if(x)throw x;c(p||[])}catch(p){console.error("Erro ao carregar servi√ßos:",p),q.error("N√£o foi poss√≠vel carregar a lista de servi√ßos dispon√≠veis.")}},[]),d=g.useCallback(async(p,x)=>{const S=s.find(i=>i.id===p);if(!S)return console.log("Servi√ßo n√£o encontrado:",p),[];try{const{data:i,error:H}=await le.from("configuracoes_horarios").select("user_id").eq("ativo",!0).order("updated_at",{ascending:!1}).limit(1);if(H||!i||i.length===0)return console.error("Nenhuma configura√ß√£o de hor√°rio encontrada"),[];const w=i[0].user_id,{data:A,error:E}=await le.rpc("buscar_horarios_com_multiplos_intervalos",{data_selecionada:x,user_id_param:w,duracao_servico:S.duracao});return E?(console.error("Erro ao buscar hor√°rios:",E),[]):(console.log(`Hor√°rios para servi√ßo ${S.nome} (${S.duracao}min):`,A),(A||[]).filter(P=>P.horario&&P.disponivel===!0).map(P=>({horario:P.horario,disponivel:!0})))}catch(i){return console.error("Erro ao calcular hor√°rios dispon√≠veis:",i),[]}},[s]),h=g.useCallback(async p=>{try{const{data:x,error:S}=await le.rpc("criar_cliente_agendamento_online",{p_nome:p.nome_completo,p_telefone:p.telefone,p_email:p.email,p_observacoes:"Cliente criado via agendamento online"});if(S)throw S;return x}catch(x){throw console.error("Erro ao criar cliente:",x),x}},[]),j=g.useCallback(async p=>{n(!0);try{const x=s.find(A=>A.id===p.servico_id);if(!x)throw new Error("Servi√ßo n√£o encontrado");if(!(await d(p.servico_id,p.data)).find(A=>A.horario===p.horario&&A.disponivel))return q.error("Este hor√°rio n√£o est√° mais dispon√≠vel. Por favor, selecione outro hor√°rio."),!1;const H=await h(p),{error:w}=await le.from("agendamentos_online").insert({nome_completo:p.nome_completo,email:p.email,telefone:p.telefone,servico_id:p.servico_id,data:p.data,horario:p.horario,observacoes:p.observacoes,valor:x.valor,duracao:x.duracao,status:"pendente",origem:"formulario_online",user_agent:navigator.userAgent});if(w)throw w;return q.success(`Agendamento confirmado! ‚ú®
Seu agendamento para ${x.nome} foi confirmado para ${new Date(p.data).toLocaleDateString("pt-BR")} √†s ${p.horario}. Voc√™ foi cadastrado como cliente.`),!0}catch(x){return console.error("Erro ao criar agendamento:",x),q.error("N√£o foi poss√≠vel confirmar seu agendamento. Tente novamente."),!1}finally{n(!1)}},[s,h,d]);return{loading:o,servicos:s,carregarServicos:u,calcularHorariosDisponiveis:d,criarAgendamento:j}},ao=()=>{const[o,n]=g.useState(!1),s=typeof navigator<"u"&&"share"in navigator;return{canShare:s,isSharing:o,shareContent:async d=>{n(!0);try{if(s)return await navigator.share(d),!0;{const h=`${d.title?d.title+`

`:""}${d.text?d.text+`
`:""}${d.url||""}`;return window.open(`https://wa.me/?text=${encodeURIComponent(h)}`,"_blank"),!0}}catch(h){if(h instanceof Error&&h.name==="AbortError")return!1;const j=`${d.title?d.title+`

`:""}${d.text?d.text+`
`:""}${d.url||""}`;return window.open(`https://wa.me/?text=${encodeURIComponent(j)}`,"_blank"),!0}finally{n(!1)}},copyToClipboard:async d=>{try{return await navigator.clipboard.writeText(d),q.success("‚úÖ Copiado! Conte√∫do copiado para a √°rea de transfer√™ncia."),!0}catch{return q.error("‚ùå Erro ao copiar. N√£o foi poss√≠vel copiar o conte√∫do."),!1}}}};function no({currentStep:o,steps:n}){return t.jsx("div",{className:"w-full py-6",children:t.jsxs("div",{className:"flex items-center justify-between relative",children:[t.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-border",children:t.jsx("div",{className:"h-full bg-primary transition-all duration-500",style:{width:`${(o-1)/(n.length-1)*100}%`}})}),n.map((s,c)=>{const u=c+1,d=u<o,h=u===o;return t.jsxs("div",{className:"flex flex-col items-center relative z-10 flex-1",children:[t.jsx("div",{className:Ge("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 mb-2","border-2",d&&"bg-primary border-primary text-primary-foreground",h&&"bg-background border-primary text-primary scale-110",!d&&!h&&"bg-background border-border text-muted-foreground"),children:d?t.jsx(lr,{className:"w-5 h-5"}):t.jsx("span",{className:"font-semibold",children:u})}),t.jsx("span",{className:Ge("text-xs sm:text-sm font-medium text-center transition-colors",h&&"text-primary",!h&&"text-muted-foreground"),children:s})]},u)})]})})}function Zt(){const[o,n]=g.useState(!1),{config:s}=xt(),c=s.logo_url||"/lovable-uploads/8a5121ab-d4ef-4272-be75-8450ce65f57a.png";return t.jsx("div",{className:"w-full bg-gradient-to-br from-primary/10 via-primary/5 to-background py-8 px-4 mb-6",children:t.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[t.jsx("div",{className:"mb-4 flex justify-center",children:t.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-primary shadow-elegant",children:o?t.jsx("div",{className:"w-full h-full bg-gradient-primary flex items-center justify-center",children:t.jsx(qr,{className:"w-10 h-10 text-primary-foreground"})}):t.jsx("img",{src:c,alt:`Logo ${s.nome_salao}`,className:"w-full h-full object-cover",onError:()=>n(!0)})})}),t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-foreground mb-2",children:s.nome_salao}),t.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:s.descricao||"Agende seu hor√°rio de forma r√°pida e pr√°tica"})]})})}function Jt(){const{config:o}=xt();return t.jsx("footer",{className:"w-full bg-card border-t border-border mt-8",children:t.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"font-semibold text-lg text-foreground mb-4",children:"Contato"}),o.endereco&&t.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[t.jsx(kr,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),t.jsx("span",{className:"text-muted-foreground",children:o.endereco})]}),o.telefone&&t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(Lr,{className:"w-4 h-4 text-primary flex-shrink-0"}),t.jsx("span",{className:"text-muted-foreground",children:o.telefone})]}),o.email&&t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(Ir,{className:"w-4 h-4 text-primary flex-shrink-0"}),t.jsx("span",{className:"text-muted-foreground",children:o.email})]}),t.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[t.jsx(cr,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),t.jsxs("span",{className:"text-muted-foreground",children:["Segunda a Sexta: 9h √†s 18h",t.jsx("br",{}),"S√°bado: 9h √†s 14h"]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"font-semibold text-lg text-foreground mb-4",children:"Redes Sociais"}),t.jsxs("div",{className:"space-y-3",children:[o.instagram&&t.jsxs("a",{href:o.instagram.startsWith("http")?o.instagram:`https://instagram.com/${o.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-primary transition-colors group",children:[t.jsx("div",{className:"w-9 h-9 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:t.jsx(Mr,{className:"w-4 h-4 text-primary"})}),t.jsx("span",{children:o.instagram})]}),o.facebook&&t.jsxs("a",{href:o.facebook.startsWith("http")?o.facebook:`https://facebook.com/${o.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-primary transition-colors group",children:[t.jsx("div",{className:"w-9 h-9 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:t.jsx(Pr,{className:"w-4 h-4 text-primary"})}),t.jsx("span",{children:o.facebook})]})]})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-border text-center",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["¬© ",new Date().getFullYear()," ",o.nome_salao,". Todos os direitos reservados."]})})]})})}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:hr,setPrototypeOf:Qt,isFrozen:so,getPrototypeOf:io,getOwnPropertyDescriptor:lo}=Object;let{freeze:I,seal:G,create:ft}=Object,{apply:pt,construct:ht}=typeof Reflect<"u"&&Reflect;I||(I=function(n){return n});G||(G=function(n){return n});pt||(pt=function(n,s){for(var c=arguments.length,u=new Array(c>2?c-2:0),d=2;d<c;d++)u[d-2]=arguments[d];return n.apply(s,u)});ht||(ht=function(n){for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];return new n(...c)});const He=M(Array.prototype.forEach),co=M(Array.prototype.lastIndexOf),er=M(Array.prototype.pop),Ae=M(Array.prototype.push),mo=M(Array.prototype.splice),$e=M(String.prototype.toLowerCase),st=M(String.prototype.toString),it=M(String.prototype.match),ye=M(String.prototype.replace),uo=M(String.prototype.indexOf),fo=M(String.prototype.trim),W=M(Object.prototype.hasOwnProperty),L=M(RegExp.prototype.test),Se=po(TypeError);function M(o){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];return pt(o,n,c)}}function po(o){return function(){for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return ht(o,s)}}function f(o,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$e;Qt&&Qt(o,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const d=s(u);d!==u&&(so(n)||(n[c]=d),u=d)}o[u]=!0}return o}function ho(o){for(let n=0;n<o.length;n++)W(o,n)||(o[n]=null);return o}function ee(o){const n=ft(null);for(const[s,c]of hr(o))W(o,s)&&(Array.isArray(c)?n[s]=ho(c):c&&typeof c=="object"&&c.constructor===Object?n[s]=ee(c):n[s]=c);return n}function Ne(o,n){for(;o!==null;){const c=lo(o,n);if(c){if(c.get)return M(c.get);if(typeof c.value=="function")return M(c.value)}o=io(o)}function s(){return null}return s}const tr=I(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lt=I(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ct=I(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),go=I(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mt=I(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xo=I(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rr=I(["#text"]),or=I(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dt=I(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ar=I(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ze=I(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vo=G(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_o=G(/<%[\w\W]*|[\w\W]*%>/gm),bo=G(/\$\{[\w\W]*/gm),Eo=G(/^data-[\-\w.\u00B7-\uFFFF]+$/),To=G(/^aria-[\-\w]+$/),gr=G(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ao=G(/^(?:\w+script|data):/i),yo=G(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xr=G(/^html$/i),So=G(/^[a-z][.\w]*(-[.\w]+)+$/i);var nr=Object.freeze({__proto__:null,ARIA_ATTR:To,ATTR_WHITESPACE:yo,CUSTOM_ELEMENT:So,DATA_ATTR:Eo,DOCTYPE_NAME:xr,ERB_EXPR:_o,IS_ALLOWED_URI:gr,IS_SCRIPT_OR_DATA:Ao,MUSTACHE_EXPR:vo,TMPLIT_EXPR:bo});const Ce={element:1,text:3,progressingInstruction:7,comment:8,document:9},No=function(){return typeof window>"u"?null:window},Co=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let c=null;const u="data-tt-policy-suffix";s&&s.hasAttribute(u)&&(c=s.getAttribute(u));const d="dompurify"+(c?"#"+c:"");try{return n.createPolicy(d,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+d+" could not be created."),null}},sr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function vr(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:No();const n=m=>vr(m);if(n.version="3.3.0",n.removed=[],!o||!o.document||o.document.nodeType!==Ce.document||!o.Element)return n.isSupported=!1,n;let{document:s}=o;const c=s,u=c.currentScript,{DocumentFragment:d,HTMLTemplateElement:h,Node:j,Element:p,NodeFilter:x,NamedNodeMap:S=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:i,DOMParser:H,trustedTypes:w}=o,A=p.prototype,E=Ne(A,"cloneNode"),P=Ne(A,"remove"),z=Ne(A,"nextSibling"),re=Ne(A,"childNodes"),V=Ne(A,"parentNode");if(typeof h=="function"){const m=s.createElement("template");m.content&&m.content.ownerDocument&&(s=m.content.ownerDocument)}let v,F="";const{implementation:oe,createNodeIterator:Be,createDocumentFragment:we,getElementsByTagName:Y}=s,{importNode:De}=c;let R=sr();n.isSupported=typeof hr=="function"&&typeof V=="function"&&oe&&oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ae,ERB_EXPR:_e,TMPLIT_EXPR:B,DATA_ATTR:We,ARIA_ATTR:Ve,IS_SCRIPT_OR_DATA:Ye,ATTR_WHITESPACE:be,CUSTOM_ELEMENT:Xe}=nr;let{IS_ALLOWED_URI:je}=nr,_=null;const Re=f({},[...tr,...lt,...ct,...mt,...rr]);let N=null;const ce=f({},[...or,...dt,...ar,...ze]);let r=Object.seal(ft(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),b=null,C=null;const $=Object.seal(ft(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let me=!0,qe=!0,_t=!1,bt=!0,de=!1,Oe=!0,ne=!1,Ke=!1,Ze=!1,ue=!1,ke=!1,Le=!1,Et=!0,Tt=!1;const _r="user-content-";let Je=!0,Ee=!1,fe={},pe=null;const At=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yt=null;const St=f({},["audio","video","img","source","image","track"]);let Qe=null;const Nt=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ie="http://www.w3.org/1998/Math/MathML",Me="http://www.w3.org/2000/svg",K="http://www.w3.org/1999/xhtml";let he=K,et=!1,tt=null;const br=f({},[Ie,Me,K],st);let Pe=f({},["mi","mo","mn","ms","mtext"]),Fe=f({},["annotation-xml"]);const Er=f({},["title","style","font","a","script"]);let Te=null;const Tr=["application/xhtml+xml","text/html"],Ar="text/html";let D=null,ge=null;const yr=s.createElement("form"),Ct=function(e){return e instanceof RegExp||e instanceof Function},rt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ge&&ge===e)){if((!e||typeof e!="object")&&(e={}),e=ee(e),Te=Tr.indexOf(e.PARSER_MEDIA_TYPE)===-1?Ar:e.PARSER_MEDIA_TYPE,D=Te==="application/xhtml+xml"?st:$e,_=W(e,"ALLOWED_TAGS")?f({},e.ALLOWED_TAGS,D):Re,N=W(e,"ALLOWED_ATTR")?f({},e.ALLOWED_ATTR,D):ce,tt=W(e,"ALLOWED_NAMESPACES")?f({},e.ALLOWED_NAMESPACES,st):br,Qe=W(e,"ADD_URI_SAFE_ATTR")?f(ee(Nt),e.ADD_URI_SAFE_ATTR,D):Nt,yt=W(e,"ADD_DATA_URI_TAGS")?f(ee(St),e.ADD_DATA_URI_TAGS,D):St,pe=W(e,"FORBID_CONTENTS")?f({},e.FORBID_CONTENTS,D):At,b=W(e,"FORBID_TAGS")?f({},e.FORBID_TAGS,D):ee({}),C=W(e,"FORBID_ATTR")?f({},e.FORBID_ATTR,D):ee({}),fe=W(e,"USE_PROFILES")?e.USE_PROFILES:!1,me=e.ALLOW_ARIA_ATTR!==!1,qe=e.ALLOW_DATA_ATTR!==!1,_t=e.ALLOW_UNKNOWN_PROTOCOLS||!1,bt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,de=e.SAFE_FOR_TEMPLATES||!1,Oe=e.SAFE_FOR_XML!==!1,ne=e.WHOLE_DOCUMENT||!1,ue=e.RETURN_DOM||!1,ke=e.RETURN_DOM_FRAGMENT||!1,Le=e.RETURN_TRUSTED_TYPE||!1,Ze=e.FORCE_BODY||!1,Et=e.SANITIZE_DOM!==!1,Tt=e.SANITIZE_NAMED_PROPS||!1,Je=e.KEEP_CONTENT!==!1,Ee=e.IN_PLACE||!1,je=e.ALLOWED_URI_REGEXP||gr,he=e.NAMESPACE||K,Pe=e.MATHML_TEXT_INTEGRATION_POINTS||Pe,Fe=e.HTML_INTEGRATION_POINTS||Fe,r=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ct(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(r.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ct(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(r.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(r.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),de&&(qe=!1),ke&&(ue=!0),fe&&(_=f({},rr),N=[],fe.html===!0&&(f(_,tr),f(N,or)),fe.svg===!0&&(f(_,lt),f(N,dt),f(N,ze)),fe.svgFilters===!0&&(f(_,ct),f(N,dt),f(N,ze)),fe.mathMl===!0&&(f(_,mt),f(N,ar),f(N,ze))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?$.tagCheck=e.ADD_TAGS:(_===Re&&(_=ee(_)),f(_,e.ADD_TAGS,D))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?$.attributeCheck=e.ADD_ATTR:(N===ce&&(N=ee(N)),f(N,e.ADD_ATTR,D))),e.ADD_URI_SAFE_ATTR&&f(Qe,e.ADD_URI_SAFE_ATTR,D),e.FORBID_CONTENTS&&(pe===At&&(pe=ee(pe)),f(pe,e.FORBID_CONTENTS,D)),Je&&(_["#text"]=!0),ne&&f(_,["html","head","body"]),_.table&&(f(_,["tbody"]),delete b.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Se('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Se('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=e.TRUSTED_TYPES_POLICY,F=v.createHTML("")}else v===void 0&&(v=Co(w,u)),v!==null&&typeof F=="string"&&(F=v.createHTML(""));I&&I(e),ge=e}},wt=f({},[...lt,...ct,...go]),Dt=f({},[...mt,...xo]),Sr=function(e){let a=V(e);(!a||!a.tagName)&&(a={namespaceURI:he,tagName:"template"});const l=$e(e.tagName),T=$e(a.tagName);return tt[e.namespaceURI]?e.namespaceURI===Me?a.namespaceURI===K?l==="svg":a.namespaceURI===Ie?l==="svg"&&(T==="annotation-xml"||Pe[T]):!!wt[l]:e.namespaceURI===Ie?a.namespaceURI===K?l==="math":a.namespaceURI===Me?l==="math"&&Fe[T]:!!Dt[l]:e.namespaceURI===K?a.namespaceURI===Me&&!Fe[T]||a.namespaceURI===Ie&&!Pe[T]?!1:!Dt[l]&&(Er[l]||!wt[l]):!!(Te==="application/xhtml+xml"&&tt[e.namespaceURI]):!1},X=function(e){Ae(n.removed,{element:e});try{V(e).removeChild(e)}catch{P(e)}},se=function(e,a){try{Ae(n.removed,{attribute:a.getAttributeNode(e),from:a})}catch{Ae(n.removed,{attribute:null,from:a})}if(a.removeAttribute(e),e==="is")if(ue||ke)try{X(a)}catch{}else try{a.setAttribute(e,"")}catch{}},jt=function(e){let a=null,l=null;if(Ze)e="<remove></remove>"+e;else{const y=it(e,/^[\r\n\t ]+/);l=y&&y[0]}Te==="application/xhtml+xml"&&he===K&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const T=v?v.createHTML(e):e;if(he===K)try{a=new H().parseFromString(T,Te)}catch{}if(!a||!a.documentElement){a=oe.createDocument(he,"template",null);try{a.documentElement.innerHTML=et?F:T}catch{}}const k=a.body||a.documentElement;return e&&l&&k.insertBefore(s.createTextNode(l),k.childNodes[0]||null),he===K?Y.call(a,ne?"html":"body")[0]:ne?a.documentElement:k},Rt=function(e){return Be.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},ot=function(e){return e instanceof i&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof S)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},Ot=function(e){return typeof j=="function"&&e instanceof j};function Z(m,e,a){He(m,l=>{l.call(n,e,a,ge)})}const kt=function(e){let a=null;if(Z(R.beforeSanitizeElements,e,null),ot(e))return X(e),!0;const l=D(e.nodeName);if(Z(R.uponSanitizeElement,e,{tagName:l,allowedTags:_}),Oe&&e.hasChildNodes()&&!Ot(e.firstElementChild)&&L(/<[/\w!]/g,e.innerHTML)&&L(/<[/\w!]/g,e.textContent)||e.nodeType===Ce.progressingInstruction||Oe&&e.nodeType===Ce.comment&&L(/<[/\w]/g,e.data))return X(e),!0;if(!($.tagCheck instanceof Function&&$.tagCheck(l))&&(!_[l]||b[l])){if(!b[l]&&It(l)&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,l)||r.tagNameCheck instanceof Function&&r.tagNameCheck(l)))return!1;if(Je&&!pe[l]){const T=V(e)||e.parentNode,k=re(e)||e.childNodes;if(k&&T){const y=k.length;for(let U=y-1;U>=0;--U){const J=E(k[U],!0);J.__removalCount=(e.__removalCount||0)+1,T.insertBefore(J,z(e))}}}return X(e),!0}return e instanceof p&&!Sr(e)||(l==="noscript"||l==="noembed"||l==="noframes")&&L(/<\/no(script|embed|frames)/i,e.innerHTML)?(X(e),!0):(de&&e.nodeType===Ce.text&&(a=e.textContent,He([ae,_e,B],T=>{a=ye(a,T," ")}),e.textContent!==a&&(Ae(n.removed,{element:e.cloneNode()}),e.textContent=a)),Z(R.afterSanitizeElements,e,null),!1)},Lt=function(e,a,l){if(Et&&(a==="id"||a==="name")&&(l in s||l in yr))return!1;if(!(qe&&!C[a]&&L(We,a))){if(!(me&&L(Ve,a))){if(!($.attributeCheck instanceof Function&&$.attributeCheck(a,e))){if(!N[a]||C[a]){if(!(It(e)&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,e)||r.tagNameCheck instanceof Function&&r.tagNameCheck(e))&&(r.attributeNameCheck instanceof RegExp&&L(r.attributeNameCheck,a)||r.attributeNameCheck instanceof Function&&r.attributeNameCheck(a,e))||a==="is"&&r.allowCustomizedBuiltInElements&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,l)||r.tagNameCheck instanceof Function&&r.tagNameCheck(l))))return!1}else if(!Qe[a]){if(!L(je,ye(l,be,""))){if(!((a==="src"||a==="xlink:href"||a==="href")&&e!=="script"&&uo(l,"data:")===0&&yt[e])){if(!(_t&&!L(Ye,ye(l,be,"")))){if(l)return!1}}}}}}}return!0},It=function(e){return e!=="annotation-xml"&&it(e,Xe)},Mt=function(e){Z(R.beforeSanitizeAttributes,e,null);const{attributes:a}=e;if(!a||ot(e))return;const l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N,forceKeepAttr:void 0};let T=a.length;for(;T--;){const k=a[T],{name:y,namespaceURI:U,value:J}=k,xe=D(y),at=J;let O=y==="value"?at:fo(at);if(l.attrName=xe,l.attrValue=O,l.keepAttr=!0,l.forceKeepAttr=void 0,Z(R.uponSanitizeAttribute,e,l),O=l.attrValue,Tt&&(xe==="id"||xe==="name")&&(se(y,e),O=_r+O),Oe&&L(/((--!?|])>)|<\/(style|title|textarea)/i,O)){se(y,e);continue}if(xe==="attributename"&&it(O,"href")){se(y,e);continue}if(l.forceKeepAttr)continue;if(!l.keepAttr){se(y,e);continue}if(!bt&&L(/\/>/i,O)){se(y,e);continue}de&&He([ae,_e,B],Ft=>{O=ye(O,Ft," ")});const Pt=D(e.nodeName);if(!Lt(Pt,xe,O)){se(y,e);continue}if(v&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!U)switch(w.getAttributeType(Pt,xe)){case"TrustedHTML":{O=v.createHTML(O);break}case"TrustedScriptURL":{O=v.createScriptURL(O);break}}if(O!==at)try{U?e.setAttributeNS(U,y,O):e.setAttribute(y,O),ot(e)?X(e):er(n.removed)}catch{se(y,e)}}Z(R.afterSanitizeAttributes,e,null)},Nr=function m(e){let a=null;const l=Rt(e);for(Z(R.beforeSanitizeShadowDOM,e,null);a=l.nextNode();)Z(R.uponSanitizeShadowNode,a,null),kt(a),Mt(a),a.content instanceof d&&m(a.content);Z(R.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(m){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=null,l=null,T=null,k=null;if(et=!m,et&&(m="<!-->"),typeof m!="string"&&!Ot(m))if(typeof m.toString=="function"){if(m=m.toString(),typeof m!="string")throw Se("dirty is not a string, aborting")}else throw Se("toString is not a function");if(!n.isSupported)return m;if(Ke||rt(e),n.removed=[],typeof m=="string"&&(Ee=!1),Ee){if(m.nodeName){const J=D(m.nodeName);if(!_[J]||b[J])throw Se("root node is forbidden and cannot be sanitized in-place")}}else if(m instanceof j)a=jt("<!---->"),l=a.ownerDocument.importNode(m,!0),l.nodeType===Ce.element&&l.nodeName==="BODY"||l.nodeName==="HTML"?a=l:a.appendChild(l);else{if(!ue&&!de&&!ne&&m.indexOf("<")===-1)return v&&Le?v.createHTML(m):m;if(a=jt(m),!a)return ue?null:Le?F:""}a&&Ze&&X(a.firstChild);const y=Rt(Ee?m:a);for(;T=y.nextNode();)kt(T),Mt(T),T.content instanceof d&&Nr(T.content);if(Ee)return m;if(ue){if(ke)for(k=we.call(a.ownerDocument);a.firstChild;)k.appendChild(a.firstChild);else k=a;return(N.shadowroot||N.shadowrootmode)&&(k=De.call(c,k,!0)),k}let U=ne?a.outerHTML:a.innerHTML;return ne&&_["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&L(xr,a.ownerDocument.doctype.name)&&(U="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+U),de&&He([ae,_e,B],J=>{U=ye(U,J," ")}),v&&Le?v.createHTML(U):U},n.setConfig=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};rt(m),Ke=!0},n.clearConfig=function(){ge=null,Ke=!1},n.isValidAttribute=function(m,e,a){ge||rt({});const l=D(m),T=D(e);return Lt(l,T,a)},n.addHook=function(m,e){typeof e=="function"&&Ae(R[m],e)},n.removeHook=function(m,e){if(e!==void 0){const a=co(R[m],e);return a===-1?void 0:mo(R[m],a,1)[0]}return er(R[m])},n.removeHooks=function(m){R[m]=[]},n.removeAllHooks=function(){R=sr()},n}var wo=vr();const Do=Fr({nome_completo:ie().trim().min(2,"Nome deve ter no m√≠nimo 2 caracteres").max(200,"Nome deve ter no m√°ximo 200 caracteres").regex(/^[a-zA-Z√Ä-√ø\s]+$/,"Nome deve conter apenas letras"),email:ie().trim().email("Email inv√°lido").max(255,"Email deve ter no m√°ximo 255 caracteres").toLowerCase(),telefone:ie().trim().regex(/^\+?[1-9][0-9]{7,14}$/,"Telefone inv√°lido").transform(o=>o.replace(/\D/g,"")),servico_id:ie().uuid("Servi√ßo inv√°lido"),data:ie().refine(o=>{const n=new Date(o),s=new Date;return s.setHours(0,0,0,0),n>=s},"Data deve ser hoje ou no futuro"),horario:ie().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Hor√°rio inv√°lido"),observacoes:ie().trim().max(500,"Observa√ß√µes devem ter no m√°ximo 500 caracteres").optional().transform(o=>o?wo.sanitize(o,{ALLOWED_TAGS:[]}):"")});function Oo(){const{servicos:o,carregarServicos:n,calcularHorariosDisponiveis:s,criarAgendamento:c}=oo(),{isDiaAtivo:u,loading:d,configuracoes:h}=Ur(),{shareContent:j,copyToClipboard:p,isSharing:x}=ao(),{lastUpdate:S}=Hr();xt();const[i,H]=g.useState({nome_completo:"",email:"",telefone:"",servico_id:"",data:"",horario:"",observacoes:""}),[w,A]=g.useState([]),[E,P]=g.useState({}),[z,re]=g.useState(!1),[V,v]=g.useState(!1),[F,oe]=g.useState(!1),[Be,we]=g.useState(!1),[Y,De]=g.useState(1),R=["Dados","Agendamento","Finaliza√ß√£o"];g.useEffect(()=>{n()},[n]),g.useEffect(()=>{console.log("Configura√ß√µes carregadas:",{total:h.length,loading:d,items:h})},[h,d]),g.useEffect(()=>{i.servico_id&&i.data&&ae()},[i.servico_id,i.data]);const ae=async()=>{if(!i.servico_id||!i.data)return;const r=o.find(me=>me.id===i.servico_id);if(!r)return;const C=new Date(i.data+"T00:00:00").getDay();if(console.log("Debug - Carregando hor√°rios:",{data:i.data,diaSemana:C,servicoId:i.servico_id,servicoNome:r.nome,servicoDuracao:r.duracao,isDiaAtivo:u(C)}),!u(C)){console.log("Dia n√£o est√° ativo:",C),A([]);return}const $=await s(i.servico_id,i.data);console.log("Hor√°rios dispon√≠veis considerando dura√ß√£o:",$),A($)},_e=r=>{const b=r.replace(/\D/g,"");return b.length<=2?`(${b}`:b.length<=7?`(${b.slice(0,2)}) ${b.slice(2)}`:`(${b.slice(0,2)}) ${b.slice(2,7)}-${b.slice(7,11)}`};g.useEffect(()=>{if(i.servico_id&&i.data){const r=le.channel("configuracoes_horarios_online").on("postgres_changes",{event:"*",schema:"public",table:"configuracoes_horarios"},()=>{console.log("Configura√ß√µes de hor√°rio atualizadas - recarregando hor√°rios dispon√≠veis"),ae()}).subscribe();return()=>{le.removeChannel(r)}}},[i.servico_id,i.data,ae,S]);const B=(r,b)=>{r==="telefone"&&(b=_e(b)),H(C=>({...C,[r]:b})),E[r]&&P(C=>({...C,[r]:void 0}))},We=()=>{if(Y===1){const r={};if(i.nome_completo.trim()||(r.nome_completo="Nome completo √© obrigat√≥rio"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(r.email="Email inv√°lido"):r.email="Email √© obrigat√≥rio",i.telefone.trim()?i.telefone.replace(/\D/g,"").length<10&&(r.telefone="Telefone inv√°lido"):r.telefone="Telefone √© obrigat√≥rio",Object.keys(r).length>0){P(r);return}}if(Y===2){const r={};if(i.servico_id||(r.servico_id="Selecione um servi√ßo"),i.data||(r.data="Selecione uma data"),i.horario||(r.horario="Selecione um hor√°rio"),Object.keys(r).length>0){P(r);return}}De(r=>Math.min(r+1,3))},Ve=()=>{De(r=>Math.max(r-1,1))},Ye=async r=>{if(r.preventDefault(),!z){q.error("Voc√™ deve aceitar os termos e condi√ß√µes para continuar.");return}if(!V){q.error("Voc√™ deve aceitar as condi√ß√µes da taxa antecipada para continuar.");return}try{const b=Do.parse(i);oe(!0);const C=await c(b);we(!!C),oe(!1)}catch(b){if(b instanceof Xr){const C={};b.issues.forEach($=>{const me=$.path[0];C[me]=$.message}),P(C),q.error("Por favor, corrija os erros no formul√°rio")}else q.error("Erro ao validar dados do formul√°rio");oe(!1)}},be=new Date,Xe=be.toISOString().split("T")[0],je=new Date(be.getTime()+90*24*60*60*1e3).toISOString().split("T")[0],_=o.find(r=>r.id===i.servico_id),Re=async()=>{const r=new Date(i.data).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),b=`üéâ *AGENDAMENTO CONFIRMADO*

üìã *Detalhes do Agendamento:*
üë§ Cliente: ${i.nome_completo}
üíá Servi√ßo: ${_?.nome}
üìÖ Data: ${r}
‚è∞ Hor√°rio: ${i.horario}
üí∞ Valor: R$ ${_?.valor.toFixed(2).replace(".",",")}

‚úÖ Seu agendamento foi confirmado com sucesso!
Voc√™ receber√° uma confirma√ß√£o em breve.

üì± Guarde este comprovante para apresentar no dia do atendimento.`;await j({title:"Comprovante de Agendamento",text:b})},N=async()=>{const r=new Date(i.data).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),b=`üéâ AGENDAMENTO CONFIRMADO

üìã Detalhes do Agendamento:
üë§ Cliente: ${i.nome_completo}
üíá Servi√ßo: ${_?.nome}
üìÖ Data: ${r}
‚è∞ Hor√°rio: ${i.horario}
üí∞ Valor: R$ ${_?.valor.toFixed(2).replace(".",",")}

‚úÖ Seu agendamento foi confirmado com sucesso!
Voc√™ receber√° uma confirma√ß√£o em breve.

üì± Guarde este comprovante para apresentar no dia do atendimento.`;await p(b)},ce=r=>{if(!r)return!1;const C=new Date(r+"T00:00:00").getDay();return u(C)};return Be?t.jsxs(t.Fragment,{children:[t.jsx(Zt,{}),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 flex items-center justify-center p-4",children:t.jsxs(Ht,{className:"w-full max-w-md",children:[t.jsxs(zt,{className:"text-center",children:[t.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-success/10 rounded-full flex items-center justify-center",children:t.jsx($t,{className:"w-8 h-8 text-success"})}),t.jsx(zr,{className:"text-2xl text-success",children:"Agendamento Confirmado!"}),t.jsx($r,{children:"Seu agendamento foi realizado com sucesso. Voc√™ receber√° uma confirma√ß√£o em breve."})]}),t.jsxs(Gt,{className:"space-y-4",children:[t.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Servi√ßo:"})," ",_?.nome]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Data:"})," ",new Date(i.data).toLocaleDateString("pt-BR")]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Hor√°rio:"})," ",i.horario]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Valor:"})," R$ ",_?.valor.toFixed(2)]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs(ve,{onClick:Re,disabled:x,className:"w-full flex items-center gap-2 bg-success hover:bg-success/90",children:[t.jsx(Zr,{className:"w-4 h-4"}),x?"Compartilhando...":"Compartilhar Comprovante"]}),t.jsxs(ve,{onClick:N,variant:"outline",className:"w-full flex items-center gap-2",children:[t.jsx(Kr,{className:"w-4 h-4"}),"Copiar Comprovante"]})]}),t.jsx(ve,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Fazer Novo Agendamento"})]})]})}),t.jsx(Jt,{})]}):t.jsxs(t.Fragment,{children:[t.jsx(Zt,{}),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-4 pb-0",children:t.jsx("div",{className:"max-w-2xl mx-auto",children:t.jsxs(Ht,{children:[t.jsx(zt,{children:t.jsx(no,{currentStep:Y,steps:R})}),t.jsx(Gt,{children:t.jsxs("form",{onSubmit:Ye,className:"space-y-6",children:[Y===1&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(Gr,{className:"w-5 h-5"}),"Seus Dados"]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"nome_completo",children:"Nome Completo *"}),t.jsx(Ue,{id:"nome_completo",value:i.nome_completo,onChange:r=>B("nome_completo",r.target.value),placeholder:"Seu nome completo",className:E.nome_completo?"border-destructive":""}),E.nome_completo&&t.jsx("span",{className:"text-sm text-destructive",children:E.nome_completo})]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"email",children:"Email *"}),t.jsx(Ue,{id:"email",type:"email",value:i.email,onChange:r=>B("email",r.target.value),placeholder:"seu@email.com",className:E.email?"border-destructive":""}),E.email&&t.jsx("span",{className:"text-sm text-destructive",children:E.email})]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"telefone",children:"Telefone *"}),t.jsx(Ue,{id:"telefone",value:i.telefone,onChange:r=>B("telefone",r.target.value),placeholder:"(11) 99999-9999",className:E.telefone?"border-destructive":""}),E.telefone&&t.jsx("span",{className:"text-sm text-destructive",children:E.telefone})]})]}),Y===2&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx($t,{className:"w-5 h-5"}),"Agendamento"]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"servico_id",children:"Servi√ßo *"}),t.jsxs(Bt,{onValueChange:r=>B("servico_id",r),children:[t.jsx(Wt,{className:E.servico_id?"border-destructive":"",children:t.jsx(Vt,{placeholder:"Selecione um servi√ßo"})}),t.jsx(Yt,{children:o.map(r=>t.jsxs(nt,{value:r.id,children:[r.nome," - R$ ",r.valor.toFixed(2)," (",r.duracao,"min)"]},r.id))})]}),E.servico_id&&t.jsx("span",{className:"text-sm text-destructive",children:E.servico_id})]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"data",children:"Data *"}),t.jsx(Ue,{id:"data",type:"date",min:Xe,max:je,value:i.data,onChange:r=>B("data",r.target.value),className:E.data?"border-destructive":""}),E.data&&t.jsx("span",{className:"text-sm text-destructive",children:E.data}),i.data&&!ce(i.data)&&t.jsxs(Xt,{className:"mt-2",children:[t.jsx(Br,{className:"h-4 w-4"}),t.jsx(qt,{children:"Esta data n√£o est√° dispon√≠vel para agendamentos. Escolha outro dia."})]})]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"horario",children:"Hor√°rio *"}),t.jsxs(Bt,{onValueChange:r=>B("horario",r),disabled:!i.servico_id||!i.data||!ce(i.data),children:[t.jsx(Wt,{className:E.horario?"border-destructive":"",children:t.jsx(Vt,{placeholder:!i.servico_id||!i.data?"Selecione um servi√ßo e data primeiro":ce(i.data)?w.length===0?"Nenhum hor√°rio dispon√≠vel":"Selecione um hor√°rio":"Data indispon√≠vel"})}),t.jsx(Yt,{children:w.length>0?w.map(r=>t.jsx(nt,{value:r.horario,disabled:!r.disponivel,children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[t.jsx("span",{children:r.horario}),!r.disponivel&&t.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Ocupado)"})]})},r.horario)):t.jsx(nt,{value:"none",disabled:!0,children:"Nenhum hor√°rio dispon√≠vel"})})]}),E.horario&&t.jsx("span",{className:"text-sm text-destructive",children:E.horario}),_&&t.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Dura√ß√£o do servi√ßo: ",_.duracao," minutos"]})]}),t.jsxs("div",{children:[t.jsx(Q,{htmlFor:"observacoes",children:"Observa√ß√µes (opcional)"}),t.jsx(Wr,{id:"observacoes",value:i.observacoes,onChange:r=>B("observacoes",r.target.value),placeholder:"Alguma observa√ß√£o ou prefer√™ncia?",rows:3})]})]}),Y===3&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(cr,{className:"w-5 h-5"}),"Resumo do Agendamento"]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Nome:"})," ",i.nome_completo]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",i.email]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Telefone:"})," ",i.telefone]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Servi√ßo:"})," ",_?.nome]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Data:"})," ",i.data?new Date(i.data).toLocaleDateString("pt-BR"):"-"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Hor√°rio:"})," ",i.horario]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Valor:"})," R$ ",_?.valor.toFixed(2)]}),i.observacoes&&t.jsxs("p",{children:[t.jsx("strong",{children:"Observa√ß√µes:"})," ",i.observacoes]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t.jsx(Kt,{className:"w-5 h-5"}),"Condi√ß√µes"]}),t.jsxs(Xt,{className:"border-primary/20 bg-primary/5",children:[t.jsx(Kt,{className:"h-4 w-4"}),t.jsx(qt,{className:"text-sm leading-relaxed",children:t.jsxs("div",{className:"flex items-start space-x-2 mt-2",children:[t.jsx(ut,{id:"taxa",checked:V,onCheckedChange:r=>v(r),className:"mt-0.5"}),t.jsx(Q,{htmlFor:"taxa",className:"text-sm leading-relaxed cursor-pointer",children:"Oi, tudo bem? üíô Para garantir seu hor√°rio pedimos uma taxa antecipada de R$40,00. Fique tranquilo(a): esse valor √© abatido do servi√ßo no dia do atendimento üòâ. S√≥ n√£o conseguimos devolver em caso de cancelamento sem justificativa, t√° bom? *"})]})})]}),t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(ut,{id:"terms",checked:z,onCheckedChange:r=>re(r)}),t.jsx(Q,{htmlFor:"terms",className:"text-sm leading-5",children:"Aceito os termos e condi√ß√µes e concordo em receber confirma√ß√µes por email e WhatsApp *"})]})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[Y>1&&t.jsxs(ve,{type:"button",variant:"outline",onClick:Ve,className:"flex-1",children:[t.jsx(Vr,{className:"w-4 h-4 mr-2"}),"Voltar"]}),Y<3?t.jsxs(ve,{type:"button",onClick:We,className:"flex-1",children:["Pr√≥ximo",t.jsx(Yr,{className:"w-4 h-4 ml-2"})]}):t.jsx(ve,{type:"submit",className:"flex-1",disabled:F||!z||!V,children:F?"Enviando...":"Confirmar Agendamento"})]})]})})]})})}),t.jsx(Jt,{})]})}export{Oo as AgendamentoOnlineForm};
